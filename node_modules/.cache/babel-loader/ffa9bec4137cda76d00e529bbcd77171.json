{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useTheme as _useTheme}from\"styled-components\";import _styled from\"styled-components\";import{Trans}from\"@lingui/react\";import{sendAnalyticsEvent,Trace,TraceEvent}from'@uniswap/analytics';import{BrowserEvent,ElementName,EventName,PageName,SectionName}from'@uniswap/analytics-events';import{UNIVERSAL_ROUTER_ADDRESS}from'@uniswap/universal-router-sdk';import{useWeb3React}from'@web3-react/core';import{sendEvent}from'components/analytics';import{NetworkAlert}from'components/NetworkAlert/NetworkAlert';import PriceImpactWarning from'components/swap/PriceImpactWarning';import SwapDetailsDropdown from'components/swap/SwapDetailsDropdown';import UnsupportedCurrencyFooter from'components/swap/UnsupportedCurrencyFooter';import TokenSafetyModal from'components/TokenSafety/TokenSafetyModal';import{MouseoverTooltip}from'components/Tooltip';import{isSupportedChain}from'constants/chains';import{usePermit2Enabled}from'featureFlags/flags/permit2';import usePermit,{PermitState}from'hooks/usePermit2';import{useSwapCallback}from'hooks/useSwapCallback';import useTransactionDeadline from'hooks/useTransactionDeadline';import JSBI from'jsbi';import{formatSwapQuoteReceivedEventProperties}from'lib/utils/analytics';import{useCallback,useEffect,useMemo,useState}from'react';import{AlertTriangle,ArrowDown,CheckCircle,HelpCircle,Info}from'react-feather';import{useNavigate}from'react-router-dom';import{Text}from'rebass';import{useToggleWalletModal}from'state/application/hooks';import{TradeState}from'state/routing/types';import{useTransactionAdder}from'state/transactions/hooks';import{currencyAmountToPreciseFloat,formatTransactionAmount}from'utils/formatNumbers';import AddressInputPanel from'../../components/AddressInputPanel';import{ButtonConfirmed,ButtonError,ButtonLight,ButtonPrimary,ButtonYellow}from'../../components/Button';import{GrayCard}from'../../components/Card';import{AutoColumn}from'../../components/Column';import SwapCurrencyInputPanel from'../../components/CurrencyInputPanel/SwapCurrencyInputPanel';import Loader from'../../components/Loader';import{AutoRow}from'../../components/Row';import confirmPriceImpactWithoutFee from'../../components/swap/confirmPriceImpactWithoutFee';import ConfirmSwapModal from'../../components/swap/ConfirmSwapModal';import{ArrowWrapper,PageWrapper,SwapCallbackError,SwapWrapper}from'../../components/swap/styleds';import SwapHeader from'../../components/swap/SwapHeader';import{SwitchLocaleLink}from'../../components/SwitchLocaleLink';import{TOKEN_SHORTHANDS}from'../../constants/tokens';import{useAllTokens,useCurrency}from'../../hooks/Tokens';import{ApprovalState,useApproveCallbackFromTrade}from'../../hooks/useApproveCallback';import useENSAddress from'../../hooks/useENSAddress';import{useERC20PermitFromTrade,UseERC20PermitState}from'../../hooks/useERC20Permit';import useIsArgentWallet from'../../hooks/useIsArgentWallet';import{useIsSwapUnsupported}from'../../hooks/useIsSwapUnsupported';import{useStablecoinValue}from'../../hooks/useStablecoinPrice';import useWrapCallback,{WrapErrorText,WrapType}from'../../hooks/useWrapCallback';import{Field}from'../../state/swap/actions';import{useDefaultsFromURLSearch,useDerivedSwapInfo,useSwapActionHandlers,useSwapState}from'../../state/swap/hooks';import{useExpertModeManager}from'../../state/user/hooks';import{LinkStyledButton,ThemedText}from'../../theme';import{computeFiatValuePriceImpact}from'../../utils/computeFiatValuePriceImpact';import{maxAmountSpend}from'../../utils/maxAmountSpend';import{computeRealizedPriceImpact,warningSeverity}from'../../utils/prices';import{supportedChainId}from'../../utils/supportedChainId';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ArrowContainer=_styled.div.withConfig({componentId:\"sc-1es900k-0\"})([\"display:inline-block;display:inline-flex;align-items:center;justify-content:center;width:100%;height:100%;\"]);var SwapSection=_styled.div.withConfig({componentId:\"sc-1es900k-1\"})([\"position:relative;background-color:\",\";border-radius:12px;padding:16px;color:\",\";font-size:14px;line-height:20px;font-weight:500;&:before{box-sizing:border-box;background-size:100%;border-radius:inherit;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;content:'';border:1px solid \",\";}&:hover:before{border-color:\",\";}&:focus-within:before{border-color:\",\";}\"],function(_ref){var theme=_ref.theme;return theme.backgroundModule;},function(_ref2){var theme=_ref2.theme;return theme.textSecondary;},function(_ref3){var theme=_ref3.theme;return theme.backgroundModule;},function(_ref4){var theme=_ref4.theme;return theme.stateOverlayHover;},function(_ref5){var theme=_ref5.theme;return theme.stateOverlayPressed;});var OutputSwapSection=_styled(SwapSection).withConfig({componentId:\"sc-1es900k-2\"})([\"border-bottom:\",\";border-bottom-left-radius:\",\";border-bottom-right-radius:\",\";\"],function(_ref6){var theme=_ref6.theme;return\"1px solid \".concat(theme.backgroundSurface);},function(_ref7){var showDetailsDropdown=_ref7.showDetailsDropdown;return showDetailsDropdown&&'0';},function(_ref8){var showDetailsDropdown=_ref8.showDetailsDropdown;return showDetailsDropdown&&'0';});var DetailsSwapSection=_styled(SwapSection).withConfig({componentId:\"sc-1es900k-3\"})([\"padding:0;border-top-left-radius:0;border-top-right-radius:0;\"]);export function getIsValidSwapQuote(trade,tradeState,swapInputError){return!!swapInputError&&!!trade&&(tradeState===TradeState.VALID||tradeState===TradeState.SYNCING);}function largerPercentValue(a,b){if(a&&b){return a.greaterThan(b)?a:b;}else if(a){return a;}else if(b){return b;}return undefined;}var TRADE_STRING='SwapRouter';export default function Swap(_ref9){var _loadedUrlParams$Fiel,_loadedUrlParams$Fiel2,_parsedAmounts$indepe3,_trade$inputAmount2,_parsedAmounts$Field$,_trade$inputAmount4,_trade$inputAmount4$c,_trade$outputAmount2,_trade$outputAmount2$,_importTokensNotInDef,_importTokensNotInDef2,_currencies$Field$INP,_currencies$Field$OUT,_currencies$Field$INP2,_currencies$Field$INP3,_currencies$Field$INP4,_currencies$Field$INP5;var className=_ref9.className;var navigate=useNavigate();var _useWeb3React=useWeb3React(),account=_useWeb3React.account,chainId=_useWeb3React.chainId;var loadedUrlParams=useDefaultsFromURLSearch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),newSwapQuoteNeedsLogging=_useState2[0],setNewSwapQuoteNeedsLogging=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),fetchingSwapQuoteStartTime=_useState4[0],setFetchingSwapQuoteStartTime=_useState4[1];// token warning stuff\nvar _ref10=[useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:(_loadedUrlParams$Fiel=loadedUrlParams[Field.INPUT])===null||_loadedUrlParams$Fiel===void 0?void 0:_loadedUrlParams$Fiel.currencyId),useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:(_loadedUrlParams$Fiel2=loadedUrlParams[Field.OUTPUT])===null||_loadedUrlParams$Fiel2===void 0?void 0:_loadedUrlParams$Fiel2.currencyId)],loadedInputCurrency=_ref10[0],loadedOutputCurrency=_ref10[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),dismissTokenWarning=_useState6[0],setDismissTokenWarning=_useState6[1];var urlLoadedTokens=useMemo(function(){var _filter,_ref11;return(_filter=(_ref11=[loadedInputCurrency,loadedOutputCurrency])===null||_ref11===void 0?void 0:_ref11.filter(function(c){var _c$isToken;return(_c$isToken=c===null||c===void 0?void 0:c.isToken)!==null&&_c$isToken!==void 0?_c$isToken:false;}))!==null&&_filter!==void 0?_filter:[];},[loadedInputCurrency,loadedOutputCurrency]);var handleConfirmTokenWarning=useCallback(function(){setDismissTokenWarning(true);},[]);// dismiss warning if all imported tokens are in active lists\nvar defaultTokens=useAllTokens();var importTokensNotInDefault=useMemo(function(){return urlLoadedTokens&&urlLoadedTokens.filter(function(token){return!(token.address in defaultTokens);}).filter(function(token){// Any token addresses that are loaded from the shorthands map do not need to show the import URL\nvar supported=supportedChainId(chainId);if(!supported)return true;return!Object.keys(TOKEN_SHORTHANDS).some(function(shorthand){var shorthandTokenAddress=TOKEN_SHORTHANDS[shorthand][supported];return shorthandTokenAddress&&shorthandTokenAddress===token.address;});});},[chainId,defaultTokens,urlLoadedTokens]);var theme=_useTheme();// toggle wallet when disconnected\nvar toggleWalletModal=useToggleWalletModal();// for expert mode\nvar _useExpertModeManager=useExpertModeManager(),_useExpertModeManager2=_slicedToArray(_useExpertModeManager,1),isExpertMode=_useExpertModeManager2[0];// swap state\nvar _useSwapState=useSwapState(),independentField=_useSwapState.independentField,typedValue=_useSwapState.typedValue,recipient=_useSwapState.recipient;var _useDerivedSwapInfo=useDerivedSwapInfo(),_useDerivedSwapInfo$t=_useDerivedSwapInfo.trade,tradeState=_useDerivedSwapInfo$t.state,trade=_useDerivedSwapInfo$t.trade,allowedSlippage=_useDerivedSwapInfo.allowedSlippage,currencyBalances=_useDerivedSwapInfo.currencyBalances,parsedAmount=_useDerivedSwapInfo.parsedAmount,currencies=_useDerivedSwapInfo.currencies,swapInputError=_useDerivedSwapInfo.inputError;var _useWrapCallback=useWrapCallback(currencies[Field.INPUT],currencies[Field.OUTPUT],typedValue),wrapType=_useWrapCallback.wrapType,onWrap=_useWrapCallback.execute,wrapInputError=_useWrapCallback.inputError;var showWrap=wrapType!==WrapType.NOT_APPLICABLE;var _useENSAddress=useENSAddress(recipient),recipientAddress=_useENSAddress.address;var parsedAmounts=useMemo(function(){var _ref12,_ref13;return showWrap?(_ref12={},_defineProperty(_ref12,Field.INPUT,parsedAmount),_defineProperty(_ref12,Field.OUTPUT,parsedAmount),_ref12):(_ref13={},_defineProperty(_ref13,Field.INPUT,independentField===Field.INPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.inputAmount),_defineProperty(_ref13,Field.OUTPUT,independentField===Field.OUTPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.outputAmount),_ref13);},[independentField,parsedAmount,showWrap,trade]);var _useMemo=useMemo(function(){return[!(trade===null||trade===void 0?void 0:trade.swaps),TradeState.LOADING===tradeState,TradeState.SYNCING===tradeState];},[trade,tradeState]),_useMemo2=_slicedToArray(_useMemo,3),routeNotFound=_useMemo2[0],routeIsLoading=_useMemo2[1],routeIsSyncing=_useMemo2[2];var fiatValueInput=useStablecoinValue(parsedAmounts[Field.INPUT]);var fiatValueOutput=useStablecoinValue(parsedAmounts[Field.OUTPUT]);var stablecoinPriceImpact=useMemo(function(){return routeIsSyncing?undefined:computeFiatValuePriceImpact(fiatValueInput,fiatValueOutput);},[fiatValueInput,fiatValueOutput,routeIsSyncing]);var _useSwapActionHandler=useSwapActionHandlers(),onSwitchTokens=_useSwapActionHandler.onSwitchTokens,onCurrencySelection=_useSwapActionHandler.onCurrencySelection,onUserInput=_useSwapActionHandler.onUserInput,onChangeRecipient=_useSwapActionHandler.onChangeRecipient;var isValid=!swapInputError;var dependentField=independentField===Field.INPUT?Field.OUTPUT:Field.INPUT;var handleTypeInput=useCallback(function(value){onUserInput(Field.INPUT,value);},[onUserInput]);var handleTypeOutput=useCallback(function(value){onUserInput(Field.OUTPUT,value);},[onUserInput]);// reset if they close warning without tokens in params\nvar handleDismissTokenWarning=useCallback(function(){setDismissTokenWarning(true);navigate('/swap/');},[navigate]);// modal and loading\nvar _useState7=useState({showConfirm:false,tradeToConfirm:undefined,attemptingTxn:false,swapErrorMessage:undefined,txHash:undefined}),_useState8=_slicedToArray(_useState7,2),_useState8$=_useState8[0],showConfirm=_useState8$.showConfirm,tradeToConfirm=_useState8$.tradeToConfirm,swapErrorMessage=_useState8$.swapErrorMessage,attemptingTxn=_useState8$.attemptingTxn,txHash=_useState8$.txHash,setSwapState=_useState8[1];var formattedAmounts=useMemo(function(){var _parsedAmounts$indepe,_parsedAmounts$indepe2,_ref14;return _ref14={},_defineProperty(_ref14,independentField,typedValue),_defineProperty(_ref14,dependentField,showWrap?(_parsedAmounts$indepe=(_parsedAmounts$indepe2=parsedAmounts[independentField])===null||_parsedAmounts$indepe2===void 0?void 0:_parsedAmounts$indepe2.toExact())!==null&&_parsedAmounts$indepe!==void 0?_parsedAmounts$indepe:'':formatTransactionAmount(currencyAmountToPreciseFloat(parsedAmounts[dependentField]))),_ref14;},[dependentField,independentField,parsedAmounts,showWrap,typedValue]);var userHasSpecifiedInputOutput=Boolean(currencies[Field.INPUT]&&currencies[Field.OUTPUT]&&((_parsedAmounts$indepe3=parsedAmounts[independentField])===null||_parsedAmounts$indepe3===void 0?void 0:_parsedAmounts$indepe3.greaterThan(JSBI.BigInt(0))));var permit2Enabled=usePermit2Enabled();var maximumAmountIn=useMemo(function(){var maximumAmountIn=trade===null||trade===void 0?void 0:trade.maximumAmountIn(allowedSlippage);return(maximumAmountIn===null||maximumAmountIn===void 0?void 0:maximumAmountIn.currency.isToken)?maximumAmountIn:undefined;},[allowedSlippage,trade]);var permit=usePermit(permit2Enabled?maximumAmountIn:undefined,permit2Enabled&&chainId?UNIVERSAL_ROUTER_ADDRESS(chainId):undefined);var isApprovalLoading=permit.state===PermitState.APPROVAL_LOADING;var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPermitPending=_useState10[0],setIsPermitPending=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isPermitFailed=_useState12[0],setIsPermitFailed=_useState12[1];var addTransaction=useTransactionAdder();var updatePermit=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _permit$callback,approval,response,info;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsPermitPending(true);_context.prev=1;_context.next=4;return(_permit$callback=permit.callback)===null||_permit$callback===void 0?void 0:_permit$callback.call(permit);case 4:approval=_context.sent;if(approval){sendAnalyticsEvent(EventName.APPROVE_TOKEN_TXN_SUBMITTED,{chain_id:chainId,token_symbol:maximumAmountIn===null||maximumAmountIn===void 0?void 0:maximumAmountIn.currency.symbol,token_address:maximumAmountIn===null||maximumAmountIn===void 0?void 0:maximumAmountIn.currency.address});response=approval.response,info=approval.info;addTransaction(response,info);}setIsPermitFailed(false);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.error(_context.t0);setIsPermitFailed(true);case 13:_context.prev=13;setIsPermitPending(false);return _context.finish(13);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,9,13,16]]);})),[addTransaction,chainId,maximumAmountIn===null||maximumAmountIn===void 0?void 0:maximumAmountIn.currency.address,maximumAmountIn===null||maximumAmountIn===void 0?void 0:maximumAmountIn.currency.symbol,permit]);// check whether the user has approved the router on the input token\nvar _useApproveCallbackFr=useApproveCallbackFromTrade(permit2Enabled?undefined:trade,allowedSlippage),_useApproveCallbackFr2=_slicedToArray(_useApproveCallbackFr,2),approvalState=_useApproveCallbackFr2[0],approveCallback=_useApproveCallbackFr2[1];var transactionDeadline=useTransactionDeadline();var _useERC20PermitFromTr=useERC20PermitFromTrade(permit2Enabled?undefined:trade,allowedSlippage,transactionDeadline),signatureState=_useERC20PermitFromTr.state,signatureData=_useERC20PermitFromTr.signatureData,gatherPermitSignature=_useERC20PermitFromTr.gatherPermitSignature;var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),approvalPending=_useState14[0],setApprovalPending=_useState14[1];var handleApprove=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _trade$inputAmount;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setApprovalPending(true);_context2.prev=1;if(!(signatureState===UseERC20PermitState.NOT_SIGNED&&gatherPermitSignature)){_context2.next=15;break;}_context2.prev=3;_context2.next=6;return gatherPermitSignature();case 6:_context2.next=13;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](3);if(!((_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.code)!==4001)){_context2.next=13;break;}_context2.next=13;return approveCallback();case 13:_context2.next=18;break;case 15:_context2.next=17;return approveCallback();case 17:sendEvent({category:'Swap',action:'Approve',label:[TRADE_STRING,trade===null||trade===void 0?void 0:(_trade$inputAmount=trade.inputAmount)===null||_trade$inputAmount===void 0?void 0:_trade$inputAmount.currency.symbol].join('/')});case 18:_context2.prev=18;setApprovalPending(false);return _context2.finish(18);case 21:case\"end\":return _context2.stop();}}},_callee2,null,[[1,,18,21],[3,8]]);})),[signatureState,gatherPermitSignature,approveCallback,trade===null||trade===void 0?void 0:(_trade$inputAmount2=trade.inputAmount)===null||_trade$inputAmount2===void 0?void 0:_trade$inputAmount2.currency.symbol]);// check if user has gone through approval process, used to show two step buttons, reset on token change\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),approvalSubmitted=_useState16[0],setApprovalSubmitted=_useState16[1];// mark when a user has submitted an approval, reset onTokenSelection for input field\nuseEffect(function(){if(approvalState===ApprovalState.PENDING){setApprovalSubmitted(true);}},[approvalState,approvalSubmitted]);var maxInputAmount=useMemo(function(){return maxAmountSpend(currencyBalances[Field.INPUT]);},[currencyBalances]);var showMaxButton=Boolean((maxInputAmount===null||maxInputAmount===void 0?void 0:maxInputAmount.greaterThan(0))&&!((_parsedAmounts$Field$=parsedAmounts[Field.INPUT])===null||_parsedAmounts$Field$===void 0?void 0:_parsedAmounts$Field$.equalTo(maxInputAmount)));// the callback to execute the swap\nvar _useSwapCallback=useSwapCallback(trade,allowedSlippage,recipient,signatureData,permit),swapCallback=_useSwapCallback.callback,swapCallbackError=_useSwapCallback.error;var handleSwap=useCallback(function(){if(!swapCallback){return;}if(stablecoinPriceImpact&&!confirmPriceImpactWithoutFee(stablecoinPriceImpact)){return;}setSwapState({attemptingTxn:true,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:undefined,txHash:undefined});swapCallback().then(function(hash){var _trade$inputAmount3,_trade$inputAmount3$c,_trade$outputAmount,_trade$outputAmount$c;setSwapState({attemptingTxn:false,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:undefined,txHash:hash});sendEvent({category:'Swap',action:'transaction hash',label:hash});sendEvent({category:'Swap',action:recipient===null?'Swap w/o Send':(recipientAddress!==null&&recipientAddress!==void 0?recipientAddress:recipient)===account?'Swap w/o Send + recipient':'Swap w/ Send',label:[TRADE_STRING,trade===null||trade===void 0?void 0:(_trade$inputAmount3=trade.inputAmount)===null||_trade$inputAmount3===void 0?void 0:(_trade$inputAmount3$c=_trade$inputAmount3.currency)===null||_trade$inputAmount3$c===void 0?void 0:_trade$inputAmount3$c.symbol,trade===null||trade===void 0?void 0:(_trade$outputAmount=trade.outputAmount)===null||_trade$outputAmount===void 0?void 0:(_trade$outputAmount$c=_trade$outputAmount.currency)===null||_trade$outputAmount$c===void 0?void 0:_trade$outputAmount$c.symbol,'MH'].join('/')});}).catch(function(error){setSwapState({attemptingTxn:false,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:error.message,txHash:undefined});});},[swapCallback,stablecoinPriceImpact,tradeToConfirm,showConfirm,recipient,recipientAddress,account,trade===null||trade===void 0?void 0:(_trade$inputAmount4=trade.inputAmount)===null||_trade$inputAmount4===void 0?void 0:(_trade$inputAmount4$c=_trade$inputAmount4.currency)===null||_trade$inputAmount4$c===void 0?void 0:_trade$inputAmount4$c.symbol,trade===null||trade===void 0?void 0:(_trade$outputAmount2=trade.outputAmount)===null||_trade$outputAmount2===void 0?void 0:(_trade$outputAmount2$=_trade$outputAmount2.currency)===null||_trade$outputAmount2$===void 0?void 0:_trade$outputAmount2$.symbol]);// errors\nvar _useState17=useState(),_useState18=_slicedToArray(_useState17,2),swapQuoteReceivedDate=_useState18[0],setSwapQuoteReceivedDate=_useState18[1];// warnings on the greater of fiat value price impact and execution price impact\nvar _useMemo3=useMemo(function(){var marketPriceImpact=(trade===null||trade===void 0?void 0:trade.priceImpact)?computeRealizedPriceImpact(trade):undefined;var largerPriceImpact=largerPercentValue(marketPriceImpact,stablecoinPriceImpact);return{priceImpactSeverity:warningSeverity(largerPriceImpact),largerPriceImpact:largerPriceImpact};},[stablecoinPriceImpact,trade]),priceImpactSeverity=_useMemo3.priceImpactSeverity,largerPriceImpact=_useMemo3.largerPriceImpact;var isArgentWallet=useIsArgentWallet();// show approve flow when: no error on inputs, not approved or pending, or approved in current session\n// never show if price impact is above threshold in non expert mode\nvar showApproveFlow=!permit2Enabled&&!isArgentWallet&&!swapInputError&&(approvalState===ApprovalState.NOT_APPROVED||approvalState===ApprovalState.PENDING||approvalSubmitted&&approvalState===ApprovalState.APPROVED)&&!(priceImpactSeverity>3&&!isExpertMode);var handleConfirmDismiss=useCallback(function(){setSwapState({showConfirm:false,tradeToConfirm:tradeToConfirm,attemptingTxn:attemptingTxn,swapErrorMessage:swapErrorMessage,txHash:txHash});// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.INPUT,'');}},[attemptingTxn,onUserInput,swapErrorMessage,tradeToConfirm,txHash]);var handleAcceptChanges=useCallback(function(){setSwapState({tradeToConfirm:trade,swapErrorMessage:swapErrorMessage,txHash:txHash,attemptingTxn:attemptingTxn,showConfirm:showConfirm});},[attemptingTxn,showConfirm,swapErrorMessage,trade,txHash]);var handleInputSelect=useCallback(function(inputCurrency){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonCurrencySelection(Field.INPUT,inputCurrency);},[onCurrencySelection]);var handleMaxInput=useCallback(function(){maxInputAmount&&onUserInput(Field.INPUT,maxInputAmount.toExact());sendEvent({category:'Swap',action:'Max'});},[maxInputAmount,onUserInput]);var handleOutputSelect=useCallback(function(outputCurrency){return onCurrencySelection(Field.OUTPUT,outputCurrency);},[onCurrencySelection]);var swapIsUnsupported=useIsSwapUnsupported(currencies[Field.INPUT],currencies[Field.OUTPUT]);var priceImpactTooHigh=priceImpactSeverity>3&&!isExpertMode;var showPriceImpactWarning=largerPriceImpact&&priceImpactSeverity>3;// Handle time based logging events and event properties.\nuseEffect(function(){var now=new Date();// If a trade exists, and we need to log the receipt of this new swap quote:\nif(newSwapQuoteNeedsLogging&&!!trade){var _trade$gasUseEstimate;// Set the current datetime as the time of receipt of latest swap quote.\nsetSwapQuoteReceivedDate(now);// Log swap quote.\nsendAnalyticsEvent(EventName.SWAP_QUOTE_RECEIVED,formatSwapQuoteReceivedEventProperties(trade,(_trade$gasUseEstimate=trade.gasUseEstimateUSD)!==null&&_trade$gasUseEstimate!==void 0?_trade$gasUseEstimate:undefined,fetchingSwapQuoteStartTime));// Latest swap quote has just been logged, so we don't need to log the current trade anymore\n// unless user inputs change again and a new trade is in the process of being generated.\nsetNewSwapQuoteNeedsLogging(false);// New quote is not being fetched, so set start time of quote fetch to undefined.\nsetFetchingSwapQuoteStartTime(undefined);}// If another swap quote is being loaded based on changed user inputs:\nif(routeIsLoading){setNewSwapQuoteNeedsLogging(true);if(!fetchingSwapQuoteStartTime)setFetchingSwapQuoteStartTime(now);}},[newSwapQuoteNeedsLogging,routeIsSyncing,routeIsLoading,fetchingSwapQuoteStartTime,trade,setSwapQuoteReceivedDate]);var approveTokenButtonDisabled=approvalState!==ApprovalState.NOT_APPROVED||approvalSubmitted||signatureState===UseERC20PermitState.SIGNED;var showDetailsDropdown=Boolean(!showWrap&&userHasSpecifiedInputOutput&&(trade||routeIsLoading||routeIsSyncing));return/*#__PURE__*/_jsx(Trace,{page:PageName.SWAP_PAGE,shouldLogImpression:true,children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TokenSafetyModal,{isOpen:importTokensNotInDefault.length>0&&!dismissTokenWarning,tokenAddress:(_importTokensNotInDef=importTokensNotInDefault[0])===null||_importTokensNotInDef===void 0?void 0:_importTokensNotInDef.address,secondTokenAddress:(_importTokensNotInDef2=importTokensNotInDefault[1])===null||_importTokensNotInDef2===void 0?void 0:_importTokensNotInDef2.address,onContinue:handleConfirmTokenWarning,onCancel:handleDismissTokenWarning,showCancel:true}),/*#__PURE__*/_jsxs(PageWrapper,{children:[/*#__PURE__*/_jsxs(SwapWrapper,{className:className,id:\"swap-page\",children:[/*#__PURE__*/_jsx(SwapHeader,{allowedSlippage:allowedSlippage}),/*#__PURE__*/_jsx(ConfirmSwapModal,{isOpen:showConfirm,trade:trade,originalTrade:tradeToConfirm,onAcceptChanges:handleAcceptChanges,attemptingTxn:attemptingTxn,txHash:txHash,recipient:recipient,allowedSlippage:allowedSlippage,onConfirm:handleSwap,swapErrorMessage:swapErrorMessage,onDismiss:handleConfirmDismiss,swapQuoteReceivedDate:swapQuoteReceivedDate,fiatValueInput:fiatValueInput,fiatValueOutput:fiatValueOutput}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'relative'},children:[/*#__PURE__*/_jsx(SwapSection,{children:/*#__PURE__*/_jsx(Trace,{section:SectionName.CURRENCY_INPUT_PANEL,children:/*#__PURE__*/_jsx(SwapCurrencyInputPanel,{label:independentField===Field.OUTPUT&&!showWrap?/*#__PURE__*/_jsx(Trans,{id:\"From (at most)\"}):/*#__PURE__*/_jsx(Trans,{id:\"From\"}),value:formattedAmounts[Field.INPUT],showMaxButton:showMaxButton,currency:(_currencies$Field$INP=currencies[Field.INPUT])!==null&&_currencies$Field$INP!==void 0?_currencies$Field$INP:null,onUserInput:handleTypeInput,onMax:handleMaxInput,fiatValue:fiatValueInput!==null&&fiatValueInput!==void 0?fiatValueInput:undefined,onCurrencySelect:handleInputSelect,otherCurrency:currencies[Field.OUTPUT],showCommonBases:true,id:SectionName.CURRENCY_INPUT_PANEL,loading:independentField===Field.OUTPUT&&routeIsSyncing})})}),/*#__PURE__*/_jsx(ArrowWrapper,{clickable:isSupportedChain(chainId),children:/*#__PURE__*/_jsx(TraceEvent,{events:[BrowserEvent.onClick],name:EventName.SWAP_TOKENS_REVERSED,element:ElementName.SWAP_TOKENS_REVERSE_ARROW_BUTTON,children:/*#__PURE__*/_jsx(ArrowContainer,{onClick:function onClick(){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonSwitchTokens();},color:theme.textPrimary,children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:currencies[Field.INPUT]&&currencies[Field.OUTPUT]?theme.textPrimary:theme.textTertiary})})})})]}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(OutputSwapSection,{showDetailsDropdown:showDetailsDropdown,children:[/*#__PURE__*/_jsx(Trace,{section:SectionName.CURRENCY_OUTPUT_PANEL,children:/*#__PURE__*/_jsx(SwapCurrencyInputPanel,{value:formattedAmounts[Field.OUTPUT],onUserInput:handleTypeOutput,label:independentField===Field.INPUT&&!showWrap?/*#__PURE__*/_jsx(Trans,{id:\"To (at least)\"}):/*#__PURE__*/_jsx(Trans,{id:\"To\"}),showMaxButton:false,hideBalance:false,fiatValue:fiatValueOutput!==null&&fiatValueOutput!==void 0?fiatValueOutput:undefined,priceImpact:stablecoinPriceImpact,currency:(_currencies$Field$OUT=currencies[Field.OUTPUT])!==null&&_currencies$Field$OUT!==void 0?_currencies$Field$OUT:null,onCurrencySelect:handleOutputSelect,otherCurrency:currencies[Field.INPUT],showCommonBases:true,id:SectionName.CURRENCY_OUTPUT_PANEL,loading:independentField===Field.INPUT&&routeIsSyncing})}),recipient!==null&&!showWrap?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:false,children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.textSecondary})}),/*#__PURE__*/_jsx(LinkStyledButton,{id:\"remove-recipient-button\",onClick:function onClick(){return onChangeRecipient(null);},children:/*#__PURE__*/_jsx(Trans,{id:\"- Remove recipient\"})})]}),/*#__PURE__*/_jsx(AddressInputPanel,{id:\"recipient\",value:recipient,onChange:onChangeRecipient})]}):null]}),showDetailsDropdown&&/*#__PURE__*/_jsx(DetailsSwapSection,{children:/*#__PURE__*/_jsx(SwapDetailsDropdown,{trade:trade,syncing:routeIsSyncing,loading:routeIsLoading,allowedSlippage:allowedSlippage})})]}),showPriceImpactWarning&&/*#__PURE__*/_jsx(PriceImpactWarning,{priceImpact:largerPriceImpact}),/*#__PURE__*/_jsxs(\"div\",{children:[swapIsUnsupported?/*#__PURE__*/_jsx(ButtonPrimary,{disabled:true,children:/*#__PURE__*/_jsx(ThemedText.DeprecatedMain,{mb:\"4px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Unsupported Asset\"})})}):!account?/*#__PURE__*/_jsx(TraceEvent,{events:[BrowserEvent.onClick],name:EventName.CONNECT_WALLET_BUTTON_CLICKED,properties:{received_swap_quote:getIsValidSwapQuote(trade,tradeState,swapInputError)},element:ElementName.CONNECT_WALLET_BUTTON,children:/*#__PURE__*/_jsx(ButtonLight,{onClick:toggleWalletModal,fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"Connect Wallet\"})})}):showWrap?/*#__PURE__*/_jsx(ButtonPrimary,{disabled:Boolean(wrapInputError),onClick:onWrap,fontWeight:600,children:wrapInputError?/*#__PURE__*/_jsx(WrapErrorText,{wrapInputError:wrapInputError}):wrapType===WrapType.WRAP?/*#__PURE__*/_jsx(Trans,{id:\"Wrap\"}):wrapType===WrapType.UNWRAP?/*#__PURE__*/_jsx(Trans,{id:\"Unwrap\"}):null}):routeNotFound&&userHasSpecifiedInputOutput&&!routeIsLoading&&!routeIsSyncing?/*#__PURE__*/_jsx(GrayCard,{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(ThemedText.DeprecatedMain,{mb:\"4px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Insufficient liquidity for this trade.\"})})}):showApproveFlow?/*#__PURE__*/_jsx(AutoRow,{style:{flexWrap:'nowrap',width:'100%'},children:/*#__PURE__*/_jsxs(AutoColumn,{style:{width:'100%'},gap:\"12px\",children:[/*#__PURE__*/_jsx(ButtonConfirmed,{fontWeight:600,onClick:handleApprove,disabled:approveTokenButtonDisabled,width:\"100%\",altDisabledStyle:approvalState===ApprovalState.PENDING// show solid button while waiting\n,confirmed:approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED,children:/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{flexWrap:'nowrap'},height:\"20px\",children:[approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED?/*#__PURE__*/_jsx(ThemedText.SubHeader,{width:\"100%\",textAlign:\"center\",color:\"textSecondary\",children:/*#__PURE__*/_jsx(Trans,{id:\"You can now trade {0}\",values:{0:(_currencies$Field$INP2=currencies[Field.INPUT])===null||_currencies$Field$INP2===void 0?void 0:_currencies$Field$INP2.symbol}})}):/*#__PURE__*/_jsx(ThemedText.SubHeader,{width:\"100%\",textAlign:\"center\",color:\"white\",children:/*#__PURE__*/_jsx(Trans,{id:\"Allow the Uniswap Protocol to use your {0}\",values:{0:(_currencies$Field$INP3=currencies[Field.INPUT])===null||_currencies$Field$INP3===void 0?void 0:_currencies$Field$INP3.symbol}})}),approvalPending||approvalState===ApprovalState.PENDING?/*#__PURE__*/_jsx(Loader,{stroke:theme.white}):approvalSubmitted&&approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED?/*#__PURE__*/_jsx(CheckCircle,{size:\"20\",color:theme.accentSuccess}):/*#__PURE__*/_jsx(MouseoverTooltip,{text:/*#__PURE__*/_jsx(Trans,{id:\"You must give the Uniswap smart contracts permission to use your {0}. You only have to do this once per token.\",values:{0:(_currencies$Field$INP4=currencies[Field.INPUT])===null||_currencies$Field$INP4===void 0?void 0:_currencies$Field$INP4.symbol}}),children:/*#__PURE__*/_jsx(HelpCircle,{size:\"20\",color:theme.white,style:{marginLeft:'8px'}})})]})}),/*#__PURE__*/_jsx(ButtonError,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},width:\"100%\",id:\"swap-button\",disabled:!isValid||routeIsSyncing||routeIsLoading||approvalState!==ApprovalState.APPROVED&&signatureState!==UseERC20PermitState.SIGNED||priceImpactTooHigh,error:isValid&&priceImpactSeverity>2,children:/*#__PURE__*/_jsx(Text,{fontSize:16,fontWeight:600,children:priceImpactTooHigh?/*#__PURE__*/_jsx(Trans,{id:\"High Price Impact\"}):trade&&priceImpactSeverity>2?/*#__PURE__*/_jsx(Trans,{id:\"Swap Anyway\"}):/*#__PURE__*/_jsx(Trans,{id:\"Swap\"})})})]})}):isValid&&(permit.state===PermitState.APPROVAL_OR_PERMIT_NEEDED||permit.state===PermitState.APPROVAL_LOADING)?/*#__PURE__*/_jsx(ButtonYellow,{onClick:updatePermit,disabled:isPermitPending||isApprovalLoading,style:{gap:14},children:isPermitPending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{size:\"20px\",stroke:theme.accentWarning}),/*#__PURE__*/_jsx(ThemedText.SubHeader,{color:\"accentWarning\",children:/*#__PURE__*/_jsx(Trans,{id:\"Approve in your wallet\"})})]}):isPermitFailed?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AlertTriangle,{size:20,stroke:theme.accentWarning}),/*#__PURE__*/_jsx(ThemedText.SubHeader,{color:\"accentWarning\",children:/*#__PURE__*/_jsx(Trans,{id:\"Approval failed. Try again.\"})})]}):isApprovalLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{size:\"20px\",stroke:theme.accentWarning}),/*#__PURE__*/_jsx(ThemedText.SubHeader,{color:\"accentWarning\",children:/*#__PURE__*/_jsx(Trans,{id:\"Approval pending\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{height:20},children:/*#__PURE__*/_jsx(MouseoverTooltip,{text:/*#__PURE__*/_jsx(Trans,{id:\"Permission is required for Uniswap to swap each token. This will expire after one month for your security.\"}),children:/*#__PURE__*/_jsx(Info,{size:20,color:theme.accentWarning})})}),/*#__PURE__*/_jsx(ThemedText.SubHeader,{color:\"accentWarning\",children:/*#__PURE__*/_jsx(Trans,{id:\"Approve use of {0}\",values:{0:(_currencies$Field$INP5=currencies[Field.INPUT])===null||_currencies$Field$INP5===void 0?void 0:_currencies$Field$INP5.symbol}})})]})}):/*#__PURE__*/_jsx(ButtonError,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},id:\"swap-button\",disabled:!isValid||routeIsSyncing||routeIsLoading||priceImpactTooHigh||(permit2Enabled?permit.state===PermitState.LOADING:Boolean(swapCallbackError)),error:isValid&&priceImpactSeverity>2&&(permit2Enabled||!swapCallbackError),children:/*#__PURE__*/_jsx(Text,{fontSize:20,fontWeight:600,children:swapInputError?swapInputError:routeIsSyncing||routeIsLoading?/*#__PURE__*/_jsx(Trans,{id:\"Swap\"}):priceImpactTooHigh?/*#__PURE__*/_jsx(Trans,{id:\"Price Impact Too High\"}):priceImpactSeverity>2?/*#__PURE__*/_jsx(Trans,{id:\"Swap Anyway\"}):/*#__PURE__*/_jsx(Trans,{id:\"Swap\"})})}),isExpertMode&&swapErrorMessage?/*#__PURE__*/_jsx(SwapCallbackError,{error:swapErrorMessage}):null]})]})]}),/*#__PURE__*/_jsx(NetworkAlert,{})]}),/*#__PURE__*/_jsx(SwitchLocaleLink,{}),!swapIsUnsupported?null:/*#__PURE__*/_jsx(UnsupportedCurrencyFooter,{show:swapIsUnsupported,currencies:[currencies[Field.INPUT],currencies[Field.OUTPUT]]})]})});}","map":{"version":3,"names":["sendAnalyticsEvent","Trace","TraceEvent","BrowserEvent","ElementName","EventName","PageName","SectionName","UNIVERSAL_ROUTER_ADDRESS","useWeb3React","sendEvent","NetworkAlert","PriceImpactWarning","SwapDetailsDropdown","UnsupportedCurrencyFooter","TokenSafetyModal","MouseoverTooltip","isSupportedChain","usePermit2Enabled","usePermit","PermitState","useSwapCallback","useTransactionDeadline","JSBI","formatSwapQuoteReceivedEventProperties","useCallback","useEffect","useMemo","useState","AlertTriangle","ArrowDown","CheckCircle","HelpCircle","Info","useNavigate","Text","useToggleWalletModal","TradeState","useTransactionAdder","currencyAmountToPreciseFloat","formatTransactionAmount","AddressInputPanel","ButtonConfirmed","ButtonError","ButtonLight","ButtonPrimary","ButtonYellow","GrayCard","AutoColumn","SwapCurrencyInputPanel","Loader","AutoRow","confirmPriceImpactWithoutFee","ConfirmSwapModal","ArrowWrapper","PageWrapper","SwapCallbackError","SwapWrapper","SwapHeader","SwitchLocaleLink","TOKEN_SHORTHANDS","useAllTokens","useCurrency","ApprovalState","useApproveCallbackFromTrade","useENSAddress","useERC20PermitFromTrade","UseERC20PermitState","useIsArgentWallet","useIsSwapUnsupported","useStablecoinValue","useWrapCallback","WrapErrorText","WrapType","Field","useDefaultsFromURLSearch","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","useExpertModeManager","LinkStyledButton","ThemedText","computeFiatValuePriceImpact","maxAmountSpend","computeRealizedPriceImpact","warningSeverity","supportedChainId","ArrowContainer","styled","div","SwapSection","theme","backgroundModule","textSecondary","stateOverlayHover","stateOverlayPressed","OutputSwapSection","backgroundSurface","showDetailsDropdown","DetailsSwapSection","getIsValidSwapQuote","trade","tradeState","swapInputError","VALID","SYNCING","largerPercentValue","a","b","greaterThan","undefined","TRADE_STRING","Swap","className","navigate","account","chainId","loadedUrlParams","newSwapQuoteNeedsLogging","setNewSwapQuoteNeedsLogging","fetchingSwapQuoteStartTime","setFetchingSwapQuoteStartTime","INPUT","currencyId","OUTPUT","loadedInputCurrency","loadedOutputCurrency","dismissTokenWarning","setDismissTokenWarning","urlLoadedTokens","filter","c","isToken","handleConfirmTokenWarning","defaultTokens","importTokensNotInDefault","token","address","supported","Object","keys","some","shorthand","shorthandTokenAddress","useTheme","toggleWalletModal","isExpertMode","independentField","typedValue","recipient","state","allowedSlippage","currencyBalances","parsedAmount","currencies","inputError","wrapType","onWrap","execute","wrapInputError","showWrap","NOT_APPLICABLE","recipientAddress","parsedAmounts","inputAmount","outputAmount","swaps","LOADING","routeNotFound","routeIsLoading","routeIsSyncing","fiatValueInput","fiatValueOutput","stablecoinPriceImpact","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","isValid","dependentField","handleTypeInput","value","handleTypeOutput","handleDismissTokenWarning","showConfirm","tradeToConfirm","attemptingTxn","swapErrorMessage","txHash","setSwapState","formattedAmounts","toExact","userHasSpecifiedInputOutput","Boolean","BigInt","permit2Enabled","maximumAmountIn","currency","permit","isApprovalLoading","APPROVAL_LOADING","isPermitPending","setIsPermitPending","isPermitFailed","setIsPermitFailed","addTransaction","updatePermit","callback","approval","APPROVE_TOKEN_TXN_SUBMITTED","chain_id","token_symbol","symbol","token_address","response","info","console","error","approvalState","approveCallback","transactionDeadline","signatureState","signatureData","gatherPermitSignature","approvalPending","setApprovalPending","handleApprove","NOT_SIGNED","code","category","action","label","join","approvalSubmitted","setApprovalSubmitted","PENDING","maxInputAmount","showMaxButton","equalTo","swapCallback","swapCallbackError","handleSwap","then","hash","catch","message","swapQuoteReceivedDate","setSwapQuoteReceivedDate","marketPriceImpact","priceImpact","largerPriceImpact","priceImpactSeverity","isArgentWallet","showApproveFlow","NOT_APPROVED","APPROVED","handleConfirmDismiss","handleAcceptChanges","handleInputSelect","inputCurrency","handleMaxInput","handleOutputSelect","outputCurrency","swapIsUnsupported","priceImpactTooHigh","showPriceImpactWarning","now","Date","SWAP_QUOTE_RECEIVED","gasUseEstimateUSD","approveTokenButtonDisabled","SIGNED","SWAP_PAGE","length","display","CURRENCY_INPUT_PANEL","onClick","SWAP_TOKENS_REVERSED","SWAP_TOKENS_REVERSE_ARROW_BUTTON","textPrimary","textTertiary","CURRENCY_OUTPUT_PANEL","padding","CONNECT_WALLET_BUTTON_CLICKED","received_swap_quote","CONNECT_WALLET_BUTTON","WRAP","UNWRAP","textAlign","flexWrap","width","white","accentSuccess","marginLeft","APPROVAL_OR_PERMIT_NEEDED","gap","accentWarning","height"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/pages/Swap/index.tsx"],"sourcesContent":["import { Trans } from '@lingui/macro'\nimport { sendAnalyticsEvent, Trace, TraceEvent } from '@uniswap/analytics'\nimport { BrowserEvent, ElementName, EventName, PageName, SectionName } from '@uniswap/analytics-events'\nimport { Trade } from '@uniswap/router-sdk'\nimport { Currency, CurrencyAmount, Percent, Token, TradeType } from '@uniswap/sdk-core'\nimport { UNIVERSAL_ROUTER_ADDRESS } from '@uniswap/universal-router-sdk'\nimport { useWeb3React } from '@web3-react/core'\nimport { sendEvent } from 'components/analytics'\nimport { NetworkAlert } from 'components/NetworkAlert/NetworkAlert'\nimport PriceImpactWarning from 'components/swap/PriceImpactWarning'\nimport SwapDetailsDropdown from 'components/swap/SwapDetailsDropdown'\nimport UnsupportedCurrencyFooter from 'components/swap/UnsupportedCurrencyFooter'\nimport TokenSafetyModal from 'components/TokenSafety/TokenSafetyModal'\nimport { MouseoverTooltip } from 'components/Tooltip'\nimport { isSupportedChain } from 'constants/chains'\nimport { usePermit2Enabled } from 'featureFlags/flags/permit2'\nimport usePermit, { PermitState } from 'hooks/usePermit2'\nimport { useSwapCallback } from 'hooks/useSwapCallback'\nimport useTransactionDeadline from 'hooks/useTransactionDeadline'\nimport JSBI from 'jsbi'\nimport { formatSwapQuoteReceivedEventProperties } from 'lib/utils/analytics'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { ReactNode } from 'react'\nimport { AlertTriangle, ArrowDown, CheckCircle, HelpCircle, Info } from 'react-feather'\nimport { useNavigate } from 'react-router-dom'\nimport { Text } from 'rebass'\nimport { useToggleWalletModal } from 'state/application/hooks'\nimport { InterfaceTrade } from 'state/routing/types'\nimport { TradeState } from 'state/routing/types'\nimport { useTransactionAdder } from 'state/transactions/hooks'\nimport styled, { useTheme } from 'styled-components/macro'\nimport { currencyAmountToPreciseFloat, formatTransactionAmount } from 'utils/formatNumbers'\n\nimport AddressInputPanel from '../../components/AddressInputPanel'\nimport { ButtonConfirmed, ButtonError, ButtonLight, ButtonPrimary, ButtonYellow } from '../../components/Button'\nimport { GrayCard } from '../../components/Card'\nimport { AutoColumn } from '../../components/Column'\nimport SwapCurrencyInputPanel from '../../components/CurrencyInputPanel/SwapCurrencyInputPanel'\nimport Loader from '../../components/Loader'\nimport { AutoRow } from '../../components/Row'\nimport confirmPriceImpactWithoutFee from '../../components/swap/confirmPriceImpactWithoutFee'\nimport ConfirmSwapModal from '../../components/swap/ConfirmSwapModal'\nimport { ArrowWrapper, PageWrapper, SwapCallbackError, SwapWrapper } from '../../components/swap/styleds'\nimport SwapHeader from '../../components/swap/SwapHeader'\nimport { SwitchLocaleLink } from '../../components/SwitchLocaleLink'\nimport { TOKEN_SHORTHANDS } from '../../constants/tokens'\nimport { useAllTokens, useCurrency } from '../../hooks/Tokens'\nimport { ApprovalState, useApproveCallbackFromTrade } from '../../hooks/useApproveCallback'\nimport useENSAddress from '../../hooks/useENSAddress'\nimport { useERC20PermitFromTrade, UseERC20PermitState } from '../../hooks/useERC20Permit'\nimport useIsArgentWallet from '../../hooks/useIsArgentWallet'\nimport { useIsSwapUnsupported } from '../../hooks/useIsSwapUnsupported'\nimport { useStablecoinValue } from '../../hooks/useStablecoinPrice'\nimport useWrapCallback, { WrapErrorText, WrapType } from '../../hooks/useWrapCallback'\nimport { Field } from '../../state/swap/actions'\nimport {\n  useDefaultsFromURLSearch,\n  useDerivedSwapInfo,\n  useSwapActionHandlers,\n  useSwapState,\n} from '../../state/swap/hooks'\nimport { useExpertModeManager } from '../../state/user/hooks'\nimport { LinkStyledButton, ThemedText } from '../../theme'\nimport { computeFiatValuePriceImpact } from '../../utils/computeFiatValuePriceImpact'\nimport { maxAmountSpend } from '../../utils/maxAmountSpend'\nimport { computeRealizedPriceImpact, warningSeverity } from '../../utils/prices'\nimport { supportedChainId } from '../../utils/supportedChainId'\n\nconst ArrowContainer = styled.div`\n  display: inline-block;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 100%;\n  height: 100%;\n`\n\nconst SwapSection = styled.div`\n  position: relative;\n  background-color: ${({ theme }) => theme.backgroundModule};\n  border-radius: 12px;\n  padding: 16px;\n  color: ${({ theme }) => theme.textSecondary};\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 500;\n\n  &:before {\n    box-sizing: border-box;\n    background-size: 100%;\n    border-radius: inherit;\n\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    content: '';\n    border: 1px solid ${({ theme }) => theme.backgroundModule};\n  }\n\n  &:hover:before {\n    border-color: ${({ theme }) => theme.stateOverlayHover};\n  }\n\n  &:focus-within:before {\n    border-color: ${({ theme }) => theme.stateOverlayPressed};\n  }\n`\n\nconst OutputSwapSection = styled(SwapSection)<{ showDetailsDropdown: boolean }>`\n  border-bottom: ${({ theme }) => `1px solid ${theme.backgroundSurface}`};\n  border-bottom-left-radius: ${({ showDetailsDropdown }) => showDetailsDropdown && '0'};\n  border-bottom-right-radius: ${({ showDetailsDropdown }) => showDetailsDropdown && '0'};\n`\n\nconst DetailsSwapSection = styled(SwapSection)`\n  padding: 0;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n`\n\nexport function getIsValidSwapQuote(\n  trade: InterfaceTrade<Currency, Currency, TradeType> | undefined,\n  tradeState: TradeState,\n  swapInputError?: ReactNode\n): boolean {\n  return !!swapInputError && !!trade && (tradeState === TradeState.VALID || tradeState === TradeState.SYNCING)\n}\n\nfunction largerPercentValue(a?: Percent, b?: Percent) {\n  if (a && b) {\n    return a.greaterThan(b) ? a : b\n  } else if (a) {\n    return a\n  } else if (b) {\n    return b\n  }\n  return undefined\n}\n\nconst TRADE_STRING = 'SwapRouter'\n\nexport default function Swap({ className }: { className?: string }) {\n  const navigate = useNavigate()\n  const { account, chainId } = useWeb3React()\n  const loadedUrlParams = useDefaultsFromURLSearch()\n  const [newSwapQuoteNeedsLogging, setNewSwapQuoteNeedsLogging] = useState(true)\n  const [fetchingSwapQuoteStartTime, setFetchingSwapQuoteStartTime] = useState<Date | undefined>()\n\n  // token warning stuff\n  const [loadedInputCurrency, loadedOutputCurrency] = [\n    useCurrency(loadedUrlParams?.[Field.INPUT]?.currencyId),\n    useCurrency(loadedUrlParams?.[Field.OUTPUT]?.currencyId),\n  ]\n  const [dismissTokenWarning, setDismissTokenWarning] = useState<boolean>(false)\n  const urlLoadedTokens: Token[] = useMemo(\n    () => [loadedInputCurrency, loadedOutputCurrency]?.filter((c): c is Token => c?.isToken ?? false) ?? [],\n    [loadedInputCurrency, loadedOutputCurrency]\n  )\n  const handleConfirmTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n  }, [])\n\n  // dismiss warning if all imported tokens are in active lists\n  const defaultTokens = useAllTokens()\n  const importTokensNotInDefault = useMemo(\n    () =>\n      urlLoadedTokens &&\n      urlLoadedTokens\n        .filter((token: Token) => {\n          return !(token.address in defaultTokens)\n        })\n        .filter((token: Token) => {\n          // Any token addresses that are loaded from the shorthands map do not need to show the import URL\n          const supported = supportedChainId(chainId)\n          if (!supported) return true\n          return !Object.keys(TOKEN_SHORTHANDS).some((shorthand) => {\n            const shorthandTokenAddress = TOKEN_SHORTHANDS[shorthand][supported]\n            return shorthandTokenAddress && shorthandTokenAddress === token.address\n          })\n        }),\n    [chainId, defaultTokens, urlLoadedTokens]\n  )\n\n  const theme = useTheme()\n\n  // toggle wallet when disconnected\n  const toggleWalletModal = useToggleWalletModal()\n\n  // for expert mode\n  const [isExpertMode] = useExpertModeManager()\n  // swap state\n  const { independentField, typedValue, recipient } = useSwapState()\n  const {\n    trade: { state: tradeState, trade },\n    allowedSlippage,\n    currencyBalances,\n    parsedAmount,\n    currencies,\n    inputError: swapInputError,\n  } = useDerivedSwapInfo()\n\n  const {\n    wrapType,\n    execute: onWrap,\n    inputError: wrapInputError,\n  } = useWrapCallback(currencies[Field.INPUT], currencies[Field.OUTPUT], typedValue)\n  const showWrap: boolean = wrapType !== WrapType.NOT_APPLICABLE\n  const { address: recipientAddress } = useENSAddress(recipient)\n\n  const parsedAmounts = useMemo(\n    () =>\n      showWrap\n        ? {\n            [Field.INPUT]: parsedAmount,\n            [Field.OUTPUT]: parsedAmount,\n          }\n        : {\n            [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade?.inputAmount,\n            [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade?.outputAmount,\n          },\n    [independentField, parsedAmount, showWrap, trade]\n  )\n\n  const [routeNotFound, routeIsLoading, routeIsSyncing] = useMemo(\n    () => [!trade?.swaps, TradeState.LOADING === tradeState, TradeState.SYNCING === tradeState],\n    [trade, tradeState]\n  )\n\n  const fiatValueInput = useStablecoinValue(parsedAmounts[Field.INPUT])\n  const fiatValueOutput = useStablecoinValue(parsedAmounts[Field.OUTPUT])\n  const stablecoinPriceImpact = useMemo(\n    () => (routeIsSyncing ? undefined : computeFiatValuePriceImpact(fiatValueInput, fiatValueOutput)),\n    [fiatValueInput, fiatValueOutput, routeIsSyncing]\n  )\n\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\n  const isValid = !swapInputError\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n\n  const handleTypeInput = useCallback(\n    (value: string) => {\n      onUserInput(Field.INPUT, value)\n    },\n    [onUserInput]\n  )\n  const handleTypeOutput = useCallback(\n    (value: string) => {\n      onUserInput(Field.OUTPUT, value)\n    },\n    [onUserInput]\n  )\n\n  // reset if they close warning without tokens in params\n  const handleDismissTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n    navigate('/swap/')\n  }, [navigate])\n\n  // modal and loading\n  const [{ showConfirm, tradeToConfirm, swapErrorMessage, attemptingTxn, txHash }, setSwapState] = useState<{\n    showConfirm: boolean\n    tradeToConfirm: Trade<Currency, Currency, TradeType> | undefined\n    attemptingTxn: boolean\n    swapErrorMessage: string | undefined\n    txHash: string | undefined\n  }>({\n    showConfirm: false,\n    tradeToConfirm: undefined,\n    attemptingTxn: false,\n    swapErrorMessage: undefined,\n    txHash: undefined,\n  })\n\n  const formattedAmounts = useMemo(\n    () => ({\n      [independentField]: typedValue,\n      [dependentField]: showWrap\n        ? parsedAmounts[independentField]?.toExact() ?? ''\n        : formatTransactionAmount(currencyAmountToPreciseFloat(parsedAmounts[dependentField])),\n    }),\n    [dependentField, independentField, parsedAmounts, showWrap, typedValue]\n  )\n\n  const userHasSpecifiedInputOutput = Boolean(\n    currencies[Field.INPUT] && currencies[Field.OUTPUT] && parsedAmounts[independentField]?.greaterThan(JSBI.BigInt(0))\n  )\n\n  const permit2Enabled = usePermit2Enabled()\n  const maximumAmountIn = useMemo(() => {\n    const maximumAmountIn = trade?.maximumAmountIn(allowedSlippage)\n    return maximumAmountIn?.currency.isToken ? (maximumAmountIn as CurrencyAmount<Token>) : undefined\n  }, [allowedSlippage, trade])\n  const permit = usePermit(\n    permit2Enabled ? maximumAmountIn : undefined,\n    permit2Enabled && chainId ? UNIVERSAL_ROUTER_ADDRESS(chainId) : undefined\n  )\n  const isApprovalLoading = permit.state === PermitState.APPROVAL_LOADING\n  const [isPermitPending, setIsPermitPending] = useState(false)\n  const [isPermitFailed, setIsPermitFailed] = useState(false)\n  const addTransaction = useTransactionAdder()\n  const updatePermit = useCallback(async () => {\n    setIsPermitPending(true)\n    try {\n      const approval = await permit.callback?.()\n      if (approval) {\n        sendAnalyticsEvent(EventName.APPROVE_TOKEN_TXN_SUBMITTED, {\n          chain_id: chainId,\n          token_symbol: maximumAmountIn?.currency.symbol,\n          token_address: maximumAmountIn?.currency.address,\n        })\n\n        const { response, info } = approval\n        addTransaction(response, info)\n      }\n      setIsPermitFailed(false)\n    } catch (e) {\n      console.error(e)\n      setIsPermitFailed(true)\n    } finally {\n      setIsPermitPending(false)\n    }\n  }, [addTransaction, chainId, maximumAmountIn?.currency.address, maximumAmountIn?.currency.symbol, permit])\n\n  // check whether the user has approved the router on the input token\n  const [approvalState, approveCallback] = useApproveCallbackFromTrade(\n    permit2Enabled ? undefined : trade,\n    allowedSlippage\n  )\n  const transactionDeadline = useTransactionDeadline()\n  const {\n    state: signatureState,\n    signatureData,\n    gatherPermitSignature,\n  } = useERC20PermitFromTrade(permit2Enabled ? undefined : trade, allowedSlippage, transactionDeadline)\n\n  const [approvalPending, setApprovalPending] = useState<boolean>(false)\n  const handleApprove = useCallback(async () => {\n    setApprovalPending(true)\n    try {\n      if (signatureState === UseERC20PermitState.NOT_SIGNED && gatherPermitSignature) {\n        try {\n          await gatherPermitSignature()\n        } catch (error) {\n          // try to approve if gatherPermitSignature failed for any reason other than the user rejecting it\n          if (error?.code !== 4001) {\n            await approveCallback()\n          }\n        }\n      } else {\n        await approveCallback()\n\n        sendEvent({\n          category: 'Swap',\n          action: 'Approve',\n          label: [TRADE_STRING, trade?.inputAmount?.currency.symbol].join('/'),\n        })\n      }\n    } finally {\n      setApprovalPending(false)\n    }\n  }, [signatureState, gatherPermitSignature, approveCallback, trade?.inputAmount?.currency.symbol])\n\n  // check if user has gone through approval process, used to show two step buttons, reset on token change\n  const [approvalSubmitted, setApprovalSubmitted] = useState<boolean>(false)\n\n  // mark when a user has submitted an approval, reset onTokenSelection for input field\n  useEffect(() => {\n    if (approvalState === ApprovalState.PENDING) {\n      setApprovalSubmitted(true)\n    }\n  }, [approvalState, approvalSubmitted])\n\n  const maxInputAmount: CurrencyAmount<Currency> | undefined = useMemo(\n    () => maxAmountSpend(currencyBalances[Field.INPUT]),\n    [currencyBalances]\n  )\n  const showMaxButton = Boolean(maxInputAmount?.greaterThan(0) && !parsedAmounts[Field.INPUT]?.equalTo(maxInputAmount))\n\n  // the callback to execute the swap\n  const { callback: swapCallback, error: swapCallbackError } = useSwapCallback(\n    trade,\n    allowedSlippage,\n    recipient,\n    signatureData,\n    permit\n  )\n\n  const handleSwap = useCallback(() => {\n\n    if (!swapCallback) {\n      return\n    }\n    if (stablecoinPriceImpact && !confirmPriceImpactWithoutFee(stablecoinPriceImpact)) {\n      return\n    }\n    setSwapState({ attemptingTxn: true, tradeToConfirm, showConfirm, swapErrorMessage: undefined, txHash: undefined })\n    swapCallback()\n      .then((hash) => {\n        setSwapState({ attemptingTxn: false, tradeToConfirm, showConfirm, swapErrorMessage: undefined, txHash: hash })\n        sendEvent({\n          category: 'Swap',\n          action: 'transaction hash',\n          label: hash,\n        })\n        sendEvent({\n          category: 'Swap',\n          action:\n            recipient === null\n              ? 'Swap w/o Send'\n              : (recipientAddress ?? recipient) === account\n              ? 'Swap w/o Send + recipient'\n              : 'Swap w/ Send',\n          label: [TRADE_STRING, trade?.inputAmount?.currency?.symbol, trade?.outputAmount?.currency?.symbol, 'MH'].join(\n            '/'\n          ),\n        })\n      })\n      .catch((error) => {\n        setSwapState({\n          attemptingTxn: false,\n          tradeToConfirm,\n          showConfirm,\n          swapErrorMessage: error.message,\n          txHash: undefined,\n        })\n      })\n  }, [\n    swapCallback,\n    stablecoinPriceImpact,\n    tradeToConfirm,\n    showConfirm,\n    recipient,\n    recipientAddress,\n    account,\n    trade?.inputAmount?.currency?.symbol,\n    trade?.outputAmount?.currency?.symbol,\n  ])\n\n  // errors\n  const [swapQuoteReceivedDate, setSwapQuoteReceivedDate] = useState<Date | undefined>()\n\n  // warnings on the greater of fiat value price impact and execution price impact\n  const { priceImpactSeverity, largerPriceImpact } = useMemo(() => {\n    const marketPriceImpact = trade?.priceImpact ? computeRealizedPriceImpact(trade) : undefined\n    const largerPriceImpact = largerPercentValue(marketPriceImpact, stablecoinPriceImpact)\n    return { priceImpactSeverity: warningSeverity(largerPriceImpact), largerPriceImpact }\n  }, [stablecoinPriceImpact, trade])\n\n  const isArgentWallet = useIsArgentWallet()\n\n  // show approve flow when: no error on inputs, not approved or pending, or approved in current session\n  // never show if price impact is above threshold in non expert mode\n  const showApproveFlow =\n    !permit2Enabled &&\n    !isArgentWallet &&\n    !swapInputError &&\n    (approvalState === ApprovalState.NOT_APPROVED ||\n      approvalState === ApprovalState.PENDING ||\n      (approvalSubmitted && approvalState === ApprovalState.APPROVED)) &&\n    !(priceImpactSeverity > 3 && !isExpertMode)\n\n  const handleConfirmDismiss = useCallback(() => {\n    setSwapState({ showConfirm: false, tradeToConfirm, attemptingTxn, swapErrorMessage, txHash })\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onUserInput(Field.INPUT, '')\n    }\n  }, [attemptingTxn, onUserInput, swapErrorMessage, tradeToConfirm, txHash])\n\n  const handleAcceptChanges = useCallback(() => {\n    setSwapState({ tradeToConfirm: trade, swapErrorMessage, txHash, attemptingTxn, showConfirm })\n  }, [attemptingTxn, showConfirm, swapErrorMessage, trade, txHash])\n\n  const handleInputSelect = useCallback(\n    (inputCurrency: Currency) => {\n      setApprovalSubmitted(false) // reset 2 step UI for approvals\n      onCurrencySelection(Field.INPUT, inputCurrency)\n    },\n    [onCurrencySelection]\n  )\n\n  const handleMaxInput = useCallback(() => {\n    maxInputAmount && onUserInput(Field.INPUT, maxInputAmount.toExact())\n    sendEvent({\n      category: 'Swap',\n      action: 'Max',\n    })\n  }, [maxInputAmount, onUserInput])\n\n  const handleOutputSelect = useCallback(\n    (outputCurrency: Currency) => onCurrencySelection(Field.OUTPUT, outputCurrency),\n    [onCurrencySelection]\n  )\n\n  const swapIsUnsupported = useIsSwapUnsupported(currencies[Field.INPUT], currencies[Field.OUTPUT])\n\n  const priceImpactTooHigh = priceImpactSeverity > 3 && !isExpertMode\n  const showPriceImpactWarning = largerPriceImpact && priceImpactSeverity > 3\n\n  // Handle time based logging events and event properties.\n  useEffect(() => {\n    const now = new Date()\n    // If a trade exists, and we need to log the receipt of this new swap quote:\n    if (newSwapQuoteNeedsLogging && !!trade) {\n      // Set the current datetime as the time of receipt of latest swap quote.\n      setSwapQuoteReceivedDate(now)\n      // Log swap quote.\n      sendAnalyticsEvent(\n        EventName.SWAP_QUOTE_RECEIVED,\n        formatSwapQuoteReceivedEventProperties(trade, trade.gasUseEstimateUSD ?? undefined, fetchingSwapQuoteStartTime)\n      )\n      // Latest swap quote has just been logged, so we don't need to log the current trade anymore\n      // unless user inputs change again and a new trade is in the process of being generated.\n      setNewSwapQuoteNeedsLogging(false)\n      // New quote is not being fetched, so set start time of quote fetch to undefined.\n      setFetchingSwapQuoteStartTime(undefined)\n    }\n    // If another swap quote is being loaded based on changed user inputs:\n    if (routeIsLoading) {\n      setNewSwapQuoteNeedsLogging(true)\n      if (!fetchingSwapQuoteStartTime) setFetchingSwapQuoteStartTime(now)\n    }\n  }, [\n    newSwapQuoteNeedsLogging,\n    routeIsSyncing,\n    routeIsLoading,\n    fetchingSwapQuoteStartTime,\n    trade,\n    setSwapQuoteReceivedDate,\n  ])\n\n  const approveTokenButtonDisabled =\n    approvalState !== ApprovalState.NOT_APPROVED || approvalSubmitted || signatureState === UseERC20PermitState.SIGNED\n\n  const showDetailsDropdown = Boolean(\n    !showWrap && userHasSpecifiedInputOutput && (trade || routeIsLoading || routeIsSyncing)\n  )\n\n  return (\n    <Trace page={PageName.SWAP_PAGE} shouldLogImpression>\n      <>\n        <TokenSafetyModal\n          isOpen={importTokensNotInDefault.length > 0 && !dismissTokenWarning}\n          tokenAddress={importTokensNotInDefault[0]?.address}\n          secondTokenAddress={importTokensNotInDefault[1]?.address}\n          onContinue={handleConfirmTokenWarning}\n          onCancel={handleDismissTokenWarning}\n          showCancel={true}\n        />\n        <PageWrapper>\n          <SwapWrapper className={className} id=\"swap-page\">\n            <SwapHeader allowedSlippage={allowedSlippage} />\n            <ConfirmSwapModal\n              isOpen={showConfirm}\n              trade={trade}\n              originalTrade={tradeToConfirm}\n              onAcceptChanges={handleAcceptChanges}\n              attemptingTxn={attemptingTxn}\n              txHash={txHash}\n              recipient={recipient}\n              allowedSlippage={allowedSlippage}\n              onConfirm={handleSwap}\n              swapErrorMessage={swapErrorMessage}\n              onDismiss={handleConfirmDismiss}\n              swapQuoteReceivedDate={swapQuoteReceivedDate}\n              fiatValueInput={fiatValueInput}\n              fiatValueOutput={fiatValueOutput}\n            />\n\n            <div style={{ display: 'relative' }}>\n              <SwapSection>\n                <Trace section={SectionName.CURRENCY_INPUT_PANEL}>\n                  <SwapCurrencyInputPanel\n                    label={\n                      independentField === Field.OUTPUT && !showWrap ? (\n                        <Trans>From (at most)</Trans>\n                      ) : (\n                        <Trans>From</Trans>\n                      )\n                    }\n                    value={formattedAmounts[Field.INPUT]}\n                    showMaxButton={showMaxButton}\n                    currency={currencies[Field.INPUT] ?? null}\n                    onUserInput={handleTypeInput}\n                    onMax={handleMaxInput}\n                    fiatValue={fiatValueInput ?? undefined}\n                    onCurrencySelect={handleInputSelect}\n                    otherCurrency={currencies[Field.OUTPUT]}\n                    showCommonBases={true}\n                    id={SectionName.CURRENCY_INPUT_PANEL}\n                    loading={independentField === Field.OUTPUT && routeIsSyncing}\n                  />\n                </Trace>\n              </SwapSection>\n              <ArrowWrapper clickable={isSupportedChain(chainId)}>\n                <TraceEvent\n                  events={[BrowserEvent.onClick]}\n                  name={EventName.SWAP_TOKENS_REVERSED}\n                  element={ElementName.SWAP_TOKENS_REVERSE_ARROW_BUTTON}\n                >\n                  <ArrowContainer\n                    onClick={() => {\n                      setApprovalSubmitted(false) // reset 2 step UI for approvals\n                      onSwitchTokens()\n                    }}\n                    color={theme.textPrimary}\n                  >\n                    <ArrowDown\n                      size=\"16\"\n                      color={\n                        currencies[Field.INPUT] && currencies[Field.OUTPUT] ? theme.textPrimary : theme.textTertiary\n                      }\n                    />\n                  </ArrowContainer>\n                </TraceEvent>\n              </ArrowWrapper>\n            </div>\n            <AutoColumn gap=\"md\">\n              <div>\n                <OutputSwapSection showDetailsDropdown={showDetailsDropdown}>\n                  <Trace section={SectionName.CURRENCY_OUTPUT_PANEL}>\n                    <SwapCurrencyInputPanel\n                      value={formattedAmounts[Field.OUTPUT]}\n                      onUserInput={handleTypeOutput}\n                      label={\n                        independentField === Field.INPUT && !showWrap ? <Trans>To (at least)</Trans> : <Trans>To</Trans>\n                      }\n                      showMaxButton={false}\n                      hideBalance={false}\n                      fiatValue={fiatValueOutput ?? undefined}\n                      priceImpact={stablecoinPriceImpact}\n                      currency={currencies[Field.OUTPUT] ?? null}\n                      onCurrencySelect={handleOutputSelect}\n                      otherCurrency={currencies[Field.INPUT]}\n                      showCommonBases={true}\n                      id={SectionName.CURRENCY_OUTPUT_PANEL}\n                      loading={independentField === Field.INPUT && routeIsSyncing}\n                    />\n                  </Trace>\n\n                  {recipient !== null && !showWrap ? (\n                    <>\n                      <AutoRow justify=\"space-between\" style={{ padding: '0 1rem' }}>\n                        <ArrowWrapper clickable={false}>\n                          <ArrowDown size=\"16\" color={theme.textSecondary} />\n                        </ArrowWrapper>\n                        <LinkStyledButton id=\"remove-recipient-button\" onClick={() => onChangeRecipient(null)}>\n                          <Trans>- Remove recipient</Trans>\n                        </LinkStyledButton>\n                      </AutoRow>\n                      <AddressInputPanel id=\"recipient\" value={recipient} onChange={onChangeRecipient} />\n                    </>\n                  ) : null}\n                </OutputSwapSection>\n                {showDetailsDropdown && (\n                  <DetailsSwapSection>\n                    <SwapDetailsDropdown\n                      trade={trade}\n                      syncing={routeIsSyncing}\n                      loading={routeIsLoading}\n                      allowedSlippage={allowedSlippage}\n                    />\n                  </DetailsSwapSection>\n                )}\n              </div>\n              {showPriceImpactWarning && <PriceImpactWarning priceImpact={largerPriceImpact} />}\n              <div>\n                {swapIsUnsupported ? (\n                  <ButtonPrimary disabled={true}>\n                    <ThemedText.DeprecatedMain mb=\"4px\">\n                      <Trans>Unsupported Asset</Trans>\n                    </ThemedText.DeprecatedMain>\n                  </ButtonPrimary>\n                ) : !account ? (\n                  <TraceEvent\n                    events={[BrowserEvent.onClick]}\n                    name={EventName.CONNECT_WALLET_BUTTON_CLICKED}\n                    properties={{ received_swap_quote: getIsValidSwapQuote(trade, tradeState, swapInputError) }}\n                    element={ElementName.CONNECT_WALLET_BUTTON}\n                  >\n                    <ButtonLight onClick={toggleWalletModal} fontWeight={600}>\n                      <Trans>Connect Wallet</Trans>\n                    </ButtonLight>\n                  </TraceEvent>\n                ) : showWrap ? (\n                  <ButtonPrimary disabled={Boolean(wrapInputError)} onClick={onWrap} fontWeight={600}>\n                    {wrapInputError ? (\n                      <WrapErrorText wrapInputError={wrapInputError} />\n                    ) : wrapType === WrapType.WRAP ? (\n                      <Trans>Wrap</Trans>\n                    ) : wrapType === WrapType.UNWRAP ? (\n                      <Trans>Unwrap</Trans>\n                    ) : null}\n                  </ButtonPrimary>\n                ) : routeNotFound && userHasSpecifiedInputOutput && !routeIsLoading && !routeIsSyncing ? (\n                  <GrayCard style={{ textAlign: 'center' }}>\n                    <ThemedText.DeprecatedMain mb=\"4px\">\n                      <Trans>Insufficient liquidity for this trade.</Trans>\n                    </ThemedText.DeprecatedMain>\n                  </GrayCard>\n                ) : showApproveFlow ? (\n                  <AutoRow style={{ flexWrap: 'nowrap', width: '100%' }}>\n                    <AutoColumn style={{ width: '100%' }} gap=\"12px\">\n                      <ButtonConfirmed\n                        fontWeight={600}\n                        onClick={handleApprove}\n                        disabled={approveTokenButtonDisabled}\n                        width=\"100%\"\n                        altDisabledStyle={approvalState === ApprovalState.PENDING} // show solid button while waiting\n                        confirmed={\n                          approvalState === ApprovalState.APPROVED || signatureState === UseERC20PermitState.SIGNED\n                        }\n                      >\n                        <AutoRow justify=\"space-between\" style={{ flexWrap: 'nowrap' }} height=\"20px\">\n                          {/* we need to shorten this string on mobile */}\n                          {approvalState === ApprovalState.APPROVED || signatureState === UseERC20PermitState.SIGNED ? (\n                            <ThemedText.SubHeader width=\"100%\" textAlign=\"center\" color=\"textSecondary\">\n                              <Trans>You can now trade {currencies[Field.INPUT]?.symbol}</Trans>\n                            </ThemedText.SubHeader>\n                          ) : (\n                            <ThemedText.SubHeader width=\"100%\" textAlign=\"center\" color=\"white\">\n                              <Trans>Allow the Uniswap Protocol to use your {currencies[Field.INPUT]?.symbol}</Trans>\n                            </ThemedText.SubHeader>\n                          )}\n\n                          {approvalPending || approvalState === ApprovalState.PENDING ? (\n                            <Loader stroke={theme.white} />\n                          ) : (approvalSubmitted && approvalState === ApprovalState.APPROVED) ||\n                            signatureState === UseERC20PermitState.SIGNED ? (\n                            <CheckCircle size=\"20\" color={theme.accentSuccess} />\n                          ) : (\n                            <MouseoverTooltip\n                              text={\n                                <Trans>\n                                  You must give the Uniswap smart contracts permission to use your{' '}\n                                  {currencies[Field.INPUT]?.symbol}. You only have to do this once per token.\n                                </Trans>\n                              }\n                            >\n                              <HelpCircle size=\"20\" color={theme.white} style={{ marginLeft: '8px' }} />\n                            </MouseoverTooltip>\n                          )}\n                        </AutoRow>\n                      </ButtonConfirmed>\n                      <ButtonError\n                        onClick={() => {\n                          if (isExpertMode) {\n                            handleSwap()\n                          } else {\n                            setSwapState({\n                              tradeToConfirm: trade,\n                              attemptingTxn: false,\n                              swapErrorMessage: undefined,\n                              showConfirm: true,\n                              txHash: undefined,\n                            })\n                          }\n                        }}\n                        width=\"100%\"\n                        id=\"swap-button\"\n                        disabled={\n                          !isValid ||\n                          routeIsSyncing ||\n                          routeIsLoading ||\n                          (approvalState !== ApprovalState.APPROVED && signatureState !== UseERC20PermitState.SIGNED) ||\n                          priceImpactTooHigh\n                        }\n                        error={isValid && priceImpactSeverity > 2}\n                      >\n                        <Text fontSize={16} fontWeight={600}>\n                          {priceImpactTooHigh ? (\n                            <Trans>High Price Impact</Trans>\n                          ) : trade && priceImpactSeverity > 2 ? (\n                            <Trans>Swap Anyway</Trans>\n                          ) : (\n                            <Trans>Swap</Trans>\n                          )}\n                        </Text>\n                      </ButtonError>\n                    </AutoColumn>\n                  </AutoRow>\n                ) : isValid &&\n                  (permit.state === PermitState.APPROVAL_OR_PERMIT_NEEDED ||\n                    permit.state === PermitState.APPROVAL_LOADING) ? (\n                  <ButtonYellow\n                    onClick={updatePermit}\n                    disabled={isPermitPending || isApprovalLoading}\n                    style={{ gap: 14 }}\n                  >\n                    {isPermitPending ? (\n                      <>\n                        <Loader size=\"20px\" stroke={theme.accentWarning} />\n                        <ThemedText.SubHeader color=\"accentWarning\">\n                          <Trans>Approve in your wallet</Trans>\n                        </ThemedText.SubHeader>\n                      </>\n                    ) : isPermitFailed ? (\n                      <>\n                        <AlertTriangle size={20} stroke={theme.accentWarning} />\n                        <ThemedText.SubHeader color=\"accentWarning\">\n                          <Trans>Approval failed. Try again.</Trans>\n                        </ThemedText.SubHeader>\n                      </>\n                    ) : isApprovalLoading ? (\n                      <>\n                        <Loader size=\"20px\" stroke={theme.accentWarning} />\n                        <ThemedText.SubHeader color=\"accentWarning\">\n                          <Trans>Approval pending</Trans>\n                        </ThemedText.SubHeader>\n                      </>\n                    ) : (\n                      <>\n                        <div style={{ height: 20 }}>\n                          <MouseoverTooltip\n                            text={\n                              <Trans>\n                                Permission is required for Uniswap to swap each token. This will expire after one month\n                                for your security.\n                              </Trans>\n                            }\n                          >\n                            <Info size={20} color={theme.accentWarning} />\n                          </MouseoverTooltip>\n                        </div>\n                        <ThemedText.SubHeader color=\"accentWarning\">\n                          <Trans>Approve use of {currencies[Field.INPUT]?.symbol}</Trans>\n                        </ThemedText.SubHeader>\n                      </>\n                    )}\n                  </ButtonYellow>\n                ) : (\n                  <ButtonError\n                    onClick={() => {\n                      if (isExpertMode) {\n                        handleSwap()\n                      } else {\n                        setSwapState({\n                          tradeToConfirm: trade,\n                          attemptingTxn: false,\n                          swapErrorMessage: undefined,\n                          showConfirm: true,\n                          txHash: undefined,\n                        })\n                      }\n                    }}\n                    id=\"swap-button\"\n                    disabled={\n                      !isValid ||\n                      routeIsSyncing ||\n                      routeIsLoading ||\n                      priceImpactTooHigh ||\n                      (permit2Enabled ? permit.state === PermitState.LOADING : Boolean(swapCallbackError))\n                    }\n                    error={isValid && priceImpactSeverity > 2 && (permit2Enabled || !swapCallbackError)}\n                  >\n                    <Text fontSize={20} fontWeight={600}>\n                      {swapInputError ? (\n                        swapInputError\n                      ) : routeIsSyncing || routeIsLoading ? (\n                        <Trans>Swap</Trans>\n                      ) : priceImpactTooHigh ? (\n                        <Trans>Price Impact Too High</Trans>\n                      ) : priceImpactSeverity > 2 ? (\n                        <Trans>Swap Anyway</Trans>\n                      ) : (\n                        <Trans>Swap</Trans>\n                      )}\n                    </Text>\n                  </ButtonError>\n                )}\n                {isExpertMode && swapErrorMessage ? <SwapCallbackError error={swapErrorMessage} /> : null}\n              </div>\n            </AutoColumn>\n          </SwapWrapper>\n          <NetworkAlert />\n        </PageWrapper>\n        <SwitchLocaleLink />\n        {!swapIsUnsupported ? null : (\n          <UnsupportedCurrencyFooter\n            show={swapIsUnsupported}\n            currencies={[currencies[Field.INPUT], currencies[Field.OUTPUT]]}\n          />\n        )}\n      </>\n    </Trace>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}