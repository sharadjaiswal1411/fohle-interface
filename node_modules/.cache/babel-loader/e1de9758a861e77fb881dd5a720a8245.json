{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{BigNumber}from'@ethersproject/bignumber';import{NEVER_RELOAD,useSingleCallResult}from'lib/hooks/multicall';import{useMemo}from'react';import{useV3NFTPositionManagerContract}from'./useContract';var STARTS_WITH='data:application/json;base64,';export function usePositionTokenURI(tokenId){var contract=useV3NFTPositionManagerContract();var inputs=useMemo(function(){return[tokenId instanceof BigNumber?tokenId.toHexString():tokenId===null||tokenId===void 0?void 0:tokenId.toString(16)];},[tokenId]);var _useSingleCallResult=useSingleCallResult(contract,'tokenURI',inputs,_objectSpread(_objectSpread({},NEVER_RELOAD),{},{gasRequired:3000000})),result=_useSingleCallResult.result,error=_useSingleCallResult.error,loading=_useSingleCallResult.loading,valid=_useSingleCallResult.valid;return useMemo(function(){if(error||!valid||!tokenId){return{valid:false,loading:false};}if(loading){return{valid:true,loading:true};}if(!result){return{valid:false,loading:false};}var _ref=result,_ref2=_slicedToArray(_ref,1),tokenURI=_ref2[0];if(!tokenURI||!tokenURI.startsWith(STARTS_WITH))return{valid:false,loading:false};try{var json=JSON.parse(atob(tokenURI.slice(STARTS_WITH.length)));return{valid:true,loading:false,result:json};}catch(error){return{valid:false,loading:false};}},[error,loading,result,tokenId,valid]);}","map":{"version":3,"names":["BigNumber","NEVER_RELOAD","useSingleCallResult","useMemo","useV3NFTPositionManagerContract","STARTS_WITH","usePositionTokenURI","tokenId","contract","inputs","toHexString","toString","gasRequired","result","error","loading","valid","tokenURI","startsWith","json","JSON","parse","atob","slice","length"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/hooks/usePositionTokenURI.ts"],"sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\nimport JSBI from 'jsbi'\nimport { NEVER_RELOAD, useSingleCallResult } from 'lib/hooks/multicall'\nimport { useMemo } from 'react'\n\nimport { useV3NFTPositionManagerContract } from './useContract'\n\ntype TokenId = number | JSBI | BigNumber\n\nconst STARTS_WITH = 'data:application/json;base64,'\n\ntype UsePositionTokenURIResult =\n  | {\n      valid: true\n      loading: false\n      result: {\n        name: string\n        description: string\n        image: string\n      }\n    }\n  | {\n      valid: false\n      loading: false\n    }\n  | {\n      valid: true\n      loading: true\n    }\n\nexport function usePositionTokenURI(tokenId: TokenId | undefined): UsePositionTokenURIResult {\n  const contract = useV3NFTPositionManagerContract()\n  const inputs = useMemo(\n    () => [tokenId instanceof BigNumber ? tokenId.toHexString() : tokenId?.toString(16)],\n    [tokenId]\n  )\n  const { result, error, loading, valid } = useSingleCallResult(contract, 'tokenURI', inputs, {\n    ...NEVER_RELOAD,\n    gasRequired: 3_000_000,\n  })\n\n  return useMemo(() => {\n    if (error || !valid || !tokenId) {\n      return {\n        valid: false,\n        loading: false,\n      }\n    }\n    if (loading) {\n      return {\n        valid: true,\n        loading: true,\n      }\n    }\n    if (!result) {\n      return {\n        valid: false,\n        loading: false,\n      }\n    }\n    const [tokenURI] = result as [string]\n    if (!tokenURI || !tokenURI.startsWith(STARTS_WITH))\n      return {\n        valid: false,\n        loading: false,\n      }\n\n    try {\n      const json = JSON.parse(atob(tokenURI.slice(STARTS_WITH.length)))\n\n      return {\n        valid: true,\n        loading: false,\n        result: json,\n      }\n    } catch (error) {\n      return { valid: false, loading: false }\n    }\n  }, [error, loading, result, tokenId, valid])\n}\n"],"mappings":"uVAAA,OAASA,SAAS,KAAQ,0BAA0B,CAEpD,OAASC,YAAY,CAAEC,mBAAmB,KAAQ,qBAAqB,CACvE,OAASC,OAAO,KAAQ,OAAO,CAE/B,OAASC,+BAA+B,KAAQ,eAAe,CAI/D,GAAMC,YAAW,CAAG,+BAA+B,CAqBnD,MAAO,SAASC,oBAAmB,CAACC,OAA4B,CAA6B,CAC3F,GAAMC,SAAQ,CAAGJ,+BAA+B,EAAE,CAClD,GAAMK,OAAM,CAAGN,OAAO,CACpB,iBAAM,CAACI,OAAO,WAAYP,UAAS,CAAGO,OAAO,CAACG,WAAW,EAAE,CAAGH,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEI,QAAQ,CAAC,EAAE,CAAC,CAAC,GACpF,CAACJ,OAAO,CAAC,CACV,CACD,yBAA0CL,mBAAmB,CAACM,QAAQ,CAAE,UAAU,CAAEC,MAAM,gCACrFR,YAAY,MACfW,WAAW,CAAE,OAAS,GACtB,CAHMC,MAAM,sBAANA,MAAM,CAAEC,KAAK,sBAALA,KAAK,CAAEC,OAAO,sBAAPA,OAAO,CAAEC,KAAK,sBAALA,KAAK,CAKrC,MAAOb,QAAO,CAAC,UAAM,CACnB,GAAIW,KAAK,EAAI,CAACE,KAAK,EAAI,CAACT,OAAO,CAAE,CAC/B,MAAO,CACLS,KAAK,CAAE,KAAK,CACZD,OAAO,CAAE,KACX,CAAC,CACH,CACA,GAAIA,OAAO,CAAE,CACX,MAAO,CACLC,KAAK,CAAE,IAAI,CACXD,OAAO,CAAE,IACX,CAAC,CACH,CACA,GAAI,CAACF,MAAM,CAAE,CACX,MAAO,CACLG,KAAK,CAAE,KAAK,CACZD,OAAO,CAAE,KACX,CAAC,CACH,CACA,SAAmBF,MAAM,8BAAlBI,QAAQ,UACf,GAAI,CAACA,QAAQ,EAAI,CAACA,QAAQ,CAACC,UAAU,CAACb,WAAW,CAAC,CAChD,MAAO,CACLW,KAAK,CAAE,KAAK,CACZD,OAAO,CAAE,KACX,CAAC,CAEH,GAAI,CACF,GAAMI,KAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,QAAQ,CAACM,KAAK,CAAClB,WAAW,CAACmB,MAAM,CAAC,CAAC,CAAC,CAEjE,MAAO,CACLR,KAAK,CAAE,IAAI,CACXD,OAAO,CAAE,KAAK,CACdF,MAAM,CAAEM,IACV,CAAC,CACH,CAAE,MAAOL,KAAK,CAAE,CACd,MAAO,CAAEE,KAAK,CAAE,KAAK,CAAED,OAAO,CAAE,KAAM,CAAC,CACzC,CACF,CAAC,CAAE,CAACD,KAAK,CAAEC,OAAO,CAAEF,MAAM,CAAEN,OAAO,CAAES,KAAK,CAAC,CAAC,CAC9C"},"metadata":{},"sourceType":"module"}