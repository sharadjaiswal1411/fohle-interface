{"ast":null,"code":"import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Trans}from\"@lingui/react\";import{useTrace}from'@uniswap/analytics';import{sendAnalyticsEvent}from'@uniswap/analytics';import{EventName}from'@uniswap/analytics-events';import{MouseoverTooltip}from'components/Tooltip';import Tooltip from'components/Tooltip';import{NftStandard}from'graphql/data/__generated__/types-and-hooks';import{Box}from'nft/components/Box';import*as Card from'nft/components/collection/Card';import{AssetMediaType}from'nft/components/collection/Card';import{bodySmall}from'nft/css/common.css';import{themeVars}from'nft/css/sprinkles.css';import{useBag,useIsMobile,useSellAsset}from'nft/hooks';import{useEffect,useMemo,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TOOLTIP_TIMEOUT=2000;var getNftDisplayComponent=function getNftDisplayComponent(assetMediaType,mediaShouldBePlaying,setCurrentTokenPlayingMedia){switch(assetMediaType){case AssetMediaType.Image:return/*#__PURE__*/_jsx(Card.Image,{});case AssetMediaType.Video:return/*#__PURE__*/_jsx(Card.Video,{shouldPlay:mediaShouldBePlaying,setCurrentTokenPlayingMedia:setCurrentTokenPlayingMedia});case AssetMediaType.Audio:return/*#__PURE__*/_jsx(Card.Audio,{shouldPlay:mediaShouldBePlaying,setCurrentTokenPlayingMedia:setCurrentTokenPlayingMedia});}};var getUnsupportedNftTextComponent=function getUnsupportedNftTextComponent(asset){return/*#__PURE__*/_jsx(Box,{as:\"span\",className:bodySmall,style:{color:themeVars.colors.textPrimary},children:asset.asset_contract.tokenType===NftStandard.Erc1155?/*#__PURE__*/_jsx(Trans,{id:\"Selling ERC-1155s coming soon\"}):/*#__PURE__*/_jsx(Trans,{id:\"Blocked from trading\"})});};export var ViewMyNftsAsset=function ViewMyNftsAsset(_ref){var asset=_ref.asset,mediaShouldBePlaying=_ref.mediaShouldBePlaying,setCurrentTokenPlayingMedia=_ref.setCurrentTokenPlayingMedia,hideDetails=_ref.hideDetails;var sellAssets=useSellAsset(function(state){return state.sellAssets;});var selectSellAsset=useSellAsset(function(state){return state.selectSellAsset;});var removeSellAsset=useSellAsset(function(state){return state.removeSellAsset;});var cartExpanded=useBag(function(state){return state.bagExpanded;});var toggleCart=useBag(function(state){return state.toggleBag;});var isMobile=useIsMobile();var isSelected=useMemo(function(){return sellAssets.some(function(item){return item.tokenId===asset.tokenId&&item.asset_contract.address===asset.asset_contract.address;});},[asset,sellAssets]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showTooltip=_useState2[0],setShowTooltip=_useState2[1];var isSelectedRef=useRef(isSelected);var trace=useTrace();var onCardClick=function onCardClick(){return handleSelect(isSelected);};var handleSelect=function handleSelect(removeAsset){if(removeAsset){removeSellAsset(asset);}else{selectSellAsset(asset);sendAnalyticsEvent(EventName.NFT_SELL_ITEM_ADDED,_objectSpread({collection_address:asset.asset_contract.address,token_id:asset.tokenId},trace));}if(!cartExpanded&&!sellAssets.find(function(x){return x.tokenId===asset.tokenId&&x.asset_contract.address===asset.asset_contract.address;})&&!isMobile)toggleCart();};useEffect(function(){if(isSelected!==isSelectedRef.current){setShowTooltip(true);isSelectedRef.current=isSelected;var tooltipTimer=setTimeout(function(){setShowTooltip(false);},TOOLTIP_TIMEOUT);return function(){clearTimeout(tooltipTimer);};}isSelectedRef.current=isSelected;return undefined;},[isSelected,isSelectedRef]);var assetMediaType=Card.useAssetMediaType(asset);var isDisabled=asset.asset_contract.tokenType===NftStandard.Erc1155||asset.susFlag;return/*#__PURE__*/_jsxs(Card.Container,{asset:asset,selected:isSelected,addAssetToBag:function addAssetToBag(){return handleSelect(false);},removeAssetFromBag:function removeAssetFromBag(){return handleSelect(true);},onClick:onCardClick,isDisabled:isDisabled,children:[/*#__PURE__*/_jsx(Card.ImageContainer,{isDisabled:isDisabled,children:/*#__PURE__*/_jsx(Tooltip,{text:/*#__PURE__*/_jsx(Box,{as:\"span\",className:bodySmall,color:\"textPrimary\",children:isSelected?/*#__PURE__*/_jsx(Trans,{id:\"Added to bag\"}):/*#__PURE__*/_jsx(Trans,{id:\"Removed from bag\"})}),show:showTooltip,style:{display:'block'},offsetX:0,offsetY:-68,hideArrow:true,placement:\"bottom\",children:/*#__PURE__*/_jsx(MouseoverTooltip,{text:getUnsupportedNftTextComponent(asset),placement:\"bottom\",offsetX:0,offsetY:-60,hideArrow:true,style:{display:'block'},disableHover:!isDisabled,timeout:isMobile?TOOLTIP_TIMEOUT:undefined,children:getNftDisplayComponent(assetMediaType,mediaShouldBePlaying,setCurrentTokenPlayingMedia)})})}),/*#__PURE__*/_jsx(Card.DetailsContainer,{children:/*#__PURE__*/_jsx(Card.ProfileNftDetails,{asset:asset,hideDetails:hideDetails})})]});};","map":{"version":3,"names":["useTrace","sendAnalyticsEvent","EventName","MouseoverTooltip","Tooltip","NftStandard","Box","Card","AssetMediaType","bodySmall","themeVars","useBag","useIsMobile","useSellAsset","useEffect","useMemo","useRef","useState","TOOLTIP_TIMEOUT","getNftDisplayComponent","assetMediaType","mediaShouldBePlaying","setCurrentTokenPlayingMedia","Image","Video","Audio","getUnsupportedNftTextComponent","asset","color","colors","textPrimary","asset_contract","tokenType","Erc1155","ViewMyNftsAsset","hideDetails","sellAssets","state","selectSellAsset","removeSellAsset","cartExpanded","bagExpanded","toggleCart","toggleBag","isMobile","isSelected","some","item","tokenId","address","showTooltip","setShowTooltip","isSelectedRef","trace","onCardClick","handleSelect","removeAsset","NFT_SELL_ITEM_ADDED","collection_address","token_id","find","x","current","tooltipTimer","setTimeout","clearTimeout","undefined","useAssetMediaType","isDisabled","susFlag","display"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/profile/view/ViewMyNftsAsset.tsx"],"sourcesContent":["import { Trans } from '@lingui/macro'\nimport { useTrace } from '@uniswap/analytics'\nimport { sendAnalyticsEvent } from '@uniswap/analytics'\nimport { EventName } from '@uniswap/analytics-events'\nimport { MouseoverTooltip } from 'components/Tooltip'\nimport Tooltip from 'components/Tooltip'\nimport { NftStandard } from 'graphql/data/__generated__/types-and-hooks'\nimport { Box } from 'nft/components/Box'\nimport * as Card from 'nft/components/collection/Card'\nimport { AssetMediaType } from 'nft/components/collection/Card'\nimport { bodySmall } from 'nft/css/common.css'\nimport { themeVars } from 'nft/css/sprinkles.css'\nimport { useBag, useIsMobile, useSellAsset } from 'nft/hooks'\nimport { WalletAsset } from 'nft/types'\nimport { useEffect, useMemo, useRef, useState } from 'react'\n\nconst TOOLTIP_TIMEOUT = 2000\n\ninterface ViewMyNftsAssetProps {\n  asset: WalletAsset\n  mediaShouldBePlaying: boolean\n  setCurrentTokenPlayingMedia: (tokenId: string | undefined) => void\n  hideDetails: boolean\n}\n\nconst getNftDisplayComponent = (\n  assetMediaType: AssetMediaType,\n  mediaShouldBePlaying: boolean,\n  setCurrentTokenPlayingMedia: (tokenId: string | undefined) => void\n) => {\n  switch (assetMediaType) {\n    case AssetMediaType.Image:\n      return <Card.Image />\n    case AssetMediaType.Video:\n      return <Card.Video shouldPlay={mediaShouldBePlaying} setCurrentTokenPlayingMedia={setCurrentTokenPlayingMedia} />\n    case AssetMediaType.Audio:\n      return <Card.Audio shouldPlay={mediaShouldBePlaying} setCurrentTokenPlayingMedia={setCurrentTokenPlayingMedia} />\n  }\n}\n\nconst getUnsupportedNftTextComponent = (asset: WalletAsset) => (\n  <Box as=\"span\" className={bodySmall} style={{ color: themeVars.colors.textPrimary }}>\n    {asset.asset_contract.tokenType === NftStandard.Erc1155 ? (\n      <Trans>Selling ERC-1155s coming soon</Trans>\n    ) : (\n      <Trans>Blocked from trading</Trans>\n    )}\n  </Box>\n)\n\nexport const ViewMyNftsAsset = ({\n  asset,\n  mediaShouldBePlaying,\n  setCurrentTokenPlayingMedia,\n  hideDetails,\n}: ViewMyNftsAssetProps) => {\n  const sellAssets = useSellAsset((state) => state.sellAssets)\n  const selectSellAsset = useSellAsset((state) => state.selectSellAsset)\n  const removeSellAsset = useSellAsset((state) => state.removeSellAsset)\n  const cartExpanded = useBag((state) => state.bagExpanded)\n  const toggleCart = useBag((state) => state.toggleBag)\n  const isMobile = useIsMobile()\n\n  const isSelected = useMemo(() => {\n    return sellAssets.some(\n      (item) => item.tokenId === asset.tokenId && item.asset_contract.address === asset.asset_contract.address\n    )\n  }, [asset, sellAssets])\n\n  const [showTooltip, setShowTooltip] = useState(false)\n  const isSelectedRef = useRef(isSelected)\n  const trace = useTrace()\n  const onCardClick = () => handleSelect(isSelected)\n\n  const handleSelect = (removeAsset: boolean) => {\n    if (removeAsset) {\n      removeSellAsset(asset)\n    } else {\n      selectSellAsset(asset)\n      sendAnalyticsEvent(EventName.NFT_SELL_ITEM_ADDED, {\n        collection_address: asset.asset_contract.address,\n        token_id: asset.tokenId,\n        ...trace,\n      })\n    }\n    if (\n      !cartExpanded &&\n      !sellAssets.find(\n        (x) => x.tokenId === asset.tokenId && x.asset_contract.address === asset.asset_contract.address\n      ) &&\n      !isMobile\n    )\n      toggleCart()\n  }\n\n  useEffect(() => {\n    if (isSelected !== isSelectedRef.current) {\n      setShowTooltip(true)\n      isSelectedRef.current = isSelected\n      const tooltipTimer = setTimeout(() => {\n        setShowTooltip(false)\n      }, TOOLTIP_TIMEOUT)\n\n      return () => {\n        clearTimeout(tooltipTimer)\n      }\n    }\n    isSelectedRef.current = isSelected\n    return undefined\n  }, [isSelected, isSelectedRef])\n\n  const assetMediaType = Card.useAssetMediaType(asset)\n  const isDisabled = asset.asset_contract.tokenType === NftStandard.Erc1155 || asset.susFlag\n\n  return (\n    <Card.Container\n      asset={asset}\n      selected={isSelected}\n      addAssetToBag={() => handleSelect(false)}\n      removeAssetFromBag={() => handleSelect(true)}\n      onClick={onCardClick}\n      isDisabled={isDisabled}\n    >\n      <Card.ImageContainer isDisabled={isDisabled}>\n        <Tooltip\n          text={\n            <Box as=\"span\" className={bodySmall} color=\"textPrimary\">\n              {isSelected ? <Trans>Added to bag</Trans> : <Trans>Removed from bag</Trans>}\n            </Box>\n          }\n          show={showTooltip}\n          style={{ display: 'block' }}\n          offsetX={0}\n          offsetY={-68}\n          hideArrow={true}\n          placement=\"bottom\"\n        >\n          <MouseoverTooltip\n            text={getUnsupportedNftTextComponent(asset)}\n            placement=\"bottom\"\n            offsetX={0}\n            offsetY={-60}\n            hideArrow={true}\n            style={{ display: 'block' }}\n            disableHover={!isDisabled}\n            timeout={isMobile ? TOOLTIP_TIMEOUT : undefined}\n          >\n            {getNftDisplayComponent(assetMediaType, mediaShouldBePlaying, setCurrentTokenPlayingMedia)}\n          </MouseoverTooltip>\n        </Tooltip>\n      </Card.ImageContainer>\n      <Card.DetailsContainer>\n        <Card.ProfileNftDetails asset={asset} hideDetails={hideDetails} />\n      </Card.DetailsContainer>\n    </Card.Container>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}