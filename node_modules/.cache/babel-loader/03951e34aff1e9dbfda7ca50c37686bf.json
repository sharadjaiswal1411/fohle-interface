{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\nvar _asyncToGenerator = require(\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\nvar _classCallCheck = require(\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Wallet = void 0;\nvar methods_1 = require(\"../communication/methods\");\nvar permissions_1 = require(\"../types/permissions\");\nvar Wallet = /*#__PURE__*/function () {\n  function Wallet(communicator) {\n    _classCallCheck(this, Wallet);\n    this.communicator = communicator;\n  }\n  _createClass(Wallet, [{\n    key: \"getPermissions\",\n    value: function () {\n      var _getPermissions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.communicator.send(methods_1.Methods.wallet_getPermissions, undefined);\n              case 2:\n                response = _context.sent;\n                return _context.abrupt(\"return\", response.data);\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function getPermissions() {\n        return _getPermissions.apply(this, arguments);\n      }\n      return getPermissions;\n    }()\n  }, {\n    key: \"requestPermissions\",\n    value: function () {\n      var _requestPermissions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(permissions) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.isPermissionRequestValid(permissions)) {\n                  _context2.next = 2;\n                  break;\n                }\n                throw new permissions_1.PermissionsError('Permissions request is invalid', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n              case 2:\n                _context2.prev = 2;\n                _context2.next = 5;\n                return this.communicator.send(methods_1.Methods.wallet_requestPermissions, permissions);\n              case 5:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", response.data);\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](2);\n                throw new permissions_1.PermissionsError('Permissions rejected', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 9]]);\n      }));\n      function requestPermissions(_x) {\n        return _requestPermissions.apply(this, arguments);\n      }\n      return requestPermissions;\n    }()\n  }, {\n    key: \"isPermissionRequestValid\",\n    value: function isPermissionRequestValid(permissions) {\n      return permissions.every(function (pr) {\n        if (typeof pr === 'object') {\n          return Object.keys(pr).every(function (method) {\n            if (Object.values(methods_1.RestrictedMethods).includes(method)) {\n              return true;\n            }\n            return false;\n          });\n        }\n        return false;\n      });\n    }\n  }]);\n  return Wallet;\n}();\nexports.Wallet = Wallet;","map":{"version":3,"sources":["../../../src/wallet/index.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,IAAA,SAAA,GAAA,OAAA,CAAA,0BAAA,CAAA;AAEA,IAAA,aAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;AAAqH,IAE/G,MAAM;EAGV,gBAAY,YAA0B,EAAA;IAAA;IACpC,IAAI,CAAC,YAAY,GAAG,YAAY;EAClC;EAAC;IAAA;IAAA;MAAA,+EAED;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACyB,IAAI,CAAC,YAAY,CAAC,IAAI,CAC3C,SAAA,CAAA,OAAO,CAAC,qBAAqB,EAC7B,SAAS,CACV;cAAA;gBAHK,QAAQ;gBAAA,iCAKP,QAAQ,CAAC,IAAI;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACrB;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,mFAED,kBAAyB,WAAgC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IAClD,IAAI,CAAC,wBAAwB,CAAC,WAAW,CAAC;kBAAA;kBAAA;gBAAA;gBAAA,MACvC,IAAI,aAAA,CAAA,gBAAgB,CAAC,gCAAgC,EAAE,aAAA,CAAA,4BAA4B,CAAC;cAAA;gBAAA;gBAAA;gBAAA,OAInE,IAAI,CAAC,YAAY,CAAC,IAAI,CAI3C,SAAA,CAAA,OAAO,CAAC,yBAAyB,EAAE,WAAW,CAAC;cAAA;gBAJ3C,QAAQ;gBAAA,kCAMP,QAAQ,CAAC,IAAI;cAAA;gBAAA;gBAAA;gBAAA,MAEd,IAAI,aAAA,CAAA,gBAAgB,CAAC,sBAAsB,EAAE,aAAA,CAAA,4BAA4B,CAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAEnF;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA,OAED,kCAAyB,WAAgC,EAAA;MACvD,OAAO,WAAW,CAAC,KAAK,CAAC,UAAC,EAAqB,EAAI;QACjD,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;UAC1B,OAAO,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,UAAC,MAAM,EAAI;YACtC,IAAI,MAAM,CAAC,MAAM,CAAC,SAAA,CAAA,iBAAiB,CAAC,CAAC,QAAQ,CAAC,MAA2B,CAAC,EAAE;cAC1E,OAAO,IAAI;YACZ;YAED,OAAO,KAAK;UACd,CAAC,CAAC;QACH;QAED,OAAO,KAAK;MACd,CAAC,CAAC;IACJ;EAAC;EAAA;AAAA;AAGM,OAAA,CAAA,MAAA,GAAA,MAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wallet = void 0;\nconst methods_1 = require(\"../communication/methods\");\nconst permissions_1 = require(\"../types/permissions\");\nclass Wallet {\n    constructor(communicator) {\n        this.communicator = communicator;\n    }\n    async getPermissions() {\n        const response = await this.communicator.send(methods_1.Methods.wallet_getPermissions, undefined);\n        return response.data;\n    }\n    async requestPermissions(permissions) {\n        if (!this.isPermissionRequestValid(permissions)) {\n            throw new permissions_1.PermissionsError('Permissions request is invalid', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n        }\n        try {\n            const response = await this.communicator.send(methods_1.Methods.wallet_requestPermissions, permissions);\n            return response.data;\n        }\n        catch (_a) {\n            throw new permissions_1.PermissionsError('Permissions rejected', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n        }\n    }\n    isPermissionRequestValid(permissions) {\n        return permissions.every((pr) => {\n            if (typeof pr === 'object') {\n                return Object.keys(pr).every((method) => {\n                    if (Object.values(methods_1.RestrictedMethods).includes(method)) {\n                        return true;\n                    }\n                    return false;\n                });\n            }\n            return false;\n        });\n    }\n}\nexports.Wallet = Wallet;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}