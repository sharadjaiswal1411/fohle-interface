{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useTheme as _useTheme}from\"styled-components\";import{Trans}from\"@lingui/react\";import{CurrencyAmount,Percent,Price,Token}from'@uniswap/sdk-core';import{FeeAmount,Pool,Position,priceToClosestTick,TickMath}from'@uniswap/v3-sdk';import{useWeb3React}from'@web3-react/core';import{sendEvent}from'components/analytics';import Badge,{BadgeVariant}from'components/Badge';import{ButtonConfirmed}from'components/Button';import{BlueCard,DarkGrayCard,LightCard,YellowCard}from'components/Card';import DoubleCurrencyLogo from'components/DoubleLogo';import FeeSelector from'components/FeeSelector';import RangeSelector from'components/RangeSelector';import RateToggle from'components/RateToggle';import SettingsTab from'components/Settings';import{Dots}from'components/swap/styleds';import{ApprovalState,useApproveCallback}from'hooks/useApproveCallback';import useCurrentBlockTimestamp from'hooks/useCurrentBlockTimestamp';import{PoolState,usePool}from'hooks/usePools';import useTransactionDeadline from'hooks/useTransactionDeadline';import{useV2LiquidityTokenPermit}from'hooks/useV2LiquidityTokenPermit';import JSBI from'jsbi';import{NEVER_RELOAD,useSingleCallResult}from'lib/hooks/multicall';import{useCallback,useEffect,useMemo,useState}from'react';import{AlertCircle,AlertTriangle,ArrowDown}from'react-feather';import{Navigate,useParams}from'react-router-dom';import{Text}from'rebass';import{useAppDispatch}from'state/hooks';import{Bound,resetMintState}from'state/mint/v3/actions';import{useRangeHopCallbacks,useV3DerivedMintInfo,useV3MintActionHandlers}from'state/mint/v3/hooks';import{useIsTransactionPending,useTransactionAdder}from'state/transactions/hooks';import{useUserSlippageToleranceWithDefault}from'state/user/hooks';import{formatCurrencyAmount}from'utils/formatCurrencyAmount';import{unwrappedToken}from'utils/unwrappedToken';import{AutoColumn}from'../../components/Column';import FormattedCurrencyAmount from'../../components/FormattedCurrencyAmount';import CurrencyLogo from'../../components/Logo/CurrencyLogo';import{AutoRow,RowBetween,RowFixed}from'../../components/Row';import{V2_FACTORY_ADDRESSES}from'../../constants/addresses';import{WRAPPED_NATIVE_CURRENCY}from'../../constants/tokens';import{useToken}from'../../hooks/Tokens';import{usePairContract,useV2MigratorContract}from'../../hooks/useContract';import useIsArgentWallet from'../../hooks/useIsArgentWallet';import{useTotalSupply}from'../../hooks/useTotalSupply';import{useTokenBalance}from'../../state/connection/hooks';import{TransactionType}from'../../state/transactions/types';import{BackArrow,ExternalLink,ThemedText}from'../../theme';import{isAddress}from'../../utils';import{calculateGasMargin}from'../../utils/calculateGasMargin';import{currencyId}from'../../utils/currencyId';import{ExplorerDataType,getExplorerLink}from'../../utils/getExplorerLink';import{BodyWrapper}from'../AppBody';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ZERO=JSBI.BigInt(0);var DEFAULT_MIGRATE_SLIPPAGE_TOLERANCE=new Percent(75,10000);function EmptyState(_ref){var message=_ref.message;return/*#__PURE__*/_jsx(AutoColumn,{style:{minHeight:200,justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{children:message})});}function LiquidityInfo(_ref2){var token0Amount=_ref2.token0Amount,token1Amount=_ref2.token1Amount;var currency0=unwrappedToken(token0Amount.currency);var currency1=unwrappedToken(token1Amount.currency);return/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{size:\"20px\",style:{marginRight:'8px'},currency:currency0}),/*#__PURE__*/_jsx(Text,{fontSize:16,fontWeight:500,children:currency0.symbol})]}),/*#__PURE__*/_jsx(Text,{fontSize:16,fontWeight:500,children:/*#__PURE__*/_jsx(FormattedCurrencyAmount,{currencyAmount:token0Amount})})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{size:\"20px\",style:{marginRight:'8px'},currency:currency1}),/*#__PURE__*/_jsx(Text,{fontSize:16,fontWeight:500,children:currency1.symbol})]}),/*#__PURE__*/_jsx(Text,{fontSize:16,fontWeight:500,children:/*#__PURE__*/_jsx(FormattedCurrencyAmount,{currencyAmount:token1Amount})})]})]});}// hard-code this for now\nvar percentageToMigrate=100;function V2PairMigration(_ref3){var _pairFactory$result,_priceDifferenceFract,_priceDifferenceFract2,_pool$tickCurrent,_pool$sqrtRatioX,_v2SpotPrice$invert,_v2SpotPrice$invert2,_v3SpotPrice$invert,_priceDifferenceFract3,_v3SpotPrice$invert2,_WRAPPED_NATIVE_CURRE,_WRAPPED_NATIVE_CURRE2;var pair=_ref3.pair,pairBalance=_ref3.pairBalance,totalSupply=_ref3.totalSupply,reserve0=_ref3.reserve0,reserve1=_ref3.reserve1,token0=_ref3.token0,token1=_ref3.token1;var _useWeb3React=useWeb3React(),chainId=_useWeb3React.chainId,account=_useWeb3React.account;var theme=_useTheme();var v2FactoryAddress=chainId?V2_FACTORY_ADDRESSES[chainId]:undefined;var pairFactory=useSingleCallResult(pair,'factory');var isNotUniswap=((_pairFactory$result=pairFactory.result)===null||_pairFactory$result===void 0?void 0:_pairFactory$result[0])&&pairFactory.result[0]!==v2FactoryAddress;var deadline=useTransactionDeadline();// custom from users settings\nvar blockTimestamp=useCurrentBlockTimestamp();var allowedSlippage=useUserSlippageToleranceWithDefault(DEFAULT_MIGRATE_SLIPPAGE_TOLERANCE);// custom from users\nvar currency0=unwrappedToken(token0);var currency1=unwrappedToken(token1);// this is just getLiquidityValue with the fee off, but for the passed pair\nvar token0Value=useMemo(function(){return CurrencyAmount.fromRawAmount(token0,JSBI.divide(JSBI.multiply(pairBalance.quotient,reserve0.quotient),totalSupply.quotient));},[token0,pairBalance,reserve0,totalSupply]);var token1Value=useMemo(function(){return CurrencyAmount.fromRawAmount(token1,JSBI.divide(JSBI.multiply(pairBalance.quotient,reserve1.quotient),totalSupply.quotient));},[token1,pairBalance,reserve1,totalSupply]);// set up v3 pool\nvar _useState=useState(FeeAmount.MEDIUM),_useState2=_slicedToArray(_useState,2),feeAmount=_useState2[0],setFeeAmount=_useState2[1];var _usePool=usePool(token0,token1,feeAmount),_usePool2=_slicedToArray(_usePool,2),poolState=_usePool2[0],pool=_usePool2[1];var noLiquidity=poolState===PoolState.NOT_EXISTS;// get spot prices + price difference\nvar v2SpotPrice=useMemo(function(){return new Price(token0,token1,reserve0.quotient,reserve1.quotient);},[token0,token1,reserve0,reserve1]);var v3SpotPrice=poolState===PoolState.EXISTS?pool===null||pool===void 0?void 0:pool.token0Price:undefined;var priceDifferenceFraction=v2SpotPrice&&v3SpotPrice?v3SpotPrice.divide(v2SpotPrice).subtract(1).multiply(100):undefined;if((_priceDifferenceFract=priceDifferenceFraction)===null||_priceDifferenceFract===void 0?void 0:_priceDifferenceFract.lessThan(ZERO)){priceDifferenceFraction=priceDifferenceFraction.multiply(-1);}var largePriceDifference=priceDifferenceFraction&&!((_priceDifferenceFract2=priceDifferenceFraction)===null||_priceDifferenceFract2===void 0?void 0:_priceDifferenceFract2.lessThan(JSBI.BigInt(2)));// the following is a small hack to get access to price range data/input handlers\nvar _useState3=useState(token0),_useState4=_slicedToArray(_useState3,2),baseToken=_useState4[0],setBaseToken=_useState4[1];var _useV3DerivedMintInfo=useV3DerivedMintInfo(token0,token1,feeAmount,baseToken),ticks=_useV3DerivedMintInfo.ticks,pricesAtTicks=_useV3DerivedMintInfo.pricesAtTicks,invertPrice=_useV3DerivedMintInfo.invertPrice,invalidRange=_useV3DerivedMintInfo.invalidRange,outOfRange=_useV3DerivedMintInfo.outOfRange,ticksAtLimit=_useV3DerivedMintInfo.ticksAtLimit;// get value and prices at ticks\nvar tickLower=ticks[Bound.LOWER],tickUpper=ticks[Bound.UPPER];var priceLower=pricesAtTicks[Bound.LOWER],priceUpper=pricesAtTicks[Bound.UPPER];var _useRangeHopCallbacks=useRangeHopCallbacks(baseToken,baseToken.equals(token0)?token1:token0,feeAmount,tickLower,tickUpper),getDecrementLower=_useRangeHopCallbacks.getDecrementLower,getIncrementLower=_useRangeHopCallbacks.getIncrementLower,getDecrementUpper=_useRangeHopCallbacks.getDecrementUpper,getIncrementUpper=_useRangeHopCallbacks.getIncrementUpper;var _useV3MintActionHandl=useV3MintActionHandlers(noLiquidity),onLeftRangeInput=_useV3MintActionHandl.onLeftRangeInput,onRightRangeInput=_useV3MintActionHandl.onRightRangeInput;// the v3 tick is either the pool's tickCurrent, or the tick closest to the v2 spot price\nvar tick=(_pool$tickCurrent=pool===null||pool===void 0?void 0:pool.tickCurrent)!==null&&_pool$tickCurrent!==void 0?_pool$tickCurrent:priceToClosestTick(v2SpotPrice);// the price is either the current v3 price, or the price at the tick\nvar sqrtPrice=(_pool$sqrtRatioX=pool===null||pool===void 0?void 0:pool.sqrtRatioX96)!==null&&_pool$sqrtRatioX!==void 0?_pool$sqrtRatioX:TickMath.getSqrtRatioAtTick(tick);var position=typeof tickLower==='number'&&typeof tickUpper==='number'&&!invalidRange?Position.fromAmounts({pool:pool!==null&&pool!==void 0?pool:new Pool(token0,token1,feeAmount,sqrtPrice,0,tick,[]),tickLower:tickLower,tickUpper:tickUpper,amount0:token0Value.quotient,amount1:token1Value.quotient,useFullPrecision:true// we want full precision for the theoretical position\n}):undefined;var _useMemo=useMemo(function(){return position?position.mintAmountsWithSlippage(allowedSlippage):{amount0:undefined,amount1:undefined};},[position,allowedSlippage]),v3Amount0Min=_useMemo.amount0,v3Amount1Min=_useMemo.amount1;var refund0=useMemo(function(){return position&&CurrencyAmount.fromRawAmount(token0,JSBI.subtract(token0Value.quotient,position.amount0.quotient));},[token0Value,position,token0]);var refund1=useMemo(function(){return position&&CurrencyAmount.fromRawAmount(token1,JSBI.subtract(token1Value.quotient,position.amount1.quotient));},[token1Value,position,token1]);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),confirmingMigration=_useState6[0],setConfirmingMigration=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),pendingMigrationHash=_useState8[0],setPendingMigrationHash=_useState8[1];var migrator=useV2MigratorContract();// approvals\nvar _useApproveCallback=useApproveCallback(pairBalance,migrator===null||migrator===void 0?void 0:migrator.address),_useApproveCallback2=_slicedToArray(_useApproveCallback,2),approval=_useApproveCallback2[0],approveManually=_useApproveCallback2[1];var _useV2LiquidityTokenP=useV2LiquidityTokenPermit(pairBalance,migrator===null||migrator===void 0?void 0:migrator.address),signatureData=_useV2LiquidityTokenP.signatureData,gatherPermitSignature=_useV2LiquidityTokenP.gatherPermitSignature;var isArgentWallet=useIsArgentWallet();var approve=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(isNotUniswap||isArgentWallet)){_context.next=5;break;}_context.next=3;return approveManually();case 3:_context.next=20;break;case 5:if(!gatherPermitSignature){_context.next=18;break;}_context.prev=6;_context.next=9;return gatherPermitSignature();case 9:_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](6);if(!((_context.t0===null||_context.t0===void 0?void 0:_context.t0.code)!==4001)){_context.next=16;break;}_context.next=16;return approveManually();case 16:_context.next=20;break;case 18:_context.next=20;return approveManually();case 20:case\"end\":return _context.stop();}}},_callee,null,[[6,11]]);})),[isNotUniswap,isArgentWallet,gatherPermitSignature,approveManually]);var addTransaction=useTransactionAdder();var isMigrationPending=useIsTransactionPending(pendingMigrationHash!==null&&pendingMigrationHash!==void 0?pendingMigrationHash:undefined);var migrate=useCallback(function(){var _signatureData$deadli;if(!migrator||!account||!deadline||!blockTimestamp||typeof tickLower!=='number'||typeof tickUpper!=='number'||!v3Amount0Min||!v3Amount1Min||!chainId)return;var deadlineToUse=(_signatureData$deadli=signatureData===null||signatureData===void 0?void 0:signatureData.deadline)!==null&&_signatureData$deadli!==void 0?_signatureData$deadli:deadline;var data=[];// permit if necessary\nif(signatureData){data.push(migrator.interface.encodeFunctionData('selfPermit',[pair.address,\"0x\".concat(pairBalance.quotient.toString(16)),deadlineToUse,signatureData.v,signatureData.r,signatureData.s]));}// create/initialize pool if necessary\nif(noLiquidity){data.push(migrator.interface.encodeFunctionData('createAndInitializePoolIfNecessary',[token0.address,token1.address,feeAmount,\"0x\".concat(sqrtPrice.toString(16))]));}// TODO could save gas by not doing this in multicall\ndata.push(migrator.interface.encodeFunctionData('migrate',[{pair:pair.address,liquidityToMigrate:\"0x\".concat(pairBalance.quotient.toString(16)),percentageToMigrate:percentageToMigrate,token0:token0.address,token1:token1.address,fee:feeAmount,tickLower:tickLower,tickUpper:tickUpper,amount0Min:\"0x\".concat(v3Amount0Min.toString(16)),amount1Min:\"0x\".concat(v3Amount1Min.toString(16)),recipient:account,deadline:deadlineToUse,refundAsETH:true// hard-code this for now\n}]));setConfirmingMigration(true);migrator.estimateGas.multicall(data).then(function(gasEstimate){return migrator.multicall(data,{gasLimit:calculateGasMargin(gasEstimate)}).then(function(response){sendEvent({category:'Migrate',action:\"\".concat(isNotUniswap?'SushiSwap':'V2',\"->V3\"),label:\"\".concat(currency0.symbol,\"/\").concat(currency1.symbol)});addTransaction(response,{type:TransactionType.MIGRATE_LIQUIDITY_V3,baseCurrencyId:currencyId(currency0),quoteCurrencyId:currencyId(currency1),isFork:isNotUniswap});setPendingMigrationHash(response.hash);});}).catch(function(){setConfirmingMigration(false);});},[chainId,isNotUniswap,migrator,noLiquidity,blockTimestamp,token0,token1,feeAmount,pairBalance,tickLower,tickUpper,sqrtPrice,v3Amount0Min,v3Amount1Min,account,deadline,signatureData,addTransaction,pair,currency0,currency1]);var isSuccessfullyMigrated=!!pendingMigrationHash&&JSBI.equal(pairBalance.quotient,ZERO);return/*#__PURE__*/_jsxs(AutoColumn,{gap:\"20px\",children:[/*#__PURE__*/_jsxs(ThemedText.DeprecatedBody,{my:9,style:{fontWeight:400},children:[/*#__PURE__*/_jsx(Trans,{id:\"This tool will safely migrate your {0} liquidity to V3. The process is completely trustless thanks to the\",values:{0:isNotUniswap?'SushiSwap':'V2'}}),chainId&&migrator&&/*#__PURE__*/_jsx(ExternalLink,{href:getExplorerLink(chainId,migrator.address,ExplorerDataType.ADDRESS),children:/*#__PURE__*/_jsx(ThemedText.DeprecatedBlue,{display:\"inline\",children:/*#__PURE__*/_jsx(Trans,{id:\"Uniswap migration contract\\u2197\"})})}),\".\"]}),/*#__PURE__*/_jsx(LightCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"lg\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{style:{marginLeft:'8px'},children:[/*#__PURE__*/_jsx(DoubleCurrencyLogo,{currency0:currency0,currency1:currency1,margin:false,size:20}),/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{style:{marginLeft:'8px'},children:/*#__PURE__*/_jsx(Trans,{id:\"{0}/{1} LP Tokens\",values:{0:currency0.symbol,1:currency1.symbol}})})]}),/*#__PURE__*/_jsx(Badge,{variant:BadgeVariant.WARNING,children:isNotUniswap?'Sushi':'V2'})]}),/*#__PURE__*/_jsx(LiquidityInfo,{token0Amount:token0Value,token1Amount:token1Value})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(ArrowDown,{size:24})}),/*#__PURE__*/_jsx(LightCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"lg\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{style:{marginLeft:'8px'},children:[/*#__PURE__*/_jsx(DoubleCurrencyLogo,{currency0:currency0,currency1:currency1,margin:false,size:20}),/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{style:{marginLeft:'8px'},children:/*#__PURE__*/_jsx(Trans,{id:\"{0}/{1} LP NFT\",values:{0:currency0.symbol,1:currency1.symbol}})})]}),/*#__PURE__*/_jsx(Badge,{variant:BadgeVariant.PRIMARY,children:\"V3\"})]}),/*#__PURE__*/_jsx(FeeSelector,{feeAmount:feeAmount,handleFeePoolSelect:setFeeAmount}),noLiquidity&&/*#__PURE__*/_jsxs(BlueCard,{style:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(AlertCircle,{color:theme.textPrimary,style:{marginBottom:'12px',opacity:0.8}}),/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{fontSize:14,style:{marginBottom:8,fontWeight:500,opacity:0.8},textAlign:\"center\",children:/*#__PURE__*/_jsx(Trans,{id:\"You are the first liquidity provider for this Uniswap V3 pool. Your liquidity will migrate at the current {0} price.\",values:{0:isNotUniswap?'SushiSwap':'V2'}})}),/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{fontWeight:500,textAlign:\"center\",fontSize:14,style:{marginTop:'8px',opacity:0.8},children:/*#__PURE__*/_jsx(Trans,{id:\"Your transaction cost will be much higher as it includes the gas to create the pool.\"})}),v2SpotPrice&&/*#__PURE__*/_jsx(AutoColumn,{gap:\"sm\",style:{marginTop:'12px'},children:/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsxs(ThemedText.DeprecatedBody,{fontWeight:500,fontSize:14,children:[/*#__PURE__*/_jsx(Trans,{id:\"{0} {1} Price:\",values:{0:isNotUniswap?'SushiSwap':'V2',1:invertPrice?currency1.symbol:currency0.symbol}}),' ',invertPrice?\"\".concat(v2SpotPrice===null||v2SpotPrice===void 0?void 0:(_v2SpotPrice$invert=v2SpotPrice.invert())===null||_v2SpotPrice$invert===void 0?void 0:_v2SpotPrice$invert.toSignificant(6),\" \").concat(currency0.symbol):\"\".concat(v2SpotPrice===null||v2SpotPrice===void 0?void 0:v2SpotPrice.toSignificant(6),\" \").concat(currency1.symbol)]})})})]}),largePriceDifference?/*#__PURE__*/_jsxs(YellowCard,{children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{fontSize:14,children:/*#__PURE__*/_jsx(Trans,{id:\"{0} {1} Price:\",values:{0:isNotUniswap?'SushiSwap':'V2',1:invertPrice?currency1.symbol:currency0.symbol}})}),/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{fontSize:14,children:invertPrice?\"\".concat(v2SpotPrice===null||v2SpotPrice===void 0?void 0:(_v2SpotPrice$invert2=v2SpotPrice.invert())===null||_v2SpotPrice$invert2===void 0?void 0:_v2SpotPrice$invert2.toSignificant(6),\" \").concat(currency0.symbol):\"\".concat(v2SpotPrice===null||v2SpotPrice===void 0?void 0:v2SpotPrice.toSignificant(6),\" \").concat(currency1.symbol)})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{fontSize:14,children:/*#__PURE__*/_jsx(Trans,{id:\"V3 {0} Price:\",values:{0:invertPrice?currency1.symbol:currency0.symbol}})}),/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{fontSize:14,children:invertPrice?\"\".concat(v3SpotPrice===null||v3SpotPrice===void 0?void 0:(_v3SpotPrice$invert=v3SpotPrice.invert())===null||_v3SpotPrice$invert===void 0?void 0:_v3SpotPrice$invert.toSignificant(6),\" \").concat(currency0.symbol):\"\".concat(v3SpotPrice===null||v3SpotPrice===void 0?void 0:v3SpotPrice.toSignificant(6),\" \").concat(currency1.symbol)})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{fontSize:14,color:\"inherit\",children:/*#__PURE__*/_jsx(Trans,{id:\"Price Difference:\"})}),/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{fontSize:14,color:\"inherit\",children:/*#__PURE__*/_jsx(Trans,{id:\"{0}%\",values:{0:(_priceDifferenceFract3=priceDifferenceFraction)===null||_priceDifferenceFract3===void 0?void 0:_priceDifferenceFract3.toSignificant(4)}})})]})]}),/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{fontSize:14,style:{marginTop:8,fontWeight:400},children:/*#__PURE__*/_jsx(Trans,{id:\"You should only deposit liquidity into Uniswap V3 at a price you believe is correct. <0/>If the price seems incorrect, you can either make a swap to move the price or wait for someone else to do so.\",components:{0:/*#__PURE__*/_jsx(\"br\",{})}})})]}):!noLiquidity&&v3SpotPrice?/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{fontSize:14,children:/*#__PURE__*/_jsx(Trans,{id:\"V3 {0} Price:\",values:{0:invertPrice?currency1.symbol:currency0.symbol}})}),/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{fontSize:14,children:invertPrice?\"\".concat(v3SpotPrice===null||v3SpotPrice===void 0?void 0:(_v3SpotPrice$invert2=v3SpotPrice.invert())===null||_v3SpotPrice$invert2===void 0?void 0:_v3SpotPrice$invert2.toSignificant(6),\" \").concat(currency0.symbol):\"\".concat(v3SpotPrice===null||v3SpotPrice===void 0?void 0:v3SpotPrice.toSignificant(6),\" \").concat(currency1.symbol)})]}):null,/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedLabel,{children:/*#__PURE__*/_jsx(Trans,{id:\"Set Price Range\"})}),/*#__PURE__*/_jsx(RateToggle,{currencyA:invertPrice?currency1:currency0,currencyB:invertPrice?currency0:currency1,handleRateToggle:function handleRateToggle(){onLeftRangeInput('');onRightRangeInput('');setBaseToken(function(base){return base.equals(token0)?token1:token0;});}})]}),/*#__PURE__*/_jsx(RangeSelector,{priceLower:priceLower,priceUpper:priceUpper,getDecrementLower:getDecrementLower,getIncrementLower:getIncrementLower,getDecrementUpper:getDecrementUpper,getIncrementUpper:getIncrementUpper,onLeftRangeInput:onLeftRangeInput,onRightRangeInput:onRightRangeInput,currencyA:invertPrice?currency1:currency0,currencyB:invertPrice?currency0:currency1,feeAmount:feeAmount,ticksAtLimit:ticksAtLimit}),outOfRange?/*#__PURE__*/_jsx(YellowCard,{padding:\"8px 12px\",$borderRadius:\"12px\",children:/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(AlertTriangle,{stroke:theme.deprecated_yellow3,size:\"16px\"}),/*#__PURE__*/_jsx(ThemedText.DeprecatedYellow,{ml:\"12px\",fontSize:\"12px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Your position will not earn fees or be used in trades until the market price moves into your range.\"})})]})}):null,invalidRange?/*#__PURE__*/_jsx(YellowCard,{padding:\"8px 12px\",$borderRadius:\"12px\",children:/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(AlertTriangle,{stroke:theme.deprecated_yellow3,size:\"16px\"}),/*#__PURE__*/_jsx(ThemedText.DeprecatedYellow,{ml:\"12px\",fontSize:\"12px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Invalid range selected. The min price must be lower than the max price.\"})})]})}):null,position?/*#__PURE__*/_jsx(DarkGrayCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(LiquidityInfo,{token0Amount:position.amount0,token1Amount:position.amount1}),chainId&&refund0&&refund1?/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{fontSize:12,children:/*#__PURE__*/_jsx(Trans,{id:\"At least {0} {1} and {2} {3} will be refunded to your wallet due to selected price range.\",values:{0:formatCurrencyAmount(refund0,4),1:chainId&&((_WRAPPED_NATIVE_CURRE=WRAPPED_NATIVE_CURRENCY[chainId])===null||_WRAPPED_NATIVE_CURRE===void 0?void 0:_WRAPPED_NATIVE_CURRE.equals(token0))?'ETH':token0.symbol,2:formatCurrencyAmount(refund1,4),3:chainId&&((_WRAPPED_NATIVE_CURRE2=WRAPPED_NATIVE_CURRENCY[chainId])===null||_WRAPPED_NATIVE_CURRE2===void 0?void 0:_WRAPPED_NATIVE_CURRE2.equals(token1))?'ETH':token1.symbol}})}):null]})}):null,/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[!isSuccessfullyMigrated&&!isMigrationPending?/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",style:{flex:'1'},children:/*#__PURE__*/_jsx(ButtonConfirmed,{confirmed:approval===ApprovalState.APPROVED||signatureData!==null,disabled:approval!==ApprovalState.NOT_APPROVED||signatureData!==null||!v3Amount0Min||!v3Amount1Min||invalidRange||confirmingMigration,onClick:approve,children:approval===ApprovalState.PENDING?/*#__PURE__*/_jsx(Dots,{children:/*#__PURE__*/_jsx(Trans,{id:\"Approving\"})}):approval===ApprovalState.APPROVED||signatureData!==null?/*#__PURE__*/_jsx(Trans,{id:\"Allowed\"}):/*#__PURE__*/_jsx(Trans,{id:\"Allow LP token migration\"})})}):null,/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",style:{flex:'1'},children:/*#__PURE__*/_jsx(ButtonConfirmed,{confirmed:isSuccessfullyMigrated,disabled:!v3Amount0Min||!v3Amount1Min||invalidRange||approval!==ApprovalState.APPROVED&&signatureData===null||confirmingMigration||isMigrationPending||isSuccessfullyMigrated,onClick:migrate,children:isSuccessfullyMigrated?'Success!':isMigrationPending?/*#__PURE__*/_jsx(Dots,{children:/*#__PURE__*/_jsx(Trans,{id:\"Migrating\"})}):/*#__PURE__*/_jsx(Trans,{id:\"Migrate\"})})})]})]})})]});}export default function MigrateV2Pair(){var _token0AddressCallSta,_useSingleCallResult,_useSingleCallResult$,_useSingleCallResult$2,_useSingleCallResult2;var _useParams=useParams(),address=_useParams.address;// reset mint state on component mount, and as a cleanup (on unmount)\nvar dispatch=useAppDispatch();useEffect(function(){dispatch(resetMintState());return function(){dispatch(resetMintState());};},[dispatch]);var _useWeb3React2=useWeb3React(),chainId=_useWeb3React2.chainId,account=_useWeb3React2.account;// get pair contract\nvar validatedAddress=isAddress(address);var pair=usePairContract(validatedAddress?validatedAddress:undefined);// get token addresses from pair contract\nvar token0AddressCallState=useSingleCallResult(pair,'token0',undefined,NEVER_RELOAD);var token0Address=token0AddressCallState===null||token0AddressCallState===void 0?void 0:(_token0AddressCallSta=token0AddressCallState.result)===null||_token0AddressCallSta===void 0?void 0:_token0AddressCallSta[0];var token1Address=(_useSingleCallResult=useSingleCallResult(pair,'token1',undefined,NEVER_RELOAD))===null||_useSingleCallResult===void 0?void 0:(_useSingleCallResult$=_useSingleCallResult.result)===null||_useSingleCallResult$===void 0?void 0:_useSingleCallResult$[0];// get tokens\nvar token0=useToken(token0Address);var token1=useToken(token1Address);// get liquidity token balance\nvar liquidityToken=useMemo(function(){return chainId&&validatedAddress?new Token(chainId,validatedAddress,18):undefined;},[chainId,validatedAddress]);// get data required for V2 pair migration\nvar pairBalance=useTokenBalance(account!==null&&account!==void 0?account:undefined,liquidityToken);var totalSupply=useTotalSupply(liquidityToken);var _ref5=(_useSingleCallResult$2=(_useSingleCallResult2=useSingleCallResult(pair,'getReserves'))===null||_useSingleCallResult2===void 0?void 0:_useSingleCallResult2.result)!==null&&_useSingleCallResult$2!==void 0?_useSingleCallResult$2:[],_ref6=_slicedToArray(_ref5,2),reserve0Raw=_ref6[0],reserve1Raw=_ref6[1];var reserve0=useMemo(function(){return token0&&reserve0Raw?CurrencyAmount.fromRawAmount(token0,reserve0Raw):undefined;},[token0,reserve0Raw]);var reserve1=useMemo(function(){return token1&&reserve1Raw?CurrencyAmount.fromRawAmount(token1,reserve1Raw):undefined;},[token1,reserve1Raw]);// redirect for invalid url params\nif(!validatedAddress||!pair||pair&&(token0AddressCallState===null||token0AddressCallState===void 0?void 0:token0AddressCallState.valid)&&!(token0AddressCallState===null||token0AddressCallState===void 0?void 0:token0AddressCallState.loading)&&!(token0AddressCallState===null||token0AddressCallState===void 0?void 0:token0AddressCallState.error)&&!token0Address){console.error('Invalid pair address');return/*#__PURE__*/_jsx(Navigate,{to:\"/migrate/v2\",replace:true});}return/*#__PURE__*/_jsx(BodyWrapper,{style:{padding:24},children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"16px\",children:[/*#__PURE__*/_jsxs(AutoRow,{style:{alignItems:'center',justifyContent:'space-between'},gap:\"8px\",children:[/*#__PURE__*/_jsx(BackArrow,{to:\"/migrate/v2\"}),/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"Migrate V2 Liquidity\"})}),/*#__PURE__*/_jsx(SettingsTab,{placeholderSlippage:DEFAULT_MIGRATE_SLIPPAGE_TOLERANCE})]}),!account?/*#__PURE__*/_jsx(ThemedText.DeprecatedLargeHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"You must connect an account.\"})}):pairBalance&&totalSupply&&reserve0&&reserve1&&token0&&token1?/*#__PURE__*/_jsx(V2PairMigration,{pair:pair,pairBalance:pairBalance,totalSupply:totalSupply,reserve0:reserve0,reserve1:reserve1,token0:token0,token1:token1}):/*#__PURE__*/_jsx(EmptyState,{message:/*#__PURE__*/_jsx(Trans,{id:\"Loading\"})})]})});}","map":{"version":3,"names":["CurrencyAmount","Percent","Price","Token","FeeAmount","Pool","Position","priceToClosestTick","TickMath","useWeb3React","sendEvent","Badge","BadgeVariant","ButtonConfirmed","BlueCard","DarkGrayCard","LightCard","YellowCard","DoubleCurrencyLogo","FeeSelector","RangeSelector","RateToggle","SettingsTab","Dots","ApprovalState","useApproveCallback","useCurrentBlockTimestamp","PoolState","usePool","useTransactionDeadline","useV2LiquidityTokenPermit","JSBI","NEVER_RELOAD","useSingleCallResult","useCallback","useEffect","useMemo","useState","AlertCircle","AlertTriangle","ArrowDown","Navigate","useParams","Text","useAppDispatch","Bound","resetMintState","useRangeHopCallbacks","useV3DerivedMintInfo","useV3MintActionHandlers","useIsTransactionPending","useTransactionAdder","useUserSlippageToleranceWithDefault","formatCurrencyAmount","unwrappedToken","AutoColumn","FormattedCurrencyAmount","CurrencyLogo","AutoRow","RowBetween","RowFixed","V2_FACTORY_ADDRESSES","WRAPPED_NATIVE_CURRENCY","useToken","usePairContract","useV2MigratorContract","useIsArgentWallet","useTotalSupply","useTokenBalance","TransactionType","BackArrow","ExternalLink","ThemedText","isAddress","calculateGasMargin","currencyId","ExplorerDataType","getExplorerLink","BodyWrapper","ZERO","BigInt","DEFAULT_MIGRATE_SLIPPAGE_TOLERANCE","EmptyState","message","minHeight","justifyContent","alignItems","LiquidityInfo","token0Amount","token1Amount","currency0","currency","currency1","marginRight","symbol","percentageToMigrate","V2PairMigration","pair","pairBalance","totalSupply","reserve0","reserve1","token0","token1","chainId","account","theme","useTheme","v2FactoryAddress","undefined","pairFactory","isNotUniswap","result","deadline","blockTimestamp","allowedSlippage","token0Value","fromRawAmount","divide","multiply","quotient","token1Value","MEDIUM","feeAmount","setFeeAmount","poolState","pool","noLiquidity","NOT_EXISTS","v2SpotPrice","v3SpotPrice","EXISTS","token0Price","priceDifferenceFraction","subtract","lessThan","largePriceDifference","baseToken","setBaseToken","ticks","pricesAtTicks","invertPrice","invalidRange","outOfRange","ticksAtLimit","tickLower","LOWER","tickUpper","UPPER","priceLower","priceUpper","equals","getDecrementLower","getIncrementLower","getDecrementUpper","getIncrementUpper","onLeftRangeInput","onRightRangeInput","tick","tickCurrent","sqrtPrice","sqrtRatioX96","getSqrtRatioAtTick","position","fromAmounts","amount0","amount1","useFullPrecision","mintAmountsWithSlippage","v3Amount0Min","v3Amount1Min","refund0","refund1","confirmingMigration","setConfirmingMigration","pendingMigrationHash","setPendingMigrationHash","migrator","address","approval","approveManually","signatureData","gatherPermitSignature","isArgentWallet","approve","code","addTransaction","isMigrationPending","migrate","deadlineToUse","data","push","interface","encodeFunctionData","toString","v","r","s","liquidityToMigrate","fee","amount0Min","amount1Min","recipient","refundAsETH","estimateGas","multicall","then","gasEstimate","gasLimit","response","category","action","label","type","MIGRATE_LIQUIDITY_V3","baseCurrencyId","quoteCurrencyId","isFork","hash","catch","isSuccessfullyMigrated","equal","fontWeight","ADDRESS","marginLeft","WARNING","display","PRIMARY","flexDirection","textPrimary","marginBottom","opacity","marginTop","invert","toSignificant","base","deprecated_yellow3","flex","APPROVED","NOT_APPROVED","PENDING","MigrateV2Pair","dispatch","validatedAddress","token0AddressCallState","token0Address","token1Address","liquidityToken","reserve0Raw","reserve1Raw","valid","loading","error","console","padding"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/pages/MigrateV2/MigrateV2Pair.tsx"],"sourcesContent":["import { Contract } from '@ethersproject/contracts'\nimport type { TransactionResponse } from '@ethersproject/providers'\nimport { Trans } from '@lingui/macro'\nimport { CurrencyAmount, Fraction, Percent, Price, Token } from '@uniswap/sdk-core'\nimport { FeeAmount, Pool, Position, priceToClosestTick, TickMath } from '@uniswap/v3-sdk'\nimport { useWeb3React } from '@web3-react/core'\nimport { sendEvent } from 'components/analytics'\nimport Badge, { BadgeVariant } from 'components/Badge'\nimport { ButtonConfirmed } from 'components/Button'\nimport { BlueCard, DarkGrayCard, LightCard, YellowCard } from 'components/Card'\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\nimport FeeSelector from 'components/FeeSelector'\nimport RangeSelector from 'components/RangeSelector'\nimport RateToggle from 'components/RateToggle'\nimport SettingsTab from 'components/Settings'\nimport { Dots } from 'components/swap/styleds'\nimport { ApprovalState, useApproveCallback } from 'hooks/useApproveCallback'\nimport useCurrentBlockTimestamp from 'hooks/useCurrentBlockTimestamp'\nimport { PoolState, usePool } from 'hooks/usePools'\nimport useTransactionDeadline from 'hooks/useTransactionDeadline'\nimport { useV2LiquidityTokenPermit } from 'hooks/useV2LiquidityTokenPermit'\nimport JSBI from 'jsbi'\nimport { NEVER_RELOAD, useSingleCallResult } from 'lib/hooks/multicall'\nimport { ReactNode, useCallback, useEffect, useMemo, useState } from 'react'\nimport { AlertCircle, AlertTriangle, ArrowDown } from 'react-feather'\nimport { Navigate, useParams } from 'react-router-dom'\nimport { Text } from 'rebass'\nimport { useAppDispatch } from 'state/hooks'\nimport { Bound, resetMintState } from 'state/mint/v3/actions'\nimport { useRangeHopCallbacks, useV3DerivedMintInfo, useV3MintActionHandlers } from 'state/mint/v3/hooks'\nimport { useIsTransactionPending, useTransactionAdder } from 'state/transactions/hooks'\nimport { useUserSlippageToleranceWithDefault } from 'state/user/hooks'\nimport { useTheme } from 'styled-components/macro'\nimport { formatCurrencyAmount } from 'utils/formatCurrencyAmount'\nimport { unwrappedToken } from 'utils/unwrappedToken'\n\nimport { AutoColumn } from '../../components/Column'\nimport FormattedCurrencyAmount from '../../components/FormattedCurrencyAmount'\nimport CurrencyLogo from '../../components/Logo/CurrencyLogo'\nimport { AutoRow, RowBetween, RowFixed } from '../../components/Row'\nimport { V2_FACTORY_ADDRESSES } from '../../constants/addresses'\nimport { WRAPPED_NATIVE_CURRENCY } from '../../constants/tokens'\nimport { useToken } from '../../hooks/Tokens'\nimport { usePairContract, useV2MigratorContract } from '../../hooks/useContract'\nimport useIsArgentWallet from '../../hooks/useIsArgentWallet'\nimport { useTotalSupply } from '../../hooks/useTotalSupply'\nimport { useTokenBalance } from '../../state/connection/hooks'\nimport { TransactionType } from '../../state/transactions/types'\nimport { BackArrow, ExternalLink, ThemedText } from '../../theme'\nimport { isAddress } from '../../utils'\nimport { calculateGasMargin } from '../../utils/calculateGasMargin'\nimport { currencyId } from '../../utils/currencyId'\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink'\nimport { BodyWrapper } from '../AppBody'\n\nconst ZERO = JSBI.BigInt(0)\n\nconst DEFAULT_MIGRATE_SLIPPAGE_TOLERANCE = new Percent(75, 10_000)\n\nfunction EmptyState({ message }: { message: ReactNode }) {\n  return (\n    <AutoColumn style={{ minHeight: 200, justifyContent: 'center', alignItems: 'center' }}>\n      <ThemedText.DeprecatedBody>{message}</ThemedText.DeprecatedBody>\n    </AutoColumn>\n  )\n}\n\nfunction LiquidityInfo({\n  token0Amount,\n  token1Amount,\n}: {\n  token0Amount: CurrencyAmount<Token>\n  token1Amount: CurrencyAmount<Token>\n}) {\n  const currency0 = unwrappedToken(token0Amount.currency)\n  const currency1 = unwrappedToken(token1Amount.currency)\n\n  return (\n    <AutoColumn gap=\"sm\">\n      <RowBetween>\n        <RowFixed>\n          <CurrencyLogo size=\"20px\" style={{ marginRight: '8px' }} currency={currency0} />\n          <Text fontSize={16} fontWeight={500}>\n            {currency0.symbol}\n          </Text>\n        </RowFixed>\n        <Text fontSize={16} fontWeight={500}>\n          <FormattedCurrencyAmount currencyAmount={token0Amount} />\n        </Text>\n      </RowBetween>\n      <RowBetween>\n        <RowFixed>\n          <CurrencyLogo size=\"20px\" style={{ marginRight: '8px' }} currency={currency1} />\n          <Text fontSize={16} fontWeight={500}>\n            {currency1.symbol}\n          </Text>\n        </RowFixed>\n\n        <Text fontSize={16} fontWeight={500}>\n          <FormattedCurrencyAmount currencyAmount={token1Amount} />\n        </Text>\n      </RowBetween>\n    </AutoColumn>\n  )\n}\n\n// hard-code this for now\nconst percentageToMigrate = 100\n\nfunction V2PairMigration({\n  pair,\n  pairBalance,\n  totalSupply,\n  reserve0,\n  reserve1,\n  token0,\n  token1,\n}: {\n  pair: Contract\n  pairBalance: CurrencyAmount<Token>\n  totalSupply: CurrencyAmount<Token>\n  reserve0: CurrencyAmount<Token>\n  reserve1: CurrencyAmount<Token>\n  token0: Token\n  token1: Token\n}) {\n  const { chainId, account } = useWeb3React()\n  const theme = useTheme()\n  const v2FactoryAddress = chainId ? V2_FACTORY_ADDRESSES[chainId] : undefined\n\n  const pairFactory = useSingleCallResult(pair, 'factory')\n  const isNotUniswap = pairFactory.result?.[0] && pairFactory.result[0] !== v2FactoryAddress\n\n  const deadline = useTransactionDeadline() // custom from users settings\n  const blockTimestamp = useCurrentBlockTimestamp()\n  const allowedSlippage = useUserSlippageToleranceWithDefault(DEFAULT_MIGRATE_SLIPPAGE_TOLERANCE) // custom from users\n\n  const currency0 = unwrappedToken(token0)\n  const currency1 = unwrappedToken(token1)\n\n  // this is just getLiquidityValue with the fee off, but for the passed pair\n  const token0Value = useMemo(\n    () =>\n      CurrencyAmount.fromRawAmount(\n        token0,\n        JSBI.divide(JSBI.multiply(pairBalance.quotient, reserve0.quotient), totalSupply.quotient)\n      ),\n    [token0, pairBalance, reserve0, totalSupply]\n  )\n  const token1Value = useMemo(\n    () =>\n      CurrencyAmount.fromRawAmount(\n        token1,\n        JSBI.divide(JSBI.multiply(pairBalance.quotient, reserve1.quotient), totalSupply.quotient)\n      ),\n    [token1, pairBalance, reserve1, totalSupply]\n  )\n\n  // set up v3 pool\n  const [feeAmount, setFeeAmount] = useState(FeeAmount.MEDIUM)\n  const [poolState, pool] = usePool(token0, token1, feeAmount)\n  const noLiquidity = poolState === PoolState.NOT_EXISTS\n\n  // get spot prices + price difference\n  const v2SpotPrice = useMemo(\n    () => new Price(token0, token1, reserve0.quotient, reserve1.quotient),\n    [token0, token1, reserve0, reserve1]\n  )\n  const v3SpotPrice = poolState === PoolState.EXISTS ? pool?.token0Price : undefined\n\n  let priceDifferenceFraction: Fraction | undefined =\n    v2SpotPrice && v3SpotPrice ? v3SpotPrice.divide(v2SpotPrice).subtract(1).multiply(100) : undefined\n  if (priceDifferenceFraction?.lessThan(ZERO)) {\n    priceDifferenceFraction = priceDifferenceFraction.multiply(-1)\n  }\n\n  const largePriceDifference = priceDifferenceFraction && !priceDifferenceFraction?.lessThan(JSBI.BigInt(2))\n\n  // the following is a small hack to get access to price range data/input handlers\n  const [baseToken, setBaseToken] = useState(token0)\n  const { ticks, pricesAtTicks, invertPrice, invalidRange, outOfRange, ticksAtLimit } = useV3DerivedMintInfo(\n    token0,\n    token1,\n    feeAmount,\n    baseToken\n  )\n\n  // get value and prices at ticks\n  const { [Bound.LOWER]: tickLower, [Bound.UPPER]: tickUpper } = ticks\n  const { [Bound.LOWER]: priceLower, [Bound.UPPER]: priceUpper } = pricesAtTicks\n\n  const { getDecrementLower, getIncrementLower, getDecrementUpper, getIncrementUpper } = useRangeHopCallbacks(\n    baseToken,\n    baseToken.equals(token0) ? token1 : token0,\n    feeAmount,\n    tickLower,\n    tickUpper\n  )\n\n  const { onLeftRangeInput, onRightRangeInput } = useV3MintActionHandlers(noLiquidity)\n\n  // the v3 tick is either the pool's tickCurrent, or the tick closest to the v2 spot price\n  const tick = pool?.tickCurrent ?? priceToClosestTick(v2SpotPrice)\n  // the price is either the current v3 price, or the price at the tick\n  const sqrtPrice = pool?.sqrtRatioX96 ?? TickMath.getSqrtRatioAtTick(tick)\n  const position =\n    typeof tickLower === 'number' && typeof tickUpper === 'number' && !invalidRange\n      ? Position.fromAmounts({\n          pool: pool ?? new Pool(token0, token1, feeAmount, sqrtPrice, 0, tick, []),\n          tickLower,\n          tickUpper,\n          amount0: token0Value.quotient,\n          amount1: token1Value.quotient,\n          useFullPrecision: true, // we want full precision for the theoretical position\n        })\n      : undefined\n\n  const { amount0: v3Amount0Min, amount1: v3Amount1Min } = useMemo(\n    () => (position ? position.mintAmountsWithSlippage(allowedSlippage) : { amount0: undefined, amount1: undefined }),\n    [position, allowedSlippage]\n  )\n\n  const refund0 = useMemo(\n    () =>\n      position && CurrencyAmount.fromRawAmount(token0, JSBI.subtract(token0Value.quotient, position.amount0.quotient)),\n    [token0Value, position, token0]\n  )\n  const refund1 = useMemo(\n    () =>\n      position && CurrencyAmount.fromRawAmount(token1, JSBI.subtract(token1Value.quotient, position.amount1.quotient)),\n    [token1Value, position, token1]\n  )\n\n  const [confirmingMigration, setConfirmingMigration] = useState<boolean>(false)\n  const [pendingMigrationHash, setPendingMigrationHash] = useState<string | null>(null)\n\n  const migrator = useV2MigratorContract()\n\n  // approvals\n  const [approval, approveManually] = useApproveCallback(pairBalance, migrator?.address)\n  const { signatureData, gatherPermitSignature } = useV2LiquidityTokenPermit(pairBalance, migrator?.address)\n\n  const isArgentWallet = useIsArgentWallet()\n\n  const approve = useCallback(async () => {\n    if (isNotUniswap || isArgentWallet) {\n      // sushi has to be manually approved\n      await approveManually()\n    } else if (gatherPermitSignature) {\n      try {\n        await gatherPermitSignature()\n      } catch (error) {\n        // try to approve if gatherPermitSignature failed for any reason other than the user rejecting it\n        if (error?.code !== 4001) {\n          await approveManually()\n        }\n      }\n    } else {\n      await approveManually()\n    }\n  }, [isNotUniswap, isArgentWallet, gatherPermitSignature, approveManually])\n\n  const addTransaction = useTransactionAdder()\n  const isMigrationPending = useIsTransactionPending(pendingMigrationHash ?? undefined)\n\n  const migrate = useCallback(() => {\n    if (\n      !migrator ||\n      !account ||\n      !deadline ||\n      !blockTimestamp ||\n      typeof tickLower !== 'number' ||\n      typeof tickUpper !== 'number' ||\n      !v3Amount0Min ||\n      !v3Amount1Min ||\n      !chainId\n    )\n      return\n\n    const deadlineToUse = signatureData?.deadline ?? deadline\n\n    const data: string[] = []\n\n    // permit if necessary\n    if (signatureData) {\n      data.push(\n        migrator.interface.encodeFunctionData('selfPermit', [\n          pair.address,\n          `0x${pairBalance.quotient.toString(16)}`,\n          deadlineToUse,\n          signatureData.v,\n          signatureData.r,\n          signatureData.s,\n        ])\n      )\n    }\n\n    // create/initialize pool if necessary\n    if (noLiquidity) {\n      data.push(\n        migrator.interface.encodeFunctionData('createAndInitializePoolIfNecessary', [\n          token0.address,\n          token1.address,\n          feeAmount,\n          `0x${sqrtPrice.toString(16)}`,\n        ])\n      )\n    }\n\n    // TODO could save gas by not doing this in multicall\n    data.push(\n      migrator.interface.encodeFunctionData('migrate', [\n        {\n          pair: pair.address,\n          liquidityToMigrate: `0x${pairBalance.quotient.toString(16)}`,\n          percentageToMigrate,\n          token0: token0.address,\n          token1: token1.address,\n          fee: feeAmount,\n          tickLower,\n          tickUpper,\n          amount0Min: `0x${v3Amount0Min.toString(16)}`,\n          amount1Min: `0x${v3Amount1Min.toString(16)}`,\n          recipient: account,\n          deadline: deadlineToUse,\n          refundAsETH: true, // hard-code this for now\n        },\n      ])\n    )\n\n    setConfirmingMigration(true)\n\n    migrator.estimateGas\n      .multicall(data)\n      .then((gasEstimate) => {\n        return migrator\n          .multicall(data, { gasLimit: calculateGasMargin(gasEstimate) })\n          .then((response: TransactionResponse) => {\n            sendEvent({\n              category: 'Migrate',\n              action: `${isNotUniswap ? 'SushiSwap' : 'V2'}->V3`,\n              label: `${currency0.symbol}/${currency1.symbol}`,\n            })\n\n            addTransaction(response, {\n              type: TransactionType.MIGRATE_LIQUIDITY_V3,\n              baseCurrencyId: currencyId(currency0),\n              quoteCurrencyId: currencyId(currency1),\n              isFork: isNotUniswap,\n            })\n            setPendingMigrationHash(response.hash)\n          })\n      })\n      .catch(() => {\n        setConfirmingMigration(false)\n      })\n  }, [\n    chainId,\n    isNotUniswap,\n    migrator,\n    noLiquidity,\n    blockTimestamp,\n    token0,\n    token1,\n    feeAmount,\n    pairBalance,\n    tickLower,\n    tickUpper,\n    sqrtPrice,\n    v3Amount0Min,\n    v3Amount1Min,\n    account,\n    deadline,\n    signatureData,\n    addTransaction,\n    pair,\n    currency0,\n    currency1,\n  ])\n\n  const isSuccessfullyMigrated = !!pendingMigrationHash && JSBI.equal(pairBalance.quotient, ZERO)\n\n  return (\n    <AutoColumn gap=\"20px\">\n      <ThemedText.DeprecatedBody my={9} style={{ fontWeight: 400 }}>\n        <Trans>\n          This tool will safely migrate your {isNotUniswap ? 'SushiSwap' : 'V2'} liquidity to V3. The process is\n          completely trustless thanks to the{' '}\n        </Trans>\n        {chainId && migrator && (\n          <ExternalLink href={getExplorerLink(chainId, migrator.address, ExplorerDataType.ADDRESS)}>\n            <ThemedText.DeprecatedBlue display=\"inline\">\n              <Trans>Uniswap migration contractâ†—</Trans>\n            </ThemedText.DeprecatedBlue>\n          </ExternalLink>\n        )}\n        .\n      </ThemedText.DeprecatedBody>\n\n      <LightCard>\n        <AutoColumn gap=\"lg\">\n          <RowBetween>\n            <RowFixed style={{ marginLeft: '8px' }}>\n              <DoubleCurrencyLogo currency0={currency0} currency1={currency1} margin={false} size={20} />\n              <ThemedText.DeprecatedMediumHeader style={{ marginLeft: '8px' }}>\n                <Trans>\n                  {currency0.symbol}/{currency1.symbol} LP Tokens\n                </Trans>\n              </ThemedText.DeprecatedMediumHeader>\n            </RowFixed>\n            <Badge variant={BadgeVariant.WARNING}>{isNotUniswap ? 'Sushi' : 'V2'}</Badge>\n          </RowBetween>\n          <LiquidityInfo token0Amount={token0Value} token1Amount={token1Value} />\n        </AutoColumn>\n      </LightCard>\n\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <ArrowDown size={24} />\n      </div>\n\n      <LightCard>\n        <AutoColumn gap=\"lg\">\n          <RowBetween>\n            <RowFixed style={{ marginLeft: '8px' }}>\n              <DoubleCurrencyLogo currency0={currency0} currency1={currency1} margin={false} size={20} />\n              <ThemedText.DeprecatedMediumHeader style={{ marginLeft: '8px' }}>\n                <Trans>\n                  {currency0.symbol}/{currency1.symbol} LP NFT\n                </Trans>\n              </ThemedText.DeprecatedMediumHeader>\n            </RowFixed>\n            <Badge variant={BadgeVariant.PRIMARY}>V3</Badge>\n          </RowBetween>\n\n          <FeeSelector feeAmount={feeAmount} handleFeePoolSelect={setFeeAmount} />\n          {noLiquidity && (\n            <BlueCard style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n              <AlertCircle color={theme.textPrimary} style={{ marginBottom: '12px', opacity: 0.8 }} />\n              <ThemedText.DeprecatedBody\n                fontSize={14}\n                style={{ marginBottom: 8, fontWeight: 500, opacity: 0.8 }}\n                textAlign=\"center\"\n              >\n                <Trans>\n                  You are the first liquidity provider for this Uniswap V3 pool. Your liquidity will migrate at the\n                  current {isNotUniswap ? 'SushiSwap' : 'V2'} price.\n                </Trans>\n              </ThemedText.DeprecatedBody>\n\n              <ThemedText.DeprecatedBody\n                fontWeight={500}\n                textAlign=\"center\"\n                fontSize={14}\n                style={{ marginTop: '8px', opacity: 0.8 }}\n              >\n                <Trans>Your transaction cost will be much higher as it includes the gas to create the pool.</Trans>\n              </ThemedText.DeprecatedBody>\n\n              {v2SpotPrice && (\n                <AutoColumn gap=\"sm\" style={{ marginTop: '12px' }}>\n                  <RowBetween>\n                    <ThemedText.DeprecatedBody fontWeight={500} fontSize={14}>\n                      <Trans>\n                        {isNotUniswap ? 'SushiSwap' : 'V2'} {invertPrice ? currency1.symbol : currency0.symbol} Price:\n                      </Trans>{' '}\n                      {invertPrice\n                        ? `${v2SpotPrice?.invert()?.toSignificant(6)} ${currency0.symbol}`\n                        : `${v2SpotPrice?.toSignificant(6)} ${currency1.symbol}`}\n                    </ThemedText.DeprecatedBody>\n                  </RowBetween>\n                </AutoColumn>\n              )}\n            </BlueCard>\n          )}\n\n          {largePriceDifference ? (\n            <YellowCard>\n              <AutoColumn gap=\"sm\">\n                <RowBetween>\n                  <ThemedText.DeprecatedBody fontSize={14}>\n                    <Trans>\n                      {isNotUniswap ? 'SushiSwap' : 'V2'} {invertPrice ? currency1.symbol : currency0.symbol} Price:\n                    </Trans>\n                  </ThemedText.DeprecatedBody>\n                  <ThemedText.DeprecatedBlack fontSize={14}>\n                    {invertPrice\n                      ? `${v2SpotPrice?.invert()?.toSignificant(6)} ${currency0.symbol}`\n                      : `${v2SpotPrice?.toSignificant(6)} ${currency1.symbol}`}\n                  </ThemedText.DeprecatedBlack>\n                </RowBetween>\n\n                <RowBetween>\n                  <ThemedText.DeprecatedBody fontSize={14}>\n                    <Trans>V3 {invertPrice ? currency1.symbol : currency0.symbol} Price:</Trans>\n                  </ThemedText.DeprecatedBody>\n                  <ThemedText.DeprecatedBlack fontSize={14}>\n                    {invertPrice\n                      ? `${v3SpotPrice?.invert()?.toSignificant(6)} ${currency0.symbol}`\n                      : `${v3SpotPrice?.toSignificant(6)} ${currency1.symbol}`}\n                  </ThemedText.DeprecatedBlack>\n                </RowBetween>\n\n                <RowBetween>\n                  <ThemedText.DeprecatedBody fontSize={14} color=\"inherit\">\n                    <Trans>Price Difference:</Trans>\n                  </ThemedText.DeprecatedBody>\n                  <ThemedText.DeprecatedBlack fontSize={14} color=\"inherit\">\n                    <Trans>{priceDifferenceFraction?.toSignificant(4)}%</Trans>\n                  </ThemedText.DeprecatedBlack>\n                </RowBetween>\n              </AutoColumn>\n              <ThemedText.DeprecatedBody fontSize={14} style={{ marginTop: 8, fontWeight: 400 }}>\n                <Trans>\n                  You should only deposit liquidity into Uniswap V3 at a price you believe is correct. <br />\n                  If the price seems incorrect, you can either make a swap to move the price or wait for someone else to\n                  do so.\n                </Trans>\n              </ThemedText.DeprecatedBody>\n            </YellowCard>\n          ) : !noLiquidity && v3SpotPrice ? (\n            <RowBetween>\n              <ThemedText.DeprecatedBody fontSize={14}>\n                <Trans>V3 {invertPrice ? currency1.symbol : currency0.symbol} Price:</Trans>\n              </ThemedText.DeprecatedBody>\n              <ThemedText.DeprecatedBlack fontSize={14}>\n                {invertPrice\n                  ? `${v3SpotPrice?.invert()?.toSignificant(6)} ${currency0.symbol}`\n                  : `${v3SpotPrice?.toSignificant(6)} ${currency1.symbol}`}\n              </ThemedText.DeprecatedBlack>\n            </RowBetween>\n          ) : null}\n\n          <RowBetween>\n            <ThemedText.DeprecatedLabel>\n              <Trans>Set Price Range</Trans>\n            </ThemedText.DeprecatedLabel>\n            <RateToggle\n              currencyA={invertPrice ? currency1 : currency0}\n              currencyB={invertPrice ? currency0 : currency1}\n              handleRateToggle={() => {\n                onLeftRangeInput('')\n                onRightRangeInput('')\n                setBaseToken((base) => (base.equals(token0) ? token1 : token0))\n              }}\n            />\n          </RowBetween>\n\n          <RangeSelector\n            priceLower={priceLower}\n            priceUpper={priceUpper}\n            getDecrementLower={getDecrementLower}\n            getIncrementLower={getIncrementLower}\n            getDecrementUpper={getDecrementUpper}\n            getIncrementUpper={getIncrementUpper}\n            onLeftRangeInput={onLeftRangeInput}\n            onRightRangeInput={onRightRangeInput}\n            currencyA={invertPrice ? currency1 : currency0}\n            currencyB={invertPrice ? currency0 : currency1}\n            feeAmount={feeAmount}\n            ticksAtLimit={ticksAtLimit}\n          />\n\n          {outOfRange ? (\n            <YellowCard padding=\"8px 12px\" $borderRadius=\"12px\">\n              <RowBetween>\n                <AlertTriangle stroke={theme.deprecated_yellow3} size=\"16px\" />\n                <ThemedText.DeprecatedYellow ml=\"12px\" fontSize=\"12px\">\n                  <Trans>\n                    Your position will not earn fees or be used in trades until the market price moves into your range.\n                  </Trans>\n                </ThemedText.DeprecatedYellow>\n              </RowBetween>\n            </YellowCard>\n          ) : null}\n\n          {invalidRange ? (\n            <YellowCard padding=\"8px 12px\" $borderRadius=\"12px\">\n              <RowBetween>\n                <AlertTriangle stroke={theme.deprecated_yellow3} size=\"16px\" />\n                <ThemedText.DeprecatedYellow ml=\"12px\" fontSize=\"12px\">\n                  <Trans>Invalid range selected. The min price must be lower than the max price.</Trans>\n                </ThemedText.DeprecatedYellow>\n              </RowBetween>\n            </YellowCard>\n          ) : null}\n\n          {position ? (\n            <DarkGrayCard>\n              <AutoColumn gap=\"md\">\n                <LiquidityInfo token0Amount={position.amount0} token1Amount={position.amount1} />\n                {chainId && refund0 && refund1 ? (\n                  <ThemedText.DeprecatedBlack fontSize={12}>\n                    <Trans>\n                      At least {formatCurrencyAmount(refund0, 4)}{' '}\n                      {chainId && WRAPPED_NATIVE_CURRENCY[chainId]?.equals(token0) ? 'ETH' : token0.symbol} and{' '}\n                      {formatCurrencyAmount(refund1, 4)}{' '}\n                      {chainId && WRAPPED_NATIVE_CURRENCY[chainId]?.equals(token1) ? 'ETH' : token1.symbol} will be\n                      refunded to your wallet due to selected price range.\n                    </Trans>\n                  </ThemedText.DeprecatedBlack>\n                ) : null}\n              </AutoColumn>\n            </DarkGrayCard>\n          ) : null}\n\n          <AutoColumn gap=\"md\">\n            {!isSuccessfullyMigrated && !isMigrationPending ? (\n              <AutoColumn gap=\"md\" style={{ flex: '1' }}>\n                <ButtonConfirmed\n                  confirmed={approval === ApprovalState.APPROVED || signatureData !== null}\n                  disabled={\n                    approval !== ApprovalState.NOT_APPROVED ||\n                    signatureData !== null ||\n                    !v3Amount0Min ||\n                    !v3Amount1Min ||\n                    invalidRange ||\n                    confirmingMigration\n                  }\n                  onClick={approve}\n                >\n                  {approval === ApprovalState.PENDING ? (\n                    <Dots>\n                      <Trans>Approving</Trans>\n                    </Dots>\n                  ) : approval === ApprovalState.APPROVED || signatureData !== null ? (\n                    <Trans>Allowed</Trans>\n                  ) : (\n                    <Trans>Allow LP token migration</Trans>\n                  )}\n                </ButtonConfirmed>\n              </AutoColumn>\n            ) : null}\n            <AutoColumn gap=\"md\" style={{ flex: '1' }}>\n              <ButtonConfirmed\n                confirmed={isSuccessfullyMigrated}\n                disabled={\n                  !v3Amount0Min ||\n                  !v3Amount1Min ||\n                  invalidRange ||\n                  (approval !== ApprovalState.APPROVED && signatureData === null) ||\n                  confirmingMigration ||\n                  isMigrationPending ||\n                  isSuccessfullyMigrated\n                }\n                onClick={migrate}\n              >\n                {isSuccessfullyMigrated ? (\n                  'Success!'\n                ) : isMigrationPending ? (\n                  <Dots>\n                    <Trans>Migrating</Trans>\n                  </Dots>\n                ) : (\n                  <Trans>Migrate</Trans>\n                )}\n              </ButtonConfirmed>\n            </AutoColumn>\n          </AutoColumn>\n        </AutoColumn>\n      </LightCard>\n    </AutoColumn>\n  )\n}\n\nexport default function MigrateV2Pair() {\n  const { address } = useParams<{ address: string }>()\n  // reset mint state on component mount, and as a cleanup (on unmount)\n  const dispatch = useAppDispatch()\n  useEffect(() => {\n    dispatch(resetMintState())\n    return () => {\n      dispatch(resetMintState())\n    }\n  }, [dispatch])\n\n  const { chainId, account } = useWeb3React()\n\n  // get pair contract\n  const validatedAddress = isAddress(address)\n  const pair = usePairContract(validatedAddress ? validatedAddress : undefined)\n\n  // get token addresses from pair contract\n  const token0AddressCallState = useSingleCallResult(pair, 'token0', undefined, NEVER_RELOAD)\n  const token0Address = token0AddressCallState?.result?.[0]\n  const token1Address = useSingleCallResult(pair, 'token1', undefined, NEVER_RELOAD)?.result?.[0]\n\n  // get tokens\n  const token0 = useToken(token0Address)\n  const token1 = useToken(token1Address)\n\n  // get liquidity token balance\n  const liquidityToken: Token | undefined = useMemo(\n    () => (chainId && validatedAddress ? new Token(chainId, validatedAddress, 18) : undefined),\n    [chainId, validatedAddress]\n  )\n\n  // get data required for V2 pair migration\n  const pairBalance = useTokenBalance(account ?? undefined, liquidityToken)\n  const totalSupply = useTotalSupply(liquidityToken)\n  const [reserve0Raw, reserve1Raw] = useSingleCallResult(pair, 'getReserves')?.result ?? []\n  const reserve0 = useMemo(\n    () => (token0 && reserve0Raw ? CurrencyAmount.fromRawAmount(token0, reserve0Raw) : undefined),\n    [token0, reserve0Raw]\n  )\n  const reserve1 = useMemo(\n    () => (token1 && reserve1Raw ? CurrencyAmount.fromRawAmount(token1, reserve1Raw) : undefined),\n    [token1, reserve1Raw]\n  )\n\n  // redirect for invalid url params\n  if (\n    !validatedAddress ||\n    !pair ||\n    (pair &&\n      token0AddressCallState?.valid &&\n      !token0AddressCallState?.loading &&\n      !token0AddressCallState?.error &&\n      !token0Address)\n  ) {\n    console.error('Invalid pair address')\n    return <Navigate to=\"/migrate/v2\" replace />\n  }\n\n  return (\n    <BodyWrapper style={{ padding: 24 }}>\n      <AutoColumn gap=\"16px\">\n        <AutoRow style={{ alignItems: 'center', justifyContent: 'space-between' }} gap=\"8px\">\n          <BackArrow to=\"/migrate/v2\" />\n          <ThemedText.DeprecatedMediumHeader>\n            <Trans>Migrate V2 Liquidity</Trans>\n          </ThemedText.DeprecatedMediumHeader>\n          <SettingsTab placeholderSlippage={DEFAULT_MIGRATE_SLIPPAGE_TOLERANCE} />\n        </AutoRow>\n\n        {!account ? (\n          <ThemedText.DeprecatedLargeHeader>\n            <Trans>You must connect an account.</Trans>\n          </ThemedText.DeprecatedLargeHeader>\n        ) : pairBalance && totalSupply && reserve0 && reserve1 && token0 && token1 ? (\n          <V2PairMigration\n            pair={pair}\n            pairBalance={pairBalance}\n            totalSupply={totalSupply}\n            reserve0={reserve0}\n            reserve1={reserve1}\n            token0={token0}\n            token1={token1}\n          />\n        ) : (\n          <EmptyState message={<Trans>Loading</Trans>} />\n        )}\n      </AutoColumn>\n    </BodyWrapper>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}