{"ast":null,"code":"import { css as _css } from \"styled-components\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/collection/CollectionNfts.tsx\",\n  _s = $RefreshSig$();\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { TraceEvent } from '@uniswap/analytics';\nimport { BrowserEvent, ElementName, EventName } from '@uniswap/analytics-events';\nimport { useWeb3React } from '@web3-react/core';\nimport clsx from 'clsx';\nimport { OpacityHoverState } from 'components/Common';\nimport { parseEther } from 'ethers/lib/utils';\nimport { NftStandard } from 'graphql/data/__generated__/types-and-hooks';\nimport { ASSET_PAGE_SIZE, useNftAssets } from 'graphql/data/nft/Asset';\nimport useDebounce from 'hooks/useDebounce';\nimport { useScreenSize } from 'hooks/useScreenSize';\nimport { AnimatedBox, Box } from 'nft/components/Box';\nimport { CollectionSearch, FilterButton } from 'nft/components/collection';\nimport { CollectionAsset } from 'nft/components/collection/CollectionAsset';\nimport * as styles from 'nft/components/collection/CollectionNfts.css';\nimport { SortDropdown } from 'nft/components/common/SortDropdown';\nimport { Center, Column, Row } from 'nft/components/Flex';\nimport { SweepIcon } from 'nft/components/icons';\nimport { bodySmall, buttonTextMedium, headlineMedium } from 'nft/css/common.css';\nimport { loadingAsset } from 'nft/css/loading.css';\nimport { initialCollectionFilterState, SortBy, SortByQueries, useBag, useCollectionFilters, useFiltersExpanded, useIsMobile } from 'nft/hooks';\nimport { useIsCollectionLoading } from 'nft/hooks/useIsCollectionLoading';\nimport { usePriceRange } from 'nft/hooks/usePriceRange';\nimport { isPooledMarket, Markets, UniformAspectRatios } from 'nft/types';\nimport { calcPoolPrice, calcSudoSwapPrice, getRarityStatus, isInSameMarketplaceCollection, isInSameSudoSwapPool, pluralize } from 'nft/utils';\nimport { scrollToTop } from 'nft/utils/scrollToTop';\nimport { applyFiltersFromURL, syncLocalFiltersWithURL } from 'nft/utils/urlParams';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { useLocation } from 'react-router-dom';\nimport { ThemedText } from 'theme';\nimport { CollectionAssetLoading } from './CollectionAssetLoading';\nimport { MARKETPLACE_ITEMS, MarketplaceLogo } from './MarketplaceSelect';\nimport { Sweep } from './Sweep';\nimport { TraitChip } from './TraitChip';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst rarityStatusCache = new Map();\nconst InfiniteScrollWrapperCss = _css`\n  margin: 0 16px;\n  @media screen and (min-width: ${_ref => {\n  let {\n    theme\n  } = _ref;\n  return theme.breakpoint.sm;\n}}px) {\n    margin: 0 20px;\n  }\n  @media screen and (min-width: ${_ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return theme.breakpoint.md;\n}}px) {\n    margin: 0 26px;\n  }\n  @media screen and (min-width: ${_ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return theme.breakpoint.lg;\n}}px) {\n    margin: 0 48px;\n  }\n`;\nconst ActionsContainer = _styled.div.withConfig({\n  displayName: \"CollectionNfts__ActionsContainer\",\n  componentId: \"sc-1wq7ulh-0\"\n})([\"display:flex;flex:1 1 auto;gap:10px;justify-content:space-between;\", \"\"], InfiniteScrollWrapperCss);\nconst ActionsSubContainer = _styled.div.withConfig({\n  displayName: \"CollectionNfts__ActionsSubContainer\",\n  componentId: \"sc-1wq7ulh-1\"\n})([\"display:flex;gap:12px;flex:1;min-width:0px;@media only screen and (max-width:\", \"){gap:10px;}\"], _ref4 => {\n  let {\n    theme\n  } = _ref4;\n  return `${theme.breakpoint.md}px`;\n});\nconst SortDropdownContainer = _styled.div.withConfig({\n  displayName: \"CollectionNfts__SortDropdownContainer\",\n  componentId: \"sc-1wq7ulh-2\"\n})([\"width:max-content;height:44px;@media only screen and (max-width:\", \"){\", \"}@media only screen and (max-width:\", \"){display:none;}\"], _ref5 => {\n  let {\n    theme\n  } = _ref5;\n  return `${theme.breakpoint.lg}px`;\n}, _ref6 => {\n  let {\n    isFiltersExpanded\n  } = _ref6;\n  return isFiltersExpanded && `display: none;`;\n}, _ref7 => {\n  let {\n    theme\n  } = _ref7;\n  return `${theme.breakpoint.md}px`;\n});\nconst EmptyCollectionWrapper = _styled.div.withConfig({\n  displayName: \"CollectionNfts__EmptyCollectionWrapper\",\n  componentId: \"sc-1wq7ulh-3\"\n})([\"display:block;text-align:center;\"]);\nconst ViewFullCollection = _styled.span.withConfig({\n  displayName: \"CollectionNfts__ViewFullCollection\",\n  componentId: \"sc-1wq7ulh-4\"\n})([\"\", \"\"], OpacityHoverState);\nexport const ClearAllButton = _styled.button.withConfig({\n  displayName: \"CollectionNfts__ClearAllButton\",\n  componentId: \"sc-1wq7ulh-5\"\n})([\"color:\", \";padding-left:8px;padding-right:8px;font-size:14px;font-weight:600;border:none;cursor:pointer;background:none;\"], _ref8 => {\n  let {\n    theme\n  } = _ref8;\n  return theme.textTertiary;\n});\nconst InfiniteScrollWrapper = _styled.div.withConfig({\n  displayName: \"CollectionNfts__InfiniteScrollWrapper\",\n  componentId: \"sc-1wq7ulh-6\"\n})([\"\", \"\"], InfiniteScrollWrapperCss);\nconst SweepButton = _styled.div.withConfig({\n  displayName: \"CollectionNfts__SweepButton\",\n  componentId: \"sc-1wq7ulh-7\"\n})([\"display:flex;gap:8px;border:none;border-radius:12px;padding:12px 18px 12px 12px;cursor:\", \";color:\", \";background:\", \";opacity:\", \";:hover{background-color:\", \";transition:\", \";}@media only screen and (max-width:\", \"){padding:12px 12px 12px 12px;}\"], _ref9 => {\n  let {\n    disabled\n  } = _ref9;\n  return disabled ? 'auto' : 'pointer';\n}, _ref10 => {\n  let {\n    toggled,\n    disabled,\n    theme\n  } = _ref10;\n  return toggled && !disabled ? theme.accentTextLightPrimary : theme.textPrimary;\n}, _ref11 => {\n  let {\n    theme,\n    toggled,\n    disabled\n  } = _ref11;\n  return !disabled && toggled ? 'radial-gradient(101.8% 4091.31% at 0% 0%, #4673FA 0%, #9646FA 100%)' : theme.backgroundInteractive;\n}, _ref12 => {\n  let {\n    disabled\n  } = _ref12;\n  return disabled ? 0.4 : 1;\n}, _ref13 => {\n  let {\n    theme\n  } = _ref13;\n  return theme.hoverState;\n}, _ref14 => {\n  let {\n    theme: {\n      transition: {\n        duration,\n        timing\n      }\n    }\n  } = _ref14;\n  return `${duration.fast} background-color ${timing.in}`;\n}, _ref15 => {\n  let {\n    theme\n  } = _ref15;\n  return `${theme.breakpoint.md}px`;\n});\nconst SweepText = _styled(ThemedText.BodyPrimary).withConfig({\n  displayName: \"CollectionNfts__SweepText\",\n  componentId: \"sc-1wq7ulh-8\"\n})([\"@media only screen and (max-width:\", \"){display:none;}\"], _ref16 => {\n  let {\n    theme\n  } = _ref16;\n  return `${theme.breakpoint.md}px`;\n});\nconst MarketNameWrapper = _styled(Row).withConfig({\n  displayName: \"CollectionNfts__MarketNameWrapper\",\n  componentId: \"sc-1wq7ulh-9\"\n})([\"gap:8px;\"]);\nexport const LoadingAssets = _ref17 => {\n  let {\n    count,\n    height\n  } = _ref17;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: Array.from(Array(count !== null && count !== void 0 ? count : ASSET_PAGE_SIZE), (_, index) => /*#__PURE__*/_jsxDEV(CollectionAssetLoading, {\n      height: height\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this))\n  }, void 0, false);\n};\n_c = LoadingAssets;\nconst CollectionNftsLoading = _ref18 => {\n  let {\n    height\n  } = _ref18;\n  return /*#__PURE__*/_jsxDEV(Box, {\n    width: \"full\",\n    className: styles.assetList,\n    children: /*#__PURE__*/_jsxDEV(LoadingAssets, {\n      height: height\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 3\n  }, this);\n};\n_c2 = CollectionNftsLoading;\nexport const CollectionNftsAndMenuLoading = () => /*#__PURE__*/_jsxDEV(InfiniteScrollWrapper, {\n  children: /*#__PURE__*/_jsxDEV(Column, {\n    alignItems: \"flex-start\",\n    position: \"relative\",\n    width: \"full\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      marginY: \"12\",\n      gap: \"12\",\n      marginBottom: \"40\",\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        className: loadingAsset,\n        borderRadius: \"12\",\n        width: {\n          sm: '44',\n          md: '100'\n        },\n        height: \"44\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: loadingAsset,\n        borderRadius: \"12\",\n        height: \"44\",\n        display: {\n          sm: 'none',\n          md: 'flex'\n        },\n        style: {\n          width: '220px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: loadingAsset,\n        borderRadius: \"12\",\n        height: \"44\",\n        width: {\n          sm: '276',\n          md: '332'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CollectionNftsLoading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 190,\n  columnNumber: 3\n}, this);\n_c3 = CollectionNftsAndMenuLoading;\nexport const getSortDropdownOptions = (setSortBy, hasRarity) => {\n  const options = [{\n    displayText: 'Price: Low to High',\n    onClick: () => setSortBy(SortBy.LowToHigh),\n    reverseIndex: 2,\n    sortBy: SortBy.LowToHigh\n  }, {\n    displayText: 'Price: High to Low',\n    onClick: () => setSortBy(SortBy.HighToLow),\n    reverseIndex: 1,\n    sortBy: SortBy.HighToLow\n  }];\n  return hasRarity ? options.concat([{\n    displayText: 'Rarity: Rare to Common',\n    onClick: () => setSortBy(SortBy.RareToCommon),\n    reverseIndex: 4,\n    sortBy: SortBy.RareToCommon\n  }, {\n    displayText: 'Rarity: Common to Rare',\n    onClick: () => setSortBy(SortBy.CommonToRare),\n    reverseIndex: 3,\n    sortBy: SortBy.CommonToRare\n  }]) : options;\n};\nexport const CollectionNfts = _ref19 => {\n  _s();\n  var _collectionAssets$, _collectionAssets$0$t, _collectionAssets$2, _collectionAssets$len;\n  let {\n    contractAddress,\n    collectionStats,\n    rarityVerified\n  } = _ref19;\n  const {\n    chainId\n  } = useWeb3React();\n  const traits = useCollectionFilters(state => state.traits);\n  const minPrice = useCollectionFilters(state => state.minPrice);\n  const maxPrice = useCollectionFilters(state => state.maxPrice);\n  const markets = useCollectionFilters(state => state.markets);\n  const sortBy = useCollectionFilters(state => state.sortBy);\n  const searchByNameText = useCollectionFilters(state => state.search);\n  const setMarketCount = useCollectionFilters(state => state.setMarketCount);\n  const setSortBy = useCollectionFilters(state => state.setSortBy);\n  const buyNow = useCollectionFilters(state => state.buyNow);\n  const setPriceRangeLow = usePriceRange(state => state.setPriceRangeLow);\n  const priceRangeLow = usePriceRange(state => state.priceRangeLow);\n  const priceRangeHigh = usePriceRange(state => state.priceRangeHigh);\n  const setPriceRangeHigh = usePriceRange(state => state.setPriceRangeHigh);\n  const setPrevMinMax = usePriceRange(state => state.setPrevMinMax);\n  const setIsCollectionNftsLoading = useIsCollectionLoading(state => state.setIsCollectionNftsLoading);\n  const removeTrait = useCollectionFilters(state => state.removeTrait);\n  const removeMarket = useCollectionFilters(state => state.removeMarket);\n  const reset = useCollectionFilters(state => state.reset);\n  const setMin = useCollectionFilters(state => state.setMinPrice);\n  const setMax = useCollectionFilters(state => state.setMaxPrice);\n  const setHasRarity = useCollectionFilters(state => state.setHasRarity);\n  const toggleBag = useBag(state => state.toggleBag);\n  const bagExpanded = useBag(state => state.bagExpanded);\n  const itemsInBag = useBag(state => state.itemsInBag);\n  const debouncedMinPrice = useDebounce(minPrice, 500);\n  const debouncedMaxPrice = useDebounce(maxPrice, 500);\n  const debouncedSearchByNameText = useDebounce(searchByNameText, 500);\n  const [uniformAspectRatio, setUniformAspectRatio] = useState(UniformAspectRatios.unset);\n  const [renderedHeight, setRenderedHeight] = useState();\n  const [sweepIsOpen, setSweepOpen] = useState(false);\n  const assetQueryParams = {\n    address: contractAddress,\n    orderBy: SortByQueries[sortBy].field,\n    asc: SortByQueries[sortBy].asc,\n    filter: {\n      listed: buyNow,\n      marketplaces: markets.length > 0 ? markets.map(market => market.toUpperCase()) : undefined,\n      maxPrice: debouncedMaxPrice ? parseEther(debouncedMaxPrice).toString() : undefined,\n      minPrice: debouncedMinPrice ? parseEther(debouncedMinPrice).toString() : undefined,\n      tokenSearchQuery: debouncedSearchByNameText,\n      traits: traits.length > 0 ? traits.map(trait => {\n        return {\n          name: trait.trait_type,\n          values: [trait.trait_value]\n        };\n      }) : undefined\n    },\n    first: ASSET_PAGE_SIZE\n  };\n  const {\n    data: collectionNfts,\n    loading,\n    hasNext,\n    loadMore\n  } = useNftAssets(assetQueryParams);\n  const getPoolPosition = useCallback(asset => {\n    const assetInBag = itemsInBag.some(item => asset.tokenId === item.asset.tokenId && asset.address === item.asset.address);\n    if (asset.marketplace === Markets.Sudoswap) {\n      const bagItemsInSudoSwapPool = itemsInBag.filter(item => isInSameSudoSwapPool(asset, item.asset));\n      if (assetInBag) {\n        return bagItemsInSudoSwapPool.findIndex(item => item.asset.tokenId === asset.tokenId);\n      } else {\n        return bagItemsInSudoSwapPool.length;\n      }\n    }\n    return assetInBag ? itemsInBag.filter(item => isInSameMarketplaceCollection(asset, item.asset)).findIndex(item => item.asset.tokenId === asset.tokenId) : itemsInBag.filter(item => isInSameMarketplaceCollection(asset, item.asset)).length;\n  }, [itemsInBag]);\n  const calculatePrice = useCallback(asset => {\n    if (asset.marketplace === Markets.Sudoswap) return calcSudoSwapPrice(asset, getPoolPosition(asset));\n    return calcPoolPrice(asset, getPoolPosition(asset));\n  }, [getPoolPosition]);\n  const collectionAssets = useMemo(() => {\n    if (!collectionNfts || !collectionNfts.some(asset => asset.marketplace && isPooledMarket(asset.marketplace))) {\n      return collectionNfts;\n    }\n    const assets = [...collectionNfts];\n    assets.forEach(asset => {\n      var _calculatePrice;\n      return asset.marketplace && isPooledMarket(asset.marketplace) && (asset.priceInfo.ETHPrice = (_calculatePrice = calculatePrice(asset)) !== null && _calculatePrice !== void 0 ? _calculatePrice : '');\n    });\n    if (sortBy === SortBy.HighToLow || sortBy === SortBy.LowToHigh) {\n      assets.sort((a, b) => {\n        var _a$priceInfo$ETHPrice, _a$priceInfo, _b$priceInfo$ETHPrice, _b$priceInfo;\n        const bigA = BigNumber.from((_a$priceInfo$ETHPrice = (_a$priceInfo = a.priceInfo) === null || _a$priceInfo === void 0 ? void 0 : _a$priceInfo.ETHPrice) !== null && _a$priceInfo$ETHPrice !== void 0 ? _a$priceInfo$ETHPrice : 0);\n        const bigB = BigNumber.from((_b$priceInfo$ETHPrice = (_b$priceInfo = b.priceInfo) === null || _b$priceInfo === void 0 ? void 0 : _b$priceInfo.ETHPrice) !== null && _b$priceInfo$ETHPrice !== void 0 ? _b$priceInfo$ETHPrice : 0);\n\n        // Always sort not for sale (price = 0) assets to the end\n        if (bigA.gt(0) && bigB.lte(0)) {\n          return -1;\n        } else if (bigB.gt(0) && bigA.lte(0)) {\n          return 1;\n        }\n        const diff = bigA.sub(bigB);\n        if (diff.gt(0)) {\n          return sortBy === SortBy.LowToHigh ? 1 : -1;\n        } else if (diff.lt(0)) {\n          return sortBy === SortBy.LowToHigh ? -1 : 1;\n        }\n        return 0;\n      });\n    }\n    return assets;\n  }, [collectionNfts, sortBy, calculatePrice]);\n  const [currentTokenPlayingMedia, setCurrentTokenPlayingMedia] = useState();\n  const [isFiltersExpanded, setFiltersExpanded] = useFiltersExpanded();\n  const oldStateRef = useRef(null);\n  const isMobile = useIsMobile();\n  const screenSize = useScreenSize();\n  useEffect(() => {\n    setIsCollectionNftsLoading(loading);\n  }, [loading, setIsCollectionNftsLoading]);\n  const hasRarity = useMemo(() => {\n    var _getRarityStatus;\n    const hasRarity = (_getRarityStatus = getRarityStatus(rarityStatusCache, collectionStats === null || collectionStats === void 0 ? void 0 : collectionStats.address, collectionAssets)) !== null && _getRarityStatus !== void 0 ? _getRarityStatus : false;\n    setHasRarity(hasRarity);\n    return hasRarity;\n  }, [collectionStats.address, collectionAssets, setHasRarity]);\n  const sortDropDownOptions = useMemo(() => getSortDropdownOptions(setSortBy, hasRarity), [hasRarity, setSortBy]);\n  useEffect(() => {\n    setSweepOpen(false);\n    return () => {\n      useCollectionFilters.setState(initialCollectionFilterState);\n    };\n  }, [contractAddress]);\n  const assets = useMemo(() => {\n    if (!collectionAssets) return null;\n    return collectionAssets.map(asset => /*#__PURE__*/_jsxDEV(CollectionAsset, {\n      asset: asset,\n      isMobile: isMobile,\n      mediaShouldBePlaying: asset.tokenId === currentTokenPlayingMedia,\n      setCurrentTokenPlayingMedia: setCurrentTokenPlayingMedia,\n      rarityVerified: rarityVerified,\n      uniformAspectRatio: uniformAspectRatio,\n      setUniformAspectRatio: setUniformAspectRatio,\n      renderedHeight: renderedHeight,\n      setRenderedHeight: setRenderedHeight\n    }, asset.address + asset.tokenId, false, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this));\n  }, [collectionAssets, isMobile, currentTokenPlayingMedia, rarityVerified, uniformAspectRatio, renderedHeight]);\n  const hasNfts = collectionAssets && collectionAssets.length > 0;\n  const hasErc1155s = hasNfts && collectionAssets[0] && ((_collectionAssets$ = collectionAssets[0]) === null || _collectionAssets$ === void 0 ? void 0 : _collectionAssets$.tokenType) === NftStandard.Erc1155;\n  const minMaxPriceChipText = useMemo(() => {\n    if (debouncedMinPrice && debouncedMaxPrice) {\n      return `Price: ${debouncedMinPrice} - ${debouncedMaxPrice} ETH`;\n    } else if (debouncedMinPrice) {\n      return `Min. Price: ${debouncedMinPrice} ETH`;\n    } else if (debouncedMaxPrice) {\n      return `Max Price: ${debouncedMaxPrice} ETH`;\n    }\n    return undefined;\n  }, [debouncedMinPrice, debouncedMaxPrice]);\n  useEffect(() => {\n    var _collectionStats$mark;\n    const marketCount = {};\n    collectionStats === null || collectionStats === void 0 ? void 0 : (_collectionStats$mark = collectionStats.marketplaceCount) === null || _collectionStats$mark === void 0 ? void 0 : _collectionStats$mark.forEach(_ref20 => {\n      let {\n        marketplace,\n        count\n      } = _ref20;\n      marketCount[marketplace] = count;\n    });\n    setMarketCount(marketCount);\n    oldStateRef.current = useCollectionFilters.getState();\n  }, [collectionStats === null || collectionStats === void 0 ? void 0 : collectionStats.marketplaceCount, setMarketCount]);\n  const location = useLocation();\n  // Applying filters from URL to local state\n  useEffect(() => {\n    if (collectionStats === null || collectionStats === void 0 ? void 0 : collectionStats.traits) {\n      const modifiedQuery = applyFiltersFromURL(location, collectionStats);\n      requestAnimationFrame(() => {\n        useCollectionFilters.setState(modifiedQuery);\n      });\n      useCollectionFilters.subscribe(state => {\n        if (JSON.stringify(oldStateRef.current) !== JSON.stringify(state)) {\n          syncLocalFiltersWithURL(state);\n          oldStateRef.current = state;\n        }\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location]);\n  useEffect(() => {\n    setUniformAspectRatio(UniformAspectRatios.unset);\n    setRenderedHeight(undefined);\n  }, [contractAddress]);\n  useEffect(() => {\n    var _collectionStats$stat;\n    if (collectionStats && ((_collectionStats$stat = collectionStats.stats) === null || _collectionStats$stat === void 0 ? void 0 : _collectionStats$stat.floor_price)) {\n      var _collectionStats$stat2, _collectionStats$stat3;\n      const lowValue = (_collectionStats$stat2 = collectionStats.stats) === null || _collectionStats$stat2 === void 0 ? void 0 : _collectionStats$stat2.floor_price;\n      const maxValue = 10 * ((_collectionStats$stat3 = collectionStats.stats) === null || _collectionStats$stat3 === void 0 ? void 0 : _collectionStats$stat3.floor_price);\n      if (priceRangeLow === '') {\n        setPriceRangeLow(lowValue === null || lowValue === void 0 ? void 0 : lowValue.toFixed(2));\n      }\n      if (priceRangeHigh === '') {\n        setPriceRangeHigh(maxValue.toFixed(2));\n      }\n    }\n  }, [collectionStats, priceRangeLow, priceRangeHigh, setPriceRangeHigh, setPriceRangeLow]);\n  const handleSweepClick = useCallback(() => {\n    if (hasErc1155s) return;\n    if (!sweepIsOpen) {\n      scrollToTop();\n      if (!bagExpanded && !isMobile) toggleBag();\n    }\n    setSweepOpen(!sweepIsOpen);\n  }, [bagExpanded, hasErc1155s, isMobile, sweepIsOpen, toggleBag]);\n  const handleClearAllClick = useCallback(() => {\n    reset();\n    setPrevMinMax([0, 100]);\n    scrollToTop();\n  }, [reset, setPrevMinMax]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AnimatedBox, {\n      backgroundColor: \"backgroundBackdrop\",\n      position: \"sticky\",\n      top: \"72\",\n      width: \"full\",\n      zIndex: \"3\",\n      marginBottom: {\n        sm: '8',\n        md: '20'\n      },\n      paddingTop: \"16\",\n      paddingBottom: \"16\",\n      children: [/*#__PURE__*/_jsxDEV(ActionsContainer, {\n        children: [/*#__PURE__*/_jsxDEV(ActionsSubContainer, {\n          children: [/*#__PURE__*/_jsxDEV(TraceEvent, {\n            events: [BrowserEvent.onClick],\n            element: ElementName.NFT_FILTER_BUTTON,\n            name: EventName.NFT_FILTER_OPENED,\n            shouldLogImpression: !isFiltersExpanded,\n            properties: {\n              collection_address: contractAddress,\n              chain_id: chainId\n            },\n            children: /*#__PURE__*/_jsxDEV(FilterButton, {\n              isMobile: isMobile,\n              isFiltersExpanded: isFiltersExpanded,\n              collectionCount: (_collectionAssets$0$t = collectionAssets === null || collectionAssets === void 0 ? void 0 : (_collectionAssets$2 = collectionAssets[0]) === null || _collectionAssets$2 === void 0 ? void 0 : _collectionAssets$2.totalCount) !== null && _collectionAssets$0$t !== void 0 ? _collectionAssets$0$t : 0,\n              onClick: () => {\n                if (bagExpanded && !screenSize['xl']) toggleBag();\n                setFiltersExpanded(!isFiltersExpanded);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SortDropdownContainer, {\n            isFiltersExpanded: isFiltersExpanded,\n            children: /*#__PURE__*/_jsxDEV(SortDropdown, {\n              dropDownOptions: sortDropDownOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CollectionSearch, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 11\n        }, this), !hasErc1155s && /*#__PURE__*/_jsxDEV(SweepButton, {\n          toggled: sweepIsOpen,\n          disabled: hasErc1155s,\n          className: buttonTextMedium,\n          onClick: handleSweepClick,\n          \"data-testid\": \"nft-sweep-button\",\n          children: [/*#__PURE__*/_jsxDEV(SweepIcon, {\n            viewBox: \"0 0 24 24\",\n            width: \"20px\",\n            height: \"20px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SweepText, {\n            fontWeight: 600,\n            color: \"currentColor\",\n            lineHeight: \"20px\",\n            children: \"Sweep\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InfiniteScrollWrapper, {\n        children: [sweepIsOpen && /*#__PURE__*/_jsxDEV(Sweep, {\n          contractAddress: contractAddress,\n          minPrice: debouncedMinPrice,\n          maxPrice: debouncedMaxPrice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          paddingTop: !!markets.length || !!traits.length || minMaxPriceChipText ? '12' : '0',\n          gap: \"8\",\n          flexWrap: \"wrap\",\n          children: [markets.map(market => /*#__PURE__*/_jsxDEV(TraitChip, {\n            value: /*#__PURE__*/_jsxDEV(MarketNameWrapper, {\n              children: [/*#__PURE__*/_jsxDEV(MarketplaceLogo, {\n                src: `/nft/svgs/marketplaces/${market.toLowerCase()}.svg`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 21\n              }, this), MARKETPLACE_ITEMS[market]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 19\n            }, this),\n            onClick: () => {\n              scrollToTop();\n              removeMarket(market);\n            }\n          }, market, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 15\n          }, this)), traits.map(trait => /*#__PURE__*/_jsxDEV(TraitChip, {\n            value: trait.trait_type === 'Number of traits' ? `${trait.trait_value} trait${pluralize(Number(trait.trait_value))}` : `${trait.trait_type}: ${trait.trait_value}`,\n            onClick: () => {\n              scrollToTop();\n              removeTrait(trait);\n            }\n          }, trait.trait_value, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 15\n          }, this)), minMaxPriceChipText && /*#__PURE__*/_jsxDEV(TraitChip, {\n            value: minMaxPriceChipText,\n            onClick: () => {\n              scrollToTop();\n              setMin('');\n              setMax('');\n              setPrevMinMax([0, 100]);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 15\n          }, this), Boolean(traits.length || markets.length || minMaxPriceChipText) && /*#__PURE__*/_jsxDEV(ClearAllButton, {\n            onClick: handleClearAllClick,\n            children: \"Clear All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InfiniteScrollWrapper, {\n      children: loading ? /*#__PURE__*/_jsxDEV(CollectionNftsLoading, {\n        height: renderedHeight\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        next: loadMore,\n        hasMore: hasNext !== null && hasNext !== void 0 ? hasNext : false,\n        loader: Boolean(hasNext && hasNfts) && /*#__PURE__*/_jsxDEV(LoadingAssets, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 52\n        }, this),\n        dataLength: (_collectionAssets$len = collectionAssets === null || collectionAssets === void 0 ? void 0 : collectionAssets.length) !== null && _collectionAssets$len !== void 0 ? _collectionAssets$len : 0,\n        style: {\n          overflow: 'unset'\n        },\n        className: hasNfts ? styles.assetList : undefined,\n        children: !hasNfts ? /*#__PURE__*/_jsxDEV(Center, {\n          width: \"full\",\n          color: \"textSecondary\",\n          textAlign: \"center\",\n          style: {\n            height: '60vh'\n          },\n          children: /*#__PURE__*/_jsxDEV(EmptyCollectionWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: headlineMedium,\n              children: \"No NFTS found\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 620,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              onClick: reset,\n              type: \"button\",\n              className: clsx(bodySmall, buttonTextMedium),\n              color: \"accentAction\",\n              cursor: \"pointer\",\n              children: /*#__PURE__*/_jsxDEV(ViewFullCollection, {\n                children: \"View full collection\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 15\n        }, this) : assets\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(CollectionNfts, \"c31+jPeQ8ImfCnkNekRB5wP7CB8=\", false, function () {\n  return [useWeb3React, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, usePriceRange, usePriceRange, usePriceRange, usePriceRange, usePriceRange, useIsCollectionLoading, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, useCollectionFilters, useBag, useBag, useBag, useDebounce, useDebounce, useDebounce, useNftAssets, useFiltersExpanded, useIsMobile, useScreenSize, useLocation];\n});\n_c4 = CollectionNfts;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"LoadingAssets\");\n$RefreshReg$(_c2, \"CollectionNftsLoading\");\n$RefreshReg$(_c3, \"CollectionNftsAndMenuLoading\");\n$RefreshReg$(_c4, \"CollectionNfts\");","map":{"version":3,"names":["BigNumber","TraceEvent","BrowserEvent","ElementName","EventName","useWeb3React","clsx","OpacityHoverState","parseEther","NftStandard","ASSET_PAGE_SIZE","useNftAssets","useDebounce","useScreenSize","AnimatedBox","Box","CollectionSearch","FilterButton","CollectionAsset","styles","SortDropdown","Center","Column","Row","SweepIcon","bodySmall","buttonTextMedium","headlineMedium","loadingAsset","initialCollectionFilterState","SortBy","SortByQueries","useBag","useCollectionFilters","useFiltersExpanded","useIsMobile","useIsCollectionLoading","usePriceRange","isPooledMarket","Markets","UniformAspectRatios","calcPoolPrice","calcSudoSwapPrice","getRarityStatus","isInSameMarketplaceCollection","isInSameSudoSwapPool","pluralize","scrollToTop","applyFiltersFromURL","syncLocalFiltersWithURL","useCallback","useEffect","useMemo","useRef","useState","InfiniteScroll","useLocation","ThemedText","CollectionAssetLoading","MARKETPLACE_ITEMS","MarketplaceLogo","Sweep","TraitChip","rarityStatusCache","Map","InfiniteScrollWrapperCss","css","theme","breakpoint","sm","md","lg","ActionsContainer","styled","div","ActionsSubContainer","SortDropdownContainer","isFiltersExpanded","EmptyCollectionWrapper","ViewFullCollection","span","ClearAllButton","button","textTertiary","InfiniteScrollWrapper","SweepButton","disabled","toggled","accentTextLightPrimary","textPrimary","backgroundInteractive","hoverState","transition","duration","timing","fast","in","SweepText","BodyPrimary","MarketNameWrapper","LoadingAssets","count","height","Array","from","_","index","CollectionNftsLoading","assetList","CollectionNftsAndMenuLoading","width","getSortDropdownOptions","setSortBy","hasRarity","options","displayText","onClick","LowToHigh","reverseIndex","sortBy","HighToLow","concat","RareToCommon","CommonToRare","CollectionNfts","contractAddress","collectionStats","rarityVerified","chainId","traits","state","minPrice","maxPrice","markets","searchByNameText","search","setMarketCount","buyNow","setPriceRangeLow","priceRangeLow","priceRangeHigh","setPriceRangeHigh","setPrevMinMax","setIsCollectionNftsLoading","removeTrait","removeMarket","reset","setMin","setMinPrice","setMax","setMaxPrice","setHasRarity","toggleBag","bagExpanded","itemsInBag","debouncedMinPrice","debouncedMaxPrice","debouncedSearchByNameText","uniformAspectRatio","setUniformAspectRatio","unset","renderedHeight","setRenderedHeight","sweepIsOpen","setSweepOpen","assetQueryParams","address","orderBy","field","asc","filter","listed","marketplaces","length","map","market","toUpperCase","undefined","toString","tokenSearchQuery","trait","name","trait_type","values","trait_value","first","data","collectionNfts","loading","hasNext","loadMore","getPoolPosition","asset","assetInBag","some","item","tokenId","marketplace","Sudoswap","bagItemsInSudoSwapPool","findIndex","calculatePrice","collectionAssets","assets","forEach","priceInfo","ETHPrice","sort","a","b","bigA","bigB","gt","lte","diff","sub","lt","currentTokenPlayingMedia","setCurrentTokenPlayingMedia","setFiltersExpanded","oldStateRef","isMobile","screenSize","sortDropDownOptions","setState","hasNfts","hasErc1155s","tokenType","Erc1155","minMaxPriceChipText","marketCount","marketplaceCount","current","getState","location","modifiedQuery","requestAnimationFrame","subscribe","JSON","stringify","stats","floor_price","lowValue","maxValue","toFixed","handleSweepClick","handleClearAllClick","NFT_FILTER_BUTTON","NFT_FILTER_OPENED","collection_address","chain_id","totalCount","toLowerCase","Number","Boolean","overflow"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/collection/CollectionNfts.tsx"],"sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\nimport { TraceEvent } from '@uniswap/analytics'\nimport { BrowserEvent, ElementName, EventName } from '@uniswap/analytics-events'\nimport { useWeb3React } from '@web3-react/core'\nimport clsx from 'clsx'\nimport { OpacityHoverState } from 'components/Common'\nimport { parseEther } from 'ethers/lib/utils'\nimport { NftAssetTraitInput, NftMarketplace, NftStandard } from 'graphql/data/__generated__/types-and-hooks'\nimport { ASSET_PAGE_SIZE, AssetFetcherParams, useNftAssets } from 'graphql/data/nft/Asset'\nimport useDebounce from 'hooks/useDebounce'\nimport { useScreenSize } from 'hooks/useScreenSize'\nimport { AnimatedBox, Box } from 'nft/components/Box'\nimport { CollectionSearch, FilterButton } from 'nft/components/collection'\nimport { CollectionAsset } from 'nft/components/collection/CollectionAsset'\nimport * as styles from 'nft/components/collection/CollectionNfts.css'\nimport { SortDropdown } from 'nft/components/common/SortDropdown'\nimport { Center, Column, Row } from 'nft/components/Flex'\nimport { SweepIcon } from 'nft/components/icons'\nimport { bodySmall, buttonTextMedium, headlineMedium } from 'nft/css/common.css'\nimport { loadingAsset } from 'nft/css/loading.css'\nimport {\n  CollectionFilters,\n  initialCollectionFilterState,\n  SortBy,\n  SortByQueries,\n  useBag,\n  useCollectionFilters,\n  useFiltersExpanded,\n  useIsMobile,\n} from 'nft/hooks'\nimport { useIsCollectionLoading } from 'nft/hooks/useIsCollectionLoading'\nimport { usePriceRange } from 'nft/hooks/usePriceRange'\nimport {\n  DropDownOption,\n  GenieAsset,\n  GenieCollection,\n  isPooledMarket,\n  Markets,\n  UniformAspectRatio,\n  UniformAspectRatios,\n} from 'nft/types'\nimport {\n  calcPoolPrice,\n  calcSudoSwapPrice,\n  getRarityStatus,\n  isInSameMarketplaceCollection,\n  isInSameSudoSwapPool,\n  pluralize,\n} from 'nft/utils'\nimport { scrollToTop } from 'nft/utils/scrollToTop'\nimport { applyFiltersFromURL, syncLocalFiltersWithURL } from 'nft/utils/urlParams'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport InfiniteScroll from 'react-infinite-scroll-component'\nimport { useLocation } from 'react-router-dom'\nimport styled, { css } from 'styled-components/macro'\nimport { ThemedText } from 'theme'\n\nimport { CollectionAssetLoading } from './CollectionAssetLoading'\nimport { MARKETPLACE_ITEMS, MarketplaceLogo } from './MarketplaceSelect'\nimport { Sweep } from './Sweep'\nimport { TraitChip } from './TraitChip'\n\ninterface CollectionNftsProps {\n  contractAddress: string\n  collectionStats: GenieCollection\n  rarityVerified?: boolean\n}\n\nconst rarityStatusCache = new Map<string, boolean>()\n\nconst InfiniteScrollWrapperCss = css`\n  margin: 0 16px;\n  @media screen and (min-width: ${({ theme }) => theme.breakpoint.sm}px) {\n    margin: 0 20px;\n  }\n  @media screen and (min-width: ${({ theme }) => theme.breakpoint.md}px) {\n    margin: 0 26px;\n  }\n  @media screen and (min-width: ${({ theme }) => theme.breakpoint.lg}px) {\n    margin: 0 48px;\n  }\n`\n\nconst ActionsContainer = styled.div`\n  display: flex;\n  flex: 1 1 auto;\n  gap: 10px;\n  justify-content: space-between;\n\n  ${InfiniteScrollWrapperCss}\n`\n\nconst ActionsSubContainer = styled.div`\n  display: flex;\n  gap: 12px;\n  flex: 1;\n  min-width: 0px;\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    gap: 10px;\n  }\n`\n\nconst SortDropdownContainer = styled.div<{ isFiltersExpanded: boolean }>`\n  width: max-content;\n  height: 44px;\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.lg}px`}) {\n    ${({ isFiltersExpanded }) => isFiltersExpanded && `display: none;`}\n  }\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    display: none;\n  }\n`\n\nconst EmptyCollectionWrapper = styled.div`\n  display: block;\n  text-align: center;\n`\n\nconst ViewFullCollection = styled.span`\n  ${OpacityHoverState}\n`\n\nexport const ClearAllButton = styled.button`\n  color: ${({ theme }) => theme.textTertiary};\n  padding-left: 8px;\n  padding-right: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  border: none;\n  cursor: pointer;\n  background: none;\n`\n\nconst InfiniteScrollWrapper = styled.div`\n  ${InfiniteScrollWrapperCss}\n`\n\nconst SweepButton = styled.div<{ toggled: boolean; disabled?: boolean }>`\n  display: flex;\n  gap: 8px;\n  border: none;\n  border-radius: 12px;\n  padding: 12px 18px 12px 12px;\n  cursor: ${({ disabled }) => (disabled ? 'auto' : 'pointer')};\n  color: ${({ toggled, disabled, theme }) => (toggled && !disabled ? theme.accentTextLightPrimary : theme.textPrimary)};\n  background: ${({ theme, toggled, disabled }) =>\n    !disabled && toggled\n      ? 'radial-gradient(101.8% 4091.31% at 0% 0%, #4673FA 0%, #9646FA 100%)'\n      : theme.backgroundInteractive};\n  opacity: ${({ disabled }) => (disabled ? 0.4 : 1)};\n  :hover {\n    background-color: ${({ theme }) => theme.hoverState};\n    transition: ${({\n      theme: {\n        transition: { duration, timing },\n      },\n    }) => `${duration.fast} background-color ${timing.in}`};\n  }\n\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    padding: 12px 12px 12px 12px;\n  }\n`\n\nconst SweepText = styled(ThemedText.BodyPrimary)`\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    display: none;\n  }\n`\n\nconst MarketNameWrapper = styled(Row)`\n  gap: 8px;\n`\n\nexport const LoadingAssets = ({ count, height }: { count?: number; height?: number }) => (\n  <>\n    {Array.from(Array(count ?? ASSET_PAGE_SIZE), (_, index) => (\n      <CollectionAssetLoading key={index} height={height} />\n    ))}\n  </>\n)\n\nconst CollectionNftsLoading = ({ height }: { height?: number }) => (\n  <Box width=\"full\" className={styles.assetList}>\n    <LoadingAssets height={height} />\n  </Box>\n)\n\nexport const CollectionNftsAndMenuLoading = () => (\n  <InfiniteScrollWrapper>\n    <Column alignItems=\"flex-start\" position=\"relative\" width=\"full\">\n      <Row marginY=\"12\" gap=\"12\" marginBottom=\"40\">\n        <Box className={loadingAsset} borderRadius=\"12\" width={{ sm: '44', md: '100' }} height=\"44\" />\n        <Box\n          className={loadingAsset}\n          borderRadius=\"12\"\n          height=\"44\"\n          display={{ sm: 'none', md: 'flex' }}\n          style={{ width: '220px' }}\n        />\n        <Box className={loadingAsset} borderRadius=\"12\" height=\"44\" width={{ sm: '276', md: '332' }} />\n      </Row>\n      <CollectionNftsLoading />\n    </Column>\n  </InfiniteScrollWrapper>\n)\n\nexport const getSortDropdownOptions = (setSortBy: (sortBy: SortBy) => void, hasRarity: boolean): DropDownOption[] => {\n  const options = [\n    {\n      displayText: 'Price: Low to High',\n      onClick: () => setSortBy(SortBy.LowToHigh),\n      reverseIndex: 2,\n      sortBy: SortBy.LowToHigh,\n    },\n    {\n      displayText: 'Price: High to Low',\n      onClick: () => setSortBy(SortBy.HighToLow),\n      reverseIndex: 1,\n      sortBy: SortBy.HighToLow,\n    },\n  ]\n  return hasRarity\n    ? options.concat([\n        {\n          displayText: 'Rarity: Rare to Common',\n          onClick: () => setSortBy(SortBy.RareToCommon),\n          reverseIndex: 4,\n          sortBy: SortBy.RareToCommon,\n        },\n        {\n          displayText: 'Rarity: Common to Rare',\n          onClick: () => setSortBy(SortBy.CommonToRare),\n          reverseIndex: 3,\n          sortBy: SortBy.CommonToRare,\n        },\n      ])\n    : options\n}\n\nexport const CollectionNfts = ({ contractAddress, collectionStats, rarityVerified }: CollectionNftsProps) => {\n  const { chainId } = useWeb3React()\n  const traits = useCollectionFilters((state) => state.traits)\n  const minPrice = useCollectionFilters((state) => state.minPrice)\n  const maxPrice = useCollectionFilters((state) => state.maxPrice)\n  const markets = useCollectionFilters((state) => state.markets)\n  const sortBy = useCollectionFilters((state) => state.sortBy)\n  const searchByNameText = useCollectionFilters((state) => state.search)\n  const setMarketCount = useCollectionFilters((state) => state.setMarketCount)\n  const setSortBy = useCollectionFilters((state) => state.setSortBy)\n  const buyNow = useCollectionFilters((state) => state.buyNow)\n\n  const setPriceRangeLow = usePriceRange((state) => state.setPriceRangeLow)\n  const priceRangeLow = usePriceRange((state) => state.priceRangeLow)\n  const priceRangeHigh = usePriceRange((state) => state.priceRangeHigh)\n  const setPriceRangeHigh = usePriceRange((state) => state.setPriceRangeHigh)\n  const setPrevMinMax = usePriceRange((state) => state.setPrevMinMax)\n\n  const setIsCollectionNftsLoading = useIsCollectionLoading((state) => state.setIsCollectionNftsLoading)\n  const removeTrait = useCollectionFilters((state) => state.removeTrait)\n  const removeMarket = useCollectionFilters((state) => state.removeMarket)\n  const reset = useCollectionFilters((state) => state.reset)\n  const setMin = useCollectionFilters((state) => state.setMinPrice)\n  const setMax = useCollectionFilters((state) => state.setMaxPrice)\n  const setHasRarity = useCollectionFilters((state) => state.setHasRarity)\n\n  const toggleBag = useBag((state) => state.toggleBag)\n  const bagExpanded = useBag((state) => state.bagExpanded)\n  const itemsInBag = useBag((state) => state.itemsInBag)\n\n  const debouncedMinPrice = useDebounce(minPrice, 500)\n  const debouncedMaxPrice = useDebounce(maxPrice, 500)\n  const debouncedSearchByNameText = useDebounce(searchByNameText, 500)\n\n  const [uniformAspectRatio, setUniformAspectRatio] = useState<UniformAspectRatio>(UniformAspectRatios.unset)\n  const [renderedHeight, setRenderedHeight] = useState<number | undefined>()\n\n  const [sweepIsOpen, setSweepOpen] = useState(false)\n\n  const assetQueryParams: AssetFetcherParams = {\n    address: contractAddress,\n    orderBy: SortByQueries[sortBy].field,\n    asc: SortByQueries[sortBy].asc,\n    filter: {\n      listed: buyNow,\n      marketplaces: markets.length > 0 ? markets.map((market) => market.toUpperCase() as NftMarketplace) : undefined,\n      maxPrice: debouncedMaxPrice ? parseEther(debouncedMaxPrice).toString() : undefined,\n      minPrice: debouncedMinPrice ? parseEther(debouncedMinPrice).toString() : undefined,\n      tokenSearchQuery: debouncedSearchByNameText,\n      traits:\n        traits.length > 0\n          ? traits.map((trait) => {\n              return { name: trait.trait_type, values: [trait.trait_value] } as unknown as NftAssetTraitInput\n            })\n          : undefined,\n    },\n    first: ASSET_PAGE_SIZE,\n  }\n\n  const { data: collectionNfts, loading, hasNext, loadMore } = useNftAssets(assetQueryParams)\n\n  const getPoolPosition = useCallback(\n    (asset: GenieAsset) => {\n      const assetInBag = itemsInBag.some(\n        (item) => asset.tokenId === item.asset.tokenId && asset.address === item.asset.address\n      )\n\n      if (asset.marketplace === Markets.Sudoswap) {\n        const bagItemsInSudoSwapPool = itemsInBag.filter((item) => isInSameSudoSwapPool(asset, item.asset))\n        if (assetInBag) {\n          return bagItemsInSudoSwapPool.findIndex((item) => item.asset.tokenId === asset.tokenId)\n        } else {\n          return bagItemsInSudoSwapPool.length\n        }\n      }\n\n      return assetInBag\n        ? itemsInBag\n            .filter((item) => isInSameMarketplaceCollection(asset, item.asset))\n            .findIndex((item) => item.asset.tokenId === asset.tokenId)\n        : itemsInBag.filter((item) => isInSameMarketplaceCollection(asset, item.asset)).length\n    },\n    [itemsInBag]\n  )\n\n  const calculatePrice = useCallback(\n    (asset: GenieAsset) => {\n      if (asset.marketplace === Markets.Sudoswap) return calcSudoSwapPrice(asset, getPoolPosition(asset))\n      return calcPoolPrice(asset, getPoolPosition(asset))\n    },\n    [getPoolPosition]\n  )\n\n  const collectionAssets = useMemo(() => {\n    if (!collectionNfts || !collectionNfts.some((asset) => asset.marketplace && isPooledMarket(asset.marketplace))) {\n      return collectionNfts\n    }\n\n    const assets = [...collectionNfts]\n\n    assets.forEach(\n      (asset) =>\n        asset.marketplace &&\n        isPooledMarket(asset.marketplace) &&\n        (asset.priceInfo.ETHPrice = calculatePrice(asset) ?? '')\n    )\n\n    if (sortBy === SortBy.HighToLow || sortBy === SortBy.LowToHigh) {\n      assets.sort((a, b) => {\n        const bigA = BigNumber.from(a.priceInfo?.ETHPrice ?? 0)\n        const bigB = BigNumber.from(b.priceInfo?.ETHPrice ?? 0)\n\n        // Always sort not for sale (price = 0) assets to the end\n        if (bigA.gt(0) && bigB.lte(0)) {\n          return -1\n        } else if (bigB.gt(0) && bigA.lte(0)) {\n          return 1\n        }\n\n        const diff = bigA.sub(bigB)\n        if (diff.gt(0)) {\n          return sortBy === SortBy.LowToHigh ? 1 : -1\n        } else if (diff.lt(0)) {\n          return sortBy === SortBy.LowToHigh ? -1 : 1\n        }\n\n        return 0\n      })\n    }\n\n    return assets\n  }, [collectionNfts, sortBy, calculatePrice])\n\n  const [currentTokenPlayingMedia, setCurrentTokenPlayingMedia] = useState<string | undefined>()\n  const [isFiltersExpanded, setFiltersExpanded] = useFiltersExpanded()\n  const oldStateRef = useRef<CollectionFilters | null>(null)\n  const isMobile = useIsMobile()\n  const screenSize = useScreenSize()\n\n  useEffect(() => {\n    setIsCollectionNftsLoading(loading)\n  }, [loading, setIsCollectionNftsLoading])\n\n  const hasRarity = useMemo(() => {\n    const hasRarity = getRarityStatus(rarityStatusCache, collectionStats?.address, collectionAssets) ?? false\n    setHasRarity(hasRarity)\n    return hasRarity\n  }, [collectionStats.address, collectionAssets, setHasRarity])\n\n  const sortDropDownOptions: DropDownOption[] = useMemo(\n    () => getSortDropdownOptions(setSortBy, hasRarity),\n    [hasRarity, setSortBy]\n  )\n\n  useEffect(() => {\n    setSweepOpen(false)\n    return () => {\n      useCollectionFilters.setState(initialCollectionFilterState)\n    }\n  }, [contractAddress])\n\n  const assets = useMemo(() => {\n    if (!collectionAssets) return null\n    return collectionAssets.map((asset) => (\n      <CollectionAsset\n        key={asset.address + asset.tokenId}\n        asset={asset}\n        isMobile={isMobile}\n        mediaShouldBePlaying={asset.tokenId === currentTokenPlayingMedia}\n        setCurrentTokenPlayingMedia={setCurrentTokenPlayingMedia}\n        rarityVerified={rarityVerified}\n        uniformAspectRatio={uniformAspectRatio}\n        setUniformAspectRatio={setUniformAspectRatio}\n        renderedHeight={renderedHeight}\n        setRenderedHeight={setRenderedHeight}\n      />\n    ))\n  }, [collectionAssets, isMobile, currentTokenPlayingMedia, rarityVerified, uniformAspectRatio, renderedHeight])\n\n  const hasNfts = collectionAssets && collectionAssets.length > 0\n  const hasErc1155s = hasNfts && collectionAssets[0] && collectionAssets[0]?.tokenType === NftStandard.Erc1155\n\n  const minMaxPriceChipText: string | undefined = useMemo(() => {\n    if (debouncedMinPrice && debouncedMaxPrice) {\n      return `Price: ${debouncedMinPrice} - ${debouncedMaxPrice} ETH`\n    } else if (debouncedMinPrice) {\n      return `Min. Price: ${debouncedMinPrice} ETH`\n    } else if (debouncedMaxPrice) {\n      return `Max Price: ${debouncedMaxPrice} ETH`\n    }\n\n    return undefined\n  }, [debouncedMinPrice, debouncedMaxPrice])\n\n  useEffect(() => {\n    const marketCount: any = {}\n    collectionStats?.marketplaceCount?.forEach(({ marketplace, count }) => {\n      marketCount[marketplace] = count\n    })\n    setMarketCount(marketCount)\n    oldStateRef.current = useCollectionFilters.getState()\n  }, [collectionStats?.marketplaceCount, setMarketCount])\n\n  const location = useLocation()\n  // Applying filters from URL to local state\n  useEffect(() => {\n    if (collectionStats?.traits) {\n      const modifiedQuery = applyFiltersFromURL(location, collectionStats)\n\n      requestAnimationFrame(() => {\n        useCollectionFilters.setState(modifiedQuery as any)\n      })\n\n      useCollectionFilters.subscribe((state) => {\n        if (JSON.stringify(oldStateRef.current) !== JSON.stringify(state)) {\n          syncLocalFiltersWithURL(state)\n          oldStateRef.current = state\n        }\n      })\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location])\n\n  useEffect(() => {\n    setUniformAspectRatio(UniformAspectRatios.unset)\n    setRenderedHeight(undefined)\n  }, [contractAddress])\n\n  useEffect(() => {\n    if (collectionStats && collectionStats.stats?.floor_price) {\n      const lowValue = collectionStats.stats?.floor_price\n      const maxValue = 10 * collectionStats.stats?.floor_price\n\n      if (priceRangeLow === '') {\n        setPriceRangeLow(lowValue?.toFixed(2))\n      }\n\n      if (priceRangeHigh === '') {\n        setPriceRangeHigh(maxValue.toFixed(2))\n      }\n    }\n  }, [collectionStats, priceRangeLow, priceRangeHigh, setPriceRangeHigh, setPriceRangeLow])\n\n  const handleSweepClick = useCallback(() => {\n    if (hasErc1155s) return\n    if (!sweepIsOpen) {\n      scrollToTop()\n      if (!bagExpanded && !isMobile) toggleBag()\n    }\n    setSweepOpen(!sweepIsOpen)\n  }, [bagExpanded, hasErc1155s, isMobile, sweepIsOpen, toggleBag])\n\n  const handleClearAllClick = useCallback(() => {\n    reset()\n    setPrevMinMax([0, 100])\n    scrollToTop()\n  }, [reset, setPrevMinMax])\n\n  return (\n    <>\n      <AnimatedBox\n        backgroundColor=\"backgroundBackdrop\"\n        position=\"sticky\"\n        top=\"72\"\n        width=\"full\"\n        zIndex=\"3\"\n        marginBottom={{ sm: '8', md: '20' }}\n        paddingTop=\"16\"\n        paddingBottom=\"16\"\n      >\n        <ActionsContainer>\n          <ActionsSubContainer>\n            <TraceEvent\n              events={[BrowserEvent.onClick]}\n              element={ElementName.NFT_FILTER_BUTTON}\n              name={EventName.NFT_FILTER_OPENED}\n              shouldLogImpression={!isFiltersExpanded}\n              properties={{ collection_address: contractAddress, chain_id: chainId }}\n            >\n              <FilterButton\n                isMobile={isMobile}\n                isFiltersExpanded={isFiltersExpanded}\n                collectionCount={collectionAssets?.[0]?.totalCount ?? 0}\n                onClick={() => {\n                  if (bagExpanded && !screenSize['xl']) toggleBag()\n                  setFiltersExpanded(!isFiltersExpanded)\n                }}\n              />\n            </TraceEvent>\n            <SortDropdownContainer isFiltersExpanded={isFiltersExpanded}>\n              <SortDropdown dropDownOptions={sortDropDownOptions} />\n            </SortDropdownContainer>\n            <CollectionSearch />\n          </ActionsSubContainer>\n          {!hasErc1155s && (\n            <SweepButton\n              toggled={sweepIsOpen}\n              disabled={hasErc1155s}\n              className={buttonTextMedium}\n              onClick={handleSweepClick}\n              data-testid=\"nft-sweep-button\"\n            >\n              <SweepIcon viewBox=\"0 0 24 24\" width=\"20px\" height=\"20px\" />\n              <SweepText fontWeight={600} color=\"currentColor\" lineHeight=\"20px\">\n                Sweep\n              </SweepText>\n            </SweepButton>\n          )}\n        </ActionsContainer>\n        <InfiniteScrollWrapper>\n          {sweepIsOpen && (\n            <Sweep contractAddress={contractAddress} minPrice={debouncedMinPrice} maxPrice={debouncedMaxPrice} />\n          )}\n          <Row\n            paddingTop={!!markets.length || !!traits.length || minMaxPriceChipText ? '12' : '0'}\n            gap=\"8\"\n            flexWrap=\"wrap\"\n          >\n            {markets.map((market) => (\n              <TraitChip\n                key={market}\n                value={\n                  <MarketNameWrapper>\n                    <MarketplaceLogo src={`/nft/svgs/marketplaces/${market.toLowerCase()}.svg`} />\n                    {MARKETPLACE_ITEMS[market as keyof typeof MARKETPLACE_ITEMS]}\n                  </MarketNameWrapper>\n                }\n                onClick={() => {\n                  scrollToTop()\n                  removeMarket(market)\n                }}\n              />\n            ))}\n            {traits.map((trait) => (\n              <TraitChip\n                key={trait.trait_value}\n                value={\n                  trait.trait_type === 'Number of traits'\n                    ? `${trait.trait_value} trait${pluralize(Number(trait.trait_value))}`\n                    : `${trait.trait_type}: ${trait.trait_value}`\n                }\n                onClick={() => {\n                  scrollToTop()\n                  removeTrait(trait)\n                }}\n              />\n            ))}\n            {minMaxPriceChipText && (\n              <TraitChip\n                value={minMaxPriceChipText}\n                onClick={() => {\n                  scrollToTop()\n                  setMin('')\n                  setMax('')\n                  setPrevMinMax([0, 100])\n                }}\n              />\n            )}\n            {Boolean(traits.length || markets.length || minMaxPriceChipText) && (\n              <ClearAllButton onClick={handleClearAllClick}>Clear All</ClearAllButton>\n            )}\n          </Row>\n        </InfiniteScrollWrapper>\n      </AnimatedBox>\n      <InfiniteScrollWrapper>\n        {loading ? (\n          <CollectionNftsLoading height={renderedHeight} />\n        ) : (\n          <InfiniteScroll\n            next={loadMore}\n            hasMore={hasNext ?? false}\n            loader={Boolean(hasNext && hasNfts) && <LoadingAssets />}\n            dataLength={collectionAssets?.length ?? 0}\n            style={{ overflow: 'unset' }}\n            className={hasNfts ? styles.assetList : undefined}\n          >\n            {!hasNfts ? (\n              <Center width=\"full\" color=\"textSecondary\" textAlign=\"center\" style={{ height: '60vh' }}>\n                <EmptyCollectionWrapper>\n                  <p className={headlineMedium}>No NFTS found</p>\n                  <Box\n                    onClick={reset}\n                    type=\"button\"\n                    className={clsx(bodySmall, buttonTextMedium)}\n                    color=\"accentAction\"\n                    cursor=\"pointer\"\n                  >\n                    <ViewFullCollection>View full collection</ViewFullCollection>\n                  </Box>\n                </EmptyCollectionWrapper>\n              </Center>\n            ) : (\n              assets\n            )}\n          </InfiniteScroll>\n        )}\n      </InfiniteScrollWrapper>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}