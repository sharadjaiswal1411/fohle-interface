{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n  message: \"boolean schema is false\"\n};\nfunction topBoolOrEmptySchema(it) {\n  const {\n    gen,\n    schema,\n    validateName\n  } = it;\n  if (schema === false) {\n    falseSchemaError(it, false);\n  } else if (typeof schema == \"object\" && schema.$async === true) {\n    gen.return(names_1.default.data);\n  } else {\n    gen.assign((0, codegen_1._)`${validateName}.errors`, null);\n    gen.return(true);\n  }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n  const {\n    gen,\n    schema\n  } = it;\n  if (schema === false) {\n    gen.var(valid, false); // TODO var\n    falseSchemaError(it);\n  } else {\n    gen.var(valid, true); // TODO var\n  }\n}\n\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n  const {\n    gen,\n    data\n  } = it;\n  // TODO maybe some other interface should be used for non-keyword validation errors...\n  const cxt = {\n    gen,\n    keyword: \"false schema\",\n    data,\n    schema: false,\n    schemaCode: false,\n    schemaValue: false,\n    params: {},\n    it\n  };\n  (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}","map":{"version":3,"sources":["../../../lib/compile/validate/boolSchema.ts"],"names":[],"mappings":";;;;;;AAEA,MAAA,QAAA,GAAA,OAAA,CAAA,WAAA,CAAA;AACA,MAAA,SAAA,GAAA,OAAA,CAAA,YAAA,CAAA;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;AAEA,MAAM,SAAS,GAA2B;EACxC,OAAO,EAAE;CACV;AAED,SAAgB,oBAAoB,CAAC,EAAa,EAAA;EAChD,MAAM;IAAC,GAAG;IAAE,MAAM;IAAE;EAAY,CAAC,GAAG,EAAE;EACtC,IAAI,MAAM,KAAK,KAAK,EAAE;IACpB,gBAAgB,CAAC,EAAE,EAAE,KAAK,CAAC;GAC5B,MAAM,IAAI,OAAO,MAAM,IAAI,QAAQ,IAAI,MAAM,CAAC,MAAM,KAAK,IAAI,EAAE;IAC9D,GAAG,CAAC,MAAM,CAAC,OAAA,CAAA,OAAC,CAAC,IAAI,CAAC;GACnB,MAAM;IACL,GAAG,CAAC,MAAM,CAAC,CAAA,CAAA,EAAA,SAAA,CAAA,CAAC,CAAA,GAAG,YAAY,SAAS,EAAE,IAAI,CAAC;IAC3C,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;EACjB;AACH;AAVA,OAAA,CAAA,oBAAA,GAAA,oBAAA;AAYA,SAAgB,iBAAiB,CAAC,EAAa,EAAE,KAAW,EAAA;EAC1D,MAAM;IAAC,GAAG;IAAE;EAAM,CAAC,GAAG,EAAE;EACxB,IAAI,MAAM,KAAK,KAAK,EAAE;IACpB,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA,CAAC;IACtB,gBAAgB,CAAC,EAAE,CAAC;GACrB,MAAM;IACL,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA,CAAC;EACtB;AACH;;AARA,OAAA,CAAA,iBAAA,GAAA,iBAAA;AAUA,SAAS,gBAAgB,CAAC,EAAa,EAAE,iBAA2B,EAAA;EAClE,MAAM;IAAC,GAAG;IAAE;EAAI,CAAC,GAAG,EAAE;EACtB;EACA,MAAM,GAAG,GAAoB;IAC3B,GAAG;IACH,OAAO,EAAE,cAAc;IACvB,IAAI;IACJ,MAAM,EAAE,KAAK;IACb,UAAU,EAAE,KAAK;IACjB,WAAW,EAAE,KAAK;IAClB,MAAM,EAAE,CAAA,CAAE;IACV;GACD;EACD,CAAA,CAAA,EAAA,QAAA,CAAA,WAAW,EAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,iBAAiB,CAAC;AAC3D","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map"]},"metadata":{},"sourceType":"script"}