{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar options_1 = require(\"./options\");\nvar builder_1 = __importDefault(require(\"./builder\"));\nvar utils_1 = require(\"./utils\");\nvar Vibrant = /** @class */function () {\n  function Vibrant(_src, opts) {\n    this._src = _src;\n    this.opts = utils_1.assignDeep({}, Vibrant.DefaultOpts, opts);\n  }\n  Vibrant.use = function (pipeline) {\n    this._pipeline = pipeline;\n  };\n  Vibrant.from = function (src) {\n    return new builder_1.default(src);\n  };\n  Object.defineProperty(Vibrant.prototype, \"result\", {\n    get: function get() {\n      return this._result;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Vibrant.prototype._process = function (image, opts) {\n    var quantizer = this.opts.quantizer;\n    image.scaleDown(this.opts);\n    var processOpts = options_1.buildProcessOptions(this.opts, opts);\n    return Vibrant._pipeline.process(image.getImageData(), processOpts);\n  };\n  Vibrant.prototype.palette = function () {\n    return this.swatches();\n  };\n  Vibrant.prototype.swatches = function () {\n    throw new Error('Method deprecated. Use `Vibrant.result.palettes[name]` instead');\n  };\n  Vibrant.prototype.getPalette = function () {\n    var _this = this;\n    var arg0 = arguments[0];\n    var arg1 = arguments[1];\n    var name = typeof arg0 === 'string' ? arg0 : 'default';\n    var cb = typeof arg0 === 'string' ? arg1 : arg0;\n    var image = new this.opts.ImageClass();\n    return image.load(this._src).then(function (image) {\n      return _this._process(image, {\n        generators: [name]\n      });\n    }).then(function (result) {\n      _this._result = result;\n      return result.palettes[name];\n    }).then(function (res) {\n      image.remove();\n      if (cb) {\n        cb(undefined, res);\n      }\n      return res;\n    }).catch(function (err) {\n      image.remove();\n      if (cb) {\n        cb(err);\n      }\n      return Promise.reject(err);\n    });\n  };\n  Vibrant.prototype.getPalettes = function () {\n    var _this = this;\n    var arg0 = arguments[0];\n    var arg1 = arguments[1];\n    var names = Array.isArray(arg0) ? arg0 : ['*'];\n    var cb = Array.isArray(arg0) ? arg1 : arg0;\n    var image = new this.opts.ImageClass();\n    return image.load(this._src).then(function (image) {\n      return _this._process(image, {\n        generators: names\n      });\n    }).then(function (result) {\n      _this._result = result;\n      return result.palettes;\n    }).then(function (res) {\n      image.remove();\n      if (cb) {\n        cb(undefined, res);\n      }\n      return res;\n    }).catch(function (err) {\n      image.remove();\n      if (cb) {\n        cb(err);\n      }\n      return Promise.reject(err);\n    });\n  };\n  Vibrant.DefaultOpts = {\n    colorCount: 64,\n    quality: 5,\n    filters: []\n  };\n  return Vibrant;\n}();\nexports.default = Vibrant;","map":{"version":3,"sources":["../../../../packages/vibrant-core/src/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar options_1 = require(\"./options\");\nvar builder_1 = __importDefault(require(\"./builder\"));\nvar utils_1 = require(\"./utils\");\nvar Vibrant = /** @class */ (function () {\n    function Vibrant(_src, opts) {\n        this._src = _src;\n        this.opts = utils_1.assignDeep({}, Vibrant.DefaultOpts, opts);\n    }\n    Vibrant.use = function (pipeline) {\n        this._pipeline = pipeline;\n    };\n    Vibrant.from = function (src) {\n        return new builder_1.default(src);\n    };\n    Object.defineProperty(Vibrant.prototype, \"result\", {\n        get: function () {\n            return this._result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Vibrant.prototype._process = function (image, opts) {\n        var quantizer = this.opts.quantizer;\n        image.scaleDown(this.opts);\n        var processOpts = options_1.buildProcessOptions(this.opts, opts);\n        return Vibrant._pipeline.process(image.getImageData(), processOpts);\n    };\n    Vibrant.prototype.palette = function () {\n        return this.swatches();\n    };\n    Vibrant.prototype.swatches = function () {\n        throw new Error('Method deprecated. Use `Vibrant.result.palettes[name]` instead');\n    };\n    Vibrant.prototype.getPalette = function () {\n        var _this = this;\n        var arg0 = arguments[0];\n        var arg1 = arguments[1];\n        var name = typeof arg0 === 'string' ? arg0 : 'default';\n        var cb = typeof arg0 === 'string' ? arg1 : arg0;\n        var image = new this.opts.ImageClass();\n        return image\n            .load(this._src)\n            .then(function (image) { return _this._process(image, { generators: [name] }); })\n            .then(function (result) {\n            _this._result = result;\n            return result.palettes[name];\n        })\n            .then(function (res) {\n            image.remove();\n            if (cb) {\n                cb(undefined, res);\n            }\n            return res;\n        })\n            .catch(function (err) {\n            image.remove();\n            if (cb) {\n                cb(err);\n            }\n            return Promise.reject(err);\n        });\n    };\n    Vibrant.prototype.getPalettes = function () {\n        var _this = this;\n        var arg0 = arguments[0];\n        var arg1 = arguments[1];\n        var names = Array.isArray(arg0) ? arg0 : ['*'];\n        var cb = Array.isArray(arg0) ? arg1 : arg0;\n        var image = new this.opts.ImageClass();\n        return image\n            .load(this._src)\n            .then(function (image) {\n            return _this._process(image, {\n                generators: names\n            });\n        })\n            .then(function (result) {\n            _this._result = result;\n            return result.palettes;\n        })\n            .then(function (res) {\n            image.remove();\n            if (cb) {\n                cb(undefined, res);\n            }\n            return res;\n        })\n            .catch(function (err) {\n            image.remove();\n            if (cb) {\n                cb(err);\n            }\n            return Promise.reject(err);\n        });\n    };\n    Vibrant.DefaultOpts = {\n        colorCount: 64,\n        quality: 5,\n        filters: []\n    };\n    return Vibrant;\n}());\nexports.default = Vibrant;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}