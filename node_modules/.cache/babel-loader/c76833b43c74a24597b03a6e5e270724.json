{"ast":null,"code":"import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Percent}from'@uniswap/sdk-core';import{DEFAULT_DEADLINE_FROM_NOW}from'constants/misc';import{useCallback,useMemo,useState}from'react';import{useUserSlippageTolerance,useUserTransactionTTL}from'state/user/hooks';/**\n * Integrates the Widget's settings, keeping the widget and app settings in sync.\n * NB: This acts as an integration layer, so certain values are duplicated in order to translate\n * between app and widget representations.\n */export function useSyncWidgetSettings(){var _useUserTransactionTT=useUserTransactionTTL(),_useUserTransactionTT2=_slicedToArray(_useUserTransactionTT,2),appTtl=_useUserTransactionTT2[0],setAppTtl=_useUserTransactionTT2[1];var _useState=useState(appTtl/60),_useState2=_slicedToArray(_useState,2),widgetTtl=_useState2[0],setWidgetTtl=_useState2[1];var onTransactionDeadlineChange=useCallback(function(widgetTtl){setWidgetTtl(widgetTtl);var appTtl=widgetTtl===undefined?widgetTtl:widgetTtl*60;setAppTtl(appTtl!==null&&appTtl!==void 0?appTtl:DEFAULT_DEADLINE_FROM_NOW);},[setAppTtl]);var _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,2),appSlippage=_useUserSlippageToler2[0],setAppSlippage=_useUserSlippageToler2[1];var _useState3=useState(appSlippage==='auto'?undefined:appSlippage.toFixed(2)),_useState4=_slicedToArray(_useState3,2),widgetSlippage=_useState4[0],setWidgetSlippage=_useState4[1];var onSlippageChange=useCallback(function(widgetSlippage){setWidgetSlippage(widgetSlippage.max);if(widgetSlippage.auto||!widgetSlippage.max){setAppSlippage('auto');}else{setAppSlippage(new Percent(Math.floor(Number(widgetSlippage.max)*100),10000));}},[setAppSlippage]);var onSettingsReset=useCallback(function(){setWidgetTtl(undefined);setAppTtl(DEFAULT_DEADLINE_FROM_NOW);setWidgetSlippage(undefined);setAppSlippage('auto');},[setAppSlippage,setAppTtl]);var settings=useMemo(function(){var auto=appSlippage==='auto';return{slippage:{auto:auto,max:widgetSlippage},transactionTtl:widgetTtl};},[widgetSlippage,widgetTtl,appSlippage]);var settingsHandlers=useMemo(function(){return{onSettingsReset:onSettingsReset,onSlippageChange:onSlippageChange,onTransactionDeadlineChange:onTransactionDeadlineChange};},[onSettingsReset,onSlippageChange,onTransactionDeadlineChange]);return{settings:_objectSpread({settings:settings},settingsHandlers)};}","map":{"version":3,"names":["Percent","DEFAULT_DEADLINE_FROM_NOW","useCallback","useMemo","useState","useUserSlippageTolerance","useUserTransactionTTL","useSyncWidgetSettings","appTtl","setAppTtl","widgetTtl","setWidgetTtl","onTransactionDeadlineChange","undefined","appSlippage","setAppSlippage","toFixed","widgetSlippage","setWidgetSlippage","onSlippageChange","max","auto","Math","floor","Number","onSettingsReset","settings","slippage","transactionTtl","settingsHandlers"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/Widget/settings.ts"],"sourcesContent":["import { Percent } from '@uniswap/sdk-core'\nimport { Slippage, SwapController, SwapEventHandlers } from '@uniswap/widgets'\nimport { DEFAULT_DEADLINE_FROM_NOW } from 'constants/misc'\nimport { useCallback, useMemo, useState } from 'react'\nimport { useUserSlippageTolerance, useUserTransactionTTL } from 'state/user/hooks'\n\n/**\n * Integrates the Widget's settings, keeping the widget and app settings in sync.\n * NB: This acts as an integration layer, so certain values are duplicated in order to translate\n * between app and widget representations.\n */\nexport function useSyncWidgetSettings() {\n  const [appTtl, setAppTtl] = useUserTransactionTTL()\n  const [widgetTtl, setWidgetTtl] = useState<number | undefined>(appTtl / 60)\n  const onTransactionDeadlineChange = useCallback(\n    (widgetTtl: number | undefined) => {\n      setWidgetTtl(widgetTtl)\n      const appTtl = widgetTtl === undefined ? widgetTtl : widgetTtl * 60\n      setAppTtl(appTtl ?? DEFAULT_DEADLINE_FROM_NOW)\n    },\n    [setAppTtl]\n  )\n\n  const [appSlippage, setAppSlippage] = useUserSlippageTolerance()\n  const [widgetSlippage, setWidgetSlippage] = useState<string | undefined>(\n    appSlippage === 'auto' ? undefined : appSlippage.toFixed(2)\n  )\n  const onSlippageChange = useCallback(\n    (widgetSlippage: Slippage) => {\n      setWidgetSlippage(widgetSlippage.max)\n      if (widgetSlippage.auto || !widgetSlippage.max) {\n        setAppSlippage('auto')\n      } else {\n        setAppSlippage(new Percent(Math.floor(Number(widgetSlippage.max) * 100), 10_000))\n      }\n    },\n    [setAppSlippage]\n  )\n\n  const onSettingsReset = useCallback(() => {\n    setWidgetTtl(undefined)\n    setAppTtl(DEFAULT_DEADLINE_FROM_NOW)\n    setWidgetSlippage(undefined)\n    setAppSlippage('auto')\n  }, [setAppSlippage, setAppTtl])\n\n  const settings: SwapController['settings'] = useMemo(() => {\n    const auto = appSlippage === 'auto'\n    return { slippage: { auto, max: widgetSlippage }, transactionTtl: widgetTtl }\n  }, [widgetSlippage, widgetTtl, appSlippage])\n  const settingsHandlers: SwapEventHandlers = useMemo(\n    () => ({ onSettingsReset, onSlippageChange, onTransactionDeadlineChange }),\n    [onSettingsReset, onSlippageChange, onTransactionDeadlineChange]\n  )\n\n  return { settings: { settings, ...settingsHandlers } }\n}\n"],"mappings":"uVAAA,OAASA,OAAO,KAAQ,mBAAmB,CAE3C,OAASC,yBAAyB,KAAQ,gBAAgB,CAC1D,OAASC,WAAW,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CACtD,OAASC,wBAAwB,CAAEC,qBAAqB,KAAQ,kBAAkB,CAElF;AACA;AACA;AACA;AACA,GACA,MAAO,SAASC,sBAAqB,EAAG,CACtC,0BAA4BD,qBAAqB,EAAE,gEAA5CE,MAAM,2BAAEC,SAAS,2BACxB,cAAkCL,QAAQ,CAAqBI,MAAM,CAAG,EAAE,CAAC,wCAApEE,SAAS,eAAEC,YAAY,eAC9B,GAAMC,4BAA2B,CAAGV,WAAW,CAC7C,SAACQ,SAA6B,CAAK,CACjCC,YAAY,CAACD,SAAS,CAAC,CACvB,GAAMF,OAAM,CAAGE,SAAS,GAAKG,SAAS,CAAGH,SAAS,CAAGA,SAAS,CAAG,EAAE,CACnED,SAAS,CAACD,MAAM,SAANA,MAAM,UAANA,MAAM,CAAIP,yBAAyB,CAAC,CAChD,CAAC,CACD,CAACQ,SAAS,CAAC,CACZ,CAED,0BAAsCJ,wBAAwB,EAAE,gEAAzDS,WAAW,2BAAEC,cAAc,2BAClC,eAA4CX,QAAQ,CAClDU,WAAW,GAAK,MAAM,CAAGD,SAAS,CAAGC,WAAW,CAACE,OAAO,CAAC,CAAC,CAAC,CAC5D,yCAFMC,cAAc,eAAEC,iBAAiB,eAGxC,GAAMC,iBAAgB,CAAGjB,WAAW,CAClC,SAACe,cAAwB,CAAK,CAC5BC,iBAAiB,CAACD,cAAc,CAACG,GAAG,CAAC,CACrC,GAAIH,cAAc,CAACI,IAAI,EAAI,CAACJ,cAAc,CAACG,GAAG,CAAE,CAC9CL,cAAc,CAAC,MAAM,CAAC,CACxB,CAAC,IAAM,CACLA,cAAc,CAAC,GAAIf,QAAO,CAACsB,IAAI,CAACC,KAAK,CAACC,MAAM,CAACP,cAAc,CAACG,GAAG,CAAC,CAAG,GAAG,CAAC,CAAE,KAAM,CAAC,CAAC,CACnF,CACF,CAAC,CACD,CAACL,cAAc,CAAC,CACjB,CAED,GAAMU,gBAAe,CAAGvB,WAAW,CAAC,UAAM,CACxCS,YAAY,CAACE,SAAS,CAAC,CACvBJ,SAAS,CAACR,yBAAyB,CAAC,CACpCiB,iBAAiB,CAACL,SAAS,CAAC,CAC5BE,cAAc,CAAC,MAAM,CAAC,CACxB,CAAC,CAAE,CAACA,cAAc,CAAEN,SAAS,CAAC,CAAC,CAE/B,GAAMiB,SAAoC,CAAGvB,OAAO,CAAC,UAAM,CACzD,GAAMkB,KAAI,CAAGP,WAAW,GAAK,MAAM,CACnC,MAAO,CAAEa,QAAQ,CAAE,CAAEN,IAAI,CAAJA,IAAI,CAAED,GAAG,CAAEH,cAAe,CAAC,CAAEW,cAAc,CAAElB,SAAU,CAAC,CAC/E,CAAC,CAAE,CAACO,cAAc,CAAEP,SAAS,CAAEI,WAAW,CAAC,CAAC,CAC5C,GAAMe,iBAAmC,CAAG1B,OAAO,CACjD,iBAAO,CAAEsB,eAAe,CAAfA,eAAe,CAAEN,gBAAgB,CAAhBA,gBAAgB,CAAEP,2BAA2B,CAA3BA,2BAA4B,CAAC,EAAC,CAC1E,CAACa,eAAe,CAAEN,gBAAgB,CAAEP,2BAA2B,CAAC,CACjE,CAED,MAAO,CAAEc,QAAQ,gBAAIA,QAAQ,CAARA,QAAQ,EAAKG,gBAAgB,CAAG,CAAC,CACxD"},"metadata":{},"sourceType":"module"}