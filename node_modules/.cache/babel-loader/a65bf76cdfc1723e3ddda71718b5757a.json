{"ast":null,"code":"import { useTheme as _useTheme } from \"styled-components\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/collection/Sweep.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport 'rc-slider/assets/index.css';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { formatEther, parseEther } from '@ethersproject/units';\nimport { useSweepNftAssets } from 'graphql/data/nft/Asset';\nimport { useBag, useCollectionFilters } from 'nft/hooks';\nimport { isPooledMarket, Markets } from 'nft/types';\nimport { calcPoolPrice, calcSudoSwapPrice, formatWeiToDecimal, isInSameSudoSwapPool } from 'nft/utils';\nimport { default as Slider } from 'rc-slider';\nimport { useEffect, useMemo, useReducer, useState } from 'react';\nimport { ThemedText } from 'theme';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SweepContainer = _styled.div.withConfig({\n  displayName: \"Sweep__SweepContainer\",\n  componentId: \"sc-13hme8d-0\"\n})([\"display:flex;gap:60px;margin-top:12px;padding:16px;border-radius:12px;background-color:\", \";justify-content:space-between;background:linear-gradient(\", \",\", \") padding-box,linear-gradient(to right,#4673fa,#9646fa) border-box;border:2px solid transparent;\"], _ref => {\n  let {\n    theme\n  } = _ref;\n  return theme.backgroundSurface;\n}, _ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return theme.backgroundSurface;\n}, _ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return theme.backgroundSurface;\n});\nconst StyledSlider = _styled(Slider).withConfig({\n  displayName: \"Sweep__StyledSlider\",\n  componentId: \"sc-13hme8d-1\"\n})([\"cursor:pointer;@media only screen and (max-width:\", \"){display:none;}\"], _ref4 => {\n  let {\n    theme\n  } = _ref4;\n  return `${theme.breakpoint.md}px`;\n});\nconst SweepLeftmostContainer = _styled.div.withConfig({\n  displayName: \"Sweep__SweepLeftmostContainer\",\n  componentId: \"sc-13hme8d-2\"\n})([\"display:flex;width:100%;gap:24px;\"]);\nconst SweepRightmostContainer = _styled.div.withConfig({\n  displayName: \"Sweep__SweepRightmostContainer\",\n  componentId: \"sc-13hme8d-3\"\n})([\"display:flex;flex-shrink:0;justify-content:flex-end;align-items:center;gap:8px;min-width:160px;@media only screen and (max-width:\", \"){display:none;}\"], _ref5 => {\n  let {\n    theme\n  } = _ref5;\n  return `${theme.breakpoint.md}px`;\n});\nconst SweepHeaderContainer = _styled.div.withConfig({\n  displayName: \"Sweep__SweepHeaderContainer\",\n  componentId: \"sc-13hme8d-4\"\n})([\"@media only screen and (max-width:\", \"){display:none;}\"], _ref6 => {\n  let {\n    theme\n  } = _ref6;\n  return `${theme.breakpoint.md}px`;\n});\nconst SweepSubContainer = _styled.div.withConfig({\n  displayName: \"Sweep__SweepSubContainer\",\n  componentId: \"sc-13hme8d-5\"\n})([\"display:flex;width:100%;gap:12px;align-items:center;\"]);\nconst InputContainer = _styled.input.withConfig({\n  displayName: \"Sweep__InputContainer\",\n  componentId: \"sc-13hme8d-6\"\n})([\"width:96px;color:\", \";border:1px solid \", \";background:none;border-radius:8px;padding:6px 8px;font-size:16px;font-weight:400px;line-height:20px;@media only screen and (max-width:\", \"){width:100%;}:hover,:focus{outline:none;border:1px solid \", \";}\"], _ref7 => {\n  let {\n    theme\n  } = _ref7;\n  return theme.textPrimary;\n}, _ref8 => {\n  let {\n    theme\n  } = _ref8;\n  return theme.backgroundOutline;\n}, _ref9 => {\n  let {\n    theme\n  } = _ref9;\n  return `${theme.breakpoint.md}px`;\n}, _ref10 => {\n  let {\n    theme\n  } = _ref10;\n  return theme.accentAction;\n});\nconst ToggleContainer = _styled.div.withConfig({\n  displayName: \"Sweep__ToggleContainer\",\n  componentId: \"sc-13hme8d-7\"\n})([\"display:flex;border:1px solid \", \";background:none;border-radius:12px;padding:4px;cursor:pointer;\"], _ref11 => {\n  let {\n    theme\n  } = _ref11;\n  return theme.backgroundOutline;\n});\nconst ToggleSwitch = _styled.div.withConfig({\n  displayName: \"Sweep__ToggleSwitch\",\n  componentId: \"sc-13hme8d-8\"\n})([\"color:\", \";padding:4px 8px;border-radius:8px;background-color:\", \";font-size:14px;font-weight:600;line-height:16px;\"], _ref12 => {\n  let {\n    theme,\n    active\n  } = _ref12;\n  return active ? theme.textPrimary : theme.textSecondary;\n}, _ref13 => {\n  let {\n    theme,\n    active\n  } = _ref13;\n  return active ? theme.backgroundInteractive : `none`;\n});\nconst NftDisplayContainer = _styled.div.withConfig({\n  displayName: \"Sweep__NftDisplayContainer\",\n  componentId: \"sc-13hme8d-9\"\n})([\"position:relative;width:34px;height:34px;\"]);\nconst NftHolder = _styled.div.withConfig({\n  displayName: \"Sweep__NftHolder\",\n  componentId: \"sc-13hme8d-10\"\n})([\"position:absolute;top:50%;left:50%;width:26px;height:26px;border-radius:4px;background:\", \";background-size:26px;opacity:\", \";transform:\", \";z-index:\", \";\"], _ref14 => {\n  let {\n    theme,\n    src\n  } = _ref14;\n  return src ? `url(${src})` : theme.textTertiary;\n}, _ref15 => {\n  let {\n    src,\n    index\n  } = _ref15;\n  return src ? 1.0 : index === 0 ? 0.9 : index === 1 ? 0.6 : 0.3;\n}, _ref16 => {\n  let {\n    index\n  } = _ref16;\n  return index === 0 ? 'translate(-50%, -50%) rotate(-4.42deg)' : index === 1 ? 'translate(-50%, -50%) rotate(-14.01deg)' : 'translate(-50%, -50%) rotate(10.24deg)';\n}, _ref17 => {\n  let {\n    index\n  } = _ref17;\n  return 3 - index;\n});\nconst wholeNumberRegex = RegExp(`^(0|[1-9][0-9]*)$`);\nconst twoDecimalPlacesRegex = RegExp(`^\\\\d*\\\\.?\\\\d{0,2}$`);\nconst NftDisplay = _ref18 => {\n  let {\n    nfts\n  } = _ref18;\n  return /*#__PURE__*/_jsxDEV(NftDisplayContainer, {\n    children: [...Array(3)].map((_, index) => {\n      return /*#__PURE__*/_jsxDEV(NftHolder, {\n        index: index,\n        src: nfts.length - 1 >= index ? nfts[nfts.length - 1 - index].smallImageUrl : undefined\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_c = NftDisplay;\nexport const Sweep = _ref19 => {\n  _s();\n  var _sortedAssets$length;\n  let {\n    contractAddress,\n    minPrice,\n    maxPrice\n  } = _ref19;\n  const theme = _useTheme();\n  const [isItemsToggled, toggleSweep] = useReducer(state => !state, true);\n  const [sweepAmount, setSweepAmount] = useState('');\n  const addAssetsToBag = useBag(state => state.addAssetsToBag);\n  const removeAssetsFromBag = useBag(state => state.removeAssetsFromBag);\n  const itemsInBag = useBag(state => state.itemsInBag);\n  const lockSweepItems = useBag(state => state.lockSweepItems);\n  const setBagExpanded = useBag(state => state.setBagExpanded);\n  const traits = useCollectionFilters(state => state.traits);\n  const markets = useCollectionFilters(state => state.markets);\n  const collectionParams = useSweepFetcherParams(contractAddress, 'others', minPrice, maxPrice);\n  const sudoSwapParams = useSweepFetcherParams(contractAddress, Markets.Sudoswap, minPrice, maxPrice);\n  const nftxParams = useSweepFetcherParams(contractAddress, Markets.NFTX, minPrice, maxPrice);\n  const nft20Params = useSweepFetcherParams(contractAddress, Markets.NFT20, minPrice, maxPrice);\n  // These calls will suspend if the query is not yet loaded.\n  const {\n    data: collectionAssets\n  } = useSweepNftAssets(collectionParams);\n  const {\n    data: sudoSwapAssets\n  } = useSweepNftAssets(sudoSwapParams);\n  const {\n    data: nftxAssets\n  } = useSweepNftAssets(nftxParams);\n  const {\n    data: nft20Assets\n  } = useSweepNftAssets(nft20Params);\n  const {\n    sortedAssets,\n    sortedAssetsTotalEth\n  } = useMemo(() => {\n    var _collectionAssets$len, _sudoSwapAssets$lengt, _nftxAssets$length, _nft20Assets$length;\n    if (!collectionAssets && !sudoSwapAssets && !nftxAssets && !nft20Assets) {\n      return {\n        sortedAssets: undefined,\n        sortedAssetsTotalEth: BigNumber.from(0)\n      };\n    }\n    let counterNFTX = 0;\n    let counterNFT20 = 0;\n    let jointCollections = [];\n    if (sudoSwapAssets) jointCollections = [...jointCollections, ...sudoSwapAssets];\n    if (nftxAssets) jointCollections = [...jointCollections, ...nftxAssets];\n    if (nft20Assets) jointCollections = [...jointCollections, ...nft20Assets];\n    const sudoSwapAssetsInJointCollections = jointCollections.filter(sweepAsset => sweepAsset.marketplace === Markets.Sudoswap && !sweepAsset.susFlag);\n    jointCollections.forEach(asset => {\n      if (!asset.susFlag) {\n        if (asset.marketplace === Markets.Sudoswap) {\n          const poolPrice = calcSudoSwapPrice(asset, sudoSwapAssetsInJointCollections.filter(sweepAsset => isInSameSudoSwapPool(asset, sweepAsset)).findIndex(sweepAsset => sweepAsset.tokenId === asset.tokenId));\n          asset.priceInfo.ETHPrice = poolPrice !== null && poolPrice !== void 0 ? poolPrice : '';\n        } else {\n          const isNFTX = asset.marketplace === Markets.NFTX;\n          const poolPrice = calcPoolPrice(asset, isNFTX ? counterNFTX : counterNFT20);\n          if (BigNumber.from(poolPrice).gt(0)) {\n            isNFTX ? counterNFTX++ : counterNFT20++;\n          }\n          asset.priceInfo.ETHPrice = poolPrice;\n        }\n      }\n    });\n    jointCollections = collectionAssets ? collectionAssets.concat(jointCollections) : jointCollections;\n    jointCollections.sort((a, b) => {\n      return BigNumber.from(a.priceInfo.ETHPrice).gt(BigNumber.from(b.priceInfo.ETHPrice)) ? 1 : -1;\n    });\n    let validAssets = jointCollections.filter(asset => BigNumber.from(asset.priceInfo.ETHPrice).gte(0) && !asset.susFlag);\n    validAssets = validAssets.slice(0, Math.max((_collectionAssets$len = collectionAssets === null || collectionAssets === void 0 ? void 0 : collectionAssets.length) !== null && _collectionAssets$len !== void 0 ? _collectionAssets$len : 0, (_sudoSwapAssets$lengt = sudoSwapAssets === null || sudoSwapAssets === void 0 ? void 0 : sudoSwapAssets.length) !== null && _sudoSwapAssets$lengt !== void 0 ? _sudoSwapAssets$lengt : 0, (_nftxAssets$length = nftxAssets === null || nftxAssets === void 0 ? void 0 : nftxAssets.length) !== null && _nftxAssets$length !== void 0 ? _nftxAssets$length : 0, (_nft20Assets$length = nft20Assets === null || nft20Assets === void 0 ? void 0 : nft20Assets.length) !== null && _nft20Assets$length !== void 0 ? _nft20Assets$length : 0));\n    return {\n      sortedAssets: validAssets,\n      sortedAssetsTotalEth: validAssets.reduce((total, asset) => total.add(BigNumber.from(asset.priceInfo.ETHPrice)), BigNumber.from(0))\n    };\n  }, [collectionAssets, sudoSwapAssets, nftxAssets, nft20Assets]);\n  const {\n    sweepItemsInBag,\n    sweepEthPrice\n  } = useMemo(() => {\n    const sweepItemsInBag = itemsInBag.filter(item => item.inSweep && item.asset.address === contractAddress).map(item => item.asset);\n    const sweepEthPrice = sweepItemsInBag.reduce((total, asset) => total.add(BigNumber.from(asset.priceInfo.ETHPrice)), BigNumber.from(0));\n    return {\n      sweepItemsInBag,\n      sweepEthPrice\n    };\n  }, [itemsInBag, contractAddress]);\n  useEffect(() => {\n    if (sweepItemsInBag.length === 0) setSweepAmount('');\n  }, [sweepItemsInBag]);\n  useEffect(() => {\n    lockSweepItems(contractAddress);\n  }, [contractAddress, traits, markets, minPrice, maxPrice, lockSweepItems]);\n  const clearSweep = () => {\n    setSweepAmount('');\n    removeAssetsFromBag(sweepItemsInBag);\n  };\n  const handleSweep = value => {\n    if (sortedAssets) {\n      if (isItemsToggled) {\n        if (sweepItemsInBag.length === 0 && value > 0) setBagExpanded({\n          bagExpanded: true\n        });\n        if (sweepItemsInBag.length < value) {\n          addAssetsToBag(sortedAssets.slice(sweepItemsInBag.length, value), true);\n        } else {\n          removeAssetsFromBag(sweepItemsInBag.slice(value, sweepItemsInBag.length), true);\n        }\n        setSweepAmount(value < 1 ? '' : value.toString());\n      } else {\n        const wishValueInWei = parseEther(value.toString());\n        if (sweepEthPrice.lte(wishValueInWei)) {\n          let curIndex = sweepItemsInBag.length;\n          let curTotal = sweepEthPrice;\n          const wishAssets = [];\n          while (curIndex < sortedAssets.length && curTotal.add(BigNumber.from(sortedAssets[curIndex].priceInfo.ETHPrice)).lte(wishValueInWei)) {\n            wishAssets.push(sortedAssets[curIndex]);\n            curTotal = curTotal.add(BigNumber.from(sortedAssets[curIndex].priceInfo.ETHPrice));\n            curIndex++;\n          }\n          if (wishAssets.length > 0) {\n            if (sweepItemsInBag.length === 0) setBagExpanded({\n              bagExpanded: true\n            });\n            addAssetsToBag(wishAssets, true);\n          }\n        } else {\n          let curIndex = sweepItemsInBag.length - 1;\n          let curTotal = sweepEthPrice;\n          const wishAssets = [];\n          while (curIndex >= 0 && curTotal.gt(wishValueInWei)) {\n            wishAssets.push(sweepItemsInBag[curIndex]);\n            curTotal = curTotal.sub(BigNumber.from(sweepItemsInBag[curIndex].priceInfo.ETHPrice));\n            curIndex--;\n          }\n          if (wishAssets.length > 0) {\n            removeAssetsFromBag(wishAssets, true);\n          }\n        }\n        setSweepAmount(value === 0 ? '' : value.toFixed(2));\n      }\n    }\n  };\n  const handleSliderChange = value => {\n    if (typeof value === 'number') {\n      if (sortedAssets) {\n        if (isItemsToggled) {\n          if (Math.floor(value) !== Math.floor(sweepAmount !== '' ? parseFloat(sweepAmount) : 0)) handleSweep(Math.floor(value));\n          setSweepAmount(value < 1 ? '' : value.toString());\n        } else {\n          handleSweep(value);\n          setSweepAmount(value === 0 ? '' : value.toFixed(2));\n        }\n      }\n    }\n  };\n  const handleInput = value => {\n    if (value === '') {\n      handleSweep(0);\n      setSweepAmount('');\n    } else if (isItemsToggled && wholeNumberRegex.test(value)) {\n      handleSweep(parseFloat(value));\n      setSweepAmount(value);\n    } else if (!isItemsToggled && twoDecimalPlacesRegex.test(value)) {\n      handleSweep(parseFloat(value));\n      setSweepAmount(value);\n    }\n  };\n  const handleToggleSweep = () => {\n    clearSweep();\n    toggleSweep();\n  };\n  return /*#__PURE__*/_jsxDEV(SweepContainer, {\n    \"data-testid\": \"nft-sweep-slider\",\n    children: [/*#__PURE__*/_jsxDEV(SweepLeftmostContainer, {\n      children: [/*#__PURE__*/_jsxDEV(SweepHeaderContainer, {\n        children: /*#__PURE__*/_jsxDEV(ThemedText.SubHeader, {\n          color: \"textPrimary\",\n          lineHeight: \"20px\",\n          paddingTop: \"6px\",\n          paddingBottom: \"6px\",\n          children: \"Sweep\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SweepSubContainer, {\n        children: [/*#__PURE__*/_jsxDEV(StyledSlider, {\n          defaultValue: 0,\n          min: 0,\n          max: isItemsToggled ? (_sortedAssets$length = sortedAssets === null || sortedAssets === void 0 ? void 0 : sortedAssets.length) !== null && _sortedAssets$length !== void 0 ? _sortedAssets$length : 0 : parseFloat(formatEther(sortedAssetsTotalEth).toString()),\n          value: isItemsToggled ? sweepItemsInBag.length : parseFloat(formatWeiToDecimal(sweepEthPrice.toString())),\n          step: isItemsToggled ? 1 : 0.01,\n          trackStyle: {\n            top: '3px',\n            height: '8px',\n            background: `radial-gradient(101.8% 4091.31% at 0% 0%, #4673FA 0%, #9646FA 100%)`\n          },\n          handleStyle: {\n            top: '3px',\n            width: '12px',\n            height: '20px',\n            backgroundColor: `#4673FA`,\n            //This is a custom color to align with the gradient on sweep - we may want to systematize it eventually\n            borderRadius: '4px',\n            border: 'none',\n            opacity: '1',\n            boxShadow: `${theme.shallowShadow.slice(0, -1)}`\n          },\n          railStyle: {\n            top: '3px',\n            height: '8px',\n            backgroundColor: `${theme.backgroundInteractive}`\n          },\n          onChange: handleSliderChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n          inputMode: \"decimal\",\n          autoComplete: \"off\",\n          autoCorrect: \"off\"\n          // text-specific options\n          ,\n          type: \"text\",\n          pattern: \"^[0-9]*[.,]?[0-9]*$\",\n          placeholder: \"0\",\n          minLength: 1,\n          maxLength: 79,\n          spellCheck: \"false\",\n          value: isItemsToggled ? sweepAmount !== '' ? Math.floor(parseFloat(sweepAmount)) : sweepAmount : sweepAmount,\n          onChange: event => {\n            handleInput(event.target.value.replace(/,/g, '.'));\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ToggleContainer, {\n          onClick: handleToggleSweep,\n          children: [/*#__PURE__*/_jsxDEV(ToggleSwitch, {\n            active: isItemsToggled,\n            children: \"Items\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ToggleSwitch, {\n            active: !isItemsToggled,\n            children: \"ETH\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SweepRightmostContainer, {\n      children: [/*#__PURE__*/_jsxDEV(ThemedText.SubHeader, {\n        \"font-size\": \"14px\",\n        children: `${formatWeiToDecimal(sweepEthPrice.toString())} ETH`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NftDisplay, {\n        nfts: sweepItemsInBag\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 5\n  }, this);\n};\n_s(Sweep, \"JR/yn5xr8BVFGvy6hD4P7qB+sjE=\", false, function () {\n  return [_useTheme, useBag, useBag, useBag, useBag, useBag, useCollectionFilters, useCollectionFilters, useSweepFetcherParams, useSweepFetcherParams, useSweepFetcherParams, useSweepFetcherParams, useSweepNftAssets, useSweepNftAssets, useSweepNftAssets, useSweepNftAssets];\n});\n_c2 = Sweep;\nconst ALL_OTHER_MARKETS = [Markets.Opensea, Markets.X2Y2, Markets.LooksRare];\nfunction useSweepFetcherParams(contractAddress, market, minPrice, maxPrice) {\n  _s2();\n  const traits = useCollectionFilters(state => state.traits);\n  const markets = useCollectionFilters(state => state.markets);\n  const isMarketFiltered = !!markets.length;\n  return useMemo(() => {\n    if (isMarketFiltered) {\n      if (market === 'others') {\n        const marketsToQuery = markets.filter(market => !isPooledMarket(market));\n        if (marketsToQuery.length > 0) {\n          return {\n            contractAddress,\n            traits,\n            markets: marketsToQuery\n          };\n        } else {\n          return {\n            contractAddress: '',\n            traits: [],\n            markets: []\n          };\n        }\n      }\n      if (!markets.includes(market)) return {\n        contractAddress: '',\n        traits: [],\n        markets: []\n      };\n    }\n    switch (market) {\n      case Markets.Sudoswap:\n      case Markets.NFTX:\n      case Markets.NFT20:\n        return {\n          contractAddress,\n          traits,\n          markets: [market],\n          price: {\n            low: minPrice,\n            high: maxPrice,\n            symbol: 'ETH'\n          }\n        };\n      case 'others':\n        return {\n          contractAddress,\n          traits,\n          markets: ALL_OTHER_MARKETS,\n          price: {\n            low: minPrice,\n            high: maxPrice,\n            symbol: 'ETH'\n          }\n        };\n    }\n  }, [contractAddress, isMarketFiltered, market, markets, maxPrice, minPrice, traits]);\n}\n_s2(useSweepFetcherParams, \"zMJQm65AG3hkqspicAZGSXAnIr8=\", false, function () {\n  return [useCollectionFilters, useCollectionFilters];\n});\nvar _c, _c2;\n$RefreshReg$(_c, \"NftDisplay\");\n$RefreshReg$(_c2, \"Sweep\");","map":{"version":3,"names":["BigNumber","formatEther","parseEther","useSweepNftAssets","useBag","useCollectionFilters","isPooledMarket","Markets","calcPoolPrice","calcSudoSwapPrice","formatWeiToDecimal","isInSameSudoSwapPool","default","Slider","useEffect","useMemo","useReducer","useState","ThemedText","SweepContainer","styled","div","theme","backgroundSurface","StyledSlider","breakpoint","md","SweepLeftmostContainer","SweepRightmostContainer","SweepHeaderContainer","SweepSubContainer","InputContainer","input","textPrimary","backgroundOutline","accentAction","ToggleContainer","ToggleSwitch","active","textSecondary","backgroundInteractive","NftDisplayContainer","NftHolder","src","textTertiary","index","wholeNumberRegex","RegExp","twoDecimalPlacesRegex","NftDisplay","nfts","Array","map","_","length","smallImageUrl","undefined","Sweep","contractAddress","minPrice","maxPrice","useTheme","isItemsToggled","toggleSweep","state","sweepAmount","setSweepAmount","addAssetsToBag","removeAssetsFromBag","itemsInBag","lockSweepItems","setBagExpanded","traits","markets","collectionParams","useSweepFetcherParams","sudoSwapParams","Sudoswap","nftxParams","NFTX","nft20Params","NFT20","data","collectionAssets","sudoSwapAssets","nftxAssets","nft20Assets","sortedAssets","sortedAssetsTotalEth","from","counterNFTX","counterNFT20","jointCollections","sudoSwapAssetsInJointCollections","filter","sweepAsset","marketplace","susFlag","forEach","asset","poolPrice","findIndex","tokenId","priceInfo","ETHPrice","isNFTX","gt","concat","sort","a","b","validAssets","gte","slice","Math","max","reduce","total","add","sweepItemsInBag","sweepEthPrice","item","inSweep","address","clearSweep","handleSweep","value","bagExpanded","toString","wishValueInWei","lte","curIndex","curTotal","wishAssets","push","sub","toFixed","handleSliderChange","floor","parseFloat","handleInput","test","handleToggleSweep","top","height","background","width","backgroundColor","borderRadius","border","opacity","boxShadow","shallowShadow","event","target","replace","ALL_OTHER_MARKETS","Opensea","X2Y2","LooksRare","market","isMarketFiltered","marketsToQuery","includes","price","low","high","symbol"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/collection/Sweep.tsx"],"sourcesContent":["import 'rc-slider/assets/index.css'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { formatEther, parseEther } from '@ethersproject/units'\nimport { SweepFetcherParams, useSweepNftAssets } from 'graphql/data/nft/Asset'\nimport { useBag, useCollectionFilters } from 'nft/hooks'\nimport { GenieAsset, isPooledMarket, Markets } from 'nft/types'\nimport { calcPoolPrice, calcSudoSwapPrice, formatWeiToDecimal, isInSameSudoSwapPool } from 'nft/utils'\nimport { default as Slider } from 'rc-slider'\nimport { useEffect, useMemo, useReducer, useState } from 'react'\nimport styled, { useTheme } from 'styled-components/macro'\nimport { ThemedText } from 'theme'\n\nconst SweepContainer = styled.div`\n  display: flex;\n  gap: 60px;\n  margin-top: 12px;\n  padding: 16px;\n  border-radius: 12px;\n  background-color: ${({ theme }) => theme.backgroundSurface};\n  justify-content: space-between;\n  background: linear-gradient(${({ theme }) => theme.backgroundSurface}, ${({ theme }) => theme.backgroundSurface})\n      padding-box,\n    linear-gradient(to right, #4673fa, #9646fa) border-box;\n  border: 2px solid transparent;\n`\n\nconst StyledSlider = styled(Slider)`\n  cursor: pointer;\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    display: none;\n  }\n`\n\nconst SweepLeftmostContainer = styled.div`\n  display: flex;\n  width: 100%;\n  gap: 24px;\n`\n\nconst SweepRightmostContainer = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 8px;\n  min-width: 160px;\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    display: none;\n  }\n`\n\nconst SweepHeaderContainer = styled.div`\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    display: none;\n  }\n`\n\nconst SweepSubContainer = styled.div`\n  display: flex;\n  width: 100%;\n  gap: 12px;\n  align-items: center;\n`\n\nconst InputContainer = styled.input`\n  width: 96px;\n  color: ${({ theme }) => theme.textPrimary};\n  border: 1px solid ${({ theme }) => theme.backgroundOutline};\n  background: none;\n  border-radius: 8px;\n  padding: 6px 8px;\n  font-size: 16px;\n  font-weight: 400px;\n  line-height: 20px;\n\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    width: 100%;\n  }\n\n  :hover,\n  :focus {\n    outline: none;\n    border: 1px solid ${({ theme }) => theme.accentAction};\n  }\n`\n\nconst ToggleContainer = styled.div`\n  display: flex;\n  border: 1px solid ${({ theme }) => theme.backgroundOutline};\n  background: none;\n  border-radius: 12px;\n  padding: 4px;\n  cursor: pointer;\n`\n\nconst ToggleSwitch = styled.div<{ active: boolean }>`\n  color: ${({ theme, active }) => (active ? theme.textPrimary : theme.textSecondary)};\n  padding: 4px 8px;\n  border-radius: 8px;\n  background-color: ${({ theme, active }) => (active ? theme.backgroundInteractive : `none`)};\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 16px;\n`\n\nconst NftDisplayContainer = styled.div`\n  position: relative;\n  width: 34px;\n  height: 34px;\n`\n\nconst NftHolder = styled.div<{ index: number; src: string | undefined }>`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 26px;\n  height: 26px;\n  border-radius: 4px;\n  background: ${({ theme, src }) => (src ? `url(${src})` : theme.textTertiary)};\n  background-size: 26px;\n  opacity: ${({ src, index }) => (src ? 1.0 : index === 0 ? 0.9 : index === 1 ? 0.6 : 0.3)};\n  transform: ${({ index }) =>\n    index === 0\n      ? 'translate(-50%, -50%) rotate(-4.42deg)'\n      : index === 1\n      ? 'translate(-50%, -50%) rotate(-14.01deg)'\n      : 'translate(-50%, -50%) rotate(10.24deg)'};\n  z-index: ${({ index }) => 3 - index};\n`\n\nconst wholeNumberRegex = RegExp(`^(0|[1-9][0-9]*)$`)\nconst twoDecimalPlacesRegex = RegExp(`^\\\\d*\\\\.?\\\\d{0,2}$`)\n\ninterface NftDisplayProps {\n  nfts: GenieAsset[]\n}\n\nconst NftDisplay = ({ nfts }: NftDisplayProps) => {\n  return (\n    <NftDisplayContainer>\n      {[...Array(3)].map((_, index) => {\n        return (\n          <NftHolder\n            key={index}\n            index={index}\n            src={nfts.length - 1 >= index ? nfts[nfts.length - 1 - index].smallImageUrl : undefined}\n          />\n        )\n      })}\n    </NftDisplayContainer>\n  )\n}\n\ninterface SweepProps {\n  contractAddress: string\n  minPrice: string\n  maxPrice: string\n}\n\nexport const Sweep = ({ contractAddress, minPrice, maxPrice }: SweepProps) => {\n  const theme = useTheme()\n\n  const [isItemsToggled, toggleSweep] = useReducer((state) => !state, true)\n  const [sweepAmount, setSweepAmount] = useState<string>('')\n\n  const addAssetsToBag = useBag((state) => state.addAssetsToBag)\n  const removeAssetsFromBag = useBag((state) => state.removeAssetsFromBag)\n  const itemsInBag = useBag((state) => state.itemsInBag)\n  const lockSweepItems = useBag((state) => state.lockSweepItems)\n  const setBagExpanded = useBag((state) => state.setBagExpanded)\n\n  const traits = useCollectionFilters((state) => state.traits)\n  const markets = useCollectionFilters((state) => state.markets)\n\n  const collectionParams = useSweepFetcherParams(contractAddress, 'others', minPrice, maxPrice)\n  const sudoSwapParams = useSweepFetcherParams(contractAddress, Markets.Sudoswap, minPrice, maxPrice)\n  const nftxParams = useSweepFetcherParams(contractAddress, Markets.NFTX, minPrice, maxPrice)\n  const nft20Params = useSweepFetcherParams(contractAddress, Markets.NFT20, minPrice, maxPrice)\n  // These calls will suspend if the query is not yet loaded.\n  const { data: collectionAssets } = useSweepNftAssets(collectionParams)\n  const { data: sudoSwapAssets } = useSweepNftAssets(sudoSwapParams)\n  const { data: nftxAssets } = useSweepNftAssets(nftxParams)\n  const { data: nft20Assets } = useSweepNftAssets(nft20Params)\n\n  const { sortedAssets, sortedAssetsTotalEth } = useMemo(() => {\n    if (!collectionAssets && !sudoSwapAssets && !nftxAssets && !nft20Assets) {\n      return { sortedAssets: undefined, sortedAssetsTotalEth: BigNumber.from(0) }\n    }\n\n    let counterNFTX = 0\n    let counterNFT20 = 0\n\n    let jointCollections: GenieAsset[] = []\n\n    if (sudoSwapAssets) jointCollections = [...jointCollections, ...sudoSwapAssets]\n    if (nftxAssets) jointCollections = [...jointCollections, ...nftxAssets]\n    if (nft20Assets) jointCollections = [...jointCollections, ...nft20Assets]\n\n    const sudoSwapAssetsInJointCollections = jointCollections.filter(\n      (sweepAsset) => sweepAsset.marketplace === Markets.Sudoswap && !sweepAsset.susFlag\n    )\n\n    jointCollections.forEach((asset) => {\n      if (!asset.susFlag) {\n        if (asset.marketplace === Markets.Sudoswap) {\n          const poolPrice = calcSudoSwapPrice(\n            asset,\n            sudoSwapAssetsInJointCollections\n              .filter((sweepAsset) => isInSameSudoSwapPool(asset, sweepAsset))\n              .findIndex((sweepAsset) => sweepAsset.tokenId === asset.tokenId)\n          )\n          asset.priceInfo.ETHPrice = poolPrice ?? ''\n        } else {\n          const isNFTX = asset.marketplace === Markets.NFTX\n          const poolPrice = calcPoolPrice(asset, isNFTX ? counterNFTX : counterNFT20)\n          if (BigNumber.from(poolPrice).gt(0)) {\n            isNFTX ? counterNFTX++ : counterNFT20++\n          }\n          asset.priceInfo.ETHPrice = poolPrice\n        }\n      }\n    })\n\n    jointCollections = collectionAssets ? collectionAssets.concat(jointCollections) : jointCollections\n\n    jointCollections.sort((a, b) => {\n      return BigNumber.from(a.priceInfo.ETHPrice).gt(BigNumber.from(b.priceInfo.ETHPrice)) ? 1 : -1\n    })\n\n    let validAssets = jointCollections.filter(\n      (asset) => BigNumber.from(asset.priceInfo.ETHPrice).gte(0) && !asset.susFlag\n    )\n\n    validAssets = validAssets.slice(\n      0,\n      Math.max(\n        collectionAssets?.length ?? 0,\n        sudoSwapAssets?.length ?? 0,\n        nftxAssets?.length ?? 0,\n        nft20Assets?.length ?? 0\n      )\n    )\n\n    return {\n      sortedAssets: validAssets,\n      sortedAssetsTotalEth: validAssets.reduce(\n        (total, asset) => total.add(BigNumber.from(asset.priceInfo.ETHPrice)),\n        BigNumber.from(0)\n      ),\n    }\n  }, [collectionAssets, sudoSwapAssets, nftxAssets, nft20Assets])\n\n  const { sweepItemsInBag, sweepEthPrice } = useMemo(() => {\n    const sweepItemsInBag = itemsInBag\n      .filter((item) => item.inSweep && item.asset.address === contractAddress)\n      .map((item) => item.asset)\n\n    const sweepEthPrice = sweepItemsInBag.reduce(\n      (total, asset) => total.add(BigNumber.from(asset.priceInfo.ETHPrice)),\n      BigNumber.from(0)\n    )\n\n    return { sweepItemsInBag, sweepEthPrice }\n  }, [itemsInBag, contractAddress])\n\n  useEffect(() => {\n    if (sweepItemsInBag.length === 0) setSweepAmount('')\n  }, [sweepItemsInBag])\n\n  useEffect(() => {\n    lockSweepItems(contractAddress)\n  }, [contractAddress, traits, markets, minPrice, maxPrice, lockSweepItems])\n\n  const clearSweep = () => {\n    setSweepAmount('')\n    removeAssetsFromBag(sweepItemsInBag)\n  }\n\n  const handleSweep = (value: number) => {\n    if (sortedAssets) {\n      if (isItemsToggled) {\n        if (sweepItemsInBag.length === 0 && value > 0) setBagExpanded({ bagExpanded: true })\n\n        if (sweepItemsInBag.length < value) {\n          addAssetsToBag(sortedAssets.slice(sweepItemsInBag.length, value), true)\n        } else {\n          removeAssetsFromBag(sweepItemsInBag.slice(value, sweepItemsInBag.length), true)\n        }\n        setSweepAmount(value < 1 ? '' : value.toString())\n      } else {\n        const wishValueInWei = parseEther(value.toString())\n        if (sweepEthPrice.lte(wishValueInWei)) {\n          let curIndex = sweepItemsInBag.length\n          let curTotal = sweepEthPrice\n          const wishAssets: GenieAsset[] = []\n\n          while (\n            curIndex < sortedAssets.length &&\n            curTotal.add(BigNumber.from(sortedAssets[curIndex].priceInfo.ETHPrice)).lte(wishValueInWei)\n          ) {\n            wishAssets.push(sortedAssets[curIndex])\n            curTotal = curTotal.add(BigNumber.from(sortedAssets[curIndex].priceInfo.ETHPrice))\n            curIndex++\n          }\n\n          if (wishAssets.length > 0) {\n            if (sweepItemsInBag.length === 0) setBagExpanded({ bagExpanded: true })\n            addAssetsToBag(wishAssets, true)\n          }\n        } else {\n          let curIndex = sweepItemsInBag.length - 1\n          let curTotal = sweepEthPrice\n          const wishAssets: GenieAsset[] = []\n\n          while (curIndex >= 0 && curTotal.gt(wishValueInWei)) {\n            wishAssets.push(sweepItemsInBag[curIndex])\n            curTotal = curTotal.sub(BigNumber.from(sweepItemsInBag[curIndex].priceInfo.ETHPrice))\n            curIndex--\n          }\n\n          if (wishAssets.length > 0) {\n            removeAssetsFromBag(wishAssets, true)\n          }\n        }\n\n        setSweepAmount(value === 0 ? '' : value.toFixed(2))\n      }\n    }\n  }\n\n  const handleSliderChange = (value: number | number[]) => {\n    if (typeof value === 'number') {\n      if (sortedAssets) {\n        if (isItemsToggled) {\n          if (Math.floor(value) !== Math.floor(sweepAmount !== '' ? parseFloat(sweepAmount) : 0))\n            handleSweep(Math.floor(value))\n          setSweepAmount(value < 1 ? '' : value.toString())\n        } else {\n          handleSweep(value)\n          setSweepAmount(value === 0 ? '' : value.toFixed(2))\n        }\n      }\n    }\n  }\n\n  const handleInput = (value: string) => {\n    if (value === '') {\n      handleSweep(0)\n      setSweepAmount('')\n    } else if (isItemsToggled && wholeNumberRegex.test(value)) {\n      handleSweep(parseFloat(value))\n      setSweepAmount(value)\n    } else if (!isItemsToggled && twoDecimalPlacesRegex.test(value)) {\n      handleSweep(parseFloat(value))\n      setSweepAmount(value)\n    }\n  }\n\n  const handleToggleSweep = () => {\n    clearSweep()\n    toggleSweep()\n  }\n\n  return (\n    <SweepContainer data-testid=\"nft-sweep-slider\">\n      <SweepLeftmostContainer>\n        <SweepHeaderContainer>\n          <ThemedText.SubHeader color=\"textPrimary\" lineHeight=\"20px\" paddingTop=\"6px\" paddingBottom=\"6px\">\n            Sweep\n          </ThemedText.SubHeader>\n        </SweepHeaderContainer>\n        <SweepSubContainer>\n          <StyledSlider\n            defaultValue={0}\n            min={0}\n            max={isItemsToggled ? sortedAssets?.length ?? 0 : parseFloat(formatEther(sortedAssetsTotalEth).toString())}\n            value={isItemsToggled ? sweepItemsInBag.length : parseFloat(formatWeiToDecimal(sweepEthPrice.toString()))}\n            step={isItemsToggled ? 1 : 0.01}\n            trackStyle={{\n              top: '3px',\n              height: '8px',\n              background: `radial-gradient(101.8% 4091.31% at 0% 0%, #4673FA 0%, #9646FA 100%)`,\n            }}\n            handleStyle={{\n              top: '3px',\n              width: '12px',\n              height: '20px',\n              backgroundColor: `#4673FA`, //This is a custom color to align with the gradient on sweep - we may want to systematize it eventually\n              borderRadius: '4px',\n              border: 'none',\n              opacity: '1',\n              boxShadow: `${theme.shallowShadow.slice(0, -1)}`,\n            }}\n            railStyle={{\n              top: '3px',\n              height: '8px',\n              backgroundColor: `${theme.backgroundInteractive}`,\n            }}\n            onChange={handleSliderChange}\n          />\n          <InputContainer\n            inputMode=\"decimal\"\n            autoComplete=\"off\"\n            autoCorrect=\"off\"\n            // text-specific options\n            type=\"text\"\n            pattern=\"^[0-9]*[.,]?[0-9]*$\"\n            placeholder=\"0\"\n            minLength={1}\n            maxLength={79}\n            spellCheck=\"false\"\n            value={\n              isItemsToggled ? (sweepAmount !== '' ? Math.floor(parseFloat(sweepAmount)) : sweepAmount) : sweepAmount\n            }\n            onChange={(event) => {\n              handleInput(event.target.value.replace(/,/g, '.'))\n            }}\n          />\n          <ToggleContainer onClick={handleToggleSweep}>\n            <ToggleSwitch active={isItemsToggled}>Items</ToggleSwitch>\n            <ToggleSwitch active={!isItemsToggled}>ETH</ToggleSwitch>\n          </ToggleContainer>\n        </SweepSubContainer>\n      </SweepLeftmostContainer>\n      <SweepRightmostContainer>\n        <ThemedText.SubHeader font-size=\"14px\">{`${formatWeiToDecimal(\n          sweepEthPrice.toString()\n        )} ETH`}</ThemedText.SubHeader>\n        <NftDisplay nfts={sweepItemsInBag} />\n      </SweepRightmostContainer>\n    </SweepContainer>\n  )\n}\n\nconst ALL_OTHER_MARKETS = [Markets.Opensea, Markets.X2Y2, Markets.LooksRare]\n\nfunction useSweepFetcherParams(\n  contractAddress: string,\n  market: Markets.Sudoswap | Markets.NFTX | Markets.NFT20 | 'others',\n  minPrice: string,\n  maxPrice: string\n): SweepFetcherParams {\n  const traits = useCollectionFilters((state) => state.traits)\n  const markets = useCollectionFilters((state) => state.markets)\n\n  const isMarketFiltered = !!markets.length\n\n  return useMemo(() => {\n    if (isMarketFiltered) {\n      if (market === 'others') {\n        const marketsToQuery = markets.filter((market) => !isPooledMarket(market as Markets))\n\n        if (marketsToQuery.length > 0) {\n          return {\n            contractAddress,\n            traits,\n            markets: marketsToQuery,\n          }\n        } else {\n          return { contractAddress: '', traits: [], markets: [] }\n        }\n      }\n      if (!markets.includes(market)) return { contractAddress: '', traits: [], markets: [] }\n    }\n\n    switch (market) {\n      case Markets.Sudoswap:\n      case Markets.NFTX:\n      case Markets.NFT20:\n        return {\n          contractAddress,\n          traits,\n          markets: [market],\n\n          price: {\n            low: minPrice,\n            high: maxPrice,\n            symbol: 'ETH',\n          },\n        }\n      case 'others':\n        return {\n          contractAddress,\n          traits,\n          markets: ALL_OTHER_MARKETS,\n\n          price: {\n            low: minPrice,\n            high: maxPrice,\n            symbol: 'ETH',\n          },\n        }\n    }\n  }, [contractAddress, isMarketFiltered, market, markets, maxPrice, minPrice, traits])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}