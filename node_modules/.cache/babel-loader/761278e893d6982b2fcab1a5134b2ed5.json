{"ast":null,"code":"import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";var _byAddress;import{createReducer}from'@reduxjs/toolkit';import{SupportedNetwork}from'constants/networks';import{currentTimestamp}from'./../../utils/index';import{addPoolKeys,updatePoolChartData,updatePoolData,updatePoolTransactions,updateTickData}from'./actions';var initialState={byAddress:(_byAddress={},_defineProperty(_byAddress,SupportedNetwork.ETHEREUM,{}),_defineProperty(_byAddress,SupportedNetwork.ARBITRUM,{}),_defineProperty(_byAddress,SupportedNetwork.OPTIMISM,{}),_defineProperty(_byAddress,SupportedNetwork.POLYGON,{}),_defineProperty(_byAddress,SupportedNetwork.CELO,{}),_byAddress)};export default createReducer(initialState,function(builder){return builder.addCase(updatePoolData,function(state,_ref){var _ref$payload=_ref.payload,pools=_ref$payload.pools,networkId=_ref$payload.networkId;pools.map(function(poolData){return state.byAddress[networkId][poolData.address]=_objectSpread(_objectSpread({},state.byAddress[networkId][poolData.address]),{},{data:poolData,lastUpdated:currentTimestamp()});});})// add address to byAddress keys if not included yet\n.addCase(addPoolKeys,function(state,_ref2){var _ref2$payload=_ref2.payload,poolAddresses=_ref2$payload.poolAddresses,networkId=_ref2$payload.networkId;poolAddresses.map(function(address){if(!state.byAddress[networkId][address]){state.byAddress[networkId][address]={data:undefined,chartData:undefined,transactions:undefined,lastUpdated:undefined,tickData:undefined};}});}).addCase(updatePoolChartData,function(state,_ref3){var _ref3$payload=_ref3.payload,poolAddress=_ref3$payload.poolAddress,chartData=_ref3$payload.chartData,networkId=_ref3$payload.networkId;state.byAddress[networkId][poolAddress]=_objectSpread(_objectSpread({},state.byAddress[networkId][poolAddress]),{},{chartData:chartData});}).addCase(updatePoolTransactions,function(state,_ref4){var _ref4$payload=_ref4.payload,poolAddress=_ref4$payload.poolAddress,transactions=_ref4$payload.transactions,networkId=_ref4$payload.networkId;state.byAddress[networkId][poolAddress]=_objectSpread(_objectSpread({},state.byAddress[networkId][poolAddress]),{},{transactions:transactions});}).addCase(updateTickData,function(state,_ref5){var _ref5$payload=_ref5.payload,poolAddress=_ref5$payload.poolAddress,tickData=_ref5$payload.tickData,networkId=_ref5$payload.networkId;state.byAddress[networkId][poolAddress]=_objectSpread(_objectSpread({},state.byAddress[networkId][poolAddress]),{},{tickData:tickData});});});","map":{"version":3,"names":["createReducer","SupportedNetwork","currentTimestamp","addPoolKeys","updatePoolChartData","updatePoolData","updatePoolTransactions","updateTickData","initialState","byAddress","ETHEREUM","ARBITRUM","OPTIMISM","POLYGON","CELO","builder","addCase","state","payload","pools","networkId","map","poolData","address","data","lastUpdated","poolAddresses","undefined","chartData","transactions","tickData","poolAddress"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/state/pools/reducer.ts"],"sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\nimport { SupportedNetwork } from 'constants/networks'\nimport { PoolTickData } from 'data/pools/tickData'\nimport { Transaction } from 'types'\n\nimport { currentTimestamp } from './../../utils/index'\nimport { addPoolKeys, updatePoolChartData, updatePoolData, updatePoolTransactions, updateTickData } from './actions'\n\nexport interface PoolData {\n  // basic token info\n  address: string\n  feeTier: number\n\n  token0: {\n    name: string\n    symbol: string\n    address: string\n    decimals: number\n    derivedETH: number\n  }\n\n  token1: {\n    name: string\n    symbol: string\n    address: string\n    decimals: number\n    derivedETH: number\n  }\n\n  // for tick math\n  liquidity: number\n  sqrtPrice: number\n  tick: number\n\n  // volume\n  volumeUSD: number\n  volumeUSDChange: number\n  volumeUSDWeek: number\n\n  // liquidity\n  tvlUSD: number\n  tvlUSDChange: number\n\n  // prices\n  token0Price: number\n  token1Price: number\n\n  // token amounts\n  tvlToken0: number\n  tvlToken1: number\n}\n\nexport type PoolChartEntry = {\n  date: number\n  volumeUSD: number\n  totalValueLockedUSD: number\n  feesUSD: number\n}\n\ninterface PoolsState {\n  // analytics data from\n  byAddress: {\n    [networkId: string]: {\n      [address: string]: {\n        data: PoolData | undefined\n        chartData: PoolChartEntry[] | undefined\n        transactions: Transaction[] | undefined\n        lastUpdated: number | undefined\n        tickData: PoolTickData | undefined\n      }\n    }\n  }\n}\n\nconst initialState: PoolsState = {\n  byAddress: {\n    [SupportedNetwork.ETHEREUM]: {},\n    [SupportedNetwork.ARBITRUM]: {},\n    [SupportedNetwork.OPTIMISM]: {},\n    [SupportedNetwork.POLYGON]: {},\n    [SupportedNetwork.CELO]: {},\n  },\n}\n\nexport default createReducer(initialState, (builder) =>\n  builder\n    .addCase(updatePoolData, (state, { payload: { pools, networkId } }) => {\n      pools.map(\n        (poolData) =>\n          (state.byAddress[networkId][poolData.address] = {\n            ...state.byAddress[networkId][poolData.address],\n            data: poolData,\n            lastUpdated: currentTimestamp(),\n          })\n      )\n    })\n    // add address to byAddress keys if not included yet\n    .addCase(addPoolKeys, (state, { payload: { poolAddresses, networkId } }) => {\n      poolAddresses.map((address) => {\n        if (!state.byAddress[networkId][address]) {\n          state.byAddress[networkId][address] = {\n            data: undefined,\n            chartData: undefined,\n            transactions: undefined,\n            lastUpdated: undefined,\n            tickData: undefined,\n          }\n        }\n      })\n    })\n    .addCase(updatePoolChartData, (state, { payload: { poolAddress, chartData, networkId } }) => {\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], chartData }\n    })\n    .addCase(updatePoolTransactions, (state, { payload: { poolAddress, transactions, networkId } }) => {\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], transactions }\n    })\n    .addCase(updateTickData, (state, { payload: { poolAddress, tickData, networkId } }) => {\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], tickData }\n    })\n)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}