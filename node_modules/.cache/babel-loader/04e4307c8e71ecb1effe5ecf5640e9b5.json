{"ast":null,"code":"import _toConsumableArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{nearestUsableTick,Pool,TICK_SPACINGS,tickToPrice}from'@uniswap/v3-sdk';import{useWeb3React}from'@web3-react/core';import{SupportedChainId}from'constants/chains';import{ZERO_ADDRESS}from'constants/misc';import useAllV3TicksQuery from'graphql/thegraph/AllV3TicksQuery';import JSBI from'jsbi';import{useSingleContractMultipleData}from'lib/hooks/multicall';import{useEffect,useMemo,useState}from'react';import computeSurroundingTicks from'utils/computeSurroundingTicks';import{V3_CORE_FACTORY_ADDRESSES}from'../constants/addresses';import{useTickLens}from'./useContract';import{PoolState,usePool}from'./usePools';var PRICE_FIXED_DIGITS=8;var CHAIN_IDS_MISSING_SUBGRAPH_DATA=[SupportedChainId.ARBITRUM_ONE,SupportedChainId.ARBITRUM_RINKEBY];// Tick with fields parsed to JSBIs, and active liquidity computed.\nvar REFRESH_FREQUENCY={blocksPerFetch:2};var getActiveTick=function getActiveTick(tickCurrent,feeAmount){return tickCurrent&&feeAmount?Math.floor(tickCurrent/TICK_SPACINGS[feeAmount])*TICK_SPACINGS[feeAmount]:undefined;};var bitmapIndex=function bitmapIndex(tick,tickSpacing){return Math.floor(tick/tickSpacing/256);};function useTicksFromTickLens(currencyA,currencyB,feeAmount){var numSurroundingTicks=arguments.length>3&&arguments[3]!==undefined?arguments[3]:125;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tickDataLatestSynced=_useState2[0],setTickDataLatestSynced=_useState2[1];var _usePool=usePool(currencyA,currencyB,feeAmount),_usePool2=_slicedToArray(_usePool,2),poolState=_usePool2[0],pool=_usePool2[1];var tickSpacing=feeAmount&&TICK_SPACINGS[feeAmount];// Find nearest valid tick for pool in case tick is not initialized.\nvar activeTick=(pool===null||pool===void 0?void 0:pool.tickCurrent)&&tickSpacing?nearestUsableTick(pool===null||pool===void 0?void 0:pool.tickCurrent,tickSpacing):undefined;var _useWeb3React=useWeb3React(),chainId=_useWeb3React.chainId;var poolAddress=currencyA&&currencyB&&feeAmount&&poolState===PoolState.EXISTS?Pool.getAddress(currencyA===null||currencyA===void 0?void 0:currencyA.wrapped,currencyB===null||currencyB===void 0?void 0:currencyB.wrapped,feeAmount,undefined,chainId?V3_CORE_FACTORY_ADDRESSES[chainId]:undefined):undefined;// it is also possible to grab all tick data but it is extremely slow\n// bitmapIndex(nearestUsableTick(TickMath.MIN_TICK, tickSpacing), tickSpacing)\nvar minIndex=useMemo(function(){return tickSpacing&&activeTick?bitmapIndex(activeTick-numSurroundingTicks*tickSpacing,tickSpacing):undefined;},[tickSpacing,activeTick,numSurroundingTicks]);var maxIndex=useMemo(function(){return tickSpacing&&activeTick?bitmapIndex(activeTick+numSurroundingTicks*tickSpacing,tickSpacing):undefined;},[tickSpacing,activeTick,numSurroundingTicks]);var tickLensArgs=useMemo(function(){return maxIndex&&minIndex&&poolAddress&&poolAddress!==ZERO_ADDRESS?new Array(maxIndex-minIndex+1).fill(0).map(function(_,i){return i+minIndex;}).map(function(wordIndex){return[poolAddress,wordIndex];}):[];},[minIndex,maxIndex,poolAddress]);var tickLens=useTickLens();var callStates=useSingleContractMultipleData(tickLensArgs.length>0?tickLens:undefined,'getPopulatedTicksInWord',tickLensArgs,REFRESH_FREQUENCY);var isError=useMemo(function(){return callStates.some(function(_ref){var error=_ref.error;return error;});},[callStates]);var isLoading=useMemo(function(){return callStates.some(function(_ref2){var loading=_ref2.loading;return loading;});},[callStates]);var IsSyncing=useMemo(function(){return callStates.some(function(_ref3){var syncing=_ref3.syncing;return syncing;});},[callStates]);var isValid=useMemo(function(){return callStates.some(function(_ref4){var valid=_ref4.valid;return valid;});},[callStates]);var tickData=useMemo(function(){return callStates.map(function(_ref5){var result=_ref5.result;return result===null||result===void 0?void 0:result.populatedTicks;}).reduce(function(accumulator,current){var _current$map;return[].concat(_toConsumableArray(accumulator),_toConsumableArray((_current$map=current===null||current===void 0?void 0:current.map(function(tickData){return{tick:tickData.tick,liquidityNet:JSBI.BigInt(tickData.liquidityNet)};}))!==null&&_current$map!==void 0?_current$map:[]));},[]);},[callStates]);// reset on input change\nuseEffect(function(){setTickDataLatestSynced([]);},[currencyA,currencyB,feeAmount]);// return the latest synced tickData even if we are still loading the newest data\nuseEffect(function(){if(!IsSyncing&&!isLoading&&!isError&&isValid){setTickDataLatestSynced(tickData.sort(function(a,b){return a.tick-b.tick;}));}},[isError,isLoading,IsSyncing,tickData,isValid]);return useMemo(function(){return{isLoading:isLoading,IsSyncing:IsSyncing,isError:isError,isValid:isValid,tickData:tickDataLatestSynced};},[isLoading,IsSyncing,isError,isValid,tickDataLatestSynced]);}function useTicksFromSubgraph(currencyA,currencyB,feeAmount){var _useWeb3React2=useWeb3React(),chainId=_useWeb3React2.chainId;var poolAddress=currencyA&&currencyB&&feeAmount?Pool.getAddress(currencyA===null||currencyA===void 0?void 0:currencyA.wrapped,currencyB===null||currencyB===void 0?void 0:currencyB.wrapped,feeAmount,undefined,chainId?V3_CORE_FACTORY_ADDRESSES[chainId]:undefined):undefined;return useAllV3TicksQuery(poolAddress,0,30000);}// Fetches all ticks for a given pool\nfunction useAllV3Ticks(currencyA,currencyB,feeAmount){var _subgraphTickData$dat;var useSubgraph=currencyA?!CHAIN_IDS_MISSING_SUBGRAPH_DATA.includes(currencyA.chainId):true;var tickLensTickData=useTicksFromTickLens(!useSubgraph?currencyA:undefined,currencyB,feeAmount);var subgraphTickData=useTicksFromSubgraph(useSubgraph?currencyA:undefined,currencyB,feeAmount);return{isLoading:useSubgraph?subgraphTickData.isLoading:tickLensTickData.isLoading,error:useSubgraph?subgraphTickData.error:tickLensTickData.isError,ticks:useSubgraph?(_subgraphTickData$dat=subgraphTickData.data)===null||_subgraphTickData$dat===void 0?void 0:_subgraphTickData$dat.ticks:tickLensTickData.tickData};}export function usePoolActiveLiquidity(currencyA,currencyB,feeAmount){var pool=usePool(currencyA,currencyB,feeAmount);// Find nearest valid tick for pool in case tick is not initialized.\nvar activeTick=useMemo(function(){var _pool$;return getActiveTick((_pool$=pool[1])===null||_pool$===void 0?void 0:_pool$.tickCurrent,feeAmount);},[pool,feeAmount]);var _useAllV3Ticks=useAllV3Ticks(currencyA,currencyB,feeAmount),isLoading=_useAllV3Ticks.isLoading,error=_useAllV3Ticks.error,ticks=_useAllV3Ticks.ticks;return useMemo(function(){var _pool$1$liquidity,_pool$2;if(!currencyA||!currencyB||activeTick===undefined||pool[0]!==PoolState.EXISTS||!ticks||ticks.length===0||isLoading){return{isLoading:isLoading||pool[0]===PoolState.LOADING,error:error,activeTick:activeTick,data:undefined};}var token0=currencyA===null||currencyA===void 0?void 0:currencyA.wrapped;var token1=currencyB===null||currencyB===void 0?void 0:currencyB.wrapped;// find where the active tick would be to partition the array\n// if the active tick is initialized, the pivot will be an element\n// if not, take the previous tick as pivot\nvar pivot=ticks.findIndex(function(_ref6){var tick=_ref6.tick;return tick>activeTick;})-1;if(pivot<0){// consider setting a local error\nconsole.error('TickData pivot not found');return{isLoading:isLoading,error:error,activeTick:activeTick,data:undefined};}var activeTickProcessed={liquidityActive:JSBI.BigInt((_pool$1$liquidity=(_pool$2=pool[1])===null||_pool$2===void 0?void 0:_pool$2.liquidity)!==null&&_pool$1$liquidity!==void 0?_pool$1$liquidity:0),tick:activeTick,liquidityNet:Number(ticks[pivot].tick)===activeTick?JSBI.BigInt(ticks[pivot].liquidityNet):JSBI.BigInt(0),price0:tickToPrice(token0,token1,activeTick).toFixed(PRICE_FIXED_DIGITS)};var subsequentTicks=computeSurroundingTicks(token0,token1,activeTickProcessed,ticks,pivot,true);var previousTicks=computeSurroundingTicks(token0,token1,activeTickProcessed,ticks,pivot,false);var ticksProcessed=previousTicks.concat(activeTickProcessed).concat(subsequentTicks);return{isLoading:isLoading,error:error,activeTick:activeTick,data:ticksProcessed};},[currencyA,currencyB,activeTick,pool,ticks,isLoading,error]);}","map":{"version":3,"names":["nearestUsableTick","Pool","TICK_SPACINGS","tickToPrice","useWeb3React","SupportedChainId","ZERO_ADDRESS","useAllV3TicksQuery","JSBI","useSingleContractMultipleData","useEffect","useMemo","useState","computeSurroundingTicks","V3_CORE_FACTORY_ADDRESSES","useTickLens","PoolState","usePool","PRICE_FIXED_DIGITS","CHAIN_IDS_MISSING_SUBGRAPH_DATA","ARBITRUM_ONE","ARBITRUM_RINKEBY","REFRESH_FREQUENCY","blocksPerFetch","getActiveTick","tickCurrent","feeAmount","Math","floor","undefined","bitmapIndex","tick","tickSpacing","useTicksFromTickLens","currencyA","currencyB","numSurroundingTicks","tickDataLatestSynced","setTickDataLatestSynced","poolState","pool","activeTick","chainId","poolAddress","EXISTS","getAddress","wrapped","minIndex","maxIndex","tickLensArgs","Array","fill","map","_","i","wordIndex","tickLens","callStates","length","isError","some","error","isLoading","loading","IsSyncing","syncing","isValid","valid","tickData","result","populatedTicks","reduce","accumulator","current","liquidityNet","BigInt","sort","a","b","useTicksFromSubgraph","useAllV3Ticks","useSubgraph","includes","tickLensTickData","subgraphTickData","ticks","data","usePoolActiveLiquidity","LOADING","token0","token1","pivot","findIndex","console","activeTickProcessed","liquidityActive","liquidity","Number","price0","toFixed","subsequentTicks","previousTicks","ticksProcessed","concat"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/hooks/usePoolTickData.ts"],"sourcesContent":["import { Currency } from '@uniswap/sdk-core'\nimport { FeeAmount, nearestUsableTick, Pool, TICK_SPACINGS, tickToPrice } from '@uniswap/v3-sdk'\nimport { useWeb3React } from '@web3-react/core'\nimport { SupportedChainId } from 'constants/chains'\nimport { ZERO_ADDRESS } from 'constants/misc'\nimport useAllV3TicksQuery, { TickData } from 'graphql/thegraph/AllV3TicksQuery'\nimport JSBI from 'jsbi'\nimport { useSingleContractMultipleData } from 'lib/hooks/multicall'\nimport ms from 'ms.macro'\nimport { useEffect, useMemo, useState } from 'react'\nimport computeSurroundingTicks from 'utils/computeSurroundingTicks'\n\nimport { V3_CORE_FACTORY_ADDRESSES } from '../constants/addresses'\nimport { useTickLens } from './useContract'\nimport { PoolState, usePool } from './usePools'\n\nconst PRICE_FIXED_DIGITS = 8\nconst CHAIN_IDS_MISSING_SUBGRAPH_DATA = [SupportedChainId.ARBITRUM_ONE, SupportedChainId.ARBITRUM_RINKEBY]\n\n// Tick with fields parsed to JSBIs, and active liquidity computed.\nexport interface TickProcessed {\n  tick: number\n  liquidityActive: JSBI\n  liquidityNet: JSBI\n  price0: string\n}\n\nconst REFRESH_FREQUENCY = { blocksPerFetch: 2 }\n\nconst getActiveTick = (tickCurrent: number | undefined, feeAmount: FeeAmount | undefined) =>\n  tickCurrent && feeAmount ? Math.floor(tickCurrent / TICK_SPACINGS[feeAmount]) * TICK_SPACINGS[feeAmount] : undefined\n\nconst bitmapIndex = (tick: number, tickSpacing: number) => {\n  return Math.floor(tick / tickSpacing / 256)\n}\n\nfunction useTicksFromTickLens(\n  currencyA: Currency | undefined,\n  currencyB: Currency | undefined,\n  feeAmount: FeeAmount | undefined,\n  numSurroundingTicks: number | undefined = 125\n) {\n  const [tickDataLatestSynced, setTickDataLatestSynced] = useState<TickData[]>([])\n\n  const [poolState, pool] = usePool(currencyA, currencyB, feeAmount)\n\n  const tickSpacing = feeAmount && TICK_SPACINGS[feeAmount]\n\n  // Find nearest valid tick for pool in case tick is not initialized.\n  const activeTick = pool?.tickCurrent && tickSpacing ? nearestUsableTick(pool?.tickCurrent, tickSpacing) : undefined\n\n  const { chainId } = useWeb3React()\n\n  const poolAddress =\n    currencyA && currencyB && feeAmount && poolState === PoolState.EXISTS\n      ? Pool.getAddress(\n          currencyA?.wrapped,\n          currencyB?.wrapped,\n          feeAmount,\n          undefined,\n          chainId ? V3_CORE_FACTORY_ADDRESSES[chainId] : undefined\n        )\n      : undefined\n\n  // it is also possible to grab all tick data but it is extremely slow\n  // bitmapIndex(nearestUsableTick(TickMath.MIN_TICK, tickSpacing), tickSpacing)\n  const minIndex = useMemo(\n    () =>\n      tickSpacing && activeTick ? bitmapIndex(activeTick - numSurroundingTicks * tickSpacing, tickSpacing) : undefined,\n    [tickSpacing, activeTick, numSurroundingTicks]\n  )\n\n  const maxIndex = useMemo(\n    () =>\n      tickSpacing && activeTick ? bitmapIndex(activeTick + numSurroundingTicks * tickSpacing, tickSpacing) : undefined,\n    [tickSpacing, activeTick, numSurroundingTicks]\n  )\n\n  const tickLensArgs: [string, number][] = useMemo(\n    () =>\n      maxIndex && minIndex && poolAddress && poolAddress !== ZERO_ADDRESS\n        ? new Array(maxIndex - minIndex + 1)\n            .fill(0)\n            .map((_, i) => i + minIndex)\n            .map((wordIndex) => [poolAddress, wordIndex])\n        : [],\n    [minIndex, maxIndex, poolAddress]\n  )\n\n  const tickLens = useTickLens()\n  const callStates = useSingleContractMultipleData(\n    tickLensArgs.length > 0 ? tickLens : undefined,\n    'getPopulatedTicksInWord',\n    tickLensArgs,\n    REFRESH_FREQUENCY\n  )\n\n  const isError = useMemo(() => callStates.some(({ error }) => error), [callStates])\n  const isLoading = useMemo(() => callStates.some(({ loading }) => loading), [callStates])\n  const IsSyncing = useMemo(() => callStates.some(({ syncing }) => syncing), [callStates])\n  const isValid = useMemo(() => callStates.some(({ valid }) => valid), [callStates])\n\n  const tickData: TickData[] = useMemo(\n    () =>\n      callStates\n        .map(({ result }) => result?.populatedTicks)\n        .reduce(\n          (accumulator, current) => [\n            ...accumulator,\n            ...(current?.map((tickData: TickData) => {\n              return {\n                tick: tickData.tick,\n                liquidityNet: JSBI.BigInt(tickData.liquidityNet),\n              }\n            }) ?? []),\n          ],\n          []\n        ),\n    [callStates]\n  )\n\n  // reset on input change\n  useEffect(() => {\n    setTickDataLatestSynced([])\n  }, [currencyA, currencyB, feeAmount])\n\n  // return the latest synced tickData even if we are still loading the newest data\n  useEffect(() => {\n    if (!IsSyncing && !isLoading && !isError && isValid) {\n      setTickDataLatestSynced(tickData.sort((a, b) => a.tick - b.tick))\n    }\n  }, [isError, isLoading, IsSyncing, tickData, isValid])\n\n  return useMemo(\n    () => ({ isLoading, IsSyncing, isError, isValid, tickData: tickDataLatestSynced }),\n    [isLoading, IsSyncing, isError, isValid, tickDataLatestSynced]\n  )\n}\n\nfunction useTicksFromSubgraph(\n  currencyA: Currency | undefined,\n  currencyB: Currency | undefined,\n  feeAmount: FeeAmount | undefined\n) {\n  const { chainId } = useWeb3React()\n  const poolAddress =\n    currencyA && currencyB && feeAmount\n      ? Pool.getAddress(\n          currencyA?.wrapped,\n          currencyB?.wrapped,\n          feeAmount,\n          undefined,\n          chainId ? V3_CORE_FACTORY_ADDRESSES[chainId] : undefined\n        )\n      : undefined\n\n  return useAllV3TicksQuery(poolAddress, 0, ms`30s`)\n}\n\n// Fetches all ticks for a given pool\nfunction useAllV3Ticks(\n  currencyA: Currency | undefined,\n  currencyB: Currency | undefined,\n  feeAmount: FeeAmount | undefined\n): {\n  isLoading: boolean\n  error: unknown\n  ticks: TickData[] | undefined\n} {\n  const useSubgraph = currencyA ? !CHAIN_IDS_MISSING_SUBGRAPH_DATA.includes(currencyA.chainId) : true\n\n  const tickLensTickData = useTicksFromTickLens(!useSubgraph ? currencyA : undefined, currencyB, feeAmount)\n  const subgraphTickData = useTicksFromSubgraph(useSubgraph ? currencyA : undefined, currencyB, feeAmount)\n\n  return {\n    isLoading: useSubgraph ? subgraphTickData.isLoading : tickLensTickData.isLoading,\n    error: useSubgraph ? subgraphTickData.error : tickLensTickData.isError,\n    ticks: useSubgraph ? subgraphTickData.data?.ticks : tickLensTickData.tickData,\n  }\n}\n\nexport function usePoolActiveLiquidity(\n  currencyA: Currency | undefined,\n  currencyB: Currency | undefined,\n  feeAmount: FeeAmount | undefined\n): {\n  isLoading: boolean\n  error: any\n  activeTick: number | undefined\n  data: TickProcessed[] | undefined\n} {\n  const pool = usePool(currencyA, currencyB, feeAmount)\n\n  // Find nearest valid tick for pool in case tick is not initialized.\n  const activeTick = useMemo(() => getActiveTick(pool[1]?.tickCurrent, feeAmount), [pool, feeAmount])\n\n  const { isLoading, error, ticks } = useAllV3Ticks(currencyA, currencyB, feeAmount)\n\n  return useMemo(() => {\n    if (\n      !currencyA ||\n      !currencyB ||\n      activeTick === undefined ||\n      pool[0] !== PoolState.EXISTS ||\n      !ticks ||\n      ticks.length === 0 ||\n      isLoading\n    ) {\n      return {\n        isLoading: isLoading || pool[0] === PoolState.LOADING,\n        error,\n        activeTick,\n        data: undefined,\n      }\n    }\n\n    const token0 = currencyA?.wrapped\n    const token1 = currencyB?.wrapped\n\n    // find where the active tick would be to partition the array\n    // if the active tick is initialized, the pivot will be an element\n    // if not, take the previous tick as pivot\n    const pivot = ticks.findIndex(({ tick }) => tick > activeTick) - 1\n\n    if (pivot < 0) {\n      // consider setting a local error\n      console.error('TickData pivot not found')\n      return {\n        isLoading,\n        error,\n        activeTick,\n        data: undefined,\n      }\n    }\n\n    const activeTickProcessed: TickProcessed = {\n      liquidityActive: JSBI.BigInt(pool[1]?.liquidity ?? 0),\n      tick: activeTick,\n      liquidityNet: Number(ticks[pivot].tick) === activeTick ? JSBI.BigInt(ticks[pivot].liquidityNet) : JSBI.BigInt(0),\n      price0: tickToPrice(token0, token1, activeTick).toFixed(PRICE_FIXED_DIGITS),\n    }\n\n    const subsequentTicks = computeSurroundingTicks(token0, token1, activeTickProcessed, ticks, pivot, true)\n\n    const previousTicks = computeSurroundingTicks(token0, token1, activeTickProcessed, ticks, pivot, false)\n\n    const ticksProcessed = previousTicks.concat(activeTickProcessed).concat(subsequentTicks)\n\n    return {\n      isLoading,\n      error,\n      activeTick,\n      data: ticksProcessed,\n    }\n  }, [currencyA, currencyB, activeTick, pool, ticks, isLoading, error])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}