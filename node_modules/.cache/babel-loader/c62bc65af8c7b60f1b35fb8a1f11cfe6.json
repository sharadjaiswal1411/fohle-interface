{"ast":null,"code":"import { LOOKSRARE_MARKETPLACE_CONTRACT, X2Y2_TRANSFER_CONTRACT } from 'nft/queries';\nimport { OPENSEA_CROSS_CHAIN_CONDUIT } from 'nft/queries/openSea';\nimport { ListingStatus } from 'nft/types';\nimport { approveCollection, LOOKS_RARE_CREATOR_BASIS_POINTS, signListing } from 'nft/utils/listNfts';\nconst updateStatus = _ref => {\n  let {\n    listing,\n    newStatus,\n    rows,\n    setRows,\n    callback\n  } = _ref;\n  const rowsCopy = [...rows];\n  const index = rows.findIndex(n => n === listing);\n  listing.status = newStatus;\n  if (callback) listing.callback = callback;\n  rowsCopy[index] = listing;\n  setRows(rowsCopy);\n};\nexport async function approveCollectionRow(collectionRow, collectionsRequiringApproval, setCollectionsRequiringApproval, signer, looksRareAddress, pauseAllRows) {\n  updateStatus({\n    listing: collectionRow,\n    newStatus: ListingStatus.SIGNING,\n    rows: collectionsRequiringApproval,\n    setRows: setCollectionsRequiringApproval,\n    callback: () => approveCollectionRow(collectionRow, collectionsRequiringApproval, setCollectionsRequiringApproval, signer, looksRareAddress, pauseAllRows)\n  });\n  const {\n    marketplace,\n    collectionAddress\n  } = collectionRow;\n  const spender = marketplace.name === 'OpenSea' ? OPENSEA_CROSS_CHAIN_CONDUIT : marketplace.name === 'Rarible' ? LOOKSRARE_MARKETPLACE_CONTRACT : marketplace.name === 'X2Y2' ? X2Y2_TRANSFER_CONTRACT : looksRareAddress;\n  !!collectionAddress && (await approveCollection(spender, collectionAddress, signer, newStatus => updateStatus({\n    listing: collectionRow,\n    newStatus,\n    rows: collectionsRequiringApproval,\n    setRows: setCollectionsRequiringApproval\n  })));\n  if (collectionRow.status === ListingStatus.REJECTED || collectionRow.status === ListingStatus.FAILED) pauseAllRows();\n}\nexport async function signListingRow(listing, listings, setListings, signer, provider, getLooksRareNonce, setLooksRareNonce, pauseAllRows) {\n  const looksRareNonce = getLooksRareNonce();\n  updateStatus({\n    listing,\n    newStatus: ListingStatus.SIGNING,\n    rows: listings,\n    setRows: setListings,\n    callback: () => {\n      return signListingRow(listing, listings, setListings, signer, provider, getLooksRareNonce, setLooksRareNonce, pauseAllRows);\n    }\n  });\n  const {\n    asset,\n    marketplace\n  } = listing;\n  const res = await signListing(marketplace, asset, signer, provider, looksRareNonce, newStatus => updateStatus({\n    listing,\n    newStatus,\n    rows: listings,\n    setRows: setListings\n  }));\n  if (listing.status === ListingStatus.REJECTED) pauseAllRows();else {\n    res && listing.marketplace.name === 'LooksRare' && setLooksRareNonce(looksRareNonce + 1);\n    const newStatus = res ? ListingStatus.APPROVED : ListingStatus.FAILED;\n    updateStatus({\n      listing,\n      newStatus,\n      rows: listings,\n      setRows: setListings\n    });\n  }\n}\nexport const getTotalEthValue = sellAssets => {\n  const total = sellAssets.reduce((total, asset) => {\n    var _asset$newListings;\n    if ((_asset$newListings = asset.newListings) === null || _asset$newListings === void 0 ? void 0 : _asset$newListings.length) {\n      var _asset$basisPoints, _maxListing$price, _maxListing$price2;\n      const maxListing = asset.newListings.reduce((a, b) => {\n        var _a$price, _b$price;\n        return ((_a$price = a.price) !== null && _a$price !== void 0 ? _a$price : 0) > ((_b$price = b.price) !== null && _b$price !== void 0 ? _b$price : 0) ? a : b;\n      });\n      // LooksRare is a unique case where creator royalties are a flat 0.5% or 50 basis points\n      const maxFee = maxListing.marketplace.fee + (maxListing.marketplace.name === 'LooksRare' ? LOOKS_RARE_CREATOR_BASIS_POINTS : (_asset$basisPoints = asset === null || asset === void 0 ? void 0 : asset.basisPoints) !== null && _asset$basisPoints !== void 0 ? _asset$basisPoints : 0) / 100;\n      return total + ((_maxListing$price = maxListing.price) !== null && _maxListing$price !== void 0 ? _maxListing$price : 0) - ((_maxListing$price2 = maxListing.price) !== null && _maxListing$price2 !== void 0 ? _maxListing$price2 : 0) * (maxFee / 100);\n    }\n    return total;\n  }, 0);\n  return total ? Math.round(total * 100 + Number.EPSILON) / 100 : 0;\n};\nexport const getListings = sellAssets => {\n  const newCollectionsToApprove = [];\n  const newListings = [];\n  sellAssets.forEach(asset => {\n    var _asset$marketplaces;\n    (_asset$marketplaces = asset.marketplaces) === null || _asset$marketplaces === void 0 ? void 0 : _asset$marketplaces.forEach(marketplace => {\n      var _asset$newListings2, _asset$newListings2$f;\n      const newListing = {\n        images: [asset.smallImageUrl, marketplace.icon],\n        name: asset.name || `#${asset.tokenId}`,\n        status: ListingStatus.DEFINED,\n        asset,\n        marketplace,\n        price: (_asset$newListings2 = asset.newListings) === null || _asset$newListings2 === void 0 ? void 0 : (_asset$newListings2$f = _asset$newListings2.find(listing => listing.marketplace.name === marketplace.name)) === null || _asset$newListings2$f === void 0 ? void 0 : _asset$newListings2$f.price\n      };\n      newListings.push(newListing);\n      if (!newCollectionsToApprove.some(collectionRow => collectionRow.collectionAddress === asset.asset_contract.address && collectionRow.marketplace.name === marketplace.name)) {\n        const newCollectionRow = {\n          images: [asset.asset_contract.image_url, marketplace.icon],\n          name: asset.asset_contract.name,\n          status: ListingStatus.DEFINED,\n          collectionAddress: asset.asset_contract.address,\n          marketplace\n        };\n        newCollectionsToApprove.push(newCollectionRow);\n      }\n    });\n  });\n  return [newCollectionsToApprove, newListings];\n};\nexport const getListingState = (collectionsRequiringApproval, listings) => {\n  let allListingsPending = true;\n  let allListingsDefined = true;\n  let allListingsApproved = true;\n  let allCollectionsPending = true;\n  let allCollectionsDefined = true;\n  let anyActiveSigning = false;\n  let anyActiveFailures = false;\n  let anyActiveRejections = false;\n  let anyPaused = false;\n  if (collectionsRequiringApproval.length === 0) {\n    allCollectionsDefined = allCollectionsPending = false;\n  }\n  for (const collection of collectionsRequiringApproval) {\n    if (collection.status !== ListingStatus.PENDING) allCollectionsPending = false;\n    if (collection.status !== ListingStatus.DEFINED) allCollectionsDefined = false;\n    if (collection.status === ListingStatus.SIGNING) anyActiveSigning = true;else if (collection.status === ListingStatus.FAILED) anyActiveFailures = true;else if (collection.status === ListingStatus.REJECTED) anyActiveRejections = true;else if (collection.status === ListingStatus.PAUSED) anyPaused = true;\n  }\n  if (listings.length === 0) {\n    allListingsApproved = allListingsDefined = allListingsPending = false;\n  }\n  for (const listing of listings) {\n    if (listing.status !== ListingStatus.PENDING) allListingsPending = false;\n    if (listing.status !== ListingStatus.DEFINED) allListingsDefined = false;\n    if (listing.status !== ListingStatus.APPROVED) allListingsApproved = false;\n    if (listing.status === ListingStatus.SIGNING) anyActiveSigning = true;else if (listing.status === ListingStatus.FAILED) anyActiveFailures = true;else if (listing.status === ListingStatus.REJECTED) anyActiveRejections = true;else if (listing.status === ListingStatus.PAUSED) anyPaused = true;\n  }\n  return {\n    allListingsPending,\n    allListingsDefined,\n    allListingsApproved,\n    allCollectionsPending,\n    allCollectionsDefined,\n    anyActiveSigning,\n    anyActiveFailures,\n    anyActiveRejections,\n    anyPaused\n  };\n};\nexport const verifyStatus = status => {\n  return status !== ListingStatus.PAUSED && status !== ListingStatus.APPROVED;\n};\nexport const pauseRow = (row, rows, setRows) => {\n  if (row.status === ListingStatus.PENDING || row.status === ListingStatus.DEFINED) updateStatus({\n    listing: row,\n    newStatus: ListingStatus.PAUSED,\n    rows,\n    setRows\n  });\n};\nexport const resetRow = (row, rows, setRows) => {\n  if (row.status === ListingStatus.PAUSED || row.status === ListingStatus.FAILED || row.status === ListingStatus.REJECTED) updateStatus({\n    listing: row,\n    newStatus: ListingStatus.DEFINED,\n    rows,\n    setRows\n  });\n};","map":{"version":3,"names":["LOOKSRARE_MARKETPLACE_CONTRACT","X2Y2_TRANSFER_CONTRACT","OPENSEA_CROSS_CHAIN_CONDUIT","ListingStatus","approveCollection","LOOKS_RARE_CREATOR_BASIS_POINTS","signListing","updateStatus","listing","newStatus","rows","setRows","callback","rowsCopy","index","findIndex","n","status","approveCollectionRow","collectionRow","collectionsRequiringApproval","setCollectionsRequiringApproval","signer","looksRareAddress","pauseAllRows","SIGNING","marketplace","collectionAddress","spender","name","REJECTED","FAILED","signListingRow","listings","setListings","provider","getLooksRareNonce","setLooksRareNonce","looksRareNonce","asset","res","APPROVED","getTotalEthValue","sellAssets","total","reduce","newListings","length","maxListing","a","b","price","maxFee","fee","basisPoints","Math","round","Number","EPSILON","getListings","newCollectionsToApprove","forEach","marketplaces","newListing","images","smallImageUrl","icon","tokenId","DEFINED","find","push","some","asset_contract","address","newCollectionRow","image_url","getListingState","allListingsPending","allListingsDefined","allListingsApproved","allCollectionsPending","allCollectionsDefined","anyActiveSigning","anyActiveFailures","anyActiveRejections","anyPaused","collection","PENDING","PAUSED","verifyStatus","pauseRow","row","resetRow"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/bag/profile/utils.ts"],"sourcesContent":["import type { JsonRpcSigner, Web3Provider } from '@ethersproject/providers'\nimport { LOOKSRARE_MARKETPLACE_CONTRACT, X2Y2_TRANSFER_CONTRACT } from 'nft/queries'\nimport { OPENSEA_CROSS_CHAIN_CONDUIT } from 'nft/queries/openSea'\nimport { AssetRow, CollectionRow, ListingMarket, ListingRow, ListingStatus, WalletAsset } from 'nft/types'\nimport { approveCollection, LOOKS_RARE_CREATOR_BASIS_POINTS, signListing } from 'nft/utils/listNfts'\nimport { Dispatch } from 'react'\n\nconst updateStatus = ({\n  listing,\n  newStatus,\n  rows,\n  setRows,\n  callback,\n}: {\n  listing: AssetRow\n  newStatus: ListingStatus\n  rows: AssetRow[]\n  setRows: Dispatch<AssetRow[]>\n  callback?: () => Promise<void>\n}) => {\n  const rowsCopy = [...rows]\n  const index = rows.findIndex((n) => n === listing)\n  listing.status = newStatus\n  if (callback) listing.callback = callback\n  rowsCopy[index] = listing\n  setRows(rowsCopy)\n}\n\nexport async function approveCollectionRow(\n  collectionRow: CollectionRow,\n  collectionsRequiringApproval: CollectionRow[],\n  setCollectionsRequiringApproval: Dispatch<CollectionRow[]>,\n  signer: JsonRpcSigner,\n  looksRareAddress: string,\n  pauseAllRows: () => void\n) {\n  updateStatus({\n    listing: collectionRow,\n    newStatus: ListingStatus.SIGNING,\n    rows: collectionsRequiringApproval,\n    setRows: setCollectionsRequiringApproval as Dispatch<AssetRow[]>,\n    callback: () =>\n      approveCollectionRow(\n        collectionRow,\n        collectionsRequiringApproval,\n        setCollectionsRequiringApproval,\n        signer,\n        looksRareAddress,\n        pauseAllRows\n      ),\n  })\n  const { marketplace, collectionAddress } = collectionRow\n  const spender =\n    marketplace.name === 'OpenSea'\n      ? OPENSEA_CROSS_CHAIN_CONDUIT\n      : marketplace.name === 'Rarible'\n      ? LOOKSRARE_MARKETPLACE_CONTRACT\n      : marketplace.name === 'X2Y2'\n      ? X2Y2_TRANSFER_CONTRACT\n      : looksRareAddress\n  !!collectionAddress &&\n    (await approveCollection(spender, collectionAddress, signer, (newStatus: ListingStatus) =>\n      updateStatus({\n        listing: collectionRow,\n        newStatus,\n        rows: collectionsRequiringApproval,\n        setRows: setCollectionsRequiringApproval as Dispatch<AssetRow[]>,\n      })\n    ))\n  if (collectionRow.status === ListingStatus.REJECTED || collectionRow.status === ListingStatus.FAILED) pauseAllRows()\n}\n\nexport async function signListingRow(\n  listing: ListingRow,\n  listings: ListingRow[],\n  setListings: Dispatch<ListingRow[]>,\n  signer: JsonRpcSigner,\n  provider: Web3Provider,\n  getLooksRareNonce: () => number,\n  setLooksRareNonce: (nonce: number) => void,\n  pauseAllRows: () => void\n) {\n  const looksRareNonce = getLooksRareNonce()\n  updateStatus({\n    listing,\n    newStatus: ListingStatus.SIGNING,\n    rows: listings,\n    setRows: setListings as Dispatch<AssetRow[]>,\n    callback: () => {\n      return signListingRow(\n        listing,\n        listings,\n        setListings,\n        signer,\n        provider,\n        getLooksRareNonce,\n        setLooksRareNonce,\n        pauseAllRows\n      )\n    },\n  })\n  const { asset, marketplace } = listing\n  const res = await signListing(marketplace, asset, signer, provider, looksRareNonce, (newStatus: ListingStatus) =>\n    updateStatus({\n      listing,\n      newStatus,\n      rows: listings,\n      setRows: setListings as Dispatch<AssetRow[]>,\n    })\n  )\n  if (listing.status === ListingStatus.REJECTED) pauseAllRows()\n  else {\n    res && listing.marketplace.name === 'LooksRare' && setLooksRareNonce(looksRareNonce + 1)\n    const newStatus = res ? ListingStatus.APPROVED : ListingStatus.FAILED\n    updateStatus({\n      listing,\n      newStatus,\n      rows: listings,\n      setRows: setListings as Dispatch<AssetRow[]>,\n    })\n  }\n}\n\nexport const getTotalEthValue = (sellAssets: WalletAsset[]) => {\n  const total = sellAssets.reduce((total, asset: WalletAsset) => {\n    if (asset.newListings?.length) {\n      const maxListing = asset.newListings.reduce((a, b) => ((a.price ?? 0) > (b.price ?? 0) ? a : b))\n      // LooksRare is a unique case where creator royalties are a flat 0.5% or 50 basis points\n      const maxFee =\n        maxListing.marketplace.fee +\n        (maxListing.marketplace.name === 'LooksRare' ? LOOKS_RARE_CREATOR_BASIS_POINTS : asset?.basisPoints ?? 0) / 100\n      return total + (maxListing.price ?? 0) - (maxListing.price ?? 0) * (maxFee / 100)\n    }\n    return total\n  }, 0)\n  return total ? Math.round(total * 100 + Number.EPSILON) / 100 : 0\n}\n\nexport const getListings = (sellAssets: WalletAsset[]): [CollectionRow[], ListingRow[]] => {\n  const newCollectionsToApprove: CollectionRow[] = []\n\n  const newListings: ListingRow[] = []\n  sellAssets.forEach((asset) => {\n    asset.marketplaces?.forEach((marketplace: ListingMarket) => {\n      const newListing = {\n        images: [asset.smallImageUrl, marketplace.icon],\n        name: asset.name || `#${asset.tokenId}`,\n        status: ListingStatus.DEFINED,\n        asset,\n        marketplace,\n        price: asset.newListings?.find((listing) => listing.marketplace.name === marketplace.name)?.price,\n      }\n      newListings.push(newListing)\n      if (\n        !newCollectionsToApprove.some(\n          (collectionRow: CollectionRow) =>\n            collectionRow.collectionAddress === asset.asset_contract.address &&\n            collectionRow.marketplace.name === marketplace.name\n        )\n      ) {\n        const newCollectionRow = {\n          images: [asset.asset_contract.image_url, marketplace.icon],\n          name: asset.asset_contract.name,\n          status: ListingStatus.DEFINED,\n          collectionAddress: asset.asset_contract.address,\n          marketplace,\n        }\n        newCollectionsToApprove.push(newCollectionRow)\n      }\n    })\n  })\n  return [newCollectionsToApprove, newListings]\n}\n\ntype ListingState = {\n  allListingsPending: boolean\n  allListingsDefined: boolean\n  allListingsApproved: boolean\n  allCollectionsPending: boolean\n  allCollectionsDefined: boolean\n  anyActiveSigning: boolean\n  anyActiveFailures: boolean\n  anyActiveRejections: boolean\n  anyPaused: boolean\n}\n\nexport const getListingState = (\n  collectionsRequiringApproval: CollectionRow[],\n  listings: ListingRow[]\n): ListingState => {\n  let allListingsPending = true\n  let allListingsDefined = true\n  let allListingsApproved = true\n  let allCollectionsPending = true\n  let allCollectionsDefined = true\n  let anyActiveSigning = false\n  let anyActiveFailures = false\n  let anyActiveRejections = false\n  let anyPaused = false\n\n  if (collectionsRequiringApproval.length === 0) {\n    allCollectionsDefined = allCollectionsPending = false\n  }\n  for (const collection of collectionsRequiringApproval) {\n    if (collection.status !== ListingStatus.PENDING) allCollectionsPending = false\n    if (collection.status !== ListingStatus.DEFINED) allCollectionsDefined = false\n    if (collection.status === ListingStatus.SIGNING) anyActiveSigning = true\n    else if (collection.status === ListingStatus.FAILED) anyActiveFailures = true\n    else if (collection.status === ListingStatus.REJECTED) anyActiveRejections = true\n    else if (collection.status === ListingStatus.PAUSED) anyPaused = true\n  }\n\n  if (listings.length === 0) {\n    allListingsApproved = allListingsDefined = allListingsPending = false\n  }\n  for (const listing of listings) {\n    if (listing.status !== ListingStatus.PENDING) allListingsPending = false\n    if (listing.status !== ListingStatus.DEFINED) allListingsDefined = false\n    if (listing.status !== ListingStatus.APPROVED) allListingsApproved = false\n    if (listing.status === ListingStatus.SIGNING) anyActiveSigning = true\n    else if (listing.status === ListingStatus.FAILED) anyActiveFailures = true\n    else if (listing.status === ListingStatus.REJECTED) anyActiveRejections = true\n    else if (listing.status === ListingStatus.PAUSED) anyPaused = true\n  }\n  return {\n    allListingsPending,\n    allListingsDefined,\n    allListingsApproved,\n    allCollectionsPending,\n    allCollectionsDefined,\n    anyActiveSigning,\n    anyActiveFailures,\n    anyActiveRejections,\n    anyPaused,\n  }\n}\n\nexport const verifyStatus = (status: ListingStatus) => {\n  return status !== ListingStatus.PAUSED && status !== ListingStatus.APPROVED\n}\n\nexport const pauseRow = (row: AssetRow, rows: AssetRow[], setRows: Dispatch<AssetRow[]>) => {\n  if (row.status === ListingStatus.PENDING || row.status === ListingStatus.DEFINED)\n    updateStatus({\n      listing: row,\n      newStatus: ListingStatus.PAUSED,\n      rows,\n      setRows,\n    })\n}\n\nexport const resetRow = (row: AssetRow, rows: AssetRow[], setRows: Dispatch<AssetRow[]>) => {\n  if (\n    row.status === ListingStatus.PAUSED ||\n    row.status === ListingStatus.FAILED ||\n    row.status === ListingStatus.REJECTED\n  )\n    updateStatus({\n      listing: row,\n      newStatus: ListingStatus.DEFINED,\n      rows,\n      setRows,\n    })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}