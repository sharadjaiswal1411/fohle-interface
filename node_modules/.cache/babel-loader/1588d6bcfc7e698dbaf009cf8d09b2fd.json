{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";export var logListing=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(listings,userAddress){var url,listingsConsolidated,marketplacesById,listingsWithMarketsConsolidated,payload,r;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"\".concat(process.env.REACT_APP_TEMP_API_URL,\"/nft/logGenieList\");listingsConsolidated=listings.map(function(el){return _objectSpread(_objectSpread({},el),{},{marketplaces:[]});});marketplacesById={};listingsWithMarketsConsolidated=listingsConsolidated.reduce(function(uniqueListings,curr){var key=\"\".concat(curr.asset.asset_contract.address,\"-\").concat(curr.asset.tokenId);if(marketplacesById[key]){marketplacesById[key].push(curr.marketplace);}else{marketplacesById[key]=[curr.marketplace];}if(!uniqueListings.some(function(listing){return\"\".concat(listing.asset.asset_contract.address,\"-\").concat(listing.asset.tokenId)===key;})){curr.marketplaces=marketplacesById[key];uniqueListings.push(curr);}return uniqueListings;},[]);payload={listings:listingsWithMarketsConsolidated,userAddress:userAddress};_context.next=7;return fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});case 7:r=_context.sent;return _context.abrupt(\"return\",r.status===200);case 9:case\"end\":return _context.stop();}}},_callee);}));return function logListing(_x,_x2){return _ref.apply(this,arguments);};}();","map":{"version":3,"names":["logListing","listings","userAddress","url","process","env","REACT_APP_TEMP_API_URL","listingsConsolidated","map","el","marketplaces","marketplacesById","listingsWithMarketsConsolidated","reduce","uniqueListings","curr","key","asset","asset_contract","address","tokenId","push","marketplace","some","listing","payload","fetch","method","headers","body","JSON","stringify","r","status"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/queries/genie/logListing.ts"],"sourcesContent":["import { ListingMarket, ListingRow } from 'nft/types'\n\ninterface Listing extends ListingRow {\n  marketplaces: ListingMarket[]\n}\n\nexport const logListing = async (listings: ListingRow[], userAddress: string): Promise<boolean> => {\n  const url = `${process.env.REACT_APP_TEMP_API_URL}/nft/logGenieList`\n  const listingsConsolidated: Listing[] = listings.map((el) => ({ ...el, marketplaces: [] }))\n  const marketplacesById: Record<string, ListingMarket[]> = {}\n  const listingsWithMarketsConsolidated = listingsConsolidated.reduce((uniqueListings, curr) => {\n    const key = `${curr.asset.asset_contract.address}-${curr.asset.tokenId}`\n    if (marketplacesById[key]) {\n      marketplacesById[key].push(curr.marketplace)\n    } else {\n      marketplacesById[key] = [curr.marketplace]\n    }\n    if (!uniqueListings.some((listing) => `${listing.asset.asset_contract.address}-${listing.asset.tokenId}` === key)) {\n      curr.marketplaces = marketplacesById[key]\n      uniqueListings.push(curr)\n    }\n    return uniqueListings\n  }, [] as Listing[])\n  const payload = {\n    listings: listingsWithMarketsConsolidated,\n    userAddress,\n  }\n  const r = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  })\n  return r.status === 200\n}\n"],"mappings":"ggBAMA,MAAO,IAAMA,WAAU,0FAAG,iBAAOC,QAAsB,CAAEC,WAAmB,0MACpEC,GAAG,WAAMC,OAAO,CAACC,GAAG,CAACC,sBAAsB,sBAC3CC,oBAA+B,CAAGN,QAAQ,CAACO,GAAG,CAAC,SAACC,EAAE,wCAAWA,EAAE,MAAEC,YAAY,CAAE,EAAE,IAAG,CAAC,CACrFC,gBAAiD,CAAG,CAAC,CAAC,CACtDC,+BAA+B,CAAGL,oBAAoB,CAACM,MAAM,CAAC,SAACC,cAAc,CAAEC,IAAI,CAAK,CAC5F,GAAMC,IAAG,WAAMD,IAAI,CAACE,KAAK,CAACC,cAAc,CAACC,OAAO,aAAIJ,IAAI,CAACE,KAAK,CAACG,OAAO,CAAE,CACxE,GAAIT,gBAAgB,CAACK,GAAG,CAAC,CAAE,CACzBL,gBAAgB,CAACK,GAAG,CAAC,CAACK,IAAI,CAACN,IAAI,CAACO,WAAW,CAAC,CAC9C,CAAC,IAAM,CACLX,gBAAgB,CAACK,GAAG,CAAC,CAAG,CAACD,IAAI,CAACO,WAAW,CAAC,CAC5C,CACA,GAAI,CAACR,cAAc,CAACS,IAAI,CAAC,SAACC,OAAO,QAAK,UAAGA,OAAO,CAACP,KAAK,CAACC,cAAc,CAACC,OAAO,aAAIK,OAAO,CAACP,KAAK,CAACG,OAAO,IAAOJ,GAAG,GAAC,CAAE,CACjHD,IAAI,CAACL,YAAY,CAAGC,gBAAgB,CAACK,GAAG,CAAC,CACzCF,cAAc,CAACO,IAAI,CAACN,IAAI,CAAC,CAC3B,CACA,MAAOD,eAAc,CACvB,CAAC,CAAE,EAAE,CAAc,CACbW,OAAO,CAAG,CACdxB,QAAQ,CAAEW,+BAA+B,CACzCV,WAAW,CAAXA,WACF,CAAC,uBACewB,MAAK,CAACvB,GAAG,CAAE,CACzBwB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACN,OAAO,CAC9B,CAAC,CAAC,QANIO,CAAC,+CAOAA,CAAC,CAACC,MAAM,GAAK,GAAG,wDACxB,kBA7BYjC,WAAU,gDA6BtB"},"metadata":{},"sourceType":"module"}