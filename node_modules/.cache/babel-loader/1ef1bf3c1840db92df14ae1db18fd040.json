{"ast":null,"code":"import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{sendAnalyticsEvent,useTrace}from'@uniswap/analytics';import{EventName,SectionName}from'@uniswap/analytics-events';import{Field,TradeType}from'@uniswap/widgets';import CurrencySearchModal from'components/SearchModal/CurrencySearchModal';import{useCallback,useEffect,useMemo,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var EMPTY_AMOUNT='';function includesDefaultToken(tokens){var _tokens$Field$INPUT,_tokens$Field$OUTPUT;if(!tokens.default)return true;return((_tokens$Field$INPUT=tokens[Field.INPUT])===null||_tokens$Field$INPUT===void 0?void 0:_tokens$Field$INPUT.equals(tokens.default))||((_tokens$Field$OUTPUT=tokens[Field.OUTPUT])===null||_tokens$Field$OUTPUT===void 0?void 0:_tokens$Field$OUTPUT.equals(tokens.default));}/**\n * Integrates the Widget's inputs.\n * Treats the Widget as a controlled component, using the app's own token selector for selection.\n * Enforces that token is a part of the returned value.\n */export function useSyncWidgetInputs(_ref){var _useState7;var token=_ref.token,onTokenChange=_ref.onTokenChange;var trace=useTrace({section:SectionName.WIDGET});var _useState=useState(TradeType.EXACT_INPUT),_useState2=_slicedToArray(_useState,2),type=_useState2[0],setType=_useState2[1];var _useState3=useState(EMPTY_AMOUNT),_useState4=_slicedToArray(_useState3,2),amount=_useState4[0],setAmount=_useState4[1];var _useState5=useState((_useState7={},_defineProperty(_useState7,Field.OUTPUT,token),_defineProperty(_useState7,\"default\",token),_useState7)),_useState6=_slicedToArray(_useState5,2),tokens=_useState6[0],setTokens=_useState6[1];useEffect(function(){setTokens(function(tokens){var update=_objectSpread(_objectSpread({},tokens),{},{default:token});if(!includesDefaultToken(update)){var _ref2;return _ref2={},_defineProperty(_ref2,Field.OUTPUT,update.default),_defineProperty(_ref2,\"default\",update.default),_ref2;}return update;});},[token]);var onAmountChange=useCallback(function(field,amount,origin){if(origin==='max'){sendAnalyticsEvent(EventName.SWAP_MAX_TOKEN_AMOUNT_SELECTED,_objectSpread({},trace));}setType(field===Field.INPUT?TradeType.EXACT_INPUT:TradeType.EXACT_OUTPUT);setAmount(amount);},[trace]);var onSwitchTokens=useCallback(function(){sendAnalyticsEvent(EventName.SWAP_TOKENS_REVERSED,_objectSpread({},trace));setType(function(type){return invertTradeType(type);});setTokens(function(tokens){var _ref3;return _ref3={},_defineProperty(_ref3,Field.INPUT,tokens[Field.OUTPUT]),_defineProperty(_ref3,Field.OUTPUT,tokens[Field.INPUT]),_defineProperty(_ref3,\"default\",tokens.default),_ref3;});},[trace]);var _useState8=useState(),_useState9=_slicedToArray(_useState8,2),selectingField=_useState9[0],setSelectingField=_useState9[1];var onTokenSelectorClick=useCallback(function(field){setSelectingField(field);return false;},[]);var onTokenSelect=useCallback(function(selectingToken){var _tokens$otherField,_update;if(selectingField===undefined)return;var otherField=invertField(selectingField);var isFlip=(_tokens$otherField=tokens[otherField])===null||_tokens$otherField===void 0?void 0:_tokens$otherField.equals(selectingToken);var update=(_update={},_defineProperty(_update,selectingField,selectingToken),_defineProperty(_update,otherField,isFlip?tokens[selectingField]:tokens[otherField]),_defineProperty(_update,\"default\",tokens.default),_update);setType(function(type){// If flipping the tokens, also flip the type/amount.\nif(isFlip){return invertTradeType(type);}// Setting a new token should clear its amount, if it is set.\nvar activeField=type===TradeType.EXACT_INPUT?Field.INPUT:Field.OUTPUT;if(selectingField===activeField){setAmount(function(){return EMPTY_AMOUNT;});}return type;});if(!includesDefaultToken(update)){onTokenChange===null||onTokenChange===void 0?void 0:onTokenChange(update[Field.OUTPUT]||selectingToken);}setTokens(update);},[onTokenChange,selectingField,tokens]);var tokenSelector=/*#__PURE__*/_jsx(CurrencySearchModal,{isOpen:selectingField!==undefined,onDismiss:function onDismiss(){return setSelectingField(undefined);},selectedCurrency:selectingField&&tokens[selectingField],otherSelectedCurrency:selectingField&&tokens[invertField(selectingField)],onCurrencySelect:onTokenSelect});var value=useMemo(function(){var _tokens$default;return _objectSpread({type:type,amount:amount},token&&((_tokens$default=tokens.default)===null||_tokens$default===void 0?void 0:_tokens$default.equals(token))?tokens:undefined);},[amount,token,tokens,type]);var valueHandlers=useMemo(function(){return{onAmountChange:onAmountChange,onSwitchTokens:onSwitchTokens,onTokenSelectorClick:onTokenSelectorClick};},[onAmountChange,onSwitchTokens,onTokenSelectorClick]);return{inputs:_objectSpread({value:value},valueHandlers),tokenSelector:tokenSelector};}// TODO(zzmp): Move to @uniswap/widgets.\nfunction invertField(field){switch(field){case Field.INPUT:return Field.OUTPUT;case Field.OUTPUT:return Field.INPUT;}}// TODO(zzmp): Include in @uniswap/sdk-core (on TradeType, if possible).\nfunction invertTradeType(tradeType){switch(tradeType){case TradeType.EXACT_INPUT:return TradeType.EXACT_OUTPUT;case TradeType.EXACT_OUTPUT:return TradeType.EXACT_INPUT;}}","map":{"version":3,"names":["sendAnalyticsEvent","useTrace","EventName","SectionName","Field","TradeType","CurrencySearchModal","useCallback","useEffect","useMemo","useState","EMPTY_AMOUNT","includesDefaultToken","tokens","default","INPUT","equals","OUTPUT","useSyncWidgetInputs","token","onTokenChange","trace","section","WIDGET","EXACT_INPUT","type","setType","amount","setAmount","setTokens","update","onAmountChange","field","origin","SWAP_MAX_TOKEN_AMOUNT_SELECTED","EXACT_OUTPUT","onSwitchTokens","SWAP_TOKENS_REVERSED","invertTradeType","selectingField","setSelectingField","onTokenSelectorClick","onTokenSelect","selectingToken","undefined","otherField","invertField","isFlip","activeField","tokenSelector","value","valueHandlers","inputs","tradeType"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/Widget/inputs.tsx"],"sourcesContent":["import { sendAnalyticsEvent, useTrace } from '@uniswap/analytics'\nimport { EventName, SectionName } from '@uniswap/analytics-events'\nimport { Currency, Field, SwapController, SwapEventHandlers, TradeType } from '@uniswap/widgets'\nimport CurrencySearchModal from 'components/SearchModal/CurrencySearchModal'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\n\nconst EMPTY_AMOUNT = ''\n\ntype SwapValue = Required<SwapController>['value']\ntype SwapTokens = Pick<SwapValue, Field.INPUT | Field.OUTPUT> & { default?: Currency }\n\nfunction includesDefaultToken(tokens: SwapTokens) {\n  if (!tokens.default) return true\n  return tokens[Field.INPUT]?.equals(tokens.default) || tokens[Field.OUTPUT]?.equals(tokens.default)\n}\n\n/**\n * Integrates the Widget's inputs.\n * Treats the Widget as a controlled component, using the app's own token selector for selection.\n * Enforces that token is a part of the returned value.\n */\nexport function useSyncWidgetInputs({\n  token,\n  onTokenChange,\n}: {\n  token?: Currency\n  onTokenChange?: (token: Currency) => void\n}) {\n  const trace = useTrace({ section: SectionName.WIDGET })\n\n  const [type, setType] = useState<SwapValue['type']>(TradeType.EXACT_INPUT)\n  const [amount, setAmount] = useState<SwapValue['amount']>(EMPTY_AMOUNT)\n  const [tokens, setTokens] = useState<SwapTokens>({ [Field.OUTPUT]: token, default: token })\n\n  useEffect(() => {\n    setTokens((tokens) => {\n      const update = { ...tokens, default: token }\n      if (!includesDefaultToken(update)) {\n        return { [Field.OUTPUT]: update.default, default: update.default }\n      }\n      return update\n    })\n  }, [token])\n\n  const onAmountChange = useCallback(\n    (field: Field, amount: string, origin?: 'max') => {\n      if (origin === 'max') {\n        sendAnalyticsEvent(EventName.SWAP_MAX_TOKEN_AMOUNT_SELECTED, { ...trace })\n      }\n      setType(field === Field.INPUT ? TradeType.EXACT_INPUT : TradeType.EXACT_OUTPUT)\n      setAmount(amount)\n    },\n    [trace]\n  )\n\n  const onSwitchTokens = useCallback(() => {\n    sendAnalyticsEvent(EventName.SWAP_TOKENS_REVERSED, { ...trace })\n    setType((type) => invertTradeType(type))\n    setTokens((tokens) => ({\n      [Field.INPUT]: tokens[Field.OUTPUT],\n      [Field.OUTPUT]: tokens[Field.INPUT],\n      default: tokens.default,\n    }))\n  }, [trace])\n\n  const [selectingField, setSelectingField] = useState<Field>()\n  const onTokenSelectorClick = useCallback((field: Field) => {\n    setSelectingField(field)\n    return false\n  }, [])\n\n  const onTokenSelect = useCallback(\n    (selectingToken: Currency) => {\n      if (selectingField === undefined) return\n\n      const otherField = invertField(selectingField)\n      const isFlip = tokens[otherField]?.equals(selectingToken)\n      const update: SwapTokens = {\n        [selectingField]: selectingToken,\n        [otherField]: isFlip ? tokens[selectingField] : tokens[otherField],\n        default: tokens.default,\n      }\n\n      setType((type) => {\n        // If flipping the tokens, also flip the type/amount.\n        if (isFlip) {\n          return invertTradeType(type)\n        }\n\n        // Setting a new token should clear its amount, if it is set.\n        const activeField = type === TradeType.EXACT_INPUT ? Field.INPUT : Field.OUTPUT\n        if (selectingField === activeField) {\n          setAmount(() => EMPTY_AMOUNT)\n        }\n\n        return type\n      })\n\n      if (!includesDefaultToken(update)) {\n        onTokenChange?.(update[Field.OUTPUT] || selectingToken)\n      }\n      setTokens(update)\n    },\n    [onTokenChange, selectingField, tokens]\n  )\n  const tokenSelector = (\n    <CurrencySearchModal\n      isOpen={selectingField !== undefined}\n      onDismiss={() => setSelectingField(undefined)}\n      selectedCurrency={selectingField && tokens[selectingField]}\n      otherSelectedCurrency={selectingField && tokens[invertField(selectingField)]}\n      onCurrencySelect={onTokenSelect}\n    />\n  )\n\n  const value: SwapValue = useMemo(\n    () => ({\n      type,\n      amount,\n      // If the default has not yet been handled, preemptively disable the widget by passing no tokens. Effectively,\n      // this resets the widget - avoiding rendering stale state - because with no tokens the skeleton will be rendered.\n      ...(token && tokens.default?.equals(token) ? tokens : undefined),\n    }),\n    [amount, token, tokens, type]\n  )\n  const valueHandlers: SwapEventHandlers = useMemo(\n    () => ({ onAmountChange, onSwitchTokens, onTokenSelectorClick }),\n    [onAmountChange, onSwitchTokens, onTokenSelectorClick]\n  )\n  return { inputs: { value, ...valueHandlers }, tokenSelector }\n}\n\n// TODO(zzmp): Move to @uniswap/widgets.\nfunction invertField(field: Field) {\n  switch (field) {\n    case Field.INPUT:\n      return Field.OUTPUT\n    case Field.OUTPUT:\n      return Field.INPUT\n  }\n}\n\n// TODO(zzmp): Include in @uniswap/sdk-core (on TradeType, if possible).\nfunction invertTradeType(tradeType: TradeType) {\n  switch (tradeType) {\n    case TradeType.EXACT_INPUT:\n      return TradeType.EXACT_OUTPUT\n    case TradeType.EXACT_OUTPUT:\n      return TradeType.EXACT_INPUT\n  }\n}\n"],"mappings":"qgBAAA,OAASA,kBAAkB,CAAEC,QAAQ,KAAQ,oBAAoB,CACjE,OAASC,SAAS,CAAEC,WAAW,KAAQ,2BAA2B,CAClE,OAAmBC,KAAK,CAAqCC,SAAS,KAAQ,kBAAkB,CAChG,MAAOC,oBAAmB,KAAM,4CAA4C,CAC5E,OAASC,WAAW,CAAEC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,4CAEjE,GAAMC,aAAY,CAAG,EAAE,CAKvB,QAASC,qBAAoB,CAACC,MAAkB,CAAE,8CAChD,GAAI,CAACA,MAAM,CAACC,OAAO,CAAE,MAAO,KAAI,CAChC,MAAO,sBAAAD,MAAM,CAACT,KAAK,CAACW,KAAK,CAAC,8CAAnB,oBAAqBC,MAAM,CAACH,MAAM,CAACC,OAAO,CAAC,0BAAID,MAAM,CAACT,KAAK,CAACa,MAAM,CAAC,+CAApB,qBAAsBD,MAAM,CAACH,MAAM,CAACC,OAAO,CAAC,EACpG,CAEA;AACA;AACA;AACA;AACA,GACA,MAAO,SAASI,oBAAmB,MAMhC,mBALDC,MAAK,MAALA,KAAK,CACLC,aAAa,MAAbA,aAAa,CAKb,GAAMC,MAAK,CAAGpB,QAAQ,CAAC,CAAEqB,OAAO,CAAEnB,WAAW,CAACoB,MAAO,CAAC,CAAC,CAEvD,cAAwBb,QAAQ,CAAoBL,SAAS,CAACmB,WAAW,CAAC,wCAAnEC,IAAI,eAAEC,OAAO,eACpB,eAA4BhB,QAAQ,CAAsBC,YAAY,CAAC,yCAAhEgB,MAAM,eAAEC,SAAS,eACxB,eAA4BlB,QAAQ,2CAAgBN,KAAK,CAACa,MAAM,CAAGE,KAAK,uCAAWA,KAAK,cAAG,yCAApFN,MAAM,eAAEgB,SAAS,eAExBrB,SAAS,CAAC,UAAM,CACdqB,SAAS,CAAC,SAAChB,MAAM,CAAK,CACpB,GAAMiB,OAAM,gCAAQjB,MAAM,MAAEC,OAAO,CAAEK,KAAK,EAAE,CAC5C,GAAI,CAACP,oBAAoB,CAACkB,MAAM,CAAC,CAAE,WACjC,sCAAU1B,KAAK,CAACa,MAAM,CAAGa,MAAM,CAAChB,OAAO,kCAAWgB,MAAM,CAAChB,OAAO,QAClE,CACA,MAAOgB,OAAM,CACf,CAAC,CAAC,CACJ,CAAC,CAAE,CAACX,KAAK,CAAC,CAAC,CAEX,GAAMY,eAAc,CAAGxB,WAAW,CAChC,SAACyB,KAAY,CAAEL,MAAc,CAAEM,MAAc,CAAK,CAChD,GAAIA,MAAM,GAAK,KAAK,CAAE,CACpBjC,kBAAkB,CAACE,SAAS,CAACgC,8BAA8B,kBAAOb,KAAK,EAAG,CAC5E,CACAK,OAAO,CAACM,KAAK,GAAK5B,KAAK,CAACW,KAAK,CAAGV,SAAS,CAACmB,WAAW,CAAGnB,SAAS,CAAC8B,YAAY,CAAC,CAC/EP,SAAS,CAACD,MAAM,CAAC,CACnB,CAAC,CACD,CAACN,KAAK,CAAC,CACR,CAED,GAAMe,eAAc,CAAG7B,WAAW,CAAC,UAAM,CACvCP,kBAAkB,CAACE,SAAS,CAACmC,oBAAoB,kBAAOhB,KAAK,EAAG,CAChEK,OAAO,CAAC,SAACD,IAAI,QAAKa,gBAAe,CAACb,IAAI,CAAC,GAAC,CACxCI,SAAS,CAAC,SAAChB,MAAM,kDACdT,KAAK,CAACW,KAAK,CAAGF,MAAM,CAACT,KAAK,CAACa,MAAM,CAAC,wBAClCb,KAAK,CAACa,MAAM,CAAGJ,MAAM,CAACT,KAAK,CAACW,KAAK,CAAC,kCAC1BF,MAAM,CAACC,OAAO,SACvB,CAAC,CACL,CAAC,CAAE,CAACO,KAAK,CAAC,CAAC,CAEX,eAA4CX,QAAQ,EAAS,yCAAtD6B,cAAc,eAAEC,iBAAiB,eACxC,GAAMC,qBAAoB,CAAGlC,WAAW,CAAC,SAACyB,KAAY,CAAK,CACzDQ,iBAAiB,CAACR,KAAK,CAAC,CACxB,MAAO,MAAK,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMU,cAAa,CAAGnC,WAAW,CAC/B,SAACoC,cAAwB,CAAK,gCAC5B,GAAIJ,cAAc,GAAKK,SAAS,CAAE,OAElC,GAAMC,WAAU,CAAGC,WAAW,CAACP,cAAc,CAAC,CAC9C,GAAMQ,OAAM,qBAAGlC,MAAM,CAACgC,UAAU,CAAC,6CAAlB,mBAAoB7B,MAAM,CAAC2B,cAAc,CAAC,CACzD,GAAMb,OAAkB,qCACrBS,cAAc,CAAGI,cAAc,0BAC/BE,UAAU,CAAGE,MAAM,CAAGlC,MAAM,CAAC0B,cAAc,CAAC,CAAG1B,MAAM,CAACgC,UAAU,CAAC,oCACzDhC,MAAM,CAACC,OAAO,UACxB,CAEDY,OAAO,CAAC,SAACD,IAAI,CAAK,CAChB;AACA,GAAIsB,MAAM,CAAE,CACV,MAAOT,gBAAe,CAACb,IAAI,CAAC,CAC9B,CAEA;AACA,GAAMuB,YAAW,CAAGvB,IAAI,GAAKpB,SAAS,CAACmB,WAAW,CAAGpB,KAAK,CAACW,KAAK,CAAGX,KAAK,CAACa,MAAM,CAC/E,GAAIsB,cAAc,GAAKS,WAAW,CAAE,CAClCpB,SAAS,CAAC,iBAAMjB,aAAY,GAAC,CAC/B,CAEA,MAAOc,KAAI,CACb,CAAC,CAAC,CAEF,GAAI,CAACb,oBAAoB,CAACkB,MAAM,CAAC,CAAE,CACjCV,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAGU,MAAM,CAAC1B,KAAK,CAACa,MAAM,CAAC,EAAI0B,cAAc,CAAC,CACzD,CACAd,SAAS,CAACC,MAAM,CAAC,CACnB,CAAC,CACD,CAACV,aAAa,CAAEmB,cAAc,CAAE1B,MAAM,CAAC,CACxC,CACD,GAAMoC,cAAa,cACjB,KAAC,mBAAmB,EAClB,MAAM,CAAEV,cAAc,GAAKK,SAAU,CACrC,SAAS,CAAE,2BAAMJ,kBAAiB,CAACI,SAAS,CAAC,EAAC,CAC9C,gBAAgB,CAAEL,cAAc,EAAI1B,MAAM,CAAC0B,cAAc,CAAE,CAC3D,qBAAqB,CAAEA,cAAc,EAAI1B,MAAM,CAACiC,WAAW,CAACP,cAAc,CAAC,CAAE,CAC7E,gBAAgB,CAAEG,aAAc,EAEnC,CAED,GAAMQ,MAAgB,CAAGzC,OAAO,CAC9B,qDACEgB,IAAI,CAAJA,IAAI,CACJE,MAAM,CAANA,MAAM,EAGFR,KAAK,oBAAIN,MAAM,CAACC,OAAO,0CAAd,gBAAgBE,MAAM,CAACG,KAAK,CAAC,EAAGN,MAAM,CAAG+B,SAAS,GAC/D,CACF,CAACjB,MAAM,CAAER,KAAK,CAAEN,MAAM,CAAEY,IAAI,CAAC,CAC9B,CACD,GAAM0B,cAAgC,CAAG1C,OAAO,CAC9C,iBAAO,CAAEsB,cAAc,CAAdA,cAAc,CAAEK,cAAc,CAAdA,cAAc,CAAEK,oBAAoB,CAApBA,oBAAqB,CAAC,EAAC,CAChE,CAACV,cAAc,CAAEK,cAAc,CAAEK,oBAAoB,CAAC,CACvD,CACD,MAAO,CAAEW,MAAM,gBAAIF,KAAK,CAALA,KAAK,EAAKC,aAAa,CAAE,CAAEF,aAAa,CAAbA,aAAc,CAAC,CAC/D,CAEA;AACA,QAASH,YAAW,CAACd,KAAY,CAAE,CACjC,OAAQA,KAAK,EACX,IAAK5B,MAAK,CAACW,KAAK,CACd,MAAOX,MAAK,CAACa,MAAM,CACrB,IAAKb,MAAK,CAACa,MAAM,CACf,MAAOb,MAAK,CAACW,KAAK,EAExB,CAEA;AACA,QAASuB,gBAAe,CAACe,SAAoB,CAAE,CAC7C,OAAQA,SAAS,EACf,IAAKhD,UAAS,CAACmB,WAAW,CACxB,MAAOnB,UAAS,CAAC8B,YAAY,CAC/B,IAAK9B,UAAS,CAAC8B,YAAY,CACzB,MAAO9B,UAAS,CAACmB,WAAW,EAElC"},"metadata":{},"sourceType":"module"}