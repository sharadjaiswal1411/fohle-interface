{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{useTheme as _useTheme}from\"styled-components\";import _styled from\"styled-components\";import'rc-slider/assets/index.css';import{BigNumber}from'@ethersproject/bignumber';import{formatEther,parseEther}from'@ethersproject/units';import{useSweepNftAssets}from'graphql/data/nft/Asset';import{useBag,useCollectionFilters}from'nft/hooks';import{isPooledMarket,Markets}from'nft/types';import{calcPoolPrice,calcSudoSwapPrice,formatWeiToDecimal,isInSameSudoSwapPool}from'nft/utils';import{default as Slider}from'rc-slider';import{useEffect,useMemo,useReducer,useState}from'react';import{ThemedText}from'theme';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SweepContainer=_styled.div.withConfig({componentId:\"sc-13hme8d-0\"})([\"display:flex;gap:60px;margin-top:12px;padding:16px;border-radius:12px;background-color:\",\";justify-content:space-between;background:linear-gradient(\",\",\",\") padding-box,linear-gradient(to right,#4673fa,#9646fa) border-box;border:2px solid transparent;\"],function(_ref){var theme=_ref.theme;return theme.backgroundSurface;},function(_ref2){var theme=_ref2.theme;return theme.backgroundSurface;},function(_ref3){var theme=_ref3.theme;return theme.backgroundSurface;});var StyledSlider=_styled(Slider).withConfig({componentId:\"sc-13hme8d-1\"})([\"cursor:pointer;@media only screen and (max-width:\",\"){display:none;}\"],function(_ref4){var theme=_ref4.theme;return\"\".concat(theme.breakpoint.md,\"px\");});var SweepLeftmostContainer=_styled.div.withConfig({componentId:\"sc-13hme8d-2\"})([\"display:flex;width:100%;gap:24px;\"]);var SweepRightmostContainer=_styled.div.withConfig({componentId:\"sc-13hme8d-3\"})([\"display:flex;flex-shrink:0;justify-content:flex-end;align-items:center;gap:8px;min-width:160px;@media only screen and (max-width:\",\"){display:none;}\"],function(_ref5){var theme=_ref5.theme;return\"\".concat(theme.breakpoint.md,\"px\");});var SweepHeaderContainer=_styled.div.withConfig({componentId:\"sc-13hme8d-4\"})([\"@media only screen and (max-width:\",\"){display:none;}\"],function(_ref6){var theme=_ref6.theme;return\"\".concat(theme.breakpoint.md,\"px\");});var SweepSubContainer=_styled.div.withConfig({componentId:\"sc-13hme8d-5\"})([\"display:flex;width:100%;gap:12px;align-items:center;\"]);var InputContainer=_styled.input.withConfig({componentId:\"sc-13hme8d-6\"})([\"width:96px;color:\",\";border:1px solid \",\";background:none;border-radius:8px;padding:6px 8px;font-size:16px;font-weight:400px;line-height:20px;@media only screen and (max-width:\",\"){width:100%;}:hover,:focus{outline:none;border:1px solid \",\";}\"],function(_ref7){var theme=_ref7.theme;return theme.textPrimary;},function(_ref8){var theme=_ref8.theme;return theme.backgroundOutline;},function(_ref9){var theme=_ref9.theme;return\"\".concat(theme.breakpoint.md,\"px\");},function(_ref10){var theme=_ref10.theme;return theme.accentAction;});var ToggleContainer=_styled.div.withConfig({componentId:\"sc-13hme8d-7\"})([\"display:flex;border:1px solid \",\";background:none;border-radius:12px;padding:4px;cursor:pointer;\"],function(_ref11){var theme=_ref11.theme;return theme.backgroundOutline;});var ToggleSwitch=_styled.div.withConfig({componentId:\"sc-13hme8d-8\"})([\"color:\",\";padding:4px 8px;border-radius:8px;background-color:\",\";font-size:14px;font-weight:600;line-height:16px;\"],function(_ref12){var theme=_ref12.theme,active=_ref12.active;return active?theme.textPrimary:theme.textSecondary;},function(_ref13){var theme=_ref13.theme,active=_ref13.active;return active?theme.backgroundInteractive:\"none\";});var NftDisplayContainer=_styled.div.withConfig({componentId:\"sc-13hme8d-9\"})([\"position:relative;width:34px;height:34px;\"]);var NftHolder=_styled.div.withConfig({componentId:\"sc-13hme8d-10\"})([\"position:absolute;top:50%;left:50%;width:26px;height:26px;border-radius:4px;background:\",\";background-size:26px;opacity:\",\";transform:\",\";z-index:\",\";\"],function(_ref14){var theme=_ref14.theme,src=_ref14.src;return src?\"url(\".concat(src,\")\"):theme.textTertiary;},function(_ref15){var src=_ref15.src,index=_ref15.index;return src?1.0:index===0?0.9:index===1?0.6:0.3;},function(_ref16){var index=_ref16.index;return index===0?'translate(-50%, -50%) rotate(-4.42deg)':index===1?'translate(-50%, -50%) rotate(-14.01deg)':'translate(-50%, -50%) rotate(10.24deg)';},function(_ref17){var index=_ref17.index;return 3-index;});var wholeNumberRegex=RegExp(\"^(0|[1-9][0-9]*)$\");var twoDecimalPlacesRegex=RegExp(\"^\\\\d*\\\\.?\\\\d{0,2}$\");var NftDisplay=function NftDisplay(_ref18){var nfts=_ref18.nfts;return/*#__PURE__*/_jsx(NftDisplayContainer,{children:_toConsumableArray(Array(3)).map(function(_,index){return/*#__PURE__*/_jsx(NftHolder,{index:index,src:nfts.length-1>=index?nfts[nfts.length-1-index].smallImageUrl:undefined},index);})});};export var Sweep=function Sweep(_ref19){var _sortedAssets$length;var contractAddress=_ref19.contractAddress,minPrice=_ref19.minPrice,maxPrice=_ref19.maxPrice;var theme=_useTheme();var _useReducer=useReducer(function(state){return!state;},true),_useReducer2=_slicedToArray(_useReducer,2),isItemsToggled=_useReducer2[0],toggleSweep=_useReducer2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),sweepAmount=_useState2[0],setSweepAmount=_useState2[1];var addAssetsToBag=useBag(function(state){return state.addAssetsToBag;});var removeAssetsFromBag=useBag(function(state){return state.removeAssetsFromBag;});var itemsInBag=useBag(function(state){return state.itemsInBag;});var lockSweepItems=useBag(function(state){return state.lockSweepItems;});var setBagExpanded=useBag(function(state){return state.setBagExpanded;});var traits=useCollectionFilters(function(state){return state.traits;});var markets=useCollectionFilters(function(state){return state.markets;});var collectionParams=useSweepFetcherParams(contractAddress,'others',minPrice,maxPrice);var sudoSwapParams=useSweepFetcherParams(contractAddress,Markets.Sudoswap,minPrice,maxPrice);var nftxParams=useSweepFetcherParams(contractAddress,Markets.NFTX,minPrice,maxPrice);var nft20Params=useSweepFetcherParams(contractAddress,Markets.NFT20,minPrice,maxPrice);// These calls will suspend if the query is not yet loaded.\nvar _useSweepNftAssets=useSweepNftAssets(collectionParams),collectionAssets=_useSweepNftAssets.data;var _useSweepNftAssets2=useSweepNftAssets(sudoSwapParams),sudoSwapAssets=_useSweepNftAssets2.data;var _useSweepNftAssets3=useSweepNftAssets(nftxParams),nftxAssets=_useSweepNftAssets3.data;var _useSweepNftAssets4=useSweepNftAssets(nft20Params),nft20Assets=_useSweepNftAssets4.data;var _useMemo=useMemo(function(){var _collectionAssets$len,_sudoSwapAssets$lengt,_nftxAssets$length,_nft20Assets$length;if(!collectionAssets&&!sudoSwapAssets&&!nftxAssets&&!nft20Assets){return{sortedAssets:undefined,sortedAssetsTotalEth:BigNumber.from(0)};}var counterNFTX=0;var counterNFT20=0;var jointCollections=[];if(sudoSwapAssets)jointCollections=[].concat(_toConsumableArray(jointCollections),_toConsumableArray(sudoSwapAssets));if(nftxAssets)jointCollections=[].concat(_toConsumableArray(jointCollections),_toConsumableArray(nftxAssets));if(nft20Assets)jointCollections=[].concat(_toConsumableArray(jointCollections),_toConsumableArray(nft20Assets));var sudoSwapAssetsInJointCollections=jointCollections.filter(function(sweepAsset){return sweepAsset.marketplace===Markets.Sudoswap&&!sweepAsset.susFlag;});jointCollections.forEach(function(asset){if(!asset.susFlag){if(asset.marketplace===Markets.Sudoswap){var poolPrice=calcSudoSwapPrice(asset,sudoSwapAssetsInJointCollections.filter(function(sweepAsset){return isInSameSudoSwapPool(asset,sweepAsset);}).findIndex(function(sweepAsset){return sweepAsset.tokenId===asset.tokenId;}));asset.priceInfo.ETHPrice=poolPrice!==null&&poolPrice!==void 0?poolPrice:'';}else{var isNFTX=asset.marketplace===Markets.NFTX;var _poolPrice=calcPoolPrice(asset,isNFTX?counterNFTX:counterNFT20);if(BigNumber.from(_poolPrice).gt(0)){isNFTX?counterNFTX++:counterNFT20++;}asset.priceInfo.ETHPrice=_poolPrice;}}});jointCollections=collectionAssets?collectionAssets.concat(jointCollections):jointCollections;jointCollections.sort(function(a,b){return BigNumber.from(a.priceInfo.ETHPrice).gt(BigNumber.from(b.priceInfo.ETHPrice))?1:-1;});var validAssets=jointCollections.filter(function(asset){return BigNumber.from(asset.priceInfo.ETHPrice).gte(0)&&!asset.susFlag;});validAssets=validAssets.slice(0,Math.max((_collectionAssets$len=collectionAssets===null||collectionAssets===void 0?void 0:collectionAssets.length)!==null&&_collectionAssets$len!==void 0?_collectionAssets$len:0,(_sudoSwapAssets$lengt=sudoSwapAssets===null||sudoSwapAssets===void 0?void 0:sudoSwapAssets.length)!==null&&_sudoSwapAssets$lengt!==void 0?_sudoSwapAssets$lengt:0,(_nftxAssets$length=nftxAssets===null||nftxAssets===void 0?void 0:nftxAssets.length)!==null&&_nftxAssets$length!==void 0?_nftxAssets$length:0,(_nft20Assets$length=nft20Assets===null||nft20Assets===void 0?void 0:nft20Assets.length)!==null&&_nft20Assets$length!==void 0?_nft20Assets$length:0));return{sortedAssets:validAssets,sortedAssetsTotalEth:validAssets.reduce(function(total,asset){return total.add(BigNumber.from(asset.priceInfo.ETHPrice));},BigNumber.from(0))};},[collectionAssets,sudoSwapAssets,nftxAssets,nft20Assets]),sortedAssets=_useMemo.sortedAssets,sortedAssetsTotalEth=_useMemo.sortedAssetsTotalEth;var _useMemo2=useMemo(function(){var sweepItemsInBag=itemsInBag.filter(function(item){return item.inSweep&&item.asset.address===contractAddress;}).map(function(item){return item.asset;});var sweepEthPrice=sweepItemsInBag.reduce(function(total,asset){return total.add(BigNumber.from(asset.priceInfo.ETHPrice));},BigNumber.from(0));return{sweepItemsInBag:sweepItemsInBag,sweepEthPrice:sweepEthPrice};},[itemsInBag,contractAddress]),sweepItemsInBag=_useMemo2.sweepItemsInBag,sweepEthPrice=_useMemo2.sweepEthPrice;useEffect(function(){if(sweepItemsInBag.length===0)setSweepAmount('');},[sweepItemsInBag]);useEffect(function(){lockSweepItems(contractAddress);},[contractAddress,traits,markets,minPrice,maxPrice,lockSweepItems]);var clearSweep=function clearSweep(){setSweepAmount('');removeAssetsFromBag(sweepItemsInBag);};var handleSweep=function handleSweep(value){if(sortedAssets){if(isItemsToggled){if(sweepItemsInBag.length===0&&value>0)setBagExpanded({bagExpanded:true});if(sweepItemsInBag.length<value){addAssetsToBag(sortedAssets.slice(sweepItemsInBag.length,value),true);}else{removeAssetsFromBag(sweepItemsInBag.slice(value,sweepItemsInBag.length),true);}setSweepAmount(value<1?'':value.toString());}else{var wishValueInWei=parseEther(value.toString());if(sweepEthPrice.lte(wishValueInWei)){var curIndex=sweepItemsInBag.length;var curTotal=sweepEthPrice;var wishAssets=[];while(curIndex<sortedAssets.length&&curTotal.add(BigNumber.from(sortedAssets[curIndex].priceInfo.ETHPrice)).lte(wishValueInWei)){wishAssets.push(sortedAssets[curIndex]);curTotal=curTotal.add(BigNumber.from(sortedAssets[curIndex].priceInfo.ETHPrice));curIndex++;}if(wishAssets.length>0){if(sweepItemsInBag.length===0)setBagExpanded({bagExpanded:true});addAssetsToBag(wishAssets,true);}}else{var _curIndex=sweepItemsInBag.length-1;var _curTotal=sweepEthPrice;var _wishAssets=[];while(_curIndex>=0&&_curTotal.gt(wishValueInWei)){_wishAssets.push(sweepItemsInBag[_curIndex]);_curTotal=_curTotal.sub(BigNumber.from(sweepItemsInBag[_curIndex].priceInfo.ETHPrice));_curIndex--;}if(_wishAssets.length>0){removeAssetsFromBag(_wishAssets,true);}}setSweepAmount(value===0?'':value.toFixed(2));}}};var handleSliderChange=function handleSliderChange(value){if(typeof value==='number'){if(sortedAssets){if(isItemsToggled){if(Math.floor(value)!==Math.floor(sweepAmount!==''?parseFloat(sweepAmount):0))handleSweep(Math.floor(value));setSweepAmount(value<1?'':value.toString());}else{handleSweep(value);setSweepAmount(value===0?'':value.toFixed(2));}}}};var handleInput=function handleInput(value){if(value===''){handleSweep(0);setSweepAmount('');}else if(isItemsToggled&&wholeNumberRegex.test(value)){handleSweep(parseFloat(value));setSweepAmount(value);}else if(!isItemsToggled&&twoDecimalPlacesRegex.test(value)){handleSweep(parseFloat(value));setSweepAmount(value);}};var handleToggleSweep=function handleToggleSweep(){clearSweep();toggleSweep();};return/*#__PURE__*/_jsxs(SweepContainer,{\"data-testid\":\"nft-sweep-slider\",children:[/*#__PURE__*/_jsxs(SweepLeftmostContainer,{children:[/*#__PURE__*/_jsx(SweepHeaderContainer,{children:/*#__PURE__*/_jsx(ThemedText.SubHeader,{color:\"textPrimary\",lineHeight:\"20px\",paddingTop:\"6px\",paddingBottom:\"6px\",children:\"Sweep\"})}),/*#__PURE__*/_jsxs(SweepSubContainer,{children:[/*#__PURE__*/_jsx(StyledSlider,{defaultValue:0,min:0,max:isItemsToggled?(_sortedAssets$length=sortedAssets===null||sortedAssets===void 0?void 0:sortedAssets.length)!==null&&_sortedAssets$length!==void 0?_sortedAssets$length:0:parseFloat(formatEther(sortedAssetsTotalEth).toString()),value:isItemsToggled?sweepItemsInBag.length:parseFloat(formatWeiToDecimal(sweepEthPrice.toString())),step:isItemsToggled?1:0.01,trackStyle:{top:'3px',height:'8px',background:\"radial-gradient(101.8% 4091.31% at 0% 0%, #4673FA 0%, #9646FA 100%)\"},handleStyle:{top:'3px',width:'12px',height:'20px',backgroundColor:\"#4673FA\",//This is a custom color to align with the gradient on sweep - we may want to systematize it eventually\nborderRadius:'4px',border:'none',opacity:'1',boxShadow:\"\".concat(theme.shallowShadow.slice(0,-1))},railStyle:{top:'3px',height:'8px',backgroundColor:\"\".concat(theme.backgroundInteractive)},onChange:handleSliderChange}),/*#__PURE__*/_jsx(InputContainer,{inputMode:\"decimal\",autoComplete:\"off\",autoCorrect:\"off\"// text-specific options\n,type:\"text\",pattern:\"^[0-9]*[.,]?[0-9]*$\",placeholder:\"0\",minLength:1,maxLength:79,spellCheck:\"false\",value:isItemsToggled?sweepAmount!==''?Math.floor(parseFloat(sweepAmount)):sweepAmount:sweepAmount,onChange:function onChange(event){handleInput(event.target.value.replace(/,/g,'.'));}}),/*#__PURE__*/_jsxs(ToggleContainer,{onClick:handleToggleSweep,children:[/*#__PURE__*/_jsx(ToggleSwitch,{active:isItemsToggled,children:\"Items\"}),/*#__PURE__*/_jsx(ToggleSwitch,{active:!isItemsToggled,children:\"ETH\"})]})]})]}),/*#__PURE__*/_jsxs(SweepRightmostContainer,{children:[/*#__PURE__*/_jsx(ThemedText.SubHeader,{\"font-size\":\"14px\",children:\"\".concat(formatWeiToDecimal(sweepEthPrice.toString()),\" ETH\")}),/*#__PURE__*/_jsx(NftDisplay,{nfts:sweepItemsInBag})]})]});};var ALL_OTHER_MARKETS=[Markets.Opensea,Markets.X2Y2,Markets.LooksRare];function useSweepFetcherParams(contractAddress,market,minPrice,maxPrice){var traits=useCollectionFilters(function(state){return state.traits;});var markets=useCollectionFilters(function(state){return state.markets;});var isMarketFiltered=!!markets.length;return useMemo(function(){if(isMarketFiltered){if(market==='others'){var marketsToQuery=markets.filter(function(market){return!isPooledMarket(market);});if(marketsToQuery.length>0){return{contractAddress:contractAddress,traits:traits,markets:marketsToQuery};}else{return{contractAddress:'',traits:[],markets:[]};}}if(!markets.includes(market))return{contractAddress:'',traits:[],markets:[]};}switch(market){case Markets.Sudoswap:case Markets.NFTX:case Markets.NFT20:return{contractAddress:contractAddress,traits:traits,markets:[market],price:{low:minPrice,high:maxPrice,symbol:'ETH'}};case'others':return{contractAddress:contractAddress,traits:traits,markets:ALL_OTHER_MARKETS,price:{low:minPrice,high:maxPrice,symbol:'ETH'}};}},[contractAddress,isMarketFiltered,market,markets,maxPrice,minPrice,traits]);}","map":{"version":3,"names":["BigNumber","formatEther","parseEther","useSweepNftAssets","useBag","useCollectionFilters","isPooledMarket","Markets","calcPoolPrice","calcSudoSwapPrice","formatWeiToDecimal","isInSameSudoSwapPool","default","Slider","useEffect","useMemo","useReducer","useState","ThemedText","SweepContainer","styled","div","theme","backgroundSurface","StyledSlider","breakpoint","md","SweepLeftmostContainer","SweepRightmostContainer","SweepHeaderContainer","SweepSubContainer","InputContainer","input","textPrimary","backgroundOutline","accentAction","ToggleContainer","ToggleSwitch","active","textSecondary","backgroundInteractive","NftDisplayContainer","NftHolder","src","textTertiary","index","wholeNumberRegex","RegExp","twoDecimalPlacesRegex","NftDisplay","nfts","Array","map","_","length","smallImageUrl","undefined","Sweep","contractAddress","minPrice","maxPrice","useTheme","state","isItemsToggled","toggleSweep","sweepAmount","setSweepAmount","addAssetsToBag","removeAssetsFromBag","itemsInBag","lockSweepItems","setBagExpanded","traits","markets","collectionParams","useSweepFetcherParams","sudoSwapParams","Sudoswap","nftxParams","NFTX","nft20Params","NFT20","collectionAssets","data","sudoSwapAssets","nftxAssets","nft20Assets","sortedAssets","sortedAssetsTotalEth","from","counterNFTX","counterNFT20","jointCollections","sudoSwapAssetsInJointCollections","filter","sweepAsset","marketplace","susFlag","forEach","asset","poolPrice","findIndex","tokenId","priceInfo","ETHPrice","isNFTX","gt","concat","sort","a","b","validAssets","gte","slice","Math","max","reduce","total","add","sweepItemsInBag","item","inSweep","address","sweepEthPrice","clearSweep","handleSweep","value","bagExpanded","toString","wishValueInWei","lte","curIndex","curTotal","wishAssets","push","sub","toFixed","handleSliderChange","floor","parseFloat","handleInput","test","handleToggleSweep","top","height","background","width","backgroundColor","borderRadius","border","opacity","boxShadow","shallowShadow","event","target","replace","ALL_OTHER_MARKETS","Opensea","X2Y2","LooksRare","market","isMarketFiltered","marketsToQuery","includes","price","low","high","symbol"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/collection/Sweep.tsx"],"sourcesContent":["import 'rc-slider/assets/index.css'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { formatEther, parseEther } from '@ethersproject/units'\nimport { SweepFetcherParams, useSweepNftAssets } from 'graphql/data/nft/Asset'\nimport { useBag, useCollectionFilters } from 'nft/hooks'\nimport { GenieAsset, isPooledMarket, Markets } from 'nft/types'\nimport { calcPoolPrice, calcSudoSwapPrice, formatWeiToDecimal, isInSameSudoSwapPool } from 'nft/utils'\nimport { default as Slider } from 'rc-slider'\nimport { useEffect, useMemo, useReducer, useState } from 'react'\nimport styled, { useTheme } from 'styled-components/macro'\nimport { ThemedText } from 'theme'\n\nconst SweepContainer = styled.div`\n  display: flex;\n  gap: 60px;\n  margin-top: 12px;\n  padding: 16px;\n  border-radius: 12px;\n  background-color: ${({ theme }) => theme.backgroundSurface};\n  justify-content: space-between;\n  background: linear-gradient(${({ theme }) => theme.backgroundSurface}, ${({ theme }) => theme.backgroundSurface})\n      padding-box,\n    linear-gradient(to right, #4673fa, #9646fa) border-box;\n  border: 2px solid transparent;\n`\n\nconst StyledSlider = styled(Slider)`\n  cursor: pointer;\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    display: none;\n  }\n`\n\nconst SweepLeftmostContainer = styled.div`\n  display: flex;\n  width: 100%;\n  gap: 24px;\n`\n\nconst SweepRightmostContainer = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 8px;\n  min-width: 160px;\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    display: none;\n  }\n`\n\nconst SweepHeaderContainer = styled.div`\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    display: none;\n  }\n`\n\nconst SweepSubContainer = styled.div`\n  display: flex;\n  width: 100%;\n  gap: 12px;\n  align-items: center;\n`\n\nconst InputContainer = styled.input`\n  width: 96px;\n  color: ${({ theme }) => theme.textPrimary};\n  border: 1px solid ${({ theme }) => theme.backgroundOutline};\n  background: none;\n  border-radius: 8px;\n  padding: 6px 8px;\n  font-size: 16px;\n  font-weight: 400px;\n  line-height: 20px;\n\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    width: 100%;\n  }\n\n  :hover,\n  :focus {\n    outline: none;\n    border: 1px solid ${({ theme }) => theme.accentAction};\n  }\n`\n\nconst ToggleContainer = styled.div`\n  display: flex;\n  border: 1px solid ${({ theme }) => theme.backgroundOutline};\n  background: none;\n  border-radius: 12px;\n  padding: 4px;\n  cursor: pointer;\n`\n\nconst ToggleSwitch = styled.div<{ active: boolean }>`\n  color: ${({ theme, active }) => (active ? theme.textPrimary : theme.textSecondary)};\n  padding: 4px 8px;\n  border-radius: 8px;\n  background-color: ${({ theme, active }) => (active ? theme.backgroundInteractive : `none`)};\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 16px;\n`\n\nconst NftDisplayContainer = styled.div`\n  position: relative;\n  width: 34px;\n  height: 34px;\n`\n\nconst NftHolder = styled.div<{ index: number; src: string | undefined }>`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 26px;\n  height: 26px;\n  border-radius: 4px;\n  background: ${({ theme, src }) => (src ? `url(${src})` : theme.textTertiary)};\n  background-size: 26px;\n  opacity: ${({ src, index }) => (src ? 1.0 : index === 0 ? 0.9 : index === 1 ? 0.6 : 0.3)};\n  transform: ${({ index }) =>\n    index === 0\n      ? 'translate(-50%, -50%) rotate(-4.42deg)'\n      : index === 1\n      ? 'translate(-50%, -50%) rotate(-14.01deg)'\n      : 'translate(-50%, -50%) rotate(10.24deg)'};\n  z-index: ${({ index }) => 3 - index};\n`\n\nconst wholeNumberRegex = RegExp(`^(0|[1-9][0-9]*)$`)\nconst twoDecimalPlacesRegex = RegExp(`^\\\\d*\\\\.?\\\\d{0,2}$`)\n\ninterface NftDisplayProps {\n  nfts: GenieAsset[]\n}\n\nconst NftDisplay = ({ nfts }: NftDisplayProps) => {\n  return (\n    <NftDisplayContainer>\n      {[...Array(3)].map((_, index) => {\n        return (\n          <NftHolder\n            key={index}\n            index={index}\n            src={nfts.length - 1 >= index ? nfts[nfts.length - 1 - index].smallImageUrl : undefined}\n          />\n        )\n      })}\n    </NftDisplayContainer>\n  )\n}\n\ninterface SweepProps {\n  contractAddress: string\n  minPrice: string\n  maxPrice: string\n}\n\nexport const Sweep = ({ contractAddress, minPrice, maxPrice }: SweepProps) => {\n  const theme = useTheme()\n\n  const [isItemsToggled, toggleSweep] = useReducer((state) => !state, true)\n  const [sweepAmount, setSweepAmount] = useState<string>('')\n\n  const addAssetsToBag = useBag((state) => state.addAssetsToBag)\n  const removeAssetsFromBag = useBag((state) => state.removeAssetsFromBag)\n  const itemsInBag = useBag((state) => state.itemsInBag)\n  const lockSweepItems = useBag((state) => state.lockSweepItems)\n  const setBagExpanded = useBag((state) => state.setBagExpanded)\n\n  const traits = useCollectionFilters((state) => state.traits)\n  const markets = useCollectionFilters((state) => state.markets)\n\n  const collectionParams = useSweepFetcherParams(contractAddress, 'others', minPrice, maxPrice)\n  const sudoSwapParams = useSweepFetcherParams(contractAddress, Markets.Sudoswap, minPrice, maxPrice)\n  const nftxParams = useSweepFetcherParams(contractAddress, Markets.NFTX, minPrice, maxPrice)\n  const nft20Params = useSweepFetcherParams(contractAddress, Markets.NFT20, minPrice, maxPrice)\n  // These calls will suspend if the query is not yet loaded.\n  const { data: collectionAssets } = useSweepNftAssets(collectionParams)\n  const { data: sudoSwapAssets } = useSweepNftAssets(sudoSwapParams)\n  const { data: nftxAssets } = useSweepNftAssets(nftxParams)\n  const { data: nft20Assets } = useSweepNftAssets(nft20Params)\n\n  const { sortedAssets, sortedAssetsTotalEth } = useMemo(() => {\n    if (!collectionAssets && !sudoSwapAssets && !nftxAssets && !nft20Assets) {\n      return { sortedAssets: undefined, sortedAssetsTotalEth: BigNumber.from(0) }\n    }\n\n    let counterNFTX = 0\n    let counterNFT20 = 0\n\n    let jointCollections: GenieAsset[] = []\n\n    if (sudoSwapAssets) jointCollections = [...jointCollections, ...sudoSwapAssets]\n    if (nftxAssets) jointCollections = [...jointCollections, ...nftxAssets]\n    if (nft20Assets) jointCollections = [...jointCollections, ...nft20Assets]\n\n    const sudoSwapAssetsInJointCollections = jointCollections.filter(\n      (sweepAsset) => sweepAsset.marketplace === Markets.Sudoswap && !sweepAsset.susFlag\n    )\n\n    jointCollections.forEach((asset) => {\n      if (!asset.susFlag) {\n        if (asset.marketplace === Markets.Sudoswap) {\n          const poolPrice = calcSudoSwapPrice(\n            asset,\n            sudoSwapAssetsInJointCollections\n              .filter((sweepAsset) => isInSameSudoSwapPool(asset, sweepAsset))\n              .findIndex((sweepAsset) => sweepAsset.tokenId === asset.tokenId)\n          )\n          asset.priceInfo.ETHPrice = poolPrice ?? ''\n        } else {\n          const isNFTX = asset.marketplace === Markets.NFTX\n          const poolPrice = calcPoolPrice(asset, isNFTX ? counterNFTX : counterNFT20)\n          if (BigNumber.from(poolPrice).gt(0)) {\n            isNFTX ? counterNFTX++ : counterNFT20++\n          }\n          asset.priceInfo.ETHPrice = poolPrice\n        }\n      }\n    })\n\n    jointCollections = collectionAssets ? collectionAssets.concat(jointCollections) : jointCollections\n\n    jointCollections.sort((a, b) => {\n      return BigNumber.from(a.priceInfo.ETHPrice).gt(BigNumber.from(b.priceInfo.ETHPrice)) ? 1 : -1\n    })\n\n    let validAssets = jointCollections.filter(\n      (asset) => BigNumber.from(asset.priceInfo.ETHPrice).gte(0) && !asset.susFlag\n    )\n\n    validAssets = validAssets.slice(\n      0,\n      Math.max(\n        collectionAssets?.length ?? 0,\n        sudoSwapAssets?.length ?? 0,\n        nftxAssets?.length ?? 0,\n        nft20Assets?.length ?? 0\n      )\n    )\n\n    return {\n      sortedAssets: validAssets,\n      sortedAssetsTotalEth: validAssets.reduce(\n        (total, asset) => total.add(BigNumber.from(asset.priceInfo.ETHPrice)),\n        BigNumber.from(0)\n      ),\n    }\n  }, [collectionAssets, sudoSwapAssets, nftxAssets, nft20Assets])\n\n  const { sweepItemsInBag, sweepEthPrice } = useMemo(() => {\n    const sweepItemsInBag = itemsInBag\n      .filter((item) => item.inSweep && item.asset.address === contractAddress)\n      .map((item) => item.asset)\n\n    const sweepEthPrice = sweepItemsInBag.reduce(\n      (total, asset) => total.add(BigNumber.from(asset.priceInfo.ETHPrice)),\n      BigNumber.from(0)\n    )\n\n    return { sweepItemsInBag, sweepEthPrice }\n  }, [itemsInBag, contractAddress])\n\n  useEffect(() => {\n    if (sweepItemsInBag.length === 0) setSweepAmount('')\n  }, [sweepItemsInBag])\n\n  useEffect(() => {\n    lockSweepItems(contractAddress)\n  }, [contractAddress, traits, markets, minPrice, maxPrice, lockSweepItems])\n\n  const clearSweep = () => {\n    setSweepAmount('')\n    removeAssetsFromBag(sweepItemsInBag)\n  }\n\n  const handleSweep = (value: number) => {\n    if (sortedAssets) {\n      if (isItemsToggled) {\n        if (sweepItemsInBag.length === 0 && value > 0) setBagExpanded({ bagExpanded: true })\n\n        if (sweepItemsInBag.length < value) {\n          addAssetsToBag(sortedAssets.slice(sweepItemsInBag.length, value), true)\n        } else {\n          removeAssetsFromBag(sweepItemsInBag.slice(value, sweepItemsInBag.length), true)\n        }\n        setSweepAmount(value < 1 ? '' : value.toString())\n      } else {\n        const wishValueInWei = parseEther(value.toString())\n        if (sweepEthPrice.lte(wishValueInWei)) {\n          let curIndex = sweepItemsInBag.length\n          let curTotal = sweepEthPrice\n          const wishAssets: GenieAsset[] = []\n\n          while (\n            curIndex < sortedAssets.length &&\n            curTotal.add(BigNumber.from(sortedAssets[curIndex].priceInfo.ETHPrice)).lte(wishValueInWei)\n          ) {\n            wishAssets.push(sortedAssets[curIndex])\n            curTotal = curTotal.add(BigNumber.from(sortedAssets[curIndex].priceInfo.ETHPrice))\n            curIndex++\n          }\n\n          if (wishAssets.length > 0) {\n            if (sweepItemsInBag.length === 0) setBagExpanded({ bagExpanded: true })\n            addAssetsToBag(wishAssets, true)\n          }\n        } else {\n          let curIndex = sweepItemsInBag.length - 1\n          let curTotal = sweepEthPrice\n          const wishAssets: GenieAsset[] = []\n\n          while (curIndex >= 0 && curTotal.gt(wishValueInWei)) {\n            wishAssets.push(sweepItemsInBag[curIndex])\n            curTotal = curTotal.sub(BigNumber.from(sweepItemsInBag[curIndex].priceInfo.ETHPrice))\n            curIndex--\n          }\n\n          if (wishAssets.length > 0) {\n            removeAssetsFromBag(wishAssets, true)\n          }\n        }\n\n        setSweepAmount(value === 0 ? '' : value.toFixed(2))\n      }\n    }\n  }\n\n  const handleSliderChange = (value: number | number[]) => {\n    if (typeof value === 'number') {\n      if (sortedAssets) {\n        if (isItemsToggled) {\n          if (Math.floor(value) !== Math.floor(sweepAmount !== '' ? parseFloat(sweepAmount) : 0))\n            handleSweep(Math.floor(value))\n          setSweepAmount(value < 1 ? '' : value.toString())\n        } else {\n          handleSweep(value)\n          setSweepAmount(value === 0 ? '' : value.toFixed(2))\n        }\n      }\n    }\n  }\n\n  const handleInput = (value: string) => {\n    if (value === '') {\n      handleSweep(0)\n      setSweepAmount('')\n    } else if (isItemsToggled && wholeNumberRegex.test(value)) {\n      handleSweep(parseFloat(value))\n      setSweepAmount(value)\n    } else if (!isItemsToggled && twoDecimalPlacesRegex.test(value)) {\n      handleSweep(parseFloat(value))\n      setSweepAmount(value)\n    }\n  }\n\n  const handleToggleSweep = () => {\n    clearSweep()\n    toggleSweep()\n  }\n\n  return (\n    <SweepContainer data-testid=\"nft-sweep-slider\">\n      <SweepLeftmostContainer>\n        <SweepHeaderContainer>\n          <ThemedText.SubHeader color=\"textPrimary\" lineHeight=\"20px\" paddingTop=\"6px\" paddingBottom=\"6px\">\n            Sweep\n          </ThemedText.SubHeader>\n        </SweepHeaderContainer>\n        <SweepSubContainer>\n          <StyledSlider\n            defaultValue={0}\n            min={0}\n            max={isItemsToggled ? sortedAssets?.length ?? 0 : parseFloat(formatEther(sortedAssetsTotalEth).toString())}\n            value={isItemsToggled ? sweepItemsInBag.length : parseFloat(formatWeiToDecimal(sweepEthPrice.toString()))}\n            step={isItemsToggled ? 1 : 0.01}\n            trackStyle={{\n              top: '3px',\n              height: '8px',\n              background: `radial-gradient(101.8% 4091.31% at 0% 0%, #4673FA 0%, #9646FA 100%)`,\n            }}\n            handleStyle={{\n              top: '3px',\n              width: '12px',\n              height: '20px',\n              backgroundColor: `#4673FA`, //This is a custom color to align with the gradient on sweep - we may want to systematize it eventually\n              borderRadius: '4px',\n              border: 'none',\n              opacity: '1',\n              boxShadow: `${theme.shallowShadow.slice(0, -1)}`,\n            }}\n            railStyle={{\n              top: '3px',\n              height: '8px',\n              backgroundColor: `${theme.backgroundInteractive}`,\n            }}\n            onChange={handleSliderChange}\n          />\n          <InputContainer\n            inputMode=\"decimal\"\n            autoComplete=\"off\"\n            autoCorrect=\"off\"\n            // text-specific options\n            type=\"text\"\n            pattern=\"^[0-9]*[.,]?[0-9]*$\"\n            placeholder=\"0\"\n            minLength={1}\n            maxLength={79}\n            spellCheck=\"false\"\n            value={\n              isItemsToggled ? (sweepAmount !== '' ? Math.floor(parseFloat(sweepAmount)) : sweepAmount) : sweepAmount\n            }\n            onChange={(event) => {\n              handleInput(event.target.value.replace(/,/g, '.'))\n            }}\n          />\n          <ToggleContainer onClick={handleToggleSweep}>\n            <ToggleSwitch active={isItemsToggled}>Items</ToggleSwitch>\n            <ToggleSwitch active={!isItemsToggled}>ETH</ToggleSwitch>\n          </ToggleContainer>\n        </SweepSubContainer>\n      </SweepLeftmostContainer>\n      <SweepRightmostContainer>\n        <ThemedText.SubHeader font-size=\"14px\">{`${formatWeiToDecimal(\n          sweepEthPrice.toString()\n        )} ETH`}</ThemedText.SubHeader>\n        <NftDisplay nfts={sweepItemsInBag} />\n      </SweepRightmostContainer>\n    </SweepContainer>\n  )\n}\n\nconst ALL_OTHER_MARKETS = [Markets.Opensea, Markets.X2Y2, Markets.LooksRare]\n\nfunction useSweepFetcherParams(\n  contractAddress: string,\n  market: Markets.Sudoswap | Markets.NFTX | Markets.NFT20 | 'others',\n  minPrice: string,\n  maxPrice: string\n): SweepFetcherParams {\n  const traits = useCollectionFilters((state) => state.traits)\n  const markets = useCollectionFilters((state) => state.markets)\n\n  const isMarketFiltered = !!markets.length\n\n  return useMemo(() => {\n    if (isMarketFiltered) {\n      if (market === 'others') {\n        const marketsToQuery = markets.filter((market) => !isPooledMarket(market as Markets))\n\n        if (marketsToQuery.length > 0) {\n          return {\n            contractAddress,\n            traits,\n            markets: marketsToQuery,\n          }\n        } else {\n          return { contractAddress: '', traits: [], markets: [] }\n        }\n      }\n      if (!markets.includes(market)) return { contractAddress: '', traits: [], markets: [] }\n    }\n\n    switch (market) {\n      case Markets.Sudoswap:\n      case Markets.NFTX:\n      case Markets.NFT20:\n        return {\n          contractAddress,\n          traits,\n          markets: [market],\n\n          price: {\n            low: minPrice,\n            high: maxPrice,\n            symbol: 'ETH',\n          },\n        }\n      case 'others':\n        return {\n          contractAddress,\n          traits,\n          markets: ALL_OTHER_MARKETS,\n\n          price: {\n            low: minPrice,\n            high: maxPrice,\n            symbol: 'ETH',\n          },\n        }\n    }\n  }, [contractAddress, isMarketFiltered, market, markets, maxPrice, minPrice, traits])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}