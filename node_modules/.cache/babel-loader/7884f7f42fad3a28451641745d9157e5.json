{"ast":null,"code":"import _toConsumableArray from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _createForOfIteratorHelper from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _regeneratorRuntime from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { JsonRpcProvider } from '@ethersproject/providers';\nimport DEFAULT_TOKEN_LIST from '@uniswap/default-token-list';\nimport { Protocol, SwapRouter } from '@uniswap/router-sdk';\nimport { Fraction, TradeType } from '@uniswap/sdk-core';\nimport { Pool, Position, SqrtPriceMath, TickMath } from '@uniswap/v3-sdk';\nimport retry from 'async-retry';\nimport JSBI from 'jsbi';\nimport _ from 'lodash';\nimport NodeCache from 'node-cache';\nimport { CachingGasStationProvider, CachingTokenProviderWithFallback, CachingV2PoolProvider, CachingV2SubgraphProvider, CachingV3PoolProvider, CachingV3SubgraphProvider, EIP1559GasPriceProvider, ETHGasStationInfoProvider, LegacyGasPriceProvider, NodeJSCache, OnChainGasPriceProvider, OnChainQuoteProvider, StaticV2SubgraphProvider, StaticV3SubgraphProvider, SwapRouterProvider, UniswapMulticallProvider, URISubgraphProvider, V2QuoteProvider, V2SubgraphProviderWithFallBacks, V3SubgraphProviderWithFallBacks } from '../../providers';\nimport { CachingTokenListProvider } from '../../providers/caching-token-list-provider';\nimport { TokenProvider } from '../../providers/token-provider';\nimport { TokenValidationResult, TokenValidatorProvider } from '../../providers/token-validator-provider';\nimport { V2PoolProvider } from '../../providers/v2/pool-provider';\nimport { ArbitrumGasDataProvider, OptimismGasDataProvider } from '../../providers/v3/gas-data-provider';\nimport { V3PoolProvider } from '../../providers/v3/pool-provider';\nimport { ChainId, ID_TO_CHAIN_ID, ID_TO_NETWORK_NAME, V2_SUPPORTED } from '../../util/chains';\nimport { log } from '../../util/log';\nimport { buildSwapMethodParameters, buildTrade } from '../../util/methodParameters';\nimport { metric, MetricLoggerUnit } from '../../util/metric';\nimport { poolToString, routeToString } from '../../util/routes';\nimport { UNSUPPORTED_TOKENS } from '../../util/unsupported-tokens';\nimport { SwapToRatioStatus } from '../router';\nimport { DEFAULT_ROUTING_CONFIG_BY_CHAIN, ETH_GAS_STATION_API_URL } from './config';\nimport { MixedRouteWithValidQuote, V2RouteWithValidQuote, V3RouteWithValidQuote } from './entities/route-with-valid-quote';\nimport { getBestSwapRoute } from './functions/best-swap-route';\nimport { calculateRatioAmountIn } from './functions/calculate-ratio-amount-in';\nimport { computeAllMixedRoutes, computeAllV2Routes, computeAllV3Routes } from './functions/compute-all-routes';\nimport { getMixedRouteCandidatePools, getV2CandidatePools, getV3CandidatePools } from './functions/get-candidate-pools';\nimport { MixedRouteHeuristicGasModelFactory } from './gas-models/mixedRoute/mixed-route-heuristic-gas-model';\nimport { V2HeuristicGasModelFactory } from './gas-models/v2/v2-heuristic-gas-model';\nimport { V3HeuristicGasModelFactory } from '.';\nexport var AlphaRouter = /*#__PURE__*/function () {\n  function AlphaRouter(_ref) {\n    var chainId = _ref.chainId,\n      provider = _ref.provider,\n      multicall2Provider = _ref.multicall2Provider,\n      v3PoolProvider = _ref.v3PoolProvider,\n      onChainQuoteProvider = _ref.onChainQuoteProvider,\n      v2PoolProvider = _ref.v2PoolProvider,\n      v2QuoteProvider = _ref.v2QuoteProvider,\n      v2SubgraphProvider = _ref.v2SubgraphProvider,\n      tokenProvider = _ref.tokenProvider,\n      blockedTokenListProvider = _ref.blockedTokenListProvider,\n      v3SubgraphProvider = _ref.v3SubgraphProvider,\n      gasPriceProvider = _ref.gasPriceProvider,\n      v3GasModelFactory = _ref.v3GasModelFactory,\n      v2GasModelFactory = _ref.v2GasModelFactory,\n      mixedRouteGasModelFactory = _ref.mixedRouteGasModelFactory,\n      swapRouterProvider = _ref.swapRouterProvider,\n      optimismGasDataProvider = _ref.optimismGasDataProvider,\n      tokenValidatorProvider = _ref.tokenValidatorProvider,\n      arbitrumGasDataProvider = _ref.arbitrumGasDataProvider,\n      simulator = _ref.simulator;\n    _classCallCheck(this, AlphaRouter);\n    this.chainId = chainId;\n    this.provider = provider;\n    this.multicall2Provider = multicall2Provider !== null && multicall2Provider !== void 0 ? multicall2Provider : new UniswapMulticallProvider(chainId, provider, 375000);\n    this.v3PoolProvider = v3PoolProvider !== null && v3PoolProvider !== void 0 ? v3PoolProvider : new CachingV3PoolProvider(this.chainId, new V3PoolProvider(ID_TO_CHAIN_ID(chainId), this.multicall2Provider), new NodeJSCache(new NodeCache({\n      stdTTL: 360,\n      useClones: false\n    })));\n    this.simulator = simulator;\n    if (onChainQuoteProvider) {\n      this.onChainQuoteProvider = onChainQuoteProvider;\n    } else {\n      switch (chainId) {\n        case ChainId.OPTIMISM:\n        case ChainId.OPTIMISTIC_KOVAN:\n          this.onChainQuoteProvider = new OnChainQuoteProvider(chainId, provider, this.multicall2Provider, {\n            retries: 2,\n            minTimeout: 100,\n            maxTimeout: 1000\n          }, {\n            multicallChunk: 110,\n            gasLimitPerCall: 1200000,\n            quoteMinSuccessRate: 0.1\n          }, {\n            gasLimitOverride: 3000000,\n            multicallChunk: 45\n          }, {\n            gasLimitOverride: 3000000,\n            multicallChunk: 45\n          }, {\n            baseBlockOffset: -10,\n            rollback: {\n              enabled: true,\n              attemptsBeforeRollback: 1,\n              rollbackBlockOffset: -10\n            }\n          });\n          break;\n        case ChainId.ARBITRUM_ONE:\n        case ChainId.ARBITRUM_RINKEBY:\n          this.onChainQuoteProvider = new OnChainQuoteProvider(chainId, provider, this.multicall2Provider, {\n            retries: 2,\n            minTimeout: 100,\n            maxTimeout: 1000\n          }, {\n            multicallChunk: 10,\n            gasLimitPerCall: 12000000,\n            quoteMinSuccessRate: 0.1\n          }, {\n            gasLimitOverride: 30000000,\n            multicallChunk: 6\n          }, {\n            gasLimitOverride: 30000000,\n            multicallChunk: 6\n          });\n          break;\n        case ChainId.CELO:\n        case ChainId.CELO_ALFAJORES:\n          this.onChainQuoteProvider = new OnChainQuoteProvider(chainId, provider, this.multicall2Provider, {\n            retries: 2,\n            minTimeout: 100,\n            maxTimeout: 1000\n          }, {\n            multicallChunk: 10,\n            gasLimitPerCall: 5000000,\n            quoteMinSuccessRate: 0.1\n          }, {\n            gasLimitOverride: 5000000,\n            multicallChunk: 5\n          }, {\n            gasLimitOverride: 6250000,\n            multicallChunk: 4\n          });\n          break;\n        default:\n          this.onChainQuoteProvider = new OnChainQuoteProvider(chainId, provider, this.multicall2Provider, {\n            retries: 2,\n            minTimeout: 100,\n            maxTimeout: 1000\n          }, {\n            multicallChunk: 210,\n            gasLimitPerCall: 705000,\n            quoteMinSuccessRate: 0.15\n          }, {\n            gasLimitOverride: 2000000,\n            multicallChunk: 70\n          });\n          break;\n      }\n    }\n    this.v2PoolProvider = v2PoolProvider !== null && v2PoolProvider !== void 0 ? v2PoolProvider : new CachingV2PoolProvider(chainId, new V2PoolProvider(chainId, this.multicall2Provider), new NodeJSCache(new NodeCache({\n      stdTTL: 60,\n      useClones: false\n    })));\n    this.v2QuoteProvider = v2QuoteProvider !== null && v2QuoteProvider !== void 0 ? v2QuoteProvider : new V2QuoteProvider();\n    this.blockedTokenListProvider = blockedTokenListProvider !== null && blockedTokenListProvider !== void 0 ? blockedTokenListProvider : new CachingTokenListProvider(chainId, UNSUPPORTED_TOKENS, new NodeJSCache(new NodeCache({\n      stdTTL: 3600,\n      useClones: false\n    })));\n    this.tokenProvider = tokenProvider !== null && tokenProvider !== void 0 ? tokenProvider : new CachingTokenProviderWithFallback(chainId, new NodeJSCache(new NodeCache({\n      stdTTL: 3600,\n      useClones: false\n    })), new CachingTokenListProvider(chainId, DEFAULT_TOKEN_LIST, new NodeJSCache(new NodeCache({\n      stdTTL: 3600,\n      useClones: false\n    }))), new TokenProvider(chainId, this.multicall2Provider));\n    var chainName = ID_TO_NETWORK_NAME(chainId);\n    // ipfs urls in the following format: `https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/${protocol}/${chainName}.json`;\n    if (v2SubgraphProvider) {\n      this.v2SubgraphProvider = v2SubgraphProvider;\n    } else {\n      this.v2SubgraphProvider = new V2SubgraphProviderWithFallBacks([new CachingV2SubgraphProvider(chainId, new URISubgraphProvider(chainId, \"https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/v2/\".concat(chainName, \".json\"), undefined, 0), new NodeJSCache(new NodeCache({\n        stdTTL: 300,\n        useClones: false\n      }))), new StaticV2SubgraphProvider(chainId)]);\n    }\n    if (v3SubgraphProvider) {\n      this.v3SubgraphProvider = v3SubgraphProvider;\n    } else {\n      this.v3SubgraphProvider = new V3SubgraphProviderWithFallBacks([new CachingV3SubgraphProvider(chainId, new URISubgraphProvider(chainId, \"https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/v3/\".concat(chainName, \".json\"), undefined, 0), new NodeJSCache(new NodeCache({\n        stdTTL: 300,\n        useClones: false\n      }))), new StaticV3SubgraphProvider(chainId, this.v3PoolProvider)]);\n    }\n    this.gasPriceProvider = gasPriceProvider !== null && gasPriceProvider !== void 0 ? gasPriceProvider : new CachingGasStationProvider(chainId, this.provider instanceof JsonRpcProvider ? new OnChainGasPriceProvider(chainId, new EIP1559GasPriceProvider(this.provider), new LegacyGasPriceProvider(this.provider)) : new ETHGasStationInfoProvider(ETH_GAS_STATION_API_URL), new NodeJSCache(new NodeCache({\n      stdTTL: 15,\n      useClones: false\n    })));\n    this.v3GasModelFactory = v3GasModelFactory !== null && v3GasModelFactory !== void 0 ? v3GasModelFactory : new V3HeuristicGasModelFactory();\n    this.v2GasModelFactory = v2GasModelFactory !== null && v2GasModelFactory !== void 0 ? v2GasModelFactory : new V2HeuristicGasModelFactory();\n    this.mixedRouteGasModelFactory = mixedRouteGasModelFactory !== null && mixedRouteGasModelFactory !== void 0 ? mixedRouteGasModelFactory : new MixedRouteHeuristicGasModelFactory();\n    this.swapRouterProvider = swapRouterProvider !== null && swapRouterProvider !== void 0 ? swapRouterProvider : new SwapRouterProvider(this.multicall2Provider);\n    if (chainId == ChainId.OPTIMISM || chainId == ChainId.OPTIMISTIC_KOVAN) {\n      this.l2GasDataProvider = optimismGasDataProvider !== null && optimismGasDataProvider !== void 0 ? optimismGasDataProvider : new OptimismGasDataProvider(chainId, this.multicall2Provider);\n    }\n    if (chainId == ChainId.ARBITRUM_ONE || chainId == ChainId.ARBITRUM_RINKEBY) {\n      this.l2GasDataProvider = arbitrumGasDataProvider !== null && arbitrumGasDataProvider !== void 0 ? arbitrumGasDataProvider : new ArbitrumGasDataProvider(chainId, this.provider);\n    }\n    if (tokenValidatorProvider) {\n      this.tokenValidatorProvider = tokenValidatorProvider;\n    } else if (this.chainId == ChainId.MAINNET) {\n      this.tokenValidatorProvider = new TokenValidatorProvider(this.chainId, this.multicall2Provider, new NodeJSCache(new NodeCache({\n        stdTTL: 30000,\n        useClones: false\n      })));\n    }\n  }\n  _createClass(AlphaRouter, [{\n    key: \"routeToRatio\",\n    value: function () {\n      var _routeToRatio = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token0Balance, token1Balance, position, swapAndAddConfig, swapAndAddOptions) {\n        var _this = this;\n        var routingConfig,\n          _ref2,\n          preSwapOptimalRatio,\n          zeroForOne,\n          _ref3,\n          _ref4,\n          inputBalance,\n          outputBalance,\n          optimalRatio,\n          postSwapTargetPool,\n          exchangeRate,\n          swap,\n          ratioAchieved,\n          n,\n          _loop,\n          _ret,\n          methodParameters,\n          _args2 = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                routingConfig = _args2.length > 5 && _args2[5] !== undefined ? _args2[5] : DEFAULT_ROUTING_CONFIG_BY_CHAIN(this.chainId);\n                if (token1Balance.currency.wrapped.sortsBefore(token0Balance.currency.wrapped)) {\n                  _ref2 = [token1Balance, token0Balance];\n                  token0Balance = _ref2[0];\n                  token1Balance = _ref2[1];\n                }\n                preSwapOptimalRatio = this.calculateOptimalRatio(position, position.pool.sqrtRatioX96, true); // set up parameters according to which token will be swapped\n                if (position.pool.tickCurrent > position.tickUpper) {\n                  zeroForOne = true;\n                } else if (position.pool.tickCurrent < position.tickLower) {\n                  zeroForOne = false;\n                } else {\n                  zeroForOne = new Fraction(token0Balance.quotient, token1Balance.quotient).greaterThan(preSwapOptimalRatio);\n                  if (!zeroForOne) preSwapOptimalRatio = preSwapOptimalRatio.invert();\n                }\n                _ref3 = zeroForOne ? [token0Balance, token1Balance] : [token1Balance, token0Balance], _ref4 = _slicedToArray(_ref3, 2), inputBalance = _ref4[0], outputBalance = _ref4[1];\n                optimalRatio = preSwapOptimalRatio;\n                postSwapTargetPool = position.pool;\n                exchangeRate = zeroForOne ? position.pool.token0Price : position.pool.token1Price;\n                swap = null;\n                ratioAchieved = false;\n                n = 0; // iterate until we find a swap with a sufficient ratio or return null\n                _loop = /*#__PURE__*/_regeneratorRuntime.mark(function _loop() {\n                  var amountToSwap, inputBalanceUpdated, outputBalanceUpdated, newRatio, targetPoolPriceUpdate;\n                  return _regeneratorRuntime.wrap(function _loop$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          n++;\n                          if (!(n > swapAndAddConfig.maxIterations)) {\n                            _context.next = 4;\n                            break;\n                          }\n                          log.info('max iterations exceeded');\n                          return _context.abrupt(\"return\", {\n                            v: {\n                              status: SwapToRatioStatus.NO_ROUTE_FOUND,\n                              error: 'max iterations exceeded'\n                            }\n                          });\n                        case 4:\n                          amountToSwap = calculateRatioAmountIn(optimalRatio, exchangeRate, inputBalance, outputBalance);\n                          if (!amountToSwap.equalTo(0)) {\n                            _context.next = 8;\n                            break;\n                          }\n                          log.info(\"no swap needed: amountToSwap = 0\");\n                          return _context.abrupt(\"return\", {\n                            v: {\n                              status: SwapToRatioStatus.NO_SWAP_NEEDED\n                            }\n                          });\n                        case 8:\n                          _context.next = 10;\n                          return _this.route(amountToSwap, outputBalance.currency, TradeType.EXACT_INPUT, undefined, _objectSpread(_objectSpread(_objectSpread({}, DEFAULT_ROUTING_CONFIG_BY_CHAIN(_this.chainId)), routingConfig), {}, {\n                            /// @dev We do not want to query for mixedRoutes for routeToRatio as they are not supported\n                            /// [Protocol.V3, Protocol.V2] will make sure we only query for V3 and V2\n                            protocols: [Protocol.V3, Protocol.V2]\n                          }));\n                        case 10:\n                          swap = _context.sent;\n                          if (swap) {\n                            _context.next = 14;\n                            break;\n                          }\n                          log.info('no route found from this.route()');\n                          return _context.abrupt(\"return\", {\n                            v: {\n                              status: SwapToRatioStatus.NO_ROUTE_FOUND,\n                              error: 'no route found'\n                            }\n                          });\n                        case 14:\n                          inputBalanceUpdated = inputBalance.subtract(swap.trade.inputAmount);\n                          outputBalanceUpdated = outputBalance.add(swap.trade.outputAmount);\n                          newRatio = inputBalanceUpdated.divide(outputBalanceUpdated);\n                          targetPoolPriceUpdate = void 0;\n                          swap.route.forEach(function (route) {\n                            if (route.protocol == Protocol.V3) {\n                              var v3Route = route;\n                              v3Route.route.pools.forEach(function (pool, i) {\n                                if (pool.token0.equals(position.pool.token0) && pool.token1.equals(position.pool.token1) && pool.fee == position.pool.fee) {\n                                  targetPoolPriceUpdate = JSBI.BigInt(v3Route.sqrtPriceX96AfterList[i].toString());\n                                  optimalRatio = _this.calculateOptimalRatio(position, JSBI.BigInt(targetPoolPriceUpdate.toString()), zeroForOne);\n                                }\n                              });\n                            }\n                          });\n                          if (!targetPoolPriceUpdate) {\n                            optimalRatio = preSwapOptimalRatio;\n                          }\n                          ratioAchieved = newRatio.equalTo(optimalRatio) || _this.absoluteValue(newRatio.asFraction.divide(optimalRatio).subtract(1)).lessThan(swapAndAddConfig.ratioErrorTolerance);\n                          if (ratioAchieved && targetPoolPriceUpdate) {\n                            postSwapTargetPool = new Pool(position.pool.token0, position.pool.token1, position.pool.fee, targetPoolPriceUpdate, position.pool.liquidity, TickMath.getTickAtSqrtRatio(targetPoolPriceUpdate), position.pool.tickDataProvider);\n                          }\n                          exchangeRate = swap.trade.outputAmount.divide(swap.trade.inputAmount);\n                          log.info({\n                            exchangeRate: exchangeRate.asFraction.toFixed(18),\n                            optimalRatio: optimalRatio.asFraction.toFixed(18),\n                            newRatio: newRatio.asFraction.toFixed(18),\n                            inputBalanceUpdated: inputBalanceUpdated.asFraction.toFixed(18),\n                            outputBalanceUpdated: outputBalanceUpdated.asFraction.toFixed(18),\n                            ratioErrorTolerance: swapAndAddConfig.ratioErrorTolerance.toFixed(18),\n                            iterationN: n.toString()\n                          }, 'QuoteToRatio Iteration Parameters');\n                          if (!exchangeRate.equalTo(0)) {\n                            _context.next = 27;\n                            break;\n                          }\n                          log.info('exchangeRate to 0');\n                          return _context.abrupt(\"return\", {\n                            v: {\n                              status: SwapToRatioStatus.NO_ROUTE_FOUND,\n                              error: 'insufficient liquidity to swap to optimal ratio'\n                            }\n                          });\n                        case 27:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _loop);\n                });\n              case 12:\n                if (ratioAchieved) {\n                  _context2.next = 19;\n                  break;\n                }\n                return _context2.delegateYield(_loop(), \"t0\", 14);\n              case 14:\n                _ret = _context2.t0;\n                if (!(typeof _ret === \"object\")) {\n                  _context2.next = 17;\n                  break;\n                }\n                return _context2.abrupt(\"return\", _ret.v);\n              case 17:\n                _context2.next = 12;\n                break;\n              case 19:\n                if (swap) {\n                  _context2.next = 21;\n                  break;\n                }\n                return _context2.abrupt(\"return\", {\n                  status: SwapToRatioStatus.NO_ROUTE_FOUND,\n                  error: 'no route found'\n                });\n              case 21:\n                if (!swapAndAddOptions) {\n                  _context2.next = 25;\n                  break;\n                }\n                _context2.next = 24;\n                return this.buildSwapAndAddMethodParameters(swap.trade, swapAndAddOptions, {\n                  initialBalanceTokenIn: inputBalance,\n                  initialBalanceTokenOut: outputBalance,\n                  preLiquidityPosition: position\n                });\n              case 24:\n                methodParameters = _context2.sent;\n              case 25:\n                return _context2.abrupt(\"return\", {\n                  status: SwapToRatioStatus.SUCCESS,\n                  result: _objectSpread(_objectSpread({}, swap), {}, {\n                    methodParameters: methodParameters,\n                    optimalRatio: optimalRatio,\n                    postSwapTargetPool: postSwapTargetPool\n                  })\n                });\n              case 26:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function routeToRatio(_x, _x2, _x3, _x4, _x5) {\n        return _routeToRatio.apply(this, arguments);\n      }\n      return routeToRatio;\n    }()\n    /**\n     * @inheritdoc IRouter\n     */\n  }, {\n    key: \"route\",\n    value: function () {\n      var _route = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(amount, quoteCurrency, tradeType, swapConfig) {\n        var partialRoutingConfig,\n          _a,\n          blockNumber,\n          routingConfig,\n          protocols,\n          currencyIn,\n          currencyOut,\n          tokenIn,\n          tokenOut,\n          _this$getAmountDistri,\n          _this$getAmountDistri2,\n          percents,\n          amounts,\n          beforeGas,\n          _yield$this$gasPriceP,\n          gasPriceWei,\n          quoteToken,\n          quotePromises,\n          protocolsSet,\n          _yield$Promise$all,\n          _yield$Promise$all2,\n          v3gasModel,\n          mixedRouteGasModel,\n          routesWithValidQuotesByProtocol,\n          allRoutesWithValidQuotes,\n          allCandidatePools,\n          _iterator,\n          _step,\n          _step$value,\n          routesWithValidQuotes,\n          candidatePools,\n          beforeBestSwap,\n          swapRouteRaw,\n          quote,\n          quoteGasAdjusted,\n          estimatedGasUsed,\n          routeAmounts,\n          estimatedGasUsedQuoteToken,\n          estimatedGasUsedUSD,\n          trade,\n          methodParameters,\n          swapRoute,\n          beforeSimulate,\n          swapRouteWithSimulation,\n          _args3 = arguments;\n        return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                partialRoutingConfig = _args3.length > 4 && _args3[4] !== undefined ? _args3[4] : {};\n                metric.putMetric(\"QuoteRequestedForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n                // Get a block number to specify in all our calls. Ensures data we fetch from chain is\n                // from the same block.\n                blockNumber = (_a = partialRoutingConfig.blockNumber) !== null && _a !== void 0 ? _a : this.getBlockNumberPromise();\n                routingConfig = _.merge({}, DEFAULT_ROUTING_CONFIG_BY_CHAIN(this.chainId), partialRoutingConfig, {\n                  blockNumber: blockNumber\n                });\n                protocols = routingConfig.protocols;\n                currencyIn = tradeType == TradeType.EXACT_INPUT ? amount.currency : quoteCurrency;\n                currencyOut = tradeType == TradeType.EXACT_INPUT ? quoteCurrency : amount.currency;\n                tokenIn = currencyIn.wrapped;\n                tokenOut = currencyOut.wrapped; // Generate our distribution of amounts, i.e. fractions of the input amount.\n                // We will get quotes for fractions of the input amount for different routes, then\n                // combine to generate split routes.\n                _this$getAmountDistri = this.getAmountDistribution(amount, routingConfig), _this$getAmountDistri2 = _slicedToArray(_this$getAmountDistri, 2), percents = _this$getAmountDistri2[0], amounts = _this$getAmountDistri2[1]; // Get an estimate of the gas price to use when estimating gas cost of different routes.\n                beforeGas = Date.now();\n                _context3.next = 13;\n                return this.gasPriceProvider.getGasPrice();\n              case 13:\n                _yield$this$gasPriceP = _context3.sent;\n                gasPriceWei = _yield$this$gasPriceP.gasPriceWei;\n                metric.putMetric('GasPriceLoad', Date.now() - beforeGas, MetricLoggerUnit.Milliseconds);\n                quoteToken = quoteCurrency.wrapped;\n                quotePromises = [];\n                protocolsSet = new Set(protocols !== null && protocols !== void 0 ? protocols : []);\n                _context3.next = 21;\n                return Promise.all([this.v3GasModelFactory.buildGasModel({\n                  chainId: this.chainId,\n                  gasPriceWei: gasPriceWei,\n                  v3poolProvider: this.v3PoolProvider,\n                  token: quoteToken,\n                  v2poolProvider: this.v2PoolProvider,\n                  l2GasDataProvider: this.l2GasDataProvider\n                }), this.mixedRouteGasModelFactory.buildGasModel({\n                  chainId: this.chainId,\n                  gasPriceWei: gasPriceWei,\n                  v3poolProvider: this.v3PoolProvider,\n                  token: quoteToken,\n                  v2poolProvider: this.v2PoolProvider\n                })]);\n              case 21:\n                _yield$Promise$all = _context3.sent;\n                _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);\n                v3gasModel = _yield$Promise$all2[0];\n                mixedRouteGasModel = _yield$Promise$all2[1];\n                if ((protocolsSet.size == 0 || protocolsSet.has(Protocol.V2) && protocolsSet.has(Protocol.V3)) && V2_SUPPORTED.includes(this.chainId)) {\n                  log.info({\n                    protocols: protocols,\n                    tradeType: tradeType\n                  }, 'Routing across all protocols');\n                  quotePromises.push(this.getV3Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, v3gasModel, tradeType, routingConfig));\n                  quotePromises.push(this.getV2Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, gasPriceWei, tradeType, routingConfig));\n                  /// @dev only add mixedRoutes in the case where no protocols were specified, and if TradeType is correct\n                  if (tradeType === TradeType.EXACT_INPUT && (this.chainId === ChainId.MAINNET || this.chainId === ChainId.GÖRLI) && (\n                  /// The cases where protocols = [] and protocols = [V2, V3, MIXED]\n                  protocolsSet.size == 0 || protocolsSet.has(Protocol.MIXED))) {\n                    log.info({\n                      protocols: protocols,\n                      swapType: tradeType\n                    }, 'Routing across MixedRoutes');\n                    quotePromises.push(this.getMixedRouteQuotes(tokenIn, tokenOut, amounts, percents, quoteToken, mixedRouteGasModel, tradeType, routingConfig));\n                  }\n                } else {\n                  if (protocolsSet.has(Protocol.V3) || protocolsSet.size == 0 && !V2_SUPPORTED.includes(this.chainId)) {\n                    log.info({\n                      protocols: protocols,\n                      swapType: tradeType\n                    }, 'Routing across V3');\n                    quotePromises.push(this.getV3Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, v3gasModel, tradeType, routingConfig));\n                  }\n                  if (protocolsSet.has(Protocol.V2)) {\n                    log.info({\n                      protocols: protocols,\n                      swapType: tradeType\n                    }, 'Routing across V2');\n                    quotePromises.push(this.getV2Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, gasPriceWei, tradeType, routingConfig));\n                  }\n                  /// If protocolsSet is not empty, and we specify mixedRoutes, consider them if the chain has v2 liq\n                  /// and tradeType === EXACT_INPUT\n                  if (protocolsSet.has(Protocol.MIXED) && (this.chainId === ChainId.MAINNET || this.chainId === ChainId.GÖRLI) && tradeType == TradeType.EXACT_INPUT) {\n                    log.info({\n                      protocols: protocols,\n                      swapType: tradeType\n                    }, 'Routing across MixedRoutes');\n                    quotePromises.push(this.getMixedRouteQuotes(tokenIn, tokenOut, amounts, percents, quoteToken, mixedRouteGasModel, tradeType, routingConfig));\n                  }\n                }\n                _context3.next = 28;\n                return Promise.all(quotePromises);\n              case 28:\n                routesWithValidQuotesByProtocol = _context3.sent;\n                allRoutesWithValidQuotes = [];\n                allCandidatePools = [];\n                _iterator = _createForOfIteratorHelper(routesWithValidQuotesByProtocol);\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    _step$value = _step.value, routesWithValidQuotes = _step$value.routesWithValidQuotes, candidatePools = _step$value.candidatePools;\n                    allRoutesWithValidQuotes = [].concat(_toConsumableArray(allRoutesWithValidQuotes), _toConsumableArray(routesWithValidQuotes));\n                    allCandidatePools = [].concat(_toConsumableArray(allCandidatePools), [candidatePools]);\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n                if (!(allRoutesWithValidQuotes.length == 0)) {\n                  _context3.next = 36;\n                  break;\n                }\n                log.info({\n                  allRoutesWithValidQuotes: allRoutesWithValidQuotes\n                }, 'Received no valid quotes');\n                return _context3.abrupt(\"return\", null);\n              case 36:\n                // Given all the quotes for all the amounts for all the routes, find the best combination.\n                beforeBestSwap = Date.now();\n                _context3.next = 39;\n                return getBestSwapRoute(amount, percents, allRoutesWithValidQuotes, tradeType, this.chainId, routingConfig, v3gasModel);\n              case 39:\n                swapRouteRaw = _context3.sent;\n                if (swapRouteRaw) {\n                  _context3.next = 42;\n                  break;\n                }\n                return _context3.abrupt(\"return\", null);\n              case 42:\n                quote = swapRouteRaw.quote, quoteGasAdjusted = swapRouteRaw.quoteGasAdjusted, estimatedGasUsed = swapRouteRaw.estimatedGasUsed, routeAmounts = swapRouteRaw.routes, estimatedGasUsedQuoteToken = swapRouteRaw.estimatedGasUsedQuoteToken, estimatedGasUsedUSD = swapRouteRaw.estimatedGasUsedUSD; // Build Trade object that represents the optimal swap.\n                trade = buildTrade(currencyIn, currencyOut, tradeType, routeAmounts);\n                // If user provided recipient, deadline etc. we also generate the calldata required to execute\n                // the swap and return it too.\n                if (swapConfig) {\n                  methodParameters = buildSwapMethodParameters(trade, swapConfig);\n                }\n                metric.putMetric('FindBestSwapRoute', Date.now() - beforeBestSwap, MetricLoggerUnit.Milliseconds);\n                metric.putMetric(\"QuoteFoundForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n                this.emitPoolSelectionMetrics(swapRouteRaw, allCandidatePools);\n                _context3.t0 = quote;\n                _context3.t1 = quoteGasAdjusted;\n                _context3.t2 = estimatedGasUsed;\n                _context3.t3 = estimatedGasUsedQuoteToken;\n                _context3.t4 = estimatedGasUsedUSD;\n                _context3.t5 = gasPriceWei;\n                _context3.t6 = routeAmounts;\n                _context3.t7 = trade;\n                _context3.t8 = methodParameters;\n                _context3.t9 = BigNumber;\n                _context3.next = 60;\n                return blockNumber;\n              case 60:\n                _context3.t10 = _context3.sent;\n                _context3.t11 = _context3.t9.from.call(_context3.t9, _context3.t10);\n                swapRoute = {\n                  quote: _context3.t0,\n                  quoteGasAdjusted: _context3.t1,\n                  estimatedGasUsed: _context3.t2,\n                  estimatedGasUsedQuoteToken: _context3.t3,\n                  estimatedGasUsedUSD: _context3.t4,\n                  gasPriceWei: _context3.t5,\n                  route: _context3.t6,\n                  trade: _context3.t7,\n                  methodParameters: _context3.t8,\n                  blockNumber: _context3.t11\n                };\n                if (!(swapConfig && swapConfig.simulate && methodParameters && methodParameters.calldata)) {\n                  _context3.next = 83;\n                  break;\n                }\n                if (this.simulator) {\n                  _context3.next = 66;\n                  break;\n                }\n                throw new Error('Simulator not initialized!');\n              case 66:\n                beforeSimulate = Date.now();\n                _context3.t12 = this.simulator;\n                _context3.t13 = swapConfig.simulate.fromAddress;\n                _context3.t14 = swapRoute;\n                if (!this.l2GasDataProvider) {\n                  _context3.next = 76;\n                  break;\n                }\n                _context3.next = 73;\n                return this.l2GasDataProvider.getGasData();\n              case 73:\n                _context3.t15 = _context3.sent;\n                _context3.next = 77;\n                break;\n              case 76:\n                _context3.t15 = undefined;\n              case 77:\n                _context3.t16 = _context3.t15;\n                _context3.next = 80;\n                return _context3.t12.simulateTransaction.call(_context3.t12, _context3.t13, _context3.t14, _context3.t16);\n              case 80:\n                swapRouteWithSimulation = _context3.sent;\n                metric.putMetric('SimulateTransaction', Date.now() - beforeSimulate, MetricLoggerUnit.Milliseconds);\n                return _context3.abrupt(\"return\", swapRouteWithSimulation);\n              case 83:\n                return _context3.abrupt(\"return\", swapRoute);\n              case 84:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function route(_x6, _x7, _x8, _x9) {\n        return _route.apply(this, arguments);\n      }\n      return route;\n    }()\n  }, {\n    key: \"applyTokenValidatorToPools\",\n    value: function () {\n      var _applyTokenValidatorToPools = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pools, isInvalidFn) {\n        var tokens, tokenValidationResults, poolsFiltered;\n        return _regeneratorRuntime.wrap(function _callee3$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (this.tokenValidatorProvider) {\n                  _context4.next = 2;\n                  break;\n                }\n                return _context4.abrupt(\"return\", pools);\n              case 2:\n                log.info(\"Running token validator on \".concat(pools.length, \" pools\"));\n                tokens = _.flatMap(pools, function (pool) {\n                  return [pool.token0, pool.token1];\n                });\n                _context4.next = 6;\n                return this.tokenValidatorProvider.validateTokens(tokens);\n              case 6:\n                tokenValidationResults = _context4.sent;\n                poolsFiltered = _.filter(pools, function (pool) {\n                  var token0Validation = tokenValidationResults.getValidationByToken(pool.token0);\n                  var token1Validation = tokenValidationResults.getValidationByToken(pool.token1);\n                  var token0Invalid = isInvalidFn(pool.token0, token0Validation);\n                  var token1Invalid = isInvalidFn(pool.token1, token1Validation);\n                  if (token0Invalid || token1Invalid) {\n                    log.info(\"Dropping pool \".concat(poolToString(pool), \" because token is invalid. \").concat(pool.token0.symbol, \": \").concat(token0Validation, \", \").concat(pool.token1.symbol, \": \").concat(token1Validation));\n                  }\n                  return !token0Invalid && !token1Invalid;\n                });\n                return _context4.abrupt(\"return\", poolsFiltered);\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function applyTokenValidatorToPools(_x10, _x11) {\n        return _applyTokenValidatorToPools.apply(this, arguments);\n      }\n      return applyTokenValidatorToPools;\n    }()\n  }, {\n    key: \"getV3Quotes\",\n    value: function () {\n      var _getV3Quotes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(tokenIn, tokenOut, amounts, percents, quoteToken, gasModel, swapType, routingConfig) {\n        var _yield$getV3Candidate, poolAccessor, candidatePools, poolsRaw, pools, maxSwapsPerPath, routes, quoteFn, beforeQuotes, _yield$quoteFn, routesWithQuotes, routesWithValidQuotes, _iterator2, _step2, routeWithQuote, _routeWithQuote, route, quotes, i, percent, amountQuote, quote, amount, sqrtPriceX96AfterList, initializedTicksCrossedList, gasEstimate, routeWithValidQuote;\n        return _regeneratorRuntime.wrap(function _callee4$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                log.info('Starting to get V3 quotes');\n                // Fetch all the pools that we will consider routing via. There are thousands\n                // of pools, so we filter them to a set of candidate pools that we expect will\n                // result in good prices.\n                _context5.next = 3;\n                return getV3CandidatePools({\n                  tokenIn: tokenIn,\n                  tokenOut: tokenOut,\n                  tokenProvider: this.tokenProvider,\n                  blockedTokenListProvider: this.blockedTokenListProvider,\n                  poolProvider: this.v3PoolProvider,\n                  routeType: swapType,\n                  subgraphProvider: this.v3SubgraphProvider,\n                  routingConfig: routingConfig,\n                  chainId: this.chainId\n                });\n              case 3:\n                _yield$getV3Candidate = _context5.sent;\n                poolAccessor = _yield$getV3Candidate.poolAccessor;\n                candidatePools = _yield$getV3Candidate.candidatePools;\n                poolsRaw = poolAccessor.getAllPools(); // Drop any pools that contain fee on transfer tokens (not supported by v3) or have issues with being transferred.\n                _context5.next = 9;\n                return this.applyTokenValidatorToPools(poolsRaw, function (token, tokenValidation) {\n                  // If there is no available validation result we assume the token is fine.\n                  if (!tokenValidation) {\n                    return false;\n                  }\n                  // Only filters out *intermediate* pools that involve tokens that we detect\n                  // cant be transferred. This prevents us trying to route through tokens that may\n                  // not be transferrable, but allows users to still swap those tokens if they\n                  // specify.\n                  //\n                  if (tokenValidation == TokenValidationResult.STF && (token.equals(tokenIn) || token.equals(tokenOut))) {\n                    return false;\n                  }\n                  return tokenValidation == TokenValidationResult.FOT || tokenValidation == TokenValidationResult.STF;\n                });\n              case 9:\n                pools = _context5.sent;\n                // Given all our candidate pools, compute all the possible ways to route from tokenIn to tokenOut.\n                maxSwapsPerPath = routingConfig.maxSwapsPerPath;\n                routes = computeAllV3Routes(tokenIn, tokenOut, pools, maxSwapsPerPath);\n                if (!(routes.length == 0)) {\n                  _context5.next = 14;\n                  break;\n                }\n                return _context5.abrupt(\"return\", {\n                  routesWithValidQuotes: [],\n                  candidatePools: candidatePools\n                });\n              case 14:\n                // For all our routes, and all the fractional amounts, fetch quotes on-chain.\n                quoteFn = swapType == TradeType.EXACT_INPUT ? this.onChainQuoteProvider.getQuotesManyExactIn.bind(this.onChainQuoteProvider) : this.onChainQuoteProvider.getQuotesManyExactOut.bind(this.onChainQuoteProvider);\n                beforeQuotes = Date.now();\n                log.info(\"Getting quotes for V3 for \".concat(routes.length, \" routes with \").concat(amounts.length, \" amounts per route.\"));\n                _context5.next = 19;\n                return quoteFn(amounts, routes, {\n                  blockNumber: routingConfig.blockNumber\n                });\n              case 19:\n                _yield$quoteFn = _context5.sent;\n                routesWithQuotes = _yield$quoteFn.routesWithQuotes;\n                metric.putMetric('V3QuotesLoad', Date.now() - beforeQuotes, MetricLoggerUnit.Milliseconds);\n                metric.putMetric('V3QuotesFetched', _(routesWithQuotes).map(function (_ref5) {\n                  var _ref6 = _slicedToArray(_ref5, 2),\n                    quotes = _ref6[1];\n                  return quotes.length;\n                }).sum(), MetricLoggerUnit.Count);\n                routesWithValidQuotes = [];\n                _iterator2 = _createForOfIteratorHelper(routesWithQuotes);\n                _context5.prev = 25;\n                _iterator2.s();\n              case 27:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context5.next = 45;\n                  break;\n                }\n                routeWithQuote = _step2.value;\n                _routeWithQuote = _slicedToArray(routeWithQuote, 2), route = _routeWithQuote[0], quotes = _routeWithQuote[1];\n                i = 0;\n              case 31:\n                if (!(i < quotes.length)) {\n                  _context5.next = 43;\n                  break;\n                }\n                percent = percents[i];\n                amountQuote = quotes[i];\n                quote = amountQuote.quote, amount = amountQuote.amount, sqrtPriceX96AfterList = amountQuote.sqrtPriceX96AfterList, initializedTicksCrossedList = amountQuote.initializedTicksCrossedList, gasEstimate = amountQuote.gasEstimate;\n                if (!(!quote || !sqrtPriceX96AfterList || !initializedTicksCrossedList || !gasEstimate)) {\n                  _context5.next = 38;\n                  break;\n                }\n                log.debug({\n                  route: routeToString(route),\n                  amountQuote: amountQuote\n                }, 'Dropping a null V3 quote for route.');\n                return _context5.abrupt(\"continue\", 40);\n              case 38:\n                routeWithValidQuote = new V3RouteWithValidQuote({\n                  route: route,\n                  rawQuote: quote,\n                  amount: amount,\n                  percent: percent,\n                  sqrtPriceX96AfterList: sqrtPriceX96AfterList,\n                  initializedTicksCrossedList: initializedTicksCrossedList,\n                  quoterGasEstimate: gasEstimate,\n                  gasModel: gasModel,\n                  quoteToken: quoteToken,\n                  tradeType: swapType,\n                  v3PoolProvider: this.v3PoolProvider\n                });\n                routesWithValidQuotes.push(routeWithValidQuote);\n              case 40:\n                i++;\n                _context5.next = 31;\n                break;\n              case 43:\n                _context5.next = 27;\n                break;\n              case 45:\n                _context5.next = 50;\n                break;\n              case 47:\n                _context5.prev = 47;\n                _context5.t0 = _context5[\"catch\"](25);\n                _iterator2.e(_context5.t0);\n              case 50:\n                _context5.prev = 50;\n                _iterator2.f();\n                return _context5.finish(50);\n              case 53:\n                return _context5.abrupt(\"return\", {\n                  routesWithValidQuotes: routesWithValidQuotes,\n                  candidatePools: candidatePools\n                });\n              case 54:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee4, this, [[25, 47, 50, 53]]);\n      }));\n      function getV3Quotes(_x12, _x13, _x14, _x15, _x16, _x17, _x18, _x19) {\n        return _getV3Quotes.apply(this, arguments);\n      }\n      return getV3Quotes;\n    }()\n  }, {\n    key: \"getV2Quotes\",\n    value: function () {\n      var _getV2Quotes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(tokenIn, tokenOut, amounts, percents, quoteToken, gasPriceWei, swapType, routingConfig) {\n        var _yield$getV2Candidate, poolAccessor, candidatePools, poolsRaw, pools, maxSwapsPerPath, routes, quoteFn, beforeQuotes, _yield$quoteFn2, routesWithQuotes, V2gasModel, routesWithValidQuotes, _iterator3, _step3, routeWithQuote, _routeWithQuote2, route, quotes, i, percent, amountQuote, quote, amount, routeWithValidQuote;\n        return _regeneratorRuntime.wrap(function _callee5$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                log.info('Starting to get V2 quotes');\n                // Fetch all the pools that we will consider routing via. There are thousands\n                // of pools, so we filter them to a set of candidate pools that we expect will\n                // result in good prices.\n                _context6.next = 3;\n                return getV2CandidatePools({\n                  tokenIn: tokenIn,\n                  tokenOut: tokenOut,\n                  tokenProvider: this.tokenProvider,\n                  blockedTokenListProvider: this.blockedTokenListProvider,\n                  poolProvider: this.v2PoolProvider,\n                  routeType: swapType,\n                  subgraphProvider: this.v2SubgraphProvider,\n                  routingConfig: routingConfig,\n                  chainId: this.chainId\n                });\n              case 3:\n                _yield$getV2Candidate = _context6.sent;\n                poolAccessor = _yield$getV2Candidate.poolAccessor;\n                candidatePools = _yield$getV2Candidate.candidatePools;\n                poolsRaw = poolAccessor.getAllPools(); // Drop any pools that contain tokens that can not be transferred according to the token validator.\n                _context6.next = 9;\n                return this.applyTokenValidatorToPools(poolsRaw, function (token, tokenValidation) {\n                  // If there is no available validation result we assume the token is fine.\n                  if (!tokenValidation) {\n                    return false;\n                  }\n                  // Only filters out *intermediate* pools that involve tokens that we detect\n                  // cant be transferred. This prevents us trying to route through tokens that may\n                  // not be transferrable, but allows users to still swap those tokens if they\n                  // specify.\n                  if (tokenValidation == TokenValidationResult.STF && (token.equals(tokenIn) || token.equals(tokenOut))) {\n                    return false;\n                  }\n                  return tokenValidation == TokenValidationResult.STF;\n                });\n              case 9:\n                pools = _context6.sent;\n                // Given all our candidate pools, compute all the possible ways to route from tokenIn to tokenOut.\n                maxSwapsPerPath = routingConfig.maxSwapsPerPath;\n                routes = computeAllV2Routes(tokenIn, tokenOut, pools, maxSwapsPerPath);\n                if (!(routes.length == 0)) {\n                  _context6.next = 14;\n                  break;\n                }\n                return _context6.abrupt(\"return\", {\n                  routesWithValidQuotes: [],\n                  candidatePools: candidatePools\n                });\n              case 14:\n                // For all our routes, and all the fractional amounts, fetch quotes on-chain.\n                quoteFn = swapType == TradeType.EXACT_INPUT ? this.v2QuoteProvider.getQuotesManyExactIn.bind(this.v2QuoteProvider) : this.v2QuoteProvider.getQuotesManyExactOut.bind(this.v2QuoteProvider);\n                beforeQuotes = Date.now();\n                log.info(\"Getting quotes for V2 for \".concat(routes.length, \" routes with \").concat(amounts.length, \" amounts per route.\"));\n                _context6.next = 19;\n                return quoteFn(amounts, routes);\n              case 19:\n                _yield$quoteFn2 = _context6.sent;\n                routesWithQuotes = _yield$quoteFn2.routesWithQuotes;\n                _context6.next = 23;\n                return this.v2GasModelFactory.buildGasModel({\n                  chainId: this.chainId,\n                  gasPriceWei: gasPriceWei,\n                  poolProvider: this.v2PoolProvider,\n                  token: quoteToken\n                });\n              case 23:\n                V2gasModel = _context6.sent;\n                metric.putMetric('V2QuotesLoad', Date.now() - beforeQuotes, MetricLoggerUnit.Milliseconds);\n                metric.putMetric('V2QuotesFetched', _(routesWithQuotes).map(function (_ref7) {\n                  var _ref8 = _slicedToArray(_ref7, 2),\n                    quotes = _ref8[1];\n                  return quotes.length;\n                }).sum(), MetricLoggerUnit.Count);\n                routesWithValidQuotes = [];\n                _iterator3 = _createForOfIteratorHelper(routesWithQuotes);\n                _context6.prev = 28;\n                _iterator3.s();\n              case 30:\n                if ((_step3 = _iterator3.n()).done) {\n                  _context6.next = 48;\n                  break;\n                }\n                routeWithQuote = _step3.value;\n                _routeWithQuote2 = _slicedToArray(routeWithQuote, 2), route = _routeWithQuote2[0], quotes = _routeWithQuote2[1];\n                i = 0;\n              case 34:\n                if (!(i < quotes.length)) {\n                  _context6.next = 46;\n                  break;\n                }\n                percent = percents[i];\n                amountQuote = quotes[i];\n                quote = amountQuote.quote, amount = amountQuote.amount;\n                if (quote) {\n                  _context6.next = 41;\n                  break;\n                }\n                log.debug({\n                  route: routeToString(route),\n                  amountQuote: amountQuote\n                }, 'Dropping a null V2 quote for route.');\n                return _context6.abrupt(\"continue\", 43);\n              case 41:\n                routeWithValidQuote = new V2RouteWithValidQuote({\n                  route: route,\n                  rawQuote: quote,\n                  amount: amount,\n                  percent: percent,\n                  gasModel: V2gasModel,\n                  quoteToken: quoteToken,\n                  tradeType: swapType,\n                  v2PoolProvider: this.v2PoolProvider\n                });\n                routesWithValidQuotes.push(routeWithValidQuote);\n              case 43:\n                i++;\n                _context6.next = 34;\n                break;\n              case 46:\n                _context6.next = 30;\n                break;\n              case 48:\n                _context6.next = 53;\n                break;\n              case 50:\n                _context6.prev = 50;\n                _context6.t0 = _context6[\"catch\"](28);\n                _iterator3.e(_context6.t0);\n              case 53:\n                _context6.prev = 53;\n                _iterator3.f();\n                return _context6.finish(53);\n              case 56:\n                return _context6.abrupt(\"return\", {\n                  routesWithValidQuotes: routesWithValidQuotes,\n                  candidatePools: candidatePools\n                });\n              case 57:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee5, this, [[28, 50, 53, 56]]);\n      }));\n      function getV2Quotes(_x20, _x21, _x22, _x23, _x24, _x25, _x26, _x27) {\n        return _getV2Quotes.apply(this, arguments);\n      }\n      return getV2Quotes;\n    }()\n  }, {\n    key: \"getMixedRouteQuotes\",\n    value: function () {\n      var _getMixedRouteQuotes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(tokenIn, tokenOut, amounts, percents, quoteToken, mixedRouteGasModel, swapType, routingConfig) {\n        var _yield$getMixedRouteC, V2poolAccessor, V3poolAccessor, mixedRouteCandidatePools, V3poolsRaw, V2poolsRaw, poolsRaw, candidatePools, pools, maxSwapsPerPath, routes, quoteFn, beforeQuotes, _yield$quoteFn3, routesWithQuotes, routesWithValidQuotes, _iterator4, _step4, routeWithQuote, _routeWithQuote3, route, quotes, i, percent, amountQuote, quote, amount, sqrtPriceX96AfterList, initializedTicksCrossedList, gasEstimate, routeWithValidQuote;\n        return _regeneratorRuntime.wrap(function _callee6$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                log.info('Starting to get mixed quotes');\n                if (!(swapType != TradeType.EXACT_INPUT)) {\n                  _context7.next = 3;\n                  break;\n                }\n                throw new Error('Mixed route quotes are not supported for EXACT_OUTPUT');\n              case 3:\n                _context7.next = 5;\n                return getMixedRouteCandidatePools({\n                  tokenIn: tokenIn,\n                  tokenOut: tokenOut,\n                  tokenProvider: this.tokenProvider,\n                  blockedTokenListProvider: this.blockedTokenListProvider,\n                  v3poolProvider: this.v3PoolProvider,\n                  v2poolProvider: this.v2PoolProvider,\n                  routeType: swapType,\n                  v3subgraphProvider: this.v3SubgraphProvider,\n                  v2subgraphProvider: this.v2SubgraphProvider,\n                  routingConfig: routingConfig,\n                  chainId: this.chainId\n                });\n              case 5:\n                _yield$getMixedRouteC = _context7.sent;\n                V2poolAccessor = _yield$getMixedRouteC.V2poolAccessor;\n                V3poolAccessor = _yield$getMixedRouteC.V3poolAccessor;\n                mixedRouteCandidatePools = _yield$getMixedRouteC.candidatePools;\n                V3poolsRaw = V3poolAccessor.getAllPools();\n                V2poolsRaw = V2poolAccessor.getAllPools();\n                poolsRaw = [].concat(_toConsumableArray(V3poolsRaw), _toConsumableArray(V2poolsRaw));\n                candidatePools = mixedRouteCandidatePools; // Drop any pools that contain fee on transfer tokens (not supported by v3) or have issues with being transferred.\n                _context7.next = 15;\n                return this.applyTokenValidatorToPools(poolsRaw, function (token, tokenValidation) {\n                  // If there is no available validation result we assume the token is fine.\n                  if (!tokenValidation) {\n                    return false;\n                  }\n                  // Only filters out *intermediate* pools that involve tokens that we detect\n                  // cant be transferred. This prevents us trying to route through tokens that may\n                  // not be transferrable, but allows users to still swap those tokens if they\n                  // specify.\n                  //\n                  if (tokenValidation == TokenValidationResult.STF && (token.equals(tokenIn) || token.equals(tokenOut))) {\n                    return false;\n                  }\n                  return tokenValidation == TokenValidationResult.FOT || tokenValidation == TokenValidationResult.STF;\n                });\n              case 15:\n                pools = _context7.sent;\n                maxSwapsPerPath = routingConfig.maxSwapsPerPath;\n                routes = computeAllMixedRoutes(tokenIn, tokenOut, pools, maxSwapsPerPath);\n                if (!(routes.length == 0)) {\n                  _context7.next = 20;\n                  break;\n                }\n                return _context7.abrupt(\"return\", {\n                  routesWithValidQuotes: [],\n                  candidatePools: candidatePools\n                });\n              case 20:\n                // For all our routes, and all the fractional amounts, fetch quotes on-chain.\n                quoteFn = this.onChainQuoteProvider.getQuotesManyExactIn.bind(this.onChainQuoteProvider);\n                beforeQuotes = Date.now();\n                log.info(\"Getting quotes for mixed for \".concat(routes.length, \" routes with \").concat(amounts.length, \" amounts per route.\"));\n                _context7.next = 25;\n                return quoteFn(amounts, routes, {\n                  blockNumber: routingConfig.blockNumber\n                });\n              case 25:\n                _yield$quoteFn3 = _context7.sent;\n                routesWithQuotes = _yield$quoteFn3.routesWithQuotes;\n                metric.putMetric('MixedQuotesLoad', Date.now() - beforeQuotes, MetricLoggerUnit.Milliseconds);\n                metric.putMetric('MixedQuotesFetched', _(routesWithQuotes).map(function (_ref9) {\n                  var _ref10 = _slicedToArray(_ref9, 2),\n                    quotes = _ref10[1];\n                  return quotes.length;\n                }).sum(), MetricLoggerUnit.Count);\n                routesWithValidQuotes = [];\n                _iterator4 = _createForOfIteratorHelper(routesWithQuotes);\n                _context7.prev = 31;\n                _iterator4.s();\n              case 33:\n                if ((_step4 = _iterator4.n()).done) {\n                  _context7.next = 51;\n                  break;\n                }\n                routeWithQuote = _step4.value;\n                _routeWithQuote3 = _slicedToArray(routeWithQuote, 2), route = _routeWithQuote3[0], quotes = _routeWithQuote3[1];\n                i = 0;\n              case 37:\n                if (!(i < quotes.length)) {\n                  _context7.next = 49;\n                  break;\n                }\n                percent = percents[i];\n                amountQuote = quotes[i];\n                quote = amountQuote.quote, amount = amountQuote.amount, sqrtPriceX96AfterList = amountQuote.sqrtPriceX96AfterList, initializedTicksCrossedList = amountQuote.initializedTicksCrossedList, gasEstimate = amountQuote.gasEstimate;\n                if (!(!quote || !sqrtPriceX96AfterList || !initializedTicksCrossedList || !gasEstimate)) {\n                  _context7.next = 44;\n                  break;\n                }\n                log.debug({\n                  route: routeToString(route),\n                  amountQuote: amountQuote\n                }, 'Dropping a null mixed quote for route.');\n                return _context7.abrupt(\"continue\", 46);\n              case 44:\n                routeWithValidQuote = new MixedRouteWithValidQuote({\n                  route: route,\n                  rawQuote: quote,\n                  amount: amount,\n                  percent: percent,\n                  sqrtPriceX96AfterList: sqrtPriceX96AfterList,\n                  initializedTicksCrossedList: initializedTicksCrossedList,\n                  quoterGasEstimate: gasEstimate,\n                  mixedRouteGasModel: mixedRouteGasModel,\n                  quoteToken: quoteToken,\n                  tradeType: swapType,\n                  v3PoolProvider: this.v3PoolProvider,\n                  v2PoolProvider: this.v2PoolProvider\n                });\n                routesWithValidQuotes.push(routeWithValidQuote);\n              case 46:\n                i++;\n                _context7.next = 37;\n                break;\n              case 49:\n                _context7.next = 33;\n                break;\n              case 51:\n                _context7.next = 56;\n                break;\n              case 53:\n                _context7.prev = 53;\n                _context7.t0 = _context7[\"catch\"](31);\n                _iterator4.e(_context7.t0);\n              case 56:\n                _context7.prev = 56;\n                _iterator4.f();\n                return _context7.finish(56);\n              case 59:\n                return _context7.abrupt(\"return\", {\n                  routesWithValidQuotes: routesWithValidQuotes,\n                  candidatePools: candidatePools\n                });\n              case 60:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee6, this, [[31, 53, 56, 59]]);\n      }));\n      function getMixedRouteQuotes(_x28, _x29, _x30, _x31, _x32, _x33, _x34, _x35) {\n        return _getMixedRouteQuotes.apply(this, arguments);\n      }\n      return getMixedRouteQuotes;\n    }() // Note multiplications here can result in a loss of precision in the amounts (e.g. taking 50% of 101)\n    // This is reconcilled at the end of the algorithm by adding any lost precision to one of\n    // the splits in the route.\n  }, {\n    key: \"getAmountDistribution\",\n    value: function getAmountDistribution(amount, routingConfig) {\n      var distributionPercent = routingConfig.distributionPercent;\n      var percents = [];\n      var amounts = [];\n      for (var i = 1; i <= 100 / distributionPercent; i++) {\n        percents.push(i * distributionPercent);\n        amounts.push(amount.multiply(new Fraction(i * distributionPercent, 100)));\n      }\n      return [percents, amounts];\n    }\n  }, {\n    key: \"buildSwapAndAddMethodParameters\",\n    value: function () {\n      var _buildSwapAndAddMethodParameters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(trade, swapAndAddOptions, swapAndAddParameters) {\n        var _swapAndAddOptions$sw, recipient, slippageTolerance, deadline, inputTokenPermit, addLiquidityConfig, preLiquidityPosition, finalBalanceTokenIn, finalBalanceTokenOut, approvalTypes, zeroForOne;\n        return _regeneratorRuntime.wrap(function _callee7$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _swapAndAddOptions$sw = swapAndAddOptions.swapOptions, recipient = _swapAndAddOptions$sw.recipient, slippageTolerance = _swapAndAddOptions$sw.slippageTolerance, deadline = _swapAndAddOptions$sw.deadline, inputTokenPermit = _swapAndAddOptions$sw.inputTokenPermit, addLiquidityConfig = swapAndAddOptions.addLiquidityOptions;\n                preLiquidityPosition = swapAndAddParameters.preLiquidityPosition;\n                finalBalanceTokenIn = swapAndAddParameters.initialBalanceTokenIn.subtract(trade.inputAmount);\n                finalBalanceTokenOut = swapAndAddParameters.initialBalanceTokenOut.add(trade.outputAmount);\n                _context8.next = 6;\n                return this.swapRouterProvider.getApprovalType(finalBalanceTokenIn, finalBalanceTokenOut);\n              case 6:\n                approvalTypes = _context8.sent;\n                zeroForOne = finalBalanceTokenIn.currency.wrapped.sortsBefore(finalBalanceTokenOut.currency.wrapped);\n                return _context8.abrupt(\"return\", SwapRouter.swapAndAddCallParameters(trade, {\n                  recipient: recipient,\n                  slippageTolerance: slippageTolerance,\n                  deadlineOrPreviousBlockhash: deadline,\n                  inputTokenPermit: inputTokenPermit\n                }, Position.fromAmounts({\n                  pool: preLiquidityPosition.pool,\n                  tickLower: preLiquidityPosition.tickLower,\n                  tickUpper: preLiquidityPosition.tickUpper,\n                  amount0: zeroForOne ? finalBalanceTokenIn.quotient.toString() : finalBalanceTokenOut.quotient.toString(),\n                  amount1: zeroForOne ? finalBalanceTokenOut.quotient.toString() : finalBalanceTokenIn.quotient.toString(),\n                  useFullPrecision: false\n                }), addLiquidityConfig, approvalTypes.approvalTokenIn, approvalTypes.approvalTokenOut));\n              case 9:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n      function buildSwapAndAddMethodParameters(_x36, _x37, _x38) {\n        return _buildSwapAndAddMethodParameters.apply(this, arguments);\n      }\n      return buildSwapAndAddMethodParameters;\n    }()\n  }, {\n    key: \"emitPoolSelectionMetrics\",\n    value: function emitPoolSelectionMetrics(swapRouteRaw, allPoolsBySelection) {\n      var poolAddressesUsed = new Set();\n      var routeAmounts = swapRouteRaw.routes;\n      _(routeAmounts).flatMap(function (routeAmount) {\n        var poolAddresses = routeAmount.poolAddresses;\n        return poolAddresses;\n      }).forEach(function (address) {\n        poolAddressesUsed.add(address.toLowerCase());\n      });\n      var _iterator5 = _createForOfIteratorHelper(allPoolsBySelection),\n        _step5;\n      try {\n        var _loop2 = function _loop2() {\n          var poolsBySelection = _step5.value;\n          var protocol = poolsBySelection.protocol;\n          _.forIn(poolsBySelection.selections, function (pools, topNSelection) {\n            var topNUsed = _.findLastIndex(pools, function (pool) {\n              return poolAddressesUsed.has(pool.id.toLowerCase());\n            }) + 1;\n            metric.putMetric(_.capitalize(\"\".concat(protocol).concat(topNSelection)), topNUsed, MetricLoggerUnit.Count);\n          });\n        };\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          _loop2();\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      var hasV3Route = false;\n      var hasV2Route = false;\n      var hasMixedRoute = false;\n      var _iterator6 = _createForOfIteratorHelper(routeAmounts),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var routeAmount = _step6.value;\n          if (routeAmount.protocol == Protocol.V3) {\n            hasV3Route = true;\n          }\n          if (routeAmount.protocol == Protocol.V2) {\n            hasV2Route = true;\n          }\n          if (routeAmount.protocol == Protocol.MIXED) {\n            hasMixedRoute = true;\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n      if (hasMixedRoute && (hasV3Route || hasV2Route)) {\n        if (hasV3Route && hasV2Route) {\n          metric.putMetric(\"MixedAndV3AndV2SplitRoute\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"MixedAndV3AndV2SplitRouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        } else if (hasV3Route) {\n          metric.putMetric(\"MixedAndV3SplitRoute\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"MixedAndV3SplitRouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        } else if (hasV2Route) {\n          metric.putMetric(\"MixedAndV2SplitRoute\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"MixedAndV2SplitRouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        }\n      } else if (hasV3Route && hasV2Route) {\n        metric.putMetric(\"V3AndV2SplitRoute\", 1, MetricLoggerUnit.Count);\n        metric.putMetric(\"V3AndV2SplitRouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n      } else if (hasMixedRoute) {\n        if (routeAmounts.length > 1) {\n          metric.putMetric(\"MixedSplitRoute\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"MixedSplitRouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        } else {\n          metric.putMetric(\"MixedRoute\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"MixedRouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        }\n      } else if (hasV3Route) {\n        if (routeAmounts.length > 1) {\n          metric.putMetric(\"V3SplitRoute\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"V3SplitRouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        } else {\n          metric.putMetric(\"V3Route\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"V3RouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        }\n      } else if (hasV2Route) {\n        if (routeAmounts.length > 1) {\n          metric.putMetric(\"V2SplitRoute\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"V2SplitRouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        } else {\n          metric.putMetric(\"V2Route\", 1, MetricLoggerUnit.Count);\n          metric.putMetric(\"V2RouteForChain\".concat(this.chainId), 1, MetricLoggerUnit.Count);\n        }\n      }\n    }\n  }, {\n    key: \"calculateOptimalRatio\",\n    value: function calculateOptimalRatio(position, sqrtRatioX96, zeroForOne) {\n      var upperSqrtRatioX96 = TickMath.getSqrtRatioAtTick(position.tickUpper);\n      var lowerSqrtRatioX96 = TickMath.getSqrtRatioAtTick(position.tickLower);\n      // returns Fraction(0, 1) for any out of range position regardless of zeroForOne. Implication: function\n      // cannot be used to determine the trading direction of out of range positions.\n      if (JSBI.greaterThan(sqrtRatioX96, upperSqrtRatioX96) || JSBI.lessThan(sqrtRatioX96, lowerSqrtRatioX96)) {\n        return new Fraction(0, 1);\n      }\n      var precision = JSBI.BigInt('1' + '0'.repeat(18));\n      var optimalRatio = new Fraction(SqrtPriceMath.getAmount0Delta(sqrtRatioX96, upperSqrtRatioX96, precision, true), SqrtPriceMath.getAmount1Delta(sqrtRatioX96, lowerSqrtRatioX96, precision, true));\n      if (!zeroForOne) optimalRatio = optimalRatio.invert();\n      return optimalRatio;\n    }\n  }, {\n    key: \"absoluteValue\",\n    value: function absoluteValue(fraction) {\n      var numeratorAbs = JSBI.lessThan(fraction.numerator, JSBI.BigInt(0)) ? JSBI.unaryMinus(fraction.numerator) : fraction.numerator;\n      var denominatorAbs = JSBI.lessThan(fraction.denominator, JSBI.BigInt(0)) ? JSBI.unaryMinus(fraction.denominator) : fraction.denominator;\n      return new Fraction(numeratorAbs, denominatorAbs);\n    }\n  }, {\n    key: \"getBlockNumberPromise\",\n    value: function getBlockNumberPromise() {\n      var _this2 = this;\n      return retry( /*#__PURE__*/function () {\n        var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(_b, attempt) {\n          return _regeneratorRuntime.wrap(function _callee8$(_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  if (attempt > 1) {\n                    log.info(\"Get block number attempt \".concat(attempt));\n                  }\n                  return _context9.abrupt(\"return\", _this2.provider.getBlockNumber());\n                case 2:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, _callee8);\n        }));\n        return function (_x39, _x40) {\n          return _ref11.apply(this, arguments);\n        };\n      }(), {\n        retries: 2,\n        minTimeout: 100,\n        maxTimeout: 1000\n      });\n    }\n  }]);\n  return AlphaRouter;\n}();","map":{"version":3,"sources":["../../../../src/routers/alpha-router/alpha-router.ts"],"names":[],"mappings":";;;;;;;;AAAA,SAAS,SAAS,QAAQ,0BAA0B;AACpD,SAAuB,eAAe,QAAQ,0BAA0B;AACxE,OAAO,kBAAkB,MAAM,6BAA6B;AAC5D,SAAS,QAAQ,EAAE,UAAU,QAAe,qBAAqB;AACjE,SAAmB,QAAQ,EAAS,SAAS,QAAQ,mBAAmB;AAGxE,SAEE,IAAI,EACJ,QAAQ,EACR,aAAa,EACb,QAAQ,QACH,iBAAiB;AACxB,OAAO,KAAK,MAAM,aAAa;AAC/B,OAAO,IAAI,MAAM,MAAM;AACvB,OAAO,CAAC,MAAM,QAAQ;AACtB,OAAO,SAAS,MAAM,YAAY;AAElC,SACE,yBAAyB,EACzB,gCAAgC,EAChC,qBAAqB,EACrB,yBAAyB,EACzB,qBAAqB,EACrB,yBAAyB,EACzB,uBAAuB,EACvB,yBAAyB,EAMzB,sBAAsB,EACtB,WAAW,EACX,uBAAuB,EACvB,oBAAoB,EACpB,wBAAwB,EACxB,wBAAwB,EACxB,kBAAkB,EAClB,wBAAwB,EACxB,mBAAmB,EACnB,eAAe,EACf,+BAA+B,EAC/B,+BAA+B,QAC1B,iBAAiB;AACxB,SACE,wBAAwB,QAEnB,6CAA6C;AAKpD,SAAyB,aAAa,QAAQ,gCAAgC;AAC9E,SAEE,qBAAqB,EACrB,sBAAsB,QACjB,0CAA0C;AACjD,SAEE,cAAc,QACT,kCAAkC;AACzC,SAEE,uBAAuB,EAGvB,uBAAuB,QAClB,sCAAsC;AAC7C,SAEE,cAAc,QACT,kCAAkC;AAGzC,SACE,OAAO,EACP,cAAc,EACd,kBAAkB,EAClB,YAAY,QACP,mBAAmB;AAC1B,SAAS,GAAG,QAAQ,gBAAgB;AACpC,SACE,yBAAyB,EACzB,UAAU,QACL,6BAA6B;AACpC,SAAS,MAAM,EAAE,gBAAgB,QAAQ,mBAAmB;AAC5D,SAAS,YAAY,EAAE,aAAa,QAAQ,mBAAmB;AAC/D,SAAS,kBAAkB,QAAQ,+BAA+B;AAClE,SAUE,iBAAiB,QAEZ,WAAW;AAElB,SACE,+BAA+B,EAC/B,uBAAuB,QAClB,UAAU;AACjB,SACE,wBAAwB,EAExB,qBAAqB,EACrB,qBAAqB,QAChB,mCAAmC;AAC1C,SAAS,gBAAgB,QAAQ,6BAA6B;AAC9D,SAAS,sBAAsB,QAAQ,uCAAuC;AAC9E,SACE,qBAAqB,EACrB,kBAAkB,EAClB,kBAAkB,QACb,gCAAgC;AACvC,SAEE,2BAA2B,EAC3B,mBAAmB,EACnB,mBAAmB,QAEd,iCAAiC;AAMxC,SAAS,kCAAkC,QAAQ,yDAAyD;AAC5G,SAAS,0BAA0B,QAAQ,wCAAwC;AAEnF,SAAS,0BAA0B,QAAQ,GAAG;AAsM9C,WAAa,WAAW;EA2BtB,2BAqBoB;IAAA,IApBlB,OAAO,QAAP,OAAO;MACP,QAAQ,QAAR,QAAQ;MACR,kBAAkB,QAAlB,kBAAkB;MAClB,cAAc,QAAd,cAAc;MACd,oBAAoB,QAApB,oBAAoB;MACpB,cAAc,QAAd,cAAc;MACd,eAAe,QAAf,eAAe;MACf,kBAAkB,QAAlB,kBAAkB;MAClB,aAAa,QAAb,aAAa;MACb,wBAAwB,QAAxB,wBAAwB;MACxB,kBAAkB,QAAlB,kBAAkB;MAClB,gBAAgB,QAAhB,gBAAgB;MAChB,iBAAiB,QAAjB,iBAAiB;MACjB,iBAAiB,QAAjB,iBAAiB;MACjB,yBAAyB,QAAzB,yBAAyB;MACzB,kBAAkB,QAAlB,kBAAkB;MAClB,uBAAuB,QAAvB,uBAAuB;MACvB,sBAAsB,QAAtB,sBAAsB;MACtB,uBAAuB,QAAvB,uBAAuB;MACvB,SAAS,QAAT,SAAS;IAAA;IAET,IAAI,CAAC,OAAO,GAAG,OAAO;IACtB,IAAI,CAAC,QAAQ,GAAG,QAAQ;IACxB,IAAI,CAAC,kBAAkB,GACrB,kBAAkB,KAAA,IAAA,IAAlB,kBAAkB,KAAA,KAAA,CAAA,GAAlB,kBAAkB,GAClB,IAAI,wBAAwB,CAAC,OAAO,EAAE,QAAQ,EAAE,MAAO,CAAC;IAC1D,IAAI,CAAC,cAAc,GACjB,cAAc,KAAA,IAAA,IAAd,cAAc,KAAA,KAAA,CAAA,GAAd,cAAc,GACd,IAAI,qBAAqB,CACvB,IAAI,CAAC,OAAO,EACZ,IAAI,cAAc,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,EACpE,IAAI,WAAW,CAAC,IAAI,SAAS,CAAC;MAAE,MAAM,EAAE,GAAG;MAAE,SAAS,EAAE;IAAK,CAAE,CAAC,CAAC,CAClE;IACH,IAAI,CAAC,SAAS,GAAG,SAAS;IAE1B,IAAI,oBAAoB,EAAE;MACxB,IAAI,CAAC,oBAAoB,GAAG,oBAAoB;KACjD,MAAM;MACL,QAAQ,OAAO;QACb,KAAK,OAAO,CAAC,QAAQ;QACrB,KAAK,OAAO,CAAC,gBAAgB;UAC3B,IAAI,CAAC,oBAAoB,GAAG,IAAI,oBAAoB,CAClD,OAAO,EACP,QAAQ,EACR,IAAI,CAAC,kBAAkB,EACvB;YACE,OAAO,EAAE,CAAC;YACV,UAAU,EAAE,GAAG;YACf,UAAU,EAAE;WACb,EACD;YACE,cAAc,EAAE,GAAG;YACnB,eAAe,EAAE,OAAS;YAC1B,mBAAmB,EAAE;WACtB,EACD;YACE,gBAAgB,EAAE,OAAS;YAC3B,cAAc,EAAE;WACjB,EACD;YACE,gBAAgB,EAAE,OAAS;YAC3B,cAAc,EAAE;WACjB,EACD;YACE,eAAe,EAAE,CAAC,EAAE;YACpB,QAAQ,EAAE;cACR,OAAO,EAAE,IAAI;cACb,sBAAsB,EAAE,CAAC;cACzB,mBAAmB,EAAE,CAAC;YACvB;WACF,CACF;UACD;QACF,KAAK,OAAO,CAAC,YAAY;QACzB,KAAK,OAAO,CAAC,gBAAgB;UAC3B,IAAI,CAAC,oBAAoB,GAAG,IAAI,oBAAoB,CAClD,OAAO,EACP,QAAQ,EACR,IAAI,CAAC,kBAAkB,EACvB;YACE,OAAO,EAAE,CAAC;YACV,UAAU,EAAE,GAAG;YACf,UAAU,EAAE;WACb,EACD;YACE,cAAc,EAAE,EAAE;YAClB,eAAe,EAAE,QAAU;YAC3B,mBAAmB,EAAE;WACtB,EACD;YACE,gBAAgB,EAAE,QAAU;YAC5B,cAAc,EAAE;WACjB,EACD;YACE,gBAAgB,EAAE,QAAU;YAC5B,cAAc,EAAE;WACjB,CACF;UACD;QACF,KAAK,OAAO,CAAC,IAAI;QACjB,KAAK,OAAO,CAAC,cAAc;UACzB,IAAI,CAAC,oBAAoB,GAAG,IAAI,oBAAoB,CAClD,OAAO,EACP,QAAQ,EACR,IAAI,CAAC,kBAAkB,EACvB;YACE,OAAO,EAAE,CAAC;YACV,UAAU,EAAE,GAAG;YACf,UAAU,EAAE;WACb,EACD;YACE,cAAc,EAAE,EAAE;YAClB,eAAe,EAAE,OAAS;YAC1B,mBAAmB,EAAE;WACtB,EACD;YACE,gBAAgB,EAAE,OAAS;YAC3B,cAAc,EAAE;WACjB,EACD;YACE,gBAAgB,EAAE,OAAS;YAC3B,cAAc,EAAE;WACjB,CACF;UACD;QACF;UACE,IAAI,CAAC,oBAAoB,GAAG,IAAI,oBAAoB,CAClD,OAAO,EACP,QAAQ,EACR,IAAI,CAAC,kBAAkB,EACvB;YACE,OAAO,EAAE,CAAC;YACV,UAAU,EAAE,GAAG;YACf,UAAU,EAAE;WACb,EACD;YACE,cAAc,EAAE,GAAG;YACnB,eAAe,EAAE,MAAO;YACxB,mBAAmB,EAAE;WACtB,EACD;YACE,gBAAgB,EAAE,OAAS;YAC3B,cAAc,EAAE;WACjB,CACF;UACD;MAAM;IAEX;IAED,IAAI,CAAC,cAAc,GACjB,cAAc,KAAA,IAAA,IAAd,cAAc,KAAA,KAAA,CAAA,GAAd,cAAc,GACd,IAAI,qBAAqB,CACvB,OAAO,EACP,IAAI,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,EACpD,IAAI,WAAW,CAAC,IAAI,SAAS,CAAC;MAAE,MAAM,EAAE,EAAE;MAAE,SAAS,EAAE;IAAK,CAAE,CAAC,CAAC,CACjE;IAEH,IAAI,CAAC,eAAe,GAAG,eAAe,KAAA,IAAA,IAAf,eAAe,KAAA,KAAA,CAAA,GAAf,eAAe,GAAI,IAAI,eAAe,EAAE;IAE/D,IAAI,CAAC,wBAAwB,GAC3B,wBAAwB,KAAA,IAAA,IAAxB,wBAAwB,KAAA,KAAA,CAAA,GAAxB,wBAAwB,GACxB,IAAI,wBAAwB,CAC1B,OAAO,EACP,kBAA+B,EAC/B,IAAI,WAAW,CAAC,IAAI,SAAS,CAAC;MAAE,MAAM,EAAE,IAAI;MAAE,SAAS,EAAE;IAAK,CAAE,CAAC,CAAC,CACnE;IACH,IAAI,CAAC,aAAa,GAChB,aAAa,KAAA,IAAA,IAAb,aAAa,KAAA,KAAA,CAAA,GAAb,aAAa,GACb,IAAI,gCAAgC,CAClC,OAAO,EACP,IAAI,WAAW,CAAC,IAAI,SAAS,CAAC;MAAE,MAAM,EAAE,IAAI;MAAE,SAAS,EAAE;IAAK,CAAE,CAAC,CAAC,EAClE,IAAI,wBAAwB,CAC1B,OAAO,EACP,kBAAkB,EAClB,IAAI,WAAW,CAAC,IAAI,SAAS,CAAC;MAAE,MAAM,EAAE,IAAI;MAAE,SAAS,EAAE;IAAK,CAAE,CAAC,CAAC,CACnE,EACD,IAAI,aAAa,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,CACpD;IAEH,IAAM,SAAS,GAAG,kBAAkB,CAAC,OAAO,CAAC;IAE7C;IACA,IAAI,kBAAkB,EAAE;MACtB,IAAI,CAAC,kBAAkB,GAAG,kBAAkB;KAC7C,MAAM;MACL,IAAI,CAAC,kBAAkB,GAAG,IAAI,+BAA+B,CAAC,CAC5D,IAAI,yBAAyB,CAC3B,OAAO,EACP,IAAI,mBAAmB,CACrB,OAAO,yEACyD,SAAS,YACzE,SAAS,EACT,CAAC,CACF,EACD,IAAI,WAAW,CAAC,IAAI,SAAS,CAAC;QAAE,MAAM,EAAE,GAAG;QAAE,SAAS,EAAE;MAAK,CAAE,CAAC,CAAC,CAClE,EACD,IAAI,wBAAwB,CAAC,OAAO,CAAC,CACtC,CAAC;IACH;IAED,IAAI,kBAAkB,EAAE;MACtB,IAAI,CAAC,kBAAkB,GAAG,kBAAkB;KAC7C,MAAM;MACL,IAAI,CAAC,kBAAkB,GAAG,IAAI,+BAA+B,CAAC,CAC5D,IAAI,yBAAyB,CAC3B,OAAO,EACP,IAAI,mBAAmB,CACrB,OAAO,yEACyD,SAAS,YACzE,SAAS,EACT,CAAC,CACF,EACD,IAAI,WAAW,CAAC,IAAI,SAAS,CAAC;QAAE,MAAM,EAAE,GAAG;QAAE,SAAS,EAAE;MAAK,CAAE,CAAC,CAAC,CAClE,EACD,IAAI,wBAAwB,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAC3D,CAAC;IACH;IAED,IAAI,CAAC,gBAAgB,GACnB,gBAAgB,KAAA,IAAA,IAAhB,gBAAgB,KAAA,KAAA,CAAA,GAAhB,gBAAgB,GAChB,IAAI,yBAAyB,CAC3B,OAAO,EACP,IAAI,CAAC,QAAQ,YAAY,eAAe,GACpC,IAAI,uBAAuB,CACzB,OAAO,EACP,IAAI,uBAAuB,CAAC,IAAI,CAAC,QAAQ,CAAC,EAC1C,IAAI,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAC1C,GACD,IAAI,yBAAyB,CAAC,uBAAuB,CAAC,EAC1D,IAAI,WAAW,CACb,IAAI,SAAS,CAAC;MAAE,MAAM,EAAE,EAAE;MAAE,SAAS,EAAE;IAAK,CAAE,CAAC,CAChD,CACF;IACH,IAAI,CAAC,iBAAiB,GACpB,iBAAiB,KAAA,IAAA,IAAjB,iBAAiB,KAAA,KAAA,CAAA,GAAjB,iBAAiB,GAAI,IAAI,0BAA0B,EAAE;IACvD,IAAI,CAAC,iBAAiB,GACpB,iBAAiB,KAAA,IAAA,IAAjB,iBAAiB,KAAA,KAAA,CAAA,GAAjB,iBAAiB,GAAI,IAAI,0BAA0B,EAAE;IACvD,IAAI,CAAC,yBAAyB,GAC5B,yBAAyB,KAAA,IAAA,IAAzB,yBAAyB,KAAA,KAAA,CAAA,GAAzB,yBAAyB,GAAI,IAAI,kCAAkC,EAAE;IAEvE,IAAI,CAAC,kBAAkB,GACrB,kBAAkB,KAAA,IAAA,IAAlB,kBAAkB,KAAA,KAAA,CAAA,GAAlB,kBAAkB,GAAI,IAAI,kBAAkB,CAAC,IAAI,CAAC,kBAAkB,CAAC;IAEvE,IAAI,OAAO,IAAI,OAAO,CAAC,QAAQ,IAAI,OAAO,IAAI,OAAO,CAAC,gBAAgB,EAAE;MACtE,IAAI,CAAC,iBAAiB,GACpB,uBAAuB,KAAA,IAAA,IAAvB,uBAAuB,KAAA,KAAA,CAAA,GAAvB,uBAAuB,GACvB,IAAI,uBAAuB,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC;IAChE;IACD,IACE,OAAO,IAAI,OAAO,CAAC,YAAY,IAC/B,OAAO,IAAI,OAAO,CAAC,gBAAgB,EACnC;MACA,IAAI,CAAC,iBAAiB,GACpB,uBAAuB,KAAA,IAAA,IAAvB,uBAAuB,KAAA,KAAA,CAAA,GAAvB,uBAAuB,GACvB,IAAI,uBAAuB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC;IACtD;IACD,IAAI,sBAAsB,EAAE;MAC1B,IAAI,CAAC,sBAAsB,GAAG,sBAAsB;KACrD,MAAM,IAAI,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,EAAE;MAC1C,IAAI,CAAC,sBAAsB,GAAG,IAAI,sBAAsB,CACtD,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,kBAAkB,EACvB,IAAI,WAAW,CAAC,IAAI,SAAS,CAAC;QAAE,MAAM,EAAE,KAAK;QAAE,SAAS,EAAE;MAAK,CAAE,CAAC,CAAC,CACpE;IACF;EACH;EAAC;IAAA;IAAA;MAAA,6EAEM,iBACL,aAA6B,EAC7B,aAA6B,EAC7B,QAAkB,EAClB,gBAAkC,EAClC,iBAAqC;QAAA;QAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;QAAA;UAAA;YAAA;cAAA;gBACrC,aAAA,8DAA4C,+BAA+B,CACzE,IAAI,CAAC,OAAO,CACb;gBAED,IACE,aAAa,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,QAAQ,CAAC,OAAO,CAAC,EAC1E;kBAAA,QACiC,CAAC,aAAa,EAAE,aAAa,CAAC;kBAA9D,aAAa;kBAAE,aAAa;gBAC9B;gBAEG,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,CAClD,QAAQ,EACR,QAAQ,CAAC,IAAI,CAAC,YAAY,EAC1B,IAAI,CACL,EACD;gBAEA,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,SAAS,EAAE;kBAClD,UAAU,GAAG,IAAI;iBAClB,MAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,SAAS,EAAE;kBACzD,UAAU,GAAG,KAAK;iBACnB,MAAM;kBACL,UAAU,GAAG,IAAI,QAAQ,CACvB,aAAa,CAAC,QAAQ,EACtB,aAAa,CAAC,QAAQ,CACvB,CAAC,WAAW,CAAC,mBAAmB,CAAC;kBAClC,IAAI,CAAC,UAAU,EAAE,mBAAmB,GAAG,mBAAmB,CAAC,MAAM,EAAE;;gBACpE,QAEqC,UAAU,GAC5C,CAAC,aAAa,EAAE,aAAa,CAAC,GAC9B,CAAC,aAAa,EAAE,aAAa,CAAC,oCAF3B,YAAY,aAAE,aAAa;gBAI9B,YAAY,GAAG,mBAAmB;gBAClC,kBAAkB,GAAG,QAAQ,CAAC,IAAI;gBAClC,YAAY,GAAa,UAAU,GACnC,QAAQ,CAAC,IAAI,CAAC,WAAW,GACzB,QAAQ,CAAC,IAAI,CAAC,WAAW;gBACzB,IAAI,GAAqB,IAAI;gBAC7B,aAAa,GAAG,KAAK;gBACrB,CAAC,GAAG,CAAC,EACT;gBAAA;kBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BAEE,CAAC,EAAE;0BAAC,MACA,CAAC,GAAG,gBAAgB,CAAC,aAAa;4BAAA;4BAAA;0BAAA;0BACpC,GAAG,CAAC,IAAI,CAAC,yBAAyB,CAAC;0BAAC;4BAAA,GAC7B;8BACL,MAAM,EAAE,iBAAiB,CAAC,cAAc;8BACxC,KAAK,EAAE;;0BACR;wBAAA;0BAGG,YAAY,GAAG,sBAAsB,CACzC,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,aAAa,CACd;0BAAA,KACG,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;4BAAA;4BAAA;0BAAA;0BACzB,GAAG,CAAC,IAAI,oCAAoC;0BAAC;4BAAA,GACtC;8BACL,MAAM,EAAE,iBAAiB,CAAC;;0BAC3B;wBAAA;0BAAA;0BAAA,OAEU,KAAI,CAAC,KAAK,CACrB,YAAY,EACZ,aAAa,CAAC,QAAQ,EACtB,SAAS,CAAC,WAAW,EACrB,SAAS,gDAEJ,+BAA+B,CAAC,KAAI,CAAC,OAAO,CAAC,GAC7C,aAAa;4BAChB;4BACA;4BACA,SAAS,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,QAAQ,CAAC,EAAE;0BAAC,GAExC;wBAAA;0BAZD,IAAI;0BAAA,IAaC,IAAI;4BAAA;4BAAA;0BAAA;0BACP,GAAG,CAAC,IAAI,CAAC,kCAAkC,CAAC;0BAAC;4BAAA,GACtC;8BACL,MAAM,EAAE,iBAAiB,CAAC,cAAc;8BACxC,KAAK,EAAE;;0BACR;wBAAA;0BAGG,mBAAmB,GAAG,YAAY,CAAC,QAAQ,CAC/C,IAAI,CAAC,KAAM,CAAC,WAAW,CACxB;0BACK,oBAAoB,GAAG,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,KAAM,CAAC,YAAY,CAAC;0BAClE,QAAQ,GAAG,mBAAmB,CAAC,MAAM,CAAC,oBAAoB,CAAC;0BAE7D,qBAAqB;0BACzB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,KAAK,EAAI;4BAC3B,IAAI,KAAK,CAAC,QAAQ,IAAI,QAAQ,CAAC,EAAE,EAAE;8BACjC,IAAM,OAAO,GAAG,KAA8B;8BAC9C,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC,EAAI;gCACtC,IACE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IACxC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IACxC,IAAI,CAAC,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,GAAG,EAC7B;kCACA,qBAAqB,GAAG,IAAI,CAAC,MAAM,CACjC,OAAO,CAAC,qBAAqB,CAAC,CAAC,CAAE,CAAC,QAAQ,EAAE,CAC7C;kCACD,YAAY,GAAG,KAAI,CAAC,qBAAqB,CACvC,QAAQ,EACR,IAAI,CAAC,MAAM,CAAC,qBAAsB,CAAC,QAAQ,EAAE,CAAC,EAC9C,UAAU,CACX;gCACF;8BACH,CAAC,CAAC;4BACH;0BACH,CAAC,CAAC;0BACF,IAAI,CAAC,qBAAqB,EAAE;4BAC1B,YAAY,GAAG,mBAAmB;0BACnC;0BACD,aAAa,GACX,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,IAC9B,KAAI,CAAC,aAAa,CAChB,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CACrD,CAAC,QAAQ,CAAC,gBAAgB,CAAC,mBAAmB,CAAC;0BAElD,IAAI,aAAa,IAAI,qBAAqB,EAAE;4BAC1C,kBAAkB,GAAG,IAAI,IAAI,CAC3B,QAAQ,CAAC,IAAI,CAAC,MAAM,EACpB,QAAQ,CAAC,IAAI,CAAC,MAAM,EACpB,QAAQ,CAAC,IAAI,CAAC,GAAG,EACjB,qBAAqB,EACrB,QAAQ,CAAC,IAAI,CAAC,SAAS,EACvB,QAAQ,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,EAClD,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAC/B;0BACF;0BACD,YAAY,GAAG,IAAI,CAAC,KAAM,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,KAAM,CAAC,WAAW,CAAC;0BAEvE,GAAG,CAAC,IAAI,CACN;4BACE,YAAY,EAAE,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;4BACjD,YAAY,EAAE,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;4BACjD,QAAQ,EAAE,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;4BACzC,mBAAmB,EAAE,mBAAmB,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;4BAC/D,oBAAoB,EAAE,oBAAoB,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;4BACjE,mBAAmB,EAAE,gBAAgB,CAAC,mBAAmB,CAAC,OAAO,CAAC,EAAE,CAAC;4BACrE,UAAU,EAAE,CAAC,CAAC,QAAQ;2BACvB,EACD,mCAAmC,CACpC;0BAAC,KAEE,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;4BAAA;4BAAA;0BAAA;0BACzB,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC;0BAAC;4BAAA,GACvB;8BACL,MAAM,EAAE,iBAAiB,CAAC,cAAc;8BACxC,KAAK,EAAE;;0BACR;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA;cAAA;gBAAA,IA/GG,aAAa;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA,IAmHhB,IAAI;kBAAA;kBAAA;gBAAA;gBAAA,kCACA;kBACL,MAAM,EAAE,iBAAiB,CAAC,cAAc;kBACxC,KAAK,EAAE;iBACR;cAAA;gBAAA,KAGC,iBAAiB;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACM,IAAI,CAAC,+BAA+B,CAC3D,IAAI,CAAC,KAAK,EACV,iBAAiB,EACjB;kBACE,qBAAqB,EAAE,YAAY;kBACnC,sBAAsB,EAAE,aAAa;kBACrC,oBAAoB,EAAE;iBACvB,CACF;cAAA;gBARD,gBAAgB;cAAA;gBAAA,kCAWX;kBACL,MAAM,EAAE,iBAAiB,CAAC,OAAO;kBACjC,MAAM,kCAAO,IAAI;oBAAE,gBAAgB,EAAhB,gBAAgB;oBAAE,YAAY,EAAZ,YAAY;oBAAE,kBAAkB,EAAlB;kBAAkB;iBACtE;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACF;MAAA;QAAA;MAAA;MAAA;IAAA;IAED;;AAEG;EAFH;IAAA;IAAA;MAAA,sEAGO,kBACL,MAAsB,EACtB,aAAuB,EACvB,SAAoB,EACpB,UAAwB;QAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;UAAA;QAAA;UAAA;YAAA;cAAA;gBACxB,oBAAA,8DAAmD,CAAA,CAAE;gBAErD,MAAM,CAAC,SAAS,iCACW,IAAI,CAAC,OAAO,GACrC,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;gBAED;gBACA;gBACM,WAAW,GACf,CAAA,EAAA,GAAA,oBAAoB,CAAC,WAAW,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,IAAI,CAAC,qBAAqB,EAAE;gBAE5D,aAAa,GAAsB,CAAC,CAAC,KAAK,CAC9C,CAAA,CAAE,EACF,+BAA+B,CAAC,IAAI,CAAC,OAAO,CAAC,EAC7C,oBAAoB,EACpB;kBAAE,WAAW,EAAX;gBAAW,CAAE,CAChB;gBAEO,SAAS,GAAK,aAAa,CAA3B,SAAS;gBAEX,UAAU,GACd,SAAS,IAAI,SAAS,CAAC,WAAW,GAAG,MAAM,CAAC,QAAQ,GAAG,aAAa;gBAChE,WAAW,GACf,SAAS,IAAI,SAAS,CAAC,WAAW,GAAG,aAAa,GAAG,MAAM,CAAC,QAAQ;gBAChE,OAAO,GAAG,UAAU,CAAC,OAAO;gBAC5B,QAAQ,GAAG,WAAW,CAAC,OAAO,EAEpC;gBACA;gBACA;gBAAA,wBAC4B,IAAI,CAAC,qBAAqB,CACpD,MAAM,EACN,aAAa,CACd,qEAHM,QAAQ,8BAAE,OAAO,8BAKxB;gBACM,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE;gBAAA;gBAAA,OACE,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE;cAAA;gBAAA;gBAAzD,WAAW,yBAAX,WAAW;gBAEnB,MAAM,CAAC,SAAS,CACd,cAAc,EACd,IAAI,CAAC,GAAG,EAAE,GAAG,SAAS,EACtB,gBAAgB,CAAC,YAAY,CAC9B;gBAEK,UAAU,GAAG,aAAa,CAAC,OAAO;gBAElC,aAAa,GAGZ,EAAE;gBAEH,YAAY,GAAG,IAAI,GAAG,CAAC,SAAS,KAAA,IAAA,IAAT,SAAS,KAAA,KAAA,CAAA,GAAT,SAAS,GAAI,EAAE,CAAC;gBAAA;gBAAA,OAEE,OAAO,CAAC,GAAG,CAAC,CACzD,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC;kBACnC,OAAO,EAAE,IAAI,CAAC,OAAO;kBACrB,WAAW,EAAX,WAAW;kBACX,cAAc,EAAE,IAAI,CAAC,cAAc;kBACnC,KAAK,EAAE,UAAU;kBACjB,cAAc,EAAE,IAAI,CAAC,cAAc;kBACnC,iBAAiB,EAAE,IAAI,CAAC;iBACzB,CAAC,EACF,IAAI,CAAC,yBAAyB,CAAC,aAAa,CAAC;kBAC3C,OAAO,EAAE,IAAI,CAAC,OAAO;kBACrB,WAAW,EAAX,WAAW;kBACX,cAAc,EAAE,IAAI,CAAC,cAAc;kBACnC,KAAK,EAAE,UAAU;kBACjB,cAAc,EAAE,IAAI,CAAC;iBACtB,CAAC,CACH,CAAC;cAAA;gBAAA;gBAAA;gBAhBK,UAAU;gBAAE,kBAAkB;gBAkBrC,IACE,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,IACpB,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAE,KAClE,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,EACnC;kBACA,GAAG,CAAC,IAAI,CAAC;oBAAE,SAAS,EAAT,SAAS;oBAAE,SAAS,EAAT;kBAAS,CAAE,EAAE,8BAA8B,CAAC;kBAClE,aAAa,CAAC,IAAI,CAChB,IAAI,CAAC,WAAW,CACd,OAAO,EACP,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,UAAU,EACV,SAAS,EACT,aAAa,CACd,CACF;kBACD,aAAa,CAAC,IAAI,CAChB,IAAI,CAAC,WAAW,CACd,OAAO,EACP,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,WAAW,EACX,SAAS,EACT,aAAa,CACd,CACF;kBACD;kBACA,IACE,SAAS,KAAK,SAAS,CAAC,WAAW,KAClC,IAAI,CAAC,OAAO,KAAK,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,KAAK,OAAO,CAAC,KAAK,CAAC;kBACpE;kBACC,YAAY,CAAC,IAAI,IAAI,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAC5D;oBACA,GAAG,CAAC,IAAI,CACN;sBAAE,SAAS,EAAT,SAAS;sBAAE,QAAQ,EAAE;oBAAS,CAAE,EAClC,4BAA4B,CAC7B;oBACD,aAAa,CAAC,IAAI,CAChB,IAAI,CAAC,mBAAmB,CACtB,OAAO,EACP,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,kBAAkB,EAClB,SAAS,EACT,aAAa,CACd,CACF;kBACF;iBACF,MAAM;kBACL,IACE,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,IAC5B,YAAY,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAE,EAChE;oBACA,GAAG,CAAC,IAAI,CAAC;sBAAE,SAAS,EAAT,SAAS;sBAAE,QAAQ,EAAE;oBAAS,CAAE,EAAE,mBAAmB,CAAC;oBACjE,aAAa,CAAC,IAAI,CAChB,IAAI,CAAC,WAAW,CACd,OAAO,EACP,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,UAAU,EACV,SAAS,EACT,aAAa,CACd,CACF;kBACF;kBACD,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;oBACjC,GAAG,CAAC,IAAI,CAAC;sBAAE,SAAS,EAAT,SAAS;sBAAE,QAAQ,EAAE;oBAAS,CAAE,EAAE,mBAAmB,CAAC;oBACjE,aAAa,CAAC,IAAI,CAChB,IAAI,CAAC,WAAW,CACd,OAAO,EACP,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,WAAW,EACX,SAAS,EACT,aAAa,CACd,CACF;kBACF;kBACD;kBACA;kBACA,IACE,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,KAC/B,IAAI,CAAC,OAAO,KAAK,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,KAAK,OAAO,CAAC,KAAK,CAAC,IACpE,SAAS,IAAI,SAAS,CAAC,WAAW,EAClC;oBACA,GAAG,CAAC,IAAI,CACN;sBAAE,SAAS,EAAT,SAAS;sBAAE,QAAQ,EAAE;oBAAS,CAAE,EAClC,4BAA4B,CAC7B;oBACD,aAAa,CAAC,IAAI,CAChB,IAAI,CAAC,mBAAmB,CACtB,OAAO,EACP,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,kBAAkB,EAClB,SAAS,EACT,aAAa,CACd,CACF;kBACF;;gBACF;gBAAA,OAE6C,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC;cAAA;gBAAlE,+BAA+B;gBAEjC,wBAAwB,GAA0B,EAAE;gBACpD,iBAAiB,GAAwC,EAAE;gBAAA,uCAI1D,+BAA+B;gBAAA;kBAHpC,oDAGsC;oBAAA,2BAFpC,qBAAqB,eAArB,qBAAqB,EACrB,cAAc,eAAd,cAAc;oBAEd,wBAAwB,gCACnB,wBAAwB,sBACxB,qBAAqB,EACzB;oBACD,iBAAiB,gCAAO,iBAAiB,IAAE,cAAc,EAAC;;gBAC3D;kBAAA;gBAAA;kBAAA;gBAAA;gBAAA,MAEG,wBAAwB,CAAC,MAAM,IAAI,CAAC;kBAAA;kBAAA;gBAAA;gBACtC,GAAG,CAAC,IAAI,CAAC;kBAAE,wBAAwB,EAAxB;gBAAwB,CAAE,EAAE,0BAA0B,CAAC;gBAAC,kCAC5D,IAAI;cAAA;gBAGb;gBACM,cAAc,GAAG,IAAI,CAAC,GAAG,EAAE;gBAAA;gBAAA,OAEN,gBAAgB,CACzC,MAAM,EACN,QAAQ,EACR,wBAAwB,EACxB,SAAS,EACT,IAAI,CAAC,OAAO,EACZ,aAAa,EACb,UAAU,CACX;cAAA;gBARK,YAAY;gBAAA,IAUb,YAAY;kBAAA;kBAAA;gBAAA;gBAAA,kCACR,IAAI;cAAA;gBAIX,KAAK,GAMH,YAAY,CANd,KAAK,EACL,gBAAgB,GAKd,YAAY,CALd,gBAAgB,EAChB,gBAAgB,GAId,YAAY,CAJd,gBAAgB,EACR,YAAY,GAGlB,YAAY,CAHd,MAAM,EACN,0BAA0B,GAExB,YAAY,CAFd,0BAA0B,EAC1B,mBAAmB,GACjB,YAAY,CADd,mBAAmB,EAGrB;gBACM,KAAK,GAAG,UAAU,CACtB,UAAU,EACV,WAAW,EACX,SAAS,EACT,YAAY,CACb;gBAID;gBACA;gBACA,IAAI,UAAU,EAAE;kBACd,gBAAgB,GAAG,yBAAyB,CAAC,KAAK,EAAE,UAAU,CAAC;gBAChE;gBAED,MAAM,CAAC,SAAS,CACd,mBAAmB,EACnB,IAAI,CAAC,GAAG,EAAE,GAAG,cAAc,EAC3B,gBAAgB,CAAC,YAAY,CAC9B;gBAED,MAAM,CAAC,SAAS,6BACO,IAAI,CAAC,OAAO,GACjC,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;gBAED,IAAI,CAAC,wBAAwB,CAAC,YAAY,EAAE,iBAAiB,CAAC;gBAAC,eAG7D,KAAK;gBAAA,eACL,gBAAgB;gBAAA,eAChB,gBAAgB;gBAAA,eAChB,0BAA0B;gBAAA,eAC1B,mBAAmB;gBAAA,eACnB,WAAW;gBAAA,eACJ,YAAY;gBAAA,eACnB,KAAK;gBAAA,eACL,gBAAgB;gBAAA,eACH,SAAS;gBAAA;gBAAA,OAAY,WAAW;cAAA;gBAAA;gBAAA,6BAAtB,IAAI;gBAVvB,SAAS;kBACb,KAAK;kBACL,gBAAgB;kBAChB,gBAAgB;kBAChB,0BAA0B;kBAC1B,mBAAmB;kBACnB,WAAW;kBACX,KAAK;kBACL,KAAK;kBACL,gBAAgB;kBAChB,WAAW;gBAAA;gBAAA,MAGX,UAAU,IACV,UAAU,CAAC,QAAQ,IACnB,gBAAgB,IAChB,gBAAgB,CAAC,QAAQ;kBAAA;kBAAA;gBAAA;gBAAA,IAEpB,IAAI,CAAC,SAAS;kBAAA;kBAAA;gBAAA;gBAAA,MACX,IAAI,KAAK,CAAC,4BAA4B,CAAC;cAAA;gBAEzC,cAAc,GAAG,IAAI,CAAC,GAAG,EAAE;gBAAA,gBACK,IAAI,CAAC,SAAS;gBAAA,gBAClD,UAAU,CAAC,QAAQ,CAAC,WAAW;gBAAA,gBAC/B,SAAS;gBAAA,KACT,IAAI,CAAC,iBAAiB;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACZ,IAAI,CAAC,iBAAkB,CAAC,UAAU,EAAE;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA,gBAC1C,SAAS;cAAA;gBAAA;gBAAA;gBAAA,qBALsC,mBAAmB;cAAA;gBAAlE,uBAAuB;gBAO7B,MAAM,CAAC,SAAS,CACd,qBAAqB,EACrB,IAAI,CAAC,GAAG,EAAE,GAAG,cAAc,EAC3B,gBAAgB,CAAC,YAAY,CAC9B;gBAAC,kCACK,uBAAuB;cAAA;gBAAA,kCAGzB,SAAS;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACjB;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,2FAEO,kBACN,KAAU,EACV,WAGY;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IAEP,IAAI,CAAC,sBAAsB;kBAAA;kBAAA;gBAAA;gBAAA,kCACvB,KAAK;cAAA;gBAGd,GAAG,CAAC,IAAI,sCAA+B,KAAK,CAAC,MAAM,YAAS;gBAEtD,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,UAAC,IAAI;kBAAA,OAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC;gBAAA,EAAC;gBAAA;gBAAA,OAG7D,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC,MAAM,CAAC;cAAA;gBADpD,sBAAsB;gBAGtB,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,UAAC,IAAO,EAAI;kBAChD,IAAM,gBAAgB,GAAG,sBAAsB,CAAC,oBAAoB,CAClE,IAAI,CAAC,MAAM,CACZ;kBACD,IAAM,gBAAgB,GAAG,sBAAsB,CAAC,oBAAoB,CAClE,IAAI,CAAC,MAAM,CACZ;kBAED,IAAM,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,gBAAgB,CAAC;kBAChE,IAAM,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,gBAAgB,CAAC;kBAEhE,IAAI,aAAa,IAAI,aAAa,EAAE;oBAClC,GAAG,CAAC,IAAI,yBACW,YAAY,CAAC,IAAI,CAAC,wCACjC,IAAI,CAAC,MAAM,CAAC,MACd,eAAK,gBAAgB,eAAK,IAAI,CAAC,MAAM,CAAC,MAAM,eAAK,gBAAgB,EAClE;kBACF;kBAED,OAAO,CAAC,aAAa,IAAI,CAAC,aAAa;gBACzC,CAAC,CAAC;gBAAA,kCAEK,aAAa;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACrB;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,4EAEO,kBACN,OAAc,EACd,QAAe,EACf,OAAyB,EACzB,QAAkB,EAClB,UAAiB,EACjB,QAA0C,EAC1C,QAAmB,EACnB,aAAgC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAKhC,GAAG,CAAC,IAAI,CAAC,2BAA2B,CAAC;gBACrC;gBACA;gBACA;gBAAA;gBAAA,OAC+C,mBAAmB,CAAC;kBACjE,OAAO,EAAP,OAAO;kBACP,QAAQ,EAAR,QAAQ;kBACR,aAAa,EAAE,IAAI,CAAC,aAAa;kBACjC,wBAAwB,EAAE,IAAI,CAAC,wBAAwB;kBACvD,YAAY,EAAE,IAAI,CAAC,cAAc;kBACjC,SAAS,EAAE,QAAQ;kBACnB,gBAAgB,EAAE,IAAI,CAAC,kBAAkB;kBACzC,aAAa,EAAb,aAAa;kBACb,OAAO,EAAE,IAAI,CAAC;iBACf,CAAC;cAAA;gBAAA;gBAVM,YAAY,yBAAZ,YAAY;gBAAE,cAAc,yBAAd,cAAc;gBAW9B,QAAQ,GAAG,YAAY,CAAC,WAAW,EAAE,EAE3C;gBAAA;gBAAA,OACoB,IAAI,CAAC,0BAA0B,CACjD,QAAQ,EACR,UACE,KAAe,EACf,eAAkD,EACvC;kBACX;kBACA,IAAI,CAAC,eAAe,EAAE;oBACpB,OAAO,KAAK;kBACb;kBAED;kBACA;kBACA;kBACA;kBACA;kBACA,IACE,eAAe,IAAI,qBAAqB,CAAC,GAAG,KAC3C,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EACjD;oBACA,OAAO,KAAK;kBACb;kBAED,OACE,eAAe,IAAI,qBAAqB,CAAC,GAAG,IAC5C,eAAe,IAAI,qBAAqB,CAAC,GAAG;gBAEhD,CAAC,CACF;cAAA;gBA5BK,KAAK;gBA8BX;gBACQ,eAAe,GAAK,aAAa,CAAjC,eAAe;gBACjB,MAAM,GAAG,kBAAkB,CAC/B,OAAO,EACP,QAAQ,EACR,KAAK,EACL,eAAe,CAChB;gBAAA,MAEG,MAAM,CAAC,MAAM,IAAI,CAAC;kBAAA;kBAAA;gBAAA;gBAAA,kCACb;kBAAE,qBAAqB,EAAE,EAAE;kBAAE,cAAc,EAAd;gBAAc,CAAE;cAAA;gBAGtD;gBACM,OAAO,GACX,QAAQ,IAAI,SAAS,CAAC,WAAW,GAC7B,IAAI,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,IAAI,CACjD,IAAI,CAAC,oBAAoB,CAC1B,GACD,IAAI,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,IAAI,CAClD,IAAI,CAAC,oBAAoB,CAC1B;gBAED,YAAY,GAAG,IAAI,CAAC,GAAG,EAAE;gBAC/B,GAAG,CAAC,IAAI,qCACuB,MAAM,CAAC,MAAM,0BAAgB,OAAO,CAAC,MAAM,yBACzE;gBAAC;gBAAA,OAEiC,OAAO,CAAU,OAAO,EAAE,MAAM,EAAE;kBACnE,WAAW,EAAE,aAAa,CAAC;iBAC5B,CAAC;cAAA;gBAAA;gBAFM,gBAAgB,kBAAhB,gBAAgB;gBAIxB,MAAM,CAAC,SAAS,CACd,cAAc,EACd,IAAI,CAAC,GAAG,EAAE,GAAG,YAAY,EACzB,gBAAgB,CAAC,YAAY,CAC9B;gBAED,MAAM,CAAC,SAAS,CACd,iBAAiB,EACjB,CAAC,CAAC,gBAAgB,CAAC,CAChB,GAAG,CAAC;kBAAA;oBAAI,MAAM;kBAAA,OAAM,MAAM,CAAC,MAAM;gBAAA,EAAC,CAClC,GAAG,EAAE,EACR,gBAAgB,CAAC,KAAK,CACvB;gBAEK,qBAAqB,GAAG,EAAE;gBAAA,wCAEH,gBAAgB;gBAAA;gBAAA;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAlC,cAAc;gBAAA,iCACC,cAAc,MAA/B,KAAK,uBAAE,MAAM;gBAEX,CAAC,GAAG,CAAC;cAAA;gBAAA,MAAE,CAAC,GAAG,MAAM,CAAC,MAAM;kBAAA;kBAAA;gBAAA;gBACzB,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAE;gBACtB,WAAW,GAAG,MAAM,CAAC,CAAC,CAAE;gBAE5B,KAAK,GAKH,WAAW,CALb,KAAK,EACL,MAAM,GAIJ,WAAW,CAJb,MAAM,EACN,qBAAqB,GAGnB,WAAW,CAHb,qBAAqB,EACrB,2BAA2B,GAEzB,WAAW,CAFb,2BAA2B,EAC3B,WAAW,GACT,WAAW,CADb,WAAW;gBAAA,MAIX,CAAC,KAAK,IACN,CAAC,qBAAqB,IACtB,CAAC,2BAA2B,IAC5B,CAAC,WAAW;kBAAA;kBAAA;gBAAA;gBAEZ,GAAG,CAAC,KAAK,CACP;kBACE,KAAK,EAAE,aAAa,CAAC,KAAK,CAAC;kBAC3B,WAAW,EAAX;iBACD,EACD,qCAAqC,CACtC;gBAAC;cAAA;gBAIE,mBAAmB,GAAG,IAAI,qBAAqB,CAAC;kBACpD,KAAK,EAAL,KAAK;kBACL,QAAQ,EAAE,KAAK;kBACf,MAAM,EAAN,MAAM;kBACN,OAAO,EAAP,OAAO;kBACP,qBAAqB,EAArB,qBAAqB;kBACrB,2BAA2B,EAA3B,2BAA2B;kBAC3B,iBAAiB,EAAE,WAAW;kBAC9B,QAAQ,EAAR,QAAQ;kBACR,UAAU,EAAV,UAAU;kBACV,SAAS,EAAE,QAAQ;kBACnB,cAAc,EAAE,IAAI,CAAC;iBACtB,CAAC;gBAEF,qBAAqB,CAAC,IAAI,CAAC,mBAAmB,CAAC;cAAC;gBAzCf,CAAC,EAAE;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA,kCA6CjC;kBAAE,qBAAqB,EAArB,qBAAqB;kBAAE,cAAc,EAAd;gBAAc,CAAE;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACjD;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,4EAEO,kBACN,OAAc,EACd,QAAe,EACf,OAAyB,EACzB,QAAkB,EAClB,UAAiB,EACjB,WAAsB,EACtB,QAAmB,EACnB,aAAgC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAKhC,GAAG,CAAC,IAAI,CAAC,2BAA2B,CAAC;gBACrC;gBACA;gBACA;gBAAA;gBAAA,OAC+C,mBAAmB,CAAC;kBACjE,OAAO,EAAP,OAAO;kBACP,QAAQ,EAAR,QAAQ;kBACR,aAAa,EAAE,IAAI,CAAC,aAAa;kBACjC,wBAAwB,EAAE,IAAI,CAAC,wBAAwB;kBACvD,YAAY,EAAE,IAAI,CAAC,cAAc;kBACjC,SAAS,EAAE,QAAQ;kBACnB,gBAAgB,EAAE,IAAI,CAAC,kBAAkB;kBACzC,aAAa,EAAb,aAAa;kBACb,OAAO,EAAE,IAAI,CAAC;iBACf,CAAC;cAAA;gBAAA;gBAVM,YAAY,yBAAZ,YAAY;gBAAE,cAAc,yBAAd,cAAc;gBAW9B,QAAQ,GAAG,YAAY,CAAC,WAAW,EAAE,EAE3C;gBAAA;gBAAA,OACoB,IAAI,CAAC,0BAA0B,CACjD,QAAQ,EACR,UACE,KAAe,EACf,eAAkD,EACvC;kBACX;kBACA,IAAI,CAAC,eAAe,EAAE;oBACpB,OAAO,KAAK;kBACb;kBAED;kBACA;kBACA;kBACA;kBACA,IACE,eAAe,IAAI,qBAAqB,CAAC,GAAG,KAC3C,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EACjD;oBACA,OAAO,KAAK;kBACb;kBAED,OAAO,eAAe,IAAI,qBAAqB,CAAC,GAAG;gBACrD,CAAC,CACF;cAAA;gBAxBK,KAAK;gBA0BX;gBACQ,eAAe,GAAK,aAAa,CAAjC,eAAe;gBACjB,MAAM,GAAG,kBAAkB,CAC/B,OAAO,EACP,QAAQ,EACR,KAAK,EACL,eAAe,CAChB;gBAAA,MAEG,MAAM,CAAC,MAAM,IAAI,CAAC;kBAAA;kBAAA;gBAAA;gBAAA,kCACb;kBAAE,qBAAqB,EAAE,EAAE;kBAAE,cAAc,EAAd;gBAAc,CAAE;cAAA;gBAGtD;gBACM,OAAO,GACX,QAAQ,IAAI,SAAS,CAAC,WAAW,GAC7B,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GACpE,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC;gBAErE,YAAY,GAAG,IAAI,CAAC,GAAG,EAAE;gBAE/B,GAAG,CAAC,IAAI,qCACuB,MAAM,CAAC,MAAM,0BAAgB,OAAO,CAAC,MAAM,yBACzE;gBAAC;gBAAA,OACiC,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC;cAAA;gBAAA;gBAAnD,gBAAgB,mBAAhB,gBAAgB;gBAAA;gBAAA,OAEC,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC;kBAC5D,OAAO,EAAE,IAAI,CAAC,OAAO;kBACrB,WAAW,EAAX,WAAW;kBACX,YAAY,EAAE,IAAI,CAAC,cAAc;kBACjC,KAAK,EAAE;iBACR,CAAC;cAAA;gBALI,UAAU;gBAOhB,MAAM,CAAC,SAAS,CACd,cAAc,EACd,IAAI,CAAC,GAAG,EAAE,GAAG,YAAY,EACzB,gBAAgB,CAAC,YAAY,CAC9B;gBAED,MAAM,CAAC,SAAS,CACd,iBAAiB,EACjB,CAAC,CAAC,gBAAgB,CAAC,CAChB,GAAG,CAAC;kBAAA;oBAAI,MAAM;kBAAA,OAAM,MAAM,CAAC,MAAM;gBAAA,EAAC,CAClC,GAAG,EAAE,EACR,gBAAgB,CAAC,KAAK,CACvB;gBAEK,qBAAqB,GAAG,EAAE;gBAAA,wCAEH,gBAAgB;gBAAA;gBAAA;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAlC,cAAc;gBAAA,kCACC,cAAc,MAA/B,KAAK,wBAAE,MAAM;gBAEX,CAAC,GAAG,CAAC;cAAA;gBAAA,MAAE,CAAC,GAAG,MAAM,CAAC,MAAM;kBAAA;kBAAA;gBAAA;gBACzB,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAE;gBACtB,WAAW,GAAG,MAAM,CAAC,CAAC,CAAE;gBACtB,KAAK,GAAa,WAAW,CAA7B,KAAK,EAAE,MAAM,GAAK,WAAW,CAAtB,MAAM;gBAAA,IAEhB,KAAK;kBAAA;kBAAA;gBAAA;gBACR,GAAG,CAAC,KAAK,CACP;kBACE,KAAK,EAAE,aAAa,CAAC,KAAK,CAAC;kBAC3B,WAAW,EAAX;iBACD,EACD,qCAAqC,CACtC;gBAAC;cAAA;gBAIE,mBAAmB,GAAG,IAAI,qBAAqB,CAAC;kBACpD,KAAK,EAAL,KAAK;kBACL,QAAQ,EAAE,KAAK;kBACf,MAAM,EAAN,MAAM;kBACN,OAAO,EAAP,OAAO;kBACP,QAAQ,EAAE,UAAU;kBACpB,UAAU,EAAV,UAAU;kBACV,SAAS,EAAE,QAAQ;kBACnB,cAAc,EAAE,IAAI,CAAC;iBACtB,CAAC;gBAEF,qBAAqB,CAAC,IAAI,CAAC,mBAAmB,CAAC;cAAC;gBA3Bf,CAAC,EAAE;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA,kCA+BjC;kBAAE,qBAAqB,EAArB,qBAAqB;kBAAE,cAAc,EAAd;gBAAc,CAAE;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACjD;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,oFAEO,kBACN,OAAc,EACd,QAAe,EACf,OAAyB,EACzB,QAAkB,EAClB,UAAiB,EACjB,kBAAuD,EACvD,QAAmB,EACnB,aAAgC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAKhC,GAAG,CAAC,IAAI,CAAC,8BAA8B,CAAC;gBAAC,MAErC,QAAQ,IAAI,SAAS,CAAC,WAAW;kBAAA;kBAAA;gBAAA;gBAAA,MAC7B,IAAI,KAAK,CAAC,uDAAuD,CAAC;cAAA;gBAAA;gBAAA,OAOhE,2BAA2B,CAAC;kBACpC,OAAO,EAAP,OAAO;kBACP,QAAQ,EAAR,QAAQ;kBACR,aAAa,EAAE,IAAI,CAAC,aAAa;kBACjC,wBAAwB,EAAE,IAAI,CAAC,wBAAwB;kBACvD,cAAc,EAAE,IAAI,CAAC,cAAc;kBACnC,cAAc,EAAE,IAAI,CAAC,cAAc;kBACnC,SAAS,EAAE,QAAQ;kBACnB,kBAAkB,EAAE,IAAI,CAAC,kBAAkB;kBAC3C,kBAAkB,EAAE,IAAI,CAAC,kBAAkB;kBAC3C,aAAa,EAAb,aAAa;kBACb,OAAO,EAAE,IAAI,CAAC;iBACf,CAAC;cAAA;gBAAA;gBAfA,cAAc,yBAAd,cAAc;gBACd,cAAc,yBAAd,cAAc;gBACE,wBAAwB,yBAAxC,cAAc;gBAeV,UAAU,GAAG,cAAc,CAAC,WAAW,EAAE;gBACzC,UAAU,GAAG,cAAc,CAAC,WAAW,EAAE;gBAEzC,QAAQ,gCAAO,UAAU,sBAAK,UAAU;gBAExC,cAAc,GAAG,wBAAwB,EAE/C;gBAAA;gBAAA,OACoB,IAAI,CAAC,0BAA0B,CACjD,QAAQ,EACR,UACE,KAAe,EACf,eAAkD,EACvC;kBACX;kBACA,IAAI,CAAC,eAAe,EAAE;oBACpB,OAAO,KAAK;kBACb;kBAED;kBACA;kBACA;kBACA;kBACA;kBACA,IACE,eAAe,IAAI,qBAAqB,CAAC,GAAG,KAC3C,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EACjD;oBACA,OAAO,KAAK;kBACb;kBAED,OACE,eAAe,IAAI,qBAAqB,CAAC,GAAG,IAC5C,eAAe,IAAI,qBAAqB,CAAC,GAAG;gBAEhD,CAAC,CACF;cAAA;gBA5BK,KAAK;gBA8BH,eAAe,GAAK,aAAa,CAAjC,eAAe;gBAEjB,MAAM,GAAG,qBAAqB,CAClC,OAAO,EACP,QAAQ,EACR,KAAK,EACL,eAAe,CAChB;gBAAA,MAEG,MAAM,CAAC,MAAM,IAAI,CAAC;kBAAA;kBAAA;gBAAA;gBAAA,kCACb;kBAAE,qBAAqB,EAAE,EAAE;kBAAE,cAAc,EAAd;gBAAc,CAAE;cAAA;gBAGtD;gBACM,OAAO,GAAG,IAAI,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,IAAI,CACjE,IAAI,CAAC,oBAAoB,CAC1B;gBAEK,YAAY,GAAG,IAAI,CAAC,GAAG,EAAE;gBAC/B,GAAG,CAAC,IAAI,wCAC0B,MAAM,CAAC,MAAM,0BAAgB,OAAO,CAAC,MAAM,yBAC5E;gBAAC;gBAAA,OAEiC,OAAO,CAAa,OAAO,EAAE,MAAM,EAAE;kBACtE,WAAW,EAAE,aAAa,CAAC;iBAC5B,CAAC;cAAA;gBAAA;gBAFM,gBAAgB,mBAAhB,gBAAgB;gBAIxB,MAAM,CAAC,SAAS,CACd,iBAAiB,EACjB,IAAI,CAAC,GAAG,EAAE,GAAG,YAAY,EACzB,gBAAgB,CAAC,YAAY,CAC9B;gBAED,MAAM,CAAC,SAAS,CACd,oBAAoB,EACpB,CAAC,CAAC,gBAAgB,CAAC,CAChB,GAAG,CAAC;kBAAA;oBAAI,MAAM;kBAAA,OAAM,MAAM,CAAC,MAAM;gBAAA,EAAC,CAClC,GAAG,EAAE,EACR,gBAAgB,CAAC,KAAK,CACvB;gBAEK,qBAAqB,GAAG,EAAE;gBAAA,wCAEH,gBAAgB;gBAAA;gBAAA;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAlC,cAAc;gBAAA,kCACC,cAAc,MAA/B,KAAK,wBAAE,MAAM;gBAEX,CAAC,GAAG,CAAC;cAAA;gBAAA,MAAE,CAAC,GAAG,MAAM,CAAC,MAAM;kBAAA;kBAAA;gBAAA;gBACzB,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAE;gBACtB,WAAW,GAAG,MAAM,CAAC,CAAC,CAAE;gBAE5B,KAAK,GAKH,WAAW,CALb,KAAK,EACL,MAAM,GAIJ,WAAW,CAJb,MAAM,EACN,qBAAqB,GAGnB,WAAW,CAHb,qBAAqB,EACrB,2BAA2B,GAEzB,WAAW,CAFb,2BAA2B,EAC3B,WAAW,GACT,WAAW,CADb,WAAW;gBAAA,MAIX,CAAC,KAAK,IACN,CAAC,qBAAqB,IACtB,CAAC,2BAA2B,IAC5B,CAAC,WAAW;kBAAA;kBAAA;gBAAA;gBAEZ,GAAG,CAAC,KAAK,CACP;kBACE,KAAK,EAAE,aAAa,CAAC,KAAK,CAAC;kBAC3B,WAAW,EAAX;iBACD,EACD,wCAAwC,CACzC;gBAAC;cAAA;gBAIE,mBAAmB,GAAG,IAAI,wBAAwB,CAAC;kBACvD,KAAK,EAAL,KAAK;kBACL,QAAQ,EAAE,KAAK;kBACf,MAAM,EAAN,MAAM;kBACN,OAAO,EAAP,OAAO;kBACP,qBAAqB,EAArB,qBAAqB;kBACrB,2BAA2B,EAA3B,2BAA2B;kBAC3B,iBAAiB,EAAE,WAAW;kBAC9B,kBAAkB,EAAlB,kBAAkB;kBAClB,UAAU,EAAV,UAAU;kBACV,SAAS,EAAE,QAAQ;kBACnB,cAAc,EAAE,IAAI,CAAC,cAAc;kBACnC,cAAc,EAAE,IAAI,CAAC;iBACtB,CAAC;gBAEF,qBAAqB,CAAC,IAAI,CAAC,mBAAmB,CAAC;cAAC;gBA1Cf,CAAC,EAAE;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA,kCA8CjC;kBAAE,qBAAqB,EAArB,qBAAqB;kBAAE,cAAc,EAAd;gBAAc,CAAE;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACjD;MAAA;QAAA;MAAA;MAAA;IAAA,IAED;IACA;IACA;EAAA;IAAA;IAAA,OACQ,+BACN,MAAsB,EACtB,aAAgC,EAAA;MAEhC,IAAQ,mBAAmB,GAAK,aAAa,CAArC,mBAAmB;MAC3B,IAAM,QAAQ,GAAG,EAAE;MACnB,IAAM,OAAO,GAAG,EAAE;MAElB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,GAAG,GAAG,mBAAmB,EAAE,CAAC,EAAE,EAAE;QACnD,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,mBAAmB,CAAC;QACtC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,CAAC,GAAG,mBAAmB,EAAE,GAAG,CAAC,CAAC,CAAC;MAC1E;MAED,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC;IAC5B;EAAC;IAAA;IAAA;MAAA,gGAEO,kBACN,KAA2C,EAC3C,iBAAoC,EACpC,oBAA0C;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,wBAKtC,iBAAiB,CAFnB,WAAW,EAAI,SAAS,yBAAT,SAAS,EAAE,iBAAiB,yBAAjB,iBAAiB,EAAE,QAAQ,yBAAR,QAAQ,EAAE,gBAAgB,yBAAhB,gBAAgB,EAClD,kBAAkB,GACrC,iBAAiB,CADnB,mBAAmB;gBAGf,oBAAoB,GAAG,oBAAoB,CAAC,oBAAoB;gBAChE,mBAAmB,GACvB,oBAAoB,CAAC,qBAAqB,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC;gBAClE,oBAAoB,GACxB,oBAAoB,CAAC,sBAAsB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC;gBAAA;gBAAA,OACzC,IAAI,CAAC,kBAAkB,CAAC,eAAe,CACjE,mBAAmB,EACnB,oBAAoB,CACrB;cAAA;gBAHK,aAAa;gBAIb,UAAU,GAAG,mBAAmB,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,CACjE,oBAAoB,CAAC,QAAQ,CAAC,OAAO,CACtC;gBAAA,kCACM,UAAU,CAAC,wBAAwB,CACxC,KAAK,EACL;kBACE,SAAS,EAAT,SAAS;kBACT,iBAAiB,EAAjB,iBAAiB;kBACjB,2BAA2B,EAAE,QAAQ;kBACrC,gBAAgB,EAAhB;iBACD,EACD,QAAQ,CAAC,WAAW,CAAC;kBACnB,IAAI,EAAE,oBAAoB,CAAC,IAAI;kBAC/B,SAAS,EAAE,oBAAoB,CAAC,SAAS;kBACzC,SAAS,EAAE,oBAAoB,CAAC,SAAS;kBACzC,OAAO,EAAE,UAAU,GACf,mBAAmB,CAAC,QAAQ,CAAC,QAAQ,EAAE,GACvC,oBAAoB,CAAC,QAAQ,CAAC,QAAQ,EAAE;kBAC5C,OAAO,EAAE,UAAU,GACf,oBAAoB,CAAC,QAAQ,CAAC,QAAQ,EAAE,GACxC,mBAAmB,CAAC,QAAQ,CAAC,QAAQ,EAAE;kBAC3C,gBAAgB,EAAE;iBACnB,CAAC,EACF,kBAAkB,EAClB,aAAa,CAAC,eAAe,EAC7B,aAAa,CAAC,gBAAgB,CAC/B;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACF;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA,OAEO,kCACN,YAKC,EACD,mBAAwD,EAAA;MAExD,IAAM,iBAAiB,GAAG,IAAI,GAAG,EAAU;MAC3C,IAAgB,YAAY,GAAK,YAAY,CAArC,MAAM;MACd,CAAC,CAAC,YAAY,CAAC,CACZ,OAAO,CAAC,UAAC,WAAW,EAAI;QACvB,IAAQ,aAAa,GAAK,WAAW,CAA7B,aAAa;QACrB,OAAO,aAAa;MACtB,CAAC,CAAC,CACD,OAAO,CAAC,UAAC,OAAe,EAAI;QAC3B,iBAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;MAC9C,CAAC,CAAC;MAAC,4CAE0B,mBAAmB;QAAA;MAAA;QAAA;UAAA,IAAvC,gBAAgB;UACzB,IAAQ,QAAQ,GAAK,gBAAgB,CAA7B,QAAQ;UAChB,CAAC,CAAC,KAAK,CACL,gBAAgB,CAAC,UAAU,EAC3B,UAAC,KAAe,EAAE,aAAqB,EAAI;YACzC,IAAM,QAAQ,GACZ,CAAC,CAAC,aAAa,CAAC,KAAK,EAAE,UAAC,IAAI;cAAA,OAC1B,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC;YAAA,EAC7C,GAAG,CAAC;YACP,MAAM,CAAC,SAAS,CACd,CAAC,CAAC,UAAU,WAAI,QAAQ,SAAG,aAAa,EAAG,EAC3C,QAAQ,EACR,gBAAgB,CAAC,KAAK,CACvB;UACH,CAAC,CACF;QAAC;QAfJ,uDAAoD;UAAA;;MAgBnD;QAAA;MAAA;QAAA;MAAA;MAED,IAAI,UAAU,GAAG,KAAK;MACtB,IAAI,UAAU,GAAG,KAAK;MACtB,IAAI,aAAa,GAAG,KAAK;MAAC,4CACA,YAAY;QAAA;MAAA;QAAtC,uDAAwC;UAAA,IAA7B,WAAW;UACpB,IAAI,WAAW,CAAC,QAAQ,IAAI,QAAQ,CAAC,EAAE,EAAE;YACvC,UAAU,GAAG,IAAI;UAClB;UACD,IAAI,WAAW,CAAC,QAAQ,IAAI,QAAQ,CAAC,EAAE,EAAE;YACvC,UAAU,GAAG,IAAI;UAClB;UACD,IAAI,WAAW,CAAC,QAAQ,IAAI,QAAQ,CAAC,KAAK,EAAE;YAC1C,aAAa,GAAG,IAAI;UACrB;;MACF;QAAA;MAAA;QAAA;MAAA;MAED,IAAI,aAAa,KAAK,UAAU,IAAI,UAAU,CAAC,EAAE;QAC/C,IAAI,UAAU,IAAI,UAAU,EAAE;UAC5B,MAAM,CAAC,SAAS,8BAEd,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;UACD,MAAM,CAAC,SAAS,4CACsB,IAAI,CAAC,OAAO,GAChD,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;SACF,MAAM,IAAI,UAAU,EAAE;UACrB,MAAM,CAAC,SAAS,yBAAyB,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;UACnE,MAAM,CAAC,SAAS,uCACiB,IAAI,CAAC,OAAO,GAC3C,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;SACF,MAAM,IAAI,UAAU,EAAE;UACrB,MAAM,CAAC,SAAS,yBAAyB,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;UACnE,MAAM,CAAC,SAAS,uCACiB,IAAI,CAAC,OAAO,GAC3C,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;QACF;OACF,MAAM,IAAI,UAAU,IAAI,UAAU,EAAE;QACnC,MAAM,CAAC,SAAS,sBAAsB,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;QAChE,MAAM,CAAC,SAAS,oCACc,IAAI,CAAC,OAAO,GACxC,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;OACF,MAAM,IAAI,aAAa,EAAE;QACxB,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;UAC3B,MAAM,CAAC,SAAS,oBAAoB,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;UAC9D,MAAM,CAAC,SAAS,kCACY,IAAI,CAAC,OAAO,GACtC,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;SACF,MAAM;UACL,MAAM,CAAC,SAAS,eAAe,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;UACzD,MAAM,CAAC,SAAS,6BACO,IAAI,CAAC,OAAO,GACjC,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;QACF;OACF,MAAM,IAAI,UAAU,EAAE;QACrB,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;UAC3B,MAAM,CAAC,SAAS,iBAAiB,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;UAC3D,MAAM,CAAC,SAAS,+BACS,IAAI,CAAC,OAAO,GACnC,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;SACF,MAAM;UACL,MAAM,CAAC,SAAS,YAAY,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;UACtD,MAAM,CAAC,SAAS,0BACI,IAAI,CAAC,OAAO,GAC9B,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;QACF;OACF,MAAM,IAAI,UAAU,EAAE;QACrB,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;UAC3B,MAAM,CAAC,SAAS,iBAAiB,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;UAC3D,MAAM,CAAC,SAAS,+BACS,IAAI,CAAC,OAAO,GACnC,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;SACF,MAAM;UACL,MAAM,CAAC,SAAS,YAAY,CAAC,EAAE,gBAAgB,CAAC,KAAK,CAAC;UACtD,MAAM,CAAC,SAAS,0BACI,IAAI,CAAC,OAAO,GAC9B,CAAC,EACD,gBAAgB,CAAC,KAAK,CACvB;QACF;MACF;IACH;EAAC;IAAA;IAAA,OAEO,+BACN,QAAkB,EAClB,YAAkB,EAClB,UAAmB,EAAA;MAEnB,IAAM,iBAAiB,GAAG,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,SAAS,CAAC;MACzE,IAAM,iBAAiB,GAAG,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,SAAS,CAAC;MAEzE;MACA;MACA,IACE,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,iBAAiB,CAAC,IACjD,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,iBAAiB,CAAC,EAC9C;QACA,OAAO,IAAI,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MAC1B;MAED,IAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;MACnD,IAAI,YAAY,GAAG,IAAI,QAAQ,CAC7B,aAAa,CAAC,eAAe,CAC3B,YAAY,EACZ,iBAAiB,EACjB,SAAS,EACT,IAAI,CACL,EACD,aAAa,CAAC,eAAe,CAC3B,YAAY,EACZ,iBAAiB,EACjB,SAAS,EACT,IAAI,CACL,CACF;MACD,IAAI,CAAC,UAAU,EAAE,YAAY,GAAG,YAAY,CAAC,MAAM,EAAE;MACrD,OAAO,YAAY;IACrB;EAAC;IAAA;IAAA,OAEO,uBAAc,QAAkB,EAAA;MACtC,IAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAClE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,SAAS,CAAC,GACnC,QAAQ,CAAC,SAAS;MACtB,IAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GACtE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,GACrC,QAAQ,CAAC,WAAW;MACxB,OAAO,IAAI,QAAQ,CAAC,YAAY,EAAE,cAAc,CAAC;IACnD;EAAC;IAAA;IAAA,OAEO,iCAAqB;MAAA;MAC3B,OAAO,KAAK;QAAA,sEACV,kBAAO,EAAE,EAAE,OAAO;UAAA;YAAA;cAAA;gBAAA;kBAChB,IAAI,OAAO,GAAG,CAAC,EAAE;oBACf,GAAG,CAAC,IAAI,oCAA6B,OAAO,EAAG;;kBAChD,kCACM,MAAI,CAAC,QAAQ,CAAC,cAAc,EAAE;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACtC;QAAA;UAAA;QAAA;MAAA,KACD;QACE,OAAO,EAAE,CAAC;QACV,UAAU,EAAE,GAAG;QACf,UAAU,EAAE;OACb,CACF;IACH;EAAC;EAAA;AAAA","sourceRoot":"","sourcesContent":["import { BigNumber } from '@ethersproject/bignumber';\nimport { JsonRpcProvider } from '@ethersproject/providers';\nimport DEFAULT_TOKEN_LIST from '@uniswap/default-token-list';\nimport { Protocol, SwapRouter } from '@uniswap/router-sdk';\nimport { Fraction, TradeType } from '@uniswap/sdk-core';\nimport { Pool, Position, SqrtPriceMath, TickMath, } from '@uniswap/v3-sdk';\nimport retry from 'async-retry';\nimport JSBI from 'jsbi';\nimport _ from 'lodash';\nimport NodeCache from 'node-cache';\nimport { CachingGasStationProvider, CachingTokenProviderWithFallback, CachingV2PoolProvider, CachingV2SubgraphProvider, CachingV3PoolProvider, CachingV3SubgraphProvider, EIP1559GasPriceProvider, ETHGasStationInfoProvider, LegacyGasPriceProvider, NodeJSCache, OnChainGasPriceProvider, OnChainQuoteProvider, StaticV2SubgraphProvider, StaticV3SubgraphProvider, SwapRouterProvider, UniswapMulticallProvider, URISubgraphProvider, V2QuoteProvider, V2SubgraphProviderWithFallBacks, V3SubgraphProviderWithFallBacks, } from '../../providers';\nimport { CachingTokenListProvider, } from '../../providers/caching-token-list-provider';\nimport { TokenProvider } from '../../providers/token-provider';\nimport { TokenValidationResult, TokenValidatorProvider, } from '../../providers/token-validator-provider';\nimport { V2PoolProvider, } from '../../providers/v2/pool-provider';\nimport { ArbitrumGasDataProvider, OptimismGasDataProvider, } from '../../providers/v3/gas-data-provider';\nimport { V3PoolProvider, } from '../../providers/v3/pool-provider';\nimport { ChainId, ID_TO_CHAIN_ID, ID_TO_NETWORK_NAME, V2_SUPPORTED, } from '../../util/chains';\nimport { log } from '../../util/log';\nimport { buildSwapMethodParameters, buildTrade, } from '../../util/methodParameters';\nimport { metric, MetricLoggerUnit } from '../../util/metric';\nimport { poolToString, routeToString } from '../../util/routes';\nimport { UNSUPPORTED_TOKENS } from '../../util/unsupported-tokens';\nimport { SwapToRatioStatus, } from '../router';\nimport { DEFAULT_ROUTING_CONFIG_BY_CHAIN, ETH_GAS_STATION_API_URL, } from './config';\nimport { MixedRouteWithValidQuote, V2RouteWithValidQuote, V3RouteWithValidQuote, } from './entities/route-with-valid-quote';\nimport { getBestSwapRoute } from './functions/best-swap-route';\nimport { calculateRatioAmountIn } from './functions/calculate-ratio-amount-in';\nimport { computeAllMixedRoutes, computeAllV2Routes, computeAllV3Routes, } from './functions/compute-all-routes';\nimport { getMixedRouteCandidatePools, getV2CandidatePools, getV3CandidatePools, } from './functions/get-candidate-pools';\nimport { MixedRouteHeuristicGasModelFactory } from './gas-models/mixedRoute/mixed-route-heuristic-gas-model';\nimport { V2HeuristicGasModelFactory } from './gas-models/v2/v2-heuristic-gas-model';\nimport { V3HeuristicGasModelFactory } from '.';\nexport class AlphaRouter {\n    constructor({ chainId, provider, multicall2Provider, v3PoolProvider, onChainQuoteProvider, v2PoolProvider, v2QuoteProvider, v2SubgraphProvider, tokenProvider, blockedTokenListProvider, v3SubgraphProvider, gasPriceProvider, v3GasModelFactory, v2GasModelFactory, mixedRouteGasModelFactory, swapRouterProvider, optimismGasDataProvider, tokenValidatorProvider, arbitrumGasDataProvider, simulator, }) {\n        this.chainId = chainId;\n        this.provider = provider;\n        this.multicall2Provider =\n            multicall2Provider !== null && multicall2Provider !== void 0 ? multicall2Provider : new UniswapMulticallProvider(chainId, provider, 375000);\n        this.v3PoolProvider =\n            v3PoolProvider !== null && v3PoolProvider !== void 0 ? v3PoolProvider : new CachingV3PoolProvider(this.chainId, new V3PoolProvider(ID_TO_CHAIN_ID(chainId), this.multicall2Provider), new NodeJSCache(new NodeCache({ stdTTL: 360, useClones: false })));\n        this.simulator = simulator;\n        if (onChainQuoteProvider) {\n            this.onChainQuoteProvider = onChainQuoteProvider;\n        }\n        else {\n            switch (chainId) {\n                case ChainId.OPTIMISM:\n                case ChainId.OPTIMISTIC_KOVAN:\n                    this.onChainQuoteProvider = new OnChainQuoteProvider(chainId, provider, this.multicall2Provider, {\n                        retries: 2,\n                        minTimeout: 100,\n                        maxTimeout: 1000,\n                    }, {\n                        multicallChunk: 110,\n                        gasLimitPerCall: 1200000,\n                        quoteMinSuccessRate: 0.1,\n                    }, {\n                        gasLimitOverride: 3000000,\n                        multicallChunk: 45,\n                    }, {\n                        gasLimitOverride: 3000000,\n                        multicallChunk: 45,\n                    }, {\n                        baseBlockOffset: -10,\n                        rollback: {\n                            enabled: true,\n                            attemptsBeforeRollback: 1,\n                            rollbackBlockOffset: -10,\n                        },\n                    });\n                    break;\n                case ChainId.ARBITRUM_ONE:\n                case ChainId.ARBITRUM_RINKEBY:\n                    this.onChainQuoteProvider = new OnChainQuoteProvider(chainId, provider, this.multicall2Provider, {\n                        retries: 2,\n                        minTimeout: 100,\n                        maxTimeout: 1000,\n                    }, {\n                        multicallChunk: 10,\n                        gasLimitPerCall: 12000000,\n                        quoteMinSuccessRate: 0.1,\n                    }, {\n                        gasLimitOverride: 30000000,\n                        multicallChunk: 6,\n                    }, {\n                        gasLimitOverride: 30000000,\n                        multicallChunk: 6,\n                    });\n                    break;\n                case ChainId.CELO:\n                case ChainId.CELO_ALFAJORES:\n                    this.onChainQuoteProvider = new OnChainQuoteProvider(chainId, provider, this.multicall2Provider, {\n                        retries: 2,\n                        minTimeout: 100,\n                        maxTimeout: 1000,\n                    }, {\n                        multicallChunk: 10,\n                        gasLimitPerCall: 5000000,\n                        quoteMinSuccessRate: 0.1,\n                    }, {\n                        gasLimitOverride: 5000000,\n                        multicallChunk: 5,\n                    }, {\n                        gasLimitOverride: 6250000,\n                        multicallChunk: 4,\n                    });\n                    break;\n                default:\n                    this.onChainQuoteProvider = new OnChainQuoteProvider(chainId, provider, this.multicall2Provider, {\n                        retries: 2,\n                        minTimeout: 100,\n                        maxTimeout: 1000,\n                    }, {\n                        multicallChunk: 210,\n                        gasLimitPerCall: 705000,\n                        quoteMinSuccessRate: 0.15,\n                    }, {\n                        gasLimitOverride: 2000000,\n                        multicallChunk: 70,\n                    });\n                    break;\n            }\n        }\n        this.v2PoolProvider =\n            v2PoolProvider !== null && v2PoolProvider !== void 0 ? v2PoolProvider : new CachingV2PoolProvider(chainId, new V2PoolProvider(chainId, this.multicall2Provider), new NodeJSCache(new NodeCache({ stdTTL: 60, useClones: false })));\n        this.v2QuoteProvider = v2QuoteProvider !== null && v2QuoteProvider !== void 0 ? v2QuoteProvider : new V2QuoteProvider();\n        this.blockedTokenListProvider =\n            blockedTokenListProvider !== null && blockedTokenListProvider !== void 0 ? blockedTokenListProvider : new CachingTokenListProvider(chainId, UNSUPPORTED_TOKENS, new NodeJSCache(new NodeCache({ stdTTL: 3600, useClones: false })));\n        this.tokenProvider =\n            tokenProvider !== null && tokenProvider !== void 0 ? tokenProvider : new CachingTokenProviderWithFallback(chainId, new NodeJSCache(new NodeCache({ stdTTL: 3600, useClones: false })), new CachingTokenListProvider(chainId, DEFAULT_TOKEN_LIST, new NodeJSCache(new NodeCache({ stdTTL: 3600, useClones: false }))), new TokenProvider(chainId, this.multicall2Provider));\n        const chainName = ID_TO_NETWORK_NAME(chainId);\n        // ipfs urls in the following format: `https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/${protocol}/${chainName}.json`;\n        if (v2SubgraphProvider) {\n            this.v2SubgraphProvider = v2SubgraphProvider;\n        }\n        else {\n            this.v2SubgraphProvider = new V2SubgraphProviderWithFallBacks([\n                new CachingV2SubgraphProvider(chainId, new URISubgraphProvider(chainId, `https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/v2/${chainName}.json`, undefined, 0), new NodeJSCache(new NodeCache({ stdTTL: 300, useClones: false }))),\n                new StaticV2SubgraphProvider(chainId),\n            ]);\n        }\n        if (v3SubgraphProvider) {\n            this.v3SubgraphProvider = v3SubgraphProvider;\n        }\n        else {\n            this.v3SubgraphProvider = new V3SubgraphProviderWithFallBacks([\n                new CachingV3SubgraphProvider(chainId, new URISubgraphProvider(chainId, `https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/v3/${chainName}.json`, undefined, 0), new NodeJSCache(new NodeCache({ stdTTL: 300, useClones: false }))),\n                new StaticV3SubgraphProvider(chainId, this.v3PoolProvider),\n            ]);\n        }\n        this.gasPriceProvider =\n            gasPriceProvider !== null && gasPriceProvider !== void 0 ? gasPriceProvider : new CachingGasStationProvider(chainId, this.provider instanceof JsonRpcProvider\n                ? new OnChainGasPriceProvider(chainId, new EIP1559GasPriceProvider(this.provider), new LegacyGasPriceProvider(this.provider))\n                : new ETHGasStationInfoProvider(ETH_GAS_STATION_API_URL), new NodeJSCache(new NodeCache({ stdTTL: 15, useClones: false })));\n        this.v3GasModelFactory =\n            v3GasModelFactory !== null && v3GasModelFactory !== void 0 ? v3GasModelFactory : new V3HeuristicGasModelFactory();\n        this.v2GasModelFactory =\n            v2GasModelFactory !== null && v2GasModelFactory !== void 0 ? v2GasModelFactory : new V2HeuristicGasModelFactory();\n        this.mixedRouteGasModelFactory =\n            mixedRouteGasModelFactory !== null && mixedRouteGasModelFactory !== void 0 ? mixedRouteGasModelFactory : new MixedRouteHeuristicGasModelFactory();\n        this.swapRouterProvider =\n            swapRouterProvider !== null && swapRouterProvider !== void 0 ? swapRouterProvider : new SwapRouterProvider(this.multicall2Provider);\n        if (chainId == ChainId.OPTIMISM || chainId == ChainId.OPTIMISTIC_KOVAN) {\n            this.l2GasDataProvider =\n                optimismGasDataProvider !== null && optimismGasDataProvider !== void 0 ? optimismGasDataProvider : new OptimismGasDataProvider(chainId, this.multicall2Provider);\n        }\n        if (chainId == ChainId.ARBITRUM_ONE ||\n            chainId == ChainId.ARBITRUM_RINKEBY) {\n            this.l2GasDataProvider =\n                arbitrumGasDataProvider !== null && arbitrumGasDataProvider !== void 0 ? arbitrumGasDataProvider : new ArbitrumGasDataProvider(chainId, this.provider);\n        }\n        if (tokenValidatorProvider) {\n            this.tokenValidatorProvider = tokenValidatorProvider;\n        }\n        else if (this.chainId == ChainId.MAINNET) {\n            this.tokenValidatorProvider = new TokenValidatorProvider(this.chainId, this.multicall2Provider, new NodeJSCache(new NodeCache({ stdTTL: 30000, useClones: false })));\n        }\n    }\n    async routeToRatio(token0Balance, token1Balance, position, swapAndAddConfig, swapAndAddOptions, routingConfig = DEFAULT_ROUTING_CONFIG_BY_CHAIN(this.chainId)) {\n        if (token1Balance.currency.wrapped.sortsBefore(token0Balance.currency.wrapped)) {\n            [token0Balance, token1Balance] = [token1Balance, token0Balance];\n        }\n        let preSwapOptimalRatio = this.calculateOptimalRatio(position, position.pool.sqrtRatioX96, true);\n        // set up parameters according to which token will be swapped\n        let zeroForOne;\n        if (position.pool.tickCurrent > position.tickUpper) {\n            zeroForOne = true;\n        }\n        else if (position.pool.tickCurrent < position.tickLower) {\n            zeroForOne = false;\n        }\n        else {\n            zeroForOne = new Fraction(token0Balance.quotient, token1Balance.quotient).greaterThan(preSwapOptimalRatio);\n            if (!zeroForOne)\n                preSwapOptimalRatio = preSwapOptimalRatio.invert();\n        }\n        const [inputBalance, outputBalance] = zeroForOne\n            ? [token0Balance, token1Balance]\n            : [token1Balance, token0Balance];\n        let optimalRatio = preSwapOptimalRatio;\n        let postSwapTargetPool = position.pool;\n        let exchangeRate = zeroForOne\n            ? position.pool.token0Price\n            : position.pool.token1Price;\n        let swap = null;\n        let ratioAchieved = false;\n        let n = 0;\n        // iterate until we find a swap with a sufficient ratio or return null\n        while (!ratioAchieved) {\n            n++;\n            if (n > swapAndAddConfig.maxIterations) {\n                log.info('max iterations exceeded');\n                return {\n                    status: SwapToRatioStatus.NO_ROUTE_FOUND,\n                    error: 'max iterations exceeded',\n                };\n            }\n            const amountToSwap = calculateRatioAmountIn(optimalRatio, exchangeRate, inputBalance, outputBalance);\n            if (amountToSwap.equalTo(0)) {\n                log.info(`no swap needed: amountToSwap = 0`);\n                return {\n                    status: SwapToRatioStatus.NO_SWAP_NEEDED,\n                };\n            }\n            swap = await this.route(amountToSwap, outputBalance.currency, TradeType.EXACT_INPUT, undefined, {\n                ...DEFAULT_ROUTING_CONFIG_BY_CHAIN(this.chainId),\n                ...routingConfig,\n                /// @dev We do not want to query for mixedRoutes for routeToRatio as they are not supported\n                /// [Protocol.V3, Protocol.V2] will make sure we only query for V3 and V2\n                protocols: [Protocol.V3, Protocol.V2],\n            });\n            if (!swap) {\n                log.info('no route found from this.route()');\n                return {\n                    status: SwapToRatioStatus.NO_ROUTE_FOUND,\n                    error: 'no route found',\n                };\n            }\n            const inputBalanceUpdated = inputBalance.subtract(swap.trade.inputAmount);\n            const outputBalanceUpdated = outputBalance.add(swap.trade.outputAmount);\n            const newRatio = inputBalanceUpdated.divide(outputBalanceUpdated);\n            let targetPoolPriceUpdate;\n            swap.route.forEach((route) => {\n                if (route.protocol == Protocol.V3) {\n                    const v3Route = route;\n                    v3Route.route.pools.forEach((pool, i) => {\n                        if (pool.token0.equals(position.pool.token0) &&\n                            pool.token1.equals(position.pool.token1) &&\n                            pool.fee == position.pool.fee) {\n                            targetPoolPriceUpdate = JSBI.BigInt(v3Route.sqrtPriceX96AfterList[i].toString());\n                            optimalRatio = this.calculateOptimalRatio(position, JSBI.BigInt(targetPoolPriceUpdate.toString()), zeroForOne);\n                        }\n                    });\n                }\n            });\n            if (!targetPoolPriceUpdate) {\n                optimalRatio = preSwapOptimalRatio;\n            }\n            ratioAchieved =\n                newRatio.equalTo(optimalRatio) ||\n                    this.absoluteValue(newRatio.asFraction.divide(optimalRatio).subtract(1)).lessThan(swapAndAddConfig.ratioErrorTolerance);\n            if (ratioAchieved && targetPoolPriceUpdate) {\n                postSwapTargetPool = new Pool(position.pool.token0, position.pool.token1, position.pool.fee, targetPoolPriceUpdate, position.pool.liquidity, TickMath.getTickAtSqrtRatio(targetPoolPriceUpdate), position.pool.tickDataProvider);\n            }\n            exchangeRate = swap.trade.outputAmount.divide(swap.trade.inputAmount);\n            log.info({\n                exchangeRate: exchangeRate.asFraction.toFixed(18),\n                optimalRatio: optimalRatio.asFraction.toFixed(18),\n                newRatio: newRatio.asFraction.toFixed(18),\n                inputBalanceUpdated: inputBalanceUpdated.asFraction.toFixed(18),\n                outputBalanceUpdated: outputBalanceUpdated.asFraction.toFixed(18),\n                ratioErrorTolerance: swapAndAddConfig.ratioErrorTolerance.toFixed(18),\n                iterationN: n.toString(),\n            }, 'QuoteToRatio Iteration Parameters');\n            if (exchangeRate.equalTo(0)) {\n                log.info('exchangeRate to 0');\n                return {\n                    status: SwapToRatioStatus.NO_ROUTE_FOUND,\n                    error: 'insufficient liquidity to swap to optimal ratio',\n                };\n            }\n        }\n        if (!swap) {\n            return {\n                status: SwapToRatioStatus.NO_ROUTE_FOUND,\n                error: 'no route found',\n            };\n        }\n        let methodParameters;\n        if (swapAndAddOptions) {\n            methodParameters = await this.buildSwapAndAddMethodParameters(swap.trade, swapAndAddOptions, {\n                initialBalanceTokenIn: inputBalance,\n                initialBalanceTokenOut: outputBalance,\n                preLiquidityPosition: position,\n            });\n        }\n        return {\n            status: SwapToRatioStatus.SUCCESS,\n            result: { ...swap, methodParameters, optimalRatio, postSwapTargetPool },\n        };\n    }\n    /**\n     * @inheritdoc IRouter\n     */\n    async route(amount, quoteCurrency, tradeType, swapConfig, partialRoutingConfig = {}) {\n        var _a;\n        metric.putMetric(`QuoteRequestedForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n        // Get a block number to specify in all our calls. Ensures data we fetch from chain is\n        // from the same block.\n        const blockNumber = (_a = partialRoutingConfig.blockNumber) !== null && _a !== void 0 ? _a : this.getBlockNumberPromise();\n        const routingConfig = _.merge({}, DEFAULT_ROUTING_CONFIG_BY_CHAIN(this.chainId), partialRoutingConfig, { blockNumber });\n        const { protocols } = routingConfig;\n        const currencyIn = tradeType == TradeType.EXACT_INPUT ? amount.currency : quoteCurrency;\n        const currencyOut = tradeType == TradeType.EXACT_INPUT ? quoteCurrency : amount.currency;\n        const tokenIn = currencyIn.wrapped;\n        const tokenOut = currencyOut.wrapped;\n        // Generate our distribution of amounts, i.e. fractions of the input amount.\n        // We will get quotes for fractions of the input amount for different routes, then\n        // combine to generate split routes.\n        const [percents, amounts] = this.getAmountDistribution(amount, routingConfig);\n        // Get an estimate of the gas price to use when estimating gas cost of different routes.\n        const beforeGas = Date.now();\n        const { gasPriceWei } = await this.gasPriceProvider.getGasPrice();\n        metric.putMetric('GasPriceLoad', Date.now() - beforeGas, MetricLoggerUnit.Milliseconds);\n        const quoteToken = quoteCurrency.wrapped;\n        const quotePromises = [];\n        const protocolsSet = new Set(protocols !== null && protocols !== void 0 ? protocols : []);\n        const [v3gasModel, mixedRouteGasModel] = await Promise.all([\n            this.v3GasModelFactory.buildGasModel({\n                chainId: this.chainId,\n                gasPriceWei,\n                v3poolProvider: this.v3PoolProvider,\n                token: quoteToken,\n                v2poolProvider: this.v2PoolProvider,\n                l2GasDataProvider: this.l2GasDataProvider,\n            }),\n            this.mixedRouteGasModelFactory.buildGasModel({\n                chainId: this.chainId,\n                gasPriceWei,\n                v3poolProvider: this.v3PoolProvider,\n                token: quoteToken,\n                v2poolProvider: this.v2PoolProvider,\n            }),\n        ]);\n        if ((protocolsSet.size == 0 ||\n            (protocolsSet.has(Protocol.V2) && protocolsSet.has(Protocol.V3))) &&\n            V2_SUPPORTED.includes(this.chainId)) {\n            log.info({ protocols, tradeType }, 'Routing across all protocols');\n            quotePromises.push(this.getV3Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, v3gasModel, tradeType, routingConfig));\n            quotePromises.push(this.getV2Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, gasPriceWei, tradeType, routingConfig));\n            /// @dev only add mixedRoutes in the case where no protocols were specified, and if TradeType is correct\n            if (tradeType === TradeType.EXACT_INPUT &&\n                (this.chainId === ChainId.MAINNET || this.chainId === ChainId.GÖRLI) &&\n                /// The cases where protocols = [] and protocols = [V2, V3, MIXED]\n                (protocolsSet.size == 0 || protocolsSet.has(Protocol.MIXED))) {\n                log.info({ protocols, swapType: tradeType }, 'Routing across MixedRoutes');\n                quotePromises.push(this.getMixedRouteQuotes(tokenIn, tokenOut, amounts, percents, quoteToken, mixedRouteGasModel, tradeType, routingConfig));\n            }\n        }\n        else {\n            if (protocolsSet.has(Protocol.V3) ||\n                (protocolsSet.size == 0 && !V2_SUPPORTED.includes(this.chainId))) {\n                log.info({ protocols, swapType: tradeType }, 'Routing across V3');\n                quotePromises.push(this.getV3Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, v3gasModel, tradeType, routingConfig));\n            }\n            if (protocolsSet.has(Protocol.V2)) {\n                log.info({ protocols, swapType: tradeType }, 'Routing across V2');\n                quotePromises.push(this.getV2Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, gasPriceWei, tradeType, routingConfig));\n            }\n            /// If protocolsSet is not empty, and we specify mixedRoutes, consider them if the chain has v2 liq\n            /// and tradeType === EXACT_INPUT\n            if (protocolsSet.has(Protocol.MIXED) &&\n                (this.chainId === ChainId.MAINNET || this.chainId === ChainId.GÖRLI) &&\n                tradeType == TradeType.EXACT_INPUT) {\n                log.info({ protocols, swapType: tradeType }, 'Routing across MixedRoutes');\n                quotePromises.push(this.getMixedRouteQuotes(tokenIn, tokenOut, amounts, percents, quoteToken, mixedRouteGasModel, tradeType, routingConfig));\n            }\n        }\n        const routesWithValidQuotesByProtocol = await Promise.all(quotePromises);\n        let allRoutesWithValidQuotes = [];\n        let allCandidatePools = [];\n        for (const { routesWithValidQuotes, candidatePools, } of routesWithValidQuotesByProtocol) {\n            allRoutesWithValidQuotes = [\n                ...allRoutesWithValidQuotes,\n                ...routesWithValidQuotes,\n            ];\n            allCandidatePools = [...allCandidatePools, candidatePools];\n        }\n        if (allRoutesWithValidQuotes.length == 0) {\n            log.info({ allRoutesWithValidQuotes }, 'Received no valid quotes');\n            return null;\n        }\n        // Given all the quotes for all the amounts for all the routes, find the best combination.\n        const beforeBestSwap = Date.now();\n        const swapRouteRaw = await getBestSwapRoute(amount, percents, allRoutesWithValidQuotes, tradeType, this.chainId, routingConfig, v3gasModel);\n        if (!swapRouteRaw) {\n            return null;\n        }\n        const { quote, quoteGasAdjusted, estimatedGasUsed, routes: routeAmounts, estimatedGasUsedQuoteToken, estimatedGasUsedUSD, } = swapRouteRaw;\n        // Build Trade object that represents the optimal swap.\n        const trade = buildTrade(currencyIn, currencyOut, tradeType, routeAmounts);\n        let methodParameters;\n        // If user provided recipient, deadline etc. we also generate the calldata required to execute\n        // the swap and return it too.\n        if (swapConfig) {\n            methodParameters = buildSwapMethodParameters(trade, swapConfig);\n        }\n        metric.putMetric('FindBestSwapRoute', Date.now() - beforeBestSwap, MetricLoggerUnit.Milliseconds);\n        metric.putMetric(`QuoteFoundForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n        this.emitPoolSelectionMetrics(swapRouteRaw, allCandidatePools);\n        const swapRoute = {\n            quote,\n            quoteGasAdjusted,\n            estimatedGasUsed,\n            estimatedGasUsedQuoteToken,\n            estimatedGasUsedUSD,\n            gasPriceWei,\n            route: routeAmounts,\n            trade,\n            methodParameters,\n            blockNumber: BigNumber.from(await blockNumber),\n        };\n        if (swapConfig &&\n            swapConfig.simulate &&\n            methodParameters &&\n            methodParameters.calldata) {\n            if (!this.simulator) {\n                throw new Error('Simulator not initialized!');\n            }\n            const beforeSimulate = Date.now();\n            const swapRouteWithSimulation = await this.simulator.simulateTransaction(swapConfig.simulate.fromAddress, swapRoute, this.l2GasDataProvider\n                ? await this.l2GasDataProvider.getGasData()\n                : undefined);\n            metric.putMetric('SimulateTransaction', Date.now() - beforeSimulate, MetricLoggerUnit.Milliseconds);\n            return swapRouteWithSimulation;\n        }\n        return swapRoute;\n    }\n    async applyTokenValidatorToPools(pools, isInvalidFn) {\n        if (!this.tokenValidatorProvider) {\n            return pools;\n        }\n        log.info(`Running token validator on ${pools.length} pools`);\n        const tokens = _.flatMap(pools, (pool) => [pool.token0, pool.token1]);\n        const tokenValidationResults = await this.tokenValidatorProvider.validateTokens(tokens);\n        const poolsFiltered = _.filter(pools, (pool) => {\n            const token0Validation = tokenValidationResults.getValidationByToken(pool.token0);\n            const token1Validation = tokenValidationResults.getValidationByToken(pool.token1);\n            const token0Invalid = isInvalidFn(pool.token0, token0Validation);\n            const token1Invalid = isInvalidFn(pool.token1, token1Validation);\n            if (token0Invalid || token1Invalid) {\n                log.info(`Dropping pool ${poolToString(pool)} because token is invalid. ${pool.token0.symbol}: ${token0Validation}, ${pool.token1.symbol}: ${token1Validation}`);\n            }\n            return !token0Invalid && !token1Invalid;\n        });\n        return poolsFiltered;\n    }\n    async getV3Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, gasModel, swapType, routingConfig) {\n        log.info('Starting to get V3 quotes');\n        // Fetch all the pools that we will consider routing via. There are thousands\n        // of pools, so we filter them to a set of candidate pools that we expect will\n        // result in good prices.\n        const { poolAccessor, candidatePools } = await getV3CandidatePools({\n            tokenIn,\n            tokenOut,\n            tokenProvider: this.tokenProvider,\n            blockedTokenListProvider: this.blockedTokenListProvider,\n            poolProvider: this.v3PoolProvider,\n            routeType: swapType,\n            subgraphProvider: this.v3SubgraphProvider,\n            routingConfig,\n            chainId: this.chainId,\n        });\n        const poolsRaw = poolAccessor.getAllPools();\n        // Drop any pools that contain fee on transfer tokens (not supported by v3) or have issues with being transferred.\n        const pools = await this.applyTokenValidatorToPools(poolsRaw, (token, tokenValidation) => {\n            // If there is no available validation result we assume the token is fine.\n            if (!tokenValidation) {\n                return false;\n            }\n            // Only filters out *intermediate* pools that involve tokens that we detect\n            // cant be transferred. This prevents us trying to route through tokens that may\n            // not be transferrable, but allows users to still swap those tokens if they\n            // specify.\n            //\n            if (tokenValidation == TokenValidationResult.STF &&\n                (token.equals(tokenIn) || token.equals(tokenOut))) {\n                return false;\n            }\n            return (tokenValidation == TokenValidationResult.FOT ||\n                tokenValidation == TokenValidationResult.STF);\n        });\n        // Given all our candidate pools, compute all the possible ways to route from tokenIn to tokenOut.\n        const { maxSwapsPerPath } = routingConfig;\n        const routes = computeAllV3Routes(tokenIn, tokenOut, pools, maxSwapsPerPath);\n        if (routes.length == 0) {\n            return { routesWithValidQuotes: [], candidatePools };\n        }\n        // For all our routes, and all the fractional amounts, fetch quotes on-chain.\n        const quoteFn = swapType == TradeType.EXACT_INPUT\n            ? this.onChainQuoteProvider.getQuotesManyExactIn.bind(this.onChainQuoteProvider)\n            : this.onChainQuoteProvider.getQuotesManyExactOut.bind(this.onChainQuoteProvider);\n        const beforeQuotes = Date.now();\n        log.info(`Getting quotes for V3 for ${routes.length} routes with ${amounts.length} amounts per route.`);\n        const { routesWithQuotes } = await quoteFn(amounts, routes, {\n            blockNumber: routingConfig.blockNumber,\n        });\n        metric.putMetric('V3QuotesLoad', Date.now() - beforeQuotes, MetricLoggerUnit.Milliseconds);\n        metric.putMetric('V3QuotesFetched', _(routesWithQuotes)\n            .map(([, quotes]) => quotes.length)\n            .sum(), MetricLoggerUnit.Count);\n        const routesWithValidQuotes = [];\n        for (const routeWithQuote of routesWithQuotes) {\n            const [route, quotes] = routeWithQuote;\n            for (let i = 0; i < quotes.length; i++) {\n                const percent = percents[i];\n                const amountQuote = quotes[i];\n                const { quote, amount, sqrtPriceX96AfterList, initializedTicksCrossedList, gasEstimate, } = amountQuote;\n                if (!quote ||\n                    !sqrtPriceX96AfterList ||\n                    !initializedTicksCrossedList ||\n                    !gasEstimate) {\n                    log.debug({\n                        route: routeToString(route),\n                        amountQuote,\n                    }, 'Dropping a null V3 quote for route.');\n                    continue;\n                }\n                const routeWithValidQuote = new V3RouteWithValidQuote({\n                    route,\n                    rawQuote: quote,\n                    amount,\n                    percent,\n                    sqrtPriceX96AfterList,\n                    initializedTicksCrossedList,\n                    quoterGasEstimate: gasEstimate,\n                    gasModel,\n                    quoteToken,\n                    tradeType: swapType,\n                    v3PoolProvider: this.v3PoolProvider,\n                });\n                routesWithValidQuotes.push(routeWithValidQuote);\n            }\n        }\n        return { routesWithValidQuotes, candidatePools };\n    }\n    async getV2Quotes(tokenIn, tokenOut, amounts, percents, quoteToken, gasPriceWei, swapType, routingConfig) {\n        log.info('Starting to get V2 quotes');\n        // Fetch all the pools that we will consider routing via. There are thousands\n        // of pools, so we filter them to a set of candidate pools that we expect will\n        // result in good prices.\n        const { poolAccessor, candidatePools } = await getV2CandidatePools({\n            tokenIn,\n            tokenOut,\n            tokenProvider: this.tokenProvider,\n            blockedTokenListProvider: this.blockedTokenListProvider,\n            poolProvider: this.v2PoolProvider,\n            routeType: swapType,\n            subgraphProvider: this.v2SubgraphProvider,\n            routingConfig,\n            chainId: this.chainId,\n        });\n        const poolsRaw = poolAccessor.getAllPools();\n        // Drop any pools that contain tokens that can not be transferred according to the token validator.\n        const pools = await this.applyTokenValidatorToPools(poolsRaw, (token, tokenValidation) => {\n            // If there is no available validation result we assume the token is fine.\n            if (!tokenValidation) {\n                return false;\n            }\n            // Only filters out *intermediate* pools that involve tokens that we detect\n            // cant be transferred. This prevents us trying to route through tokens that may\n            // not be transferrable, but allows users to still swap those tokens if they\n            // specify.\n            if (tokenValidation == TokenValidationResult.STF &&\n                (token.equals(tokenIn) || token.equals(tokenOut))) {\n                return false;\n            }\n            return tokenValidation == TokenValidationResult.STF;\n        });\n        // Given all our candidate pools, compute all the possible ways to route from tokenIn to tokenOut.\n        const { maxSwapsPerPath } = routingConfig;\n        const routes = computeAllV2Routes(tokenIn, tokenOut, pools, maxSwapsPerPath);\n        if (routes.length == 0) {\n            return { routesWithValidQuotes: [], candidatePools };\n        }\n        // For all our routes, and all the fractional amounts, fetch quotes on-chain.\n        const quoteFn = swapType == TradeType.EXACT_INPUT\n            ? this.v2QuoteProvider.getQuotesManyExactIn.bind(this.v2QuoteProvider)\n            : this.v2QuoteProvider.getQuotesManyExactOut.bind(this.v2QuoteProvider);\n        const beforeQuotes = Date.now();\n        log.info(`Getting quotes for V2 for ${routes.length} routes with ${amounts.length} amounts per route.`);\n        const { routesWithQuotes } = await quoteFn(amounts, routes);\n        const V2gasModel = await this.v2GasModelFactory.buildGasModel({\n            chainId: this.chainId,\n            gasPriceWei,\n            poolProvider: this.v2PoolProvider,\n            token: quoteToken,\n        });\n        metric.putMetric('V2QuotesLoad', Date.now() - beforeQuotes, MetricLoggerUnit.Milliseconds);\n        metric.putMetric('V2QuotesFetched', _(routesWithQuotes)\n            .map(([, quotes]) => quotes.length)\n            .sum(), MetricLoggerUnit.Count);\n        const routesWithValidQuotes = [];\n        for (const routeWithQuote of routesWithQuotes) {\n            const [route, quotes] = routeWithQuote;\n            for (let i = 0; i < quotes.length; i++) {\n                const percent = percents[i];\n                const amountQuote = quotes[i];\n                const { quote, amount } = amountQuote;\n                if (!quote) {\n                    log.debug({\n                        route: routeToString(route),\n                        amountQuote,\n                    }, 'Dropping a null V2 quote for route.');\n                    continue;\n                }\n                const routeWithValidQuote = new V2RouteWithValidQuote({\n                    route,\n                    rawQuote: quote,\n                    amount,\n                    percent,\n                    gasModel: V2gasModel,\n                    quoteToken,\n                    tradeType: swapType,\n                    v2PoolProvider: this.v2PoolProvider,\n                });\n                routesWithValidQuotes.push(routeWithValidQuote);\n            }\n        }\n        return { routesWithValidQuotes, candidatePools };\n    }\n    async getMixedRouteQuotes(tokenIn, tokenOut, amounts, percents, quoteToken, mixedRouteGasModel, swapType, routingConfig) {\n        log.info('Starting to get mixed quotes');\n        if (swapType != TradeType.EXACT_INPUT) {\n            throw new Error('Mixed route quotes are not supported for EXACT_OUTPUT');\n        }\n        const { V2poolAccessor, V3poolAccessor, candidatePools: mixedRouteCandidatePools, } = await getMixedRouteCandidatePools({\n            tokenIn,\n            tokenOut,\n            tokenProvider: this.tokenProvider,\n            blockedTokenListProvider: this.blockedTokenListProvider,\n            v3poolProvider: this.v3PoolProvider,\n            v2poolProvider: this.v2PoolProvider,\n            routeType: swapType,\n            v3subgraphProvider: this.v3SubgraphProvider,\n            v2subgraphProvider: this.v2SubgraphProvider,\n            routingConfig,\n            chainId: this.chainId,\n        });\n        const V3poolsRaw = V3poolAccessor.getAllPools();\n        const V2poolsRaw = V2poolAccessor.getAllPools();\n        const poolsRaw = [...V3poolsRaw, ...V2poolsRaw];\n        const candidatePools = mixedRouteCandidatePools;\n        // Drop any pools that contain fee on transfer tokens (not supported by v3) or have issues with being transferred.\n        const pools = await this.applyTokenValidatorToPools(poolsRaw, (token, tokenValidation) => {\n            // If there is no available validation result we assume the token is fine.\n            if (!tokenValidation) {\n                return false;\n            }\n            // Only filters out *intermediate* pools that involve tokens that we detect\n            // cant be transferred. This prevents us trying to route through tokens that may\n            // not be transferrable, but allows users to still swap those tokens if they\n            // specify.\n            //\n            if (tokenValidation == TokenValidationResult.STF &&\n                (token.equals(tokenIn) || token.equals(tokenOut))) {\n                return false;\n            }\n            return (tokenValidation == TokenValidationResult.FOT ||\n                tokenValidation == TokenValidationResult.STF);\n        });\n        const { maxSwapsPerPath } = routingConfig;\n        const routes = computeAllMixedRoutes(tokenIn, tokenOut, pools, maxSwapsPerPath);\n        if (routes.length == 0) {\n            return { routesWithValidQuotes: [], candidatePools };\n        }\n        // For all our routes, and all the fractional amounts, fetch quotes on-chain.\n        const quoteFn = this.onChainQuoteProvider.getQuotesManyExactIn.bind(this.onChainQuoteProvider);\n        const beforeQuotes = Date.now();\n        log.info(`Getting quotes for mixed for ${routes.length} routes with ${amounts.length} amounts per route.`);\n        const { routesWithQuotes } = await quoteFn(amounts, routes, {\n            blockNumber: routingConfig.blockNumber,\n        });\n        metric.putMetric('MixedQuotesLoad', Date.now() - beforeQuotes, MetricLoggerUnit.Milliseconds);\n        metric.putMetric('MixedQuotesFetched', _(routesWithQuotes)\n            .map(([, quotes]) => quotes.length)\n            .sum(), MetricLoggerUnit.Count);\n        const routesWithValidQuotes = [];\n        for (const routeWithQuote of routesWithQuotes) {\n            const [route, quotes] = routeWithQuote;\n            for (let i = 0; i < quotes.length; i++) {\n                const percent = percents[i];\n                const amountQuote = quotes[i];\n                const { quote, amount, sqrtPriceX96AfterList, initializedTicksCrossedList, gasEstimate, } = amountQuote;\n                if (!quote ||\n                    !sqrtPriceX96AfterList ||\n                    !initializedTicksCrossedList ||\n                    !gasEstimate) {\n                    log.debug({\n                        route: routeToString(route),\n                        amountQuote,\n                    }, 'Dropping a null mixed quote for route.');\n                    continue;\n                }\n                const routeWithValidQuote = new MixedRouteWithValidQuote({\n                    route,\n                    rawQuote: quote,\n                    amount,\n                    percent,\n                    sqrtPriceX96AfterList,\n                    initializedTicksCrossedList,\n                    quoterGasEstimate: gasEstimate,\n                    mixedRouteGasModel,\n                    quoteToken,\n                    tradeType: swapType,\n                    v3PoolProvider: this.v3PoolProvider,\n                    v2PoolProvider: this.v2PoolProvider,\n                });\n                routesWithValidQuotes.push(routeWithValidQuote);\n            }\n        }\n        return { routesWithValidQuotes, candidatePools };\n    }\n    // Note multiplications here can result in a loss of precision in the amounts (e.g. taking 50% of 101)\n    // This is reconcilled at the end of the algorithm by adding any lost precision to one of\n    // the splits in the route.\n    getAmountDistribution(amount, routingConfig) {\n        const { distributionPercent } = routingConfig;\n        const percents = [];\n        const amounts = [];\n        for (let i = 1; i <= 100 / distributionPercent; i++) {\n            percents.push(i * distributionPercent);\n            amounts.push(amount.multiply(new Fraction(i * distributionPercent, 100)));\n        }\n        return [percents, amounts];\n    }\n    async buildSwapAndAddMethodParameters(trade, swapAndAddOptions, swapAndAddParameters) {\n        const { swapOptions: { recipient, slippageTolerance, deadline, inputTokenPermit }, addLiquidityOptions: addLiquidityConfig, } = swapAndAddOptions;\n        const preLiquidityPosition = swapAndAddParameters.preLiquidityPosition;\n        const finalBalanceTokenIn = swapAndAddParameters.initialBalanceTokenIn.subtract(trade.inputAmount);\n        const finalBalanceTokenOut = swapAndAddParameters.initialBalanceTokenOut.add(trade.outputAmount);\n        const approvalTypes = await this.swapRouterProvider.getApprovalType(finalBalanceTokenIn, finalBalanceTokenOut);\n        const zeroForOne = finalBalanceTokenIn.currency.wrapped.sortsBefore(finalBalanceTokenOut.currency.wrapped);\n        return SwapRouter.swapAndAddCallParameters(trade, {\n            recipient,\n            slippageTolerance,\n            deadlineOrPreviousBlockhash: deadline,\n            inputTokenPermit,\n        }, Position.fromAmounts({\n            pool: preLiquidityPosition.pool,\n            tickLower: preLiquidityPosition.tickLower,\n            tickUpper: preLiquidityPosition.tickUpper,\n            amount0: zeroForOne\n                ? finalBalanceTokenIn.quotient.toString()\n                : finalBalanceTokenOut.quotient.toString(),\n            amount1: zeroForOne\n                ? finalBalanceTokenOut.quotient.toString()\n                : finalBalanceTokenIn.quotient.toString(),\n            useFullPrecision: false,\n        }), addLiquidityConfig, approvalTypes.approvalTokenIn, approvalTypes.approvalTokenOut);\n    }\n    emitPoolSelectionMetrics(swapRouteRaw, allPoolsBySelection) {\n        const poolAddressesUsed = new Set();\n        const { routes: routeAmounts } = swapRouteRaw;\n        _(routeAmounts)\n            .flatMap((routeAmount) => {\n            const { poolAddresses } = routeAmount;\n            return poolAddresses;\n        })\n            .forEach((address) => {\n            poolAddressesUsed.add(address.toLowerCase());\n        });\n        for (const poolsBySelection of allPoolsBySelection) {\n            const { protocol } = poolsBySelection;\n            _.forIn(poolsBySelection.selections, (pools, topNSelection) => {\n                const topNUsed = _.findLastIndex(pools, (pool) => poolAddressesUsed.has(pool.id.toLowerCase())) + 1;\n                metric.putMetric(_.capitalize(`${protocol}${topNSelection}`), topNUsed, MetricLoggerUnit.Count);\n            });\n        }\n        let hasV3Route = false;\n        let hasV2Route = false;\n        let hasMixedRoute = false;\n        for (const routeAmount of routeAmounts) {\n            if (routeAmount.protocol == Protocol.V3) {\n                hasV3Route = true;\n            }\n            if (routeAmount.protocol == Protocol.V2) {\n                hasV2Route = true;\n            }\n            if (routeAmount.protocol == Protocol.MIXED) {\n                hasMixedRoute = true;\n            }\n        }\n        if (hasMixedRoute && (hasV3Route || hasV2Route)) {\n            if (hasV3Route && hasV2Route) {\n                metric.putMetric(`MixedAndV3AndV2SplitRoute`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`MixedAndV3AndV2SplitRouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n            else if (hasV3Route) {\n                metric.putMetric(`MixedAndV3SplitRoute`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`MixedAndV3SplitRouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n            else if (hasV2Route) {\n                metric.putMetric(`MixedAndV2SplitRoute`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`MixedAndV2SplitRouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n        }\n        else if (hasV3Route && hasV2Route) {\n            metric.putMetric(`V3AndV2SplitRoute`, 1, MetricLoggerUnit.Count);\n            metric.putMetric(`V3AndV2SplitRouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n        }\n        else if (hasMixedRoute) {\n            if (routeAmounts.length > 1) {\n                metric.putMetric(`MixedSplitRoute`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`MixedSplitRouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n            else {\n                metric.putMetric(`MixedRoute`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`MixedRouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n        }\n        else if (hasV3Route) {\n            if (routeAmounts.length > 1) {\n                metric.putMetric(`V3SplitRoute`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`V3SplitRouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n            else {\n                metric.putMetric(`V3Route`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`V3RouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n        }\n        else if (hasV2Route) {\n            if (routeAmounts.length > 1) {\n                metric.putMetric(`V2SplitRoute`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`V2SplitRouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n            else {\n                metric.putMetric(`V2Route`, 1, MetricLoggerUnit.Count);\n                metric.putMetric(`V2RouteForChain${this.chainId}`, 1, MetricLoggerUnit.Count);\n            }\n        }\n    }\n    calculateOptimalRatio(position, sqrtRatioX96, zeroForOne) {\n        const upperSqrtRatioX96 = TickMath.getSqrtRatioAtTick(position.tickUpper);\n        const lowerSqrtRatioX96 = TickMath.getSqrtRatioAtTick(position.tickLower);\n        // returns Fraction(0, 1) for any out of range position regardless of zeroForOne. Implication: function\n        // cannot be used to determine the trading direction of out of range positions.\n        if (JSBI.greaterThan(sqrtRatioX96, upperSqrtRatioX96) ||\n            JSBI.lessThan(sqrtRatioX96, lowerSqrtRatioX96)) {\n            return new Fraction(0, 1);\n        }\n        const precision = JSBI.BigInt('1' + '0'.repeat(18));\n        let optimalRatio = new Fraction(SqrtPriceMath.getAmount0Delta(sqrtRatioX96, upperSqrtRatioX96, precision, true), SqrtPriceMath.getAmount1Delta(sqrtRatioX96, lowerSqrtRatioX96, precision, true));\n        if (!zeroForOne)\n            optimalRatio = optimalRatio.invert();\n        return optimalRatio;\n    }\n    absoluteValue(fraction) {\n        const numeratorAbs = JSBI.lessThan(fraction.numerator, JSBI.BigInt(0))\n            ? JSBI.unaryMinus(fraction.numerator)\n            : fraction.numerator;\n        const denominatorAbs = JSBI.lessThan(fraction.denominator, JSBI.BigInt(0))\n            ? JSBI.unaryMinus(fraction.denominator)\n            : fraction.denominator;\n        return new Fraction(numeratorAbs, denominatorAbs);\n    }\n    getBlockNumberPromise() {\n        return retry(async (_b, attempt) => {\n            if (attempt > 1) {\n                log.info(`Get block number attempt ${attempt}`);\n            }\n            return this.provider.getBlockNumber();\n        }, {\n            retries: 2,\n            minTimeout: 100,\n            maxTimeout: 1000,\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxwaGEtcm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3JvdXRlcnMvYWxwaGEtcm91dGVyL2FscGhhLXJvdXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDckQsT0FBTyxFQUFnQixlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN6RSxPQUFPLGtCQUFrQixNQUFNLDZCQUE2QixDQUFDO0FBQzdELE9BQU8sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFTLE1BQU0scUJBQXFCLENBQUM7QUFDbEUsT0FBTyxFQUFZLFFBQVEsRUFBUyxTQUFTLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUd6RSxPQUFPLEVBRUwsSUFBSSxFQUNKLFFBQVEsRUFDUixhQUFhLEVBQ2IsUUFBUSxHQUNULE1BQU0saUJBQWlCLENBQUM7QUFDekIsT0FBTyxLQUFLLE1BQU0sYUFBYSxDQUFDO0FBQ2hDLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUN4QixPQUFPLENBQUMsTUFBTSxRQUFRLENBQUM7QUFDdkIsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFDO0FBRW5DLE9BQU8sRUFDTCx5QkFBeUIsRUFDekIsZ0NBQWdDLEVBQ2hDLHFCQUFxQixFQUNyQix5QkFBeUIsRUFDekIscUJBQXFCLEVBQ3JCLHlCQUF5QixFQUN6Qix1QkFBdUIsRUFDdkIseUJBQXlCLEVBTXpCLHNCQUFzQixFQUN0QixXQUFXLEVBQ1gsdUJBQXVCLEVBQ3ZCLG9CQUFvQixFQUNwQix3QkFBd0IsRUFDeEIsd0JBQXdCLEVBQ3hCLGtCQUFrQixFQUNsQix3QkFBd0IsRUFDeEIsbUJBQW1CLEVBQ25CLGVBQWUsRUFDZiwrQkFBK0IsRUFDL0IsK0JBQStCLEdBQ2hDLE1BQU0saUJBQWlCLENBQUM7QUFDekIsT0FBTyxFQUNMLHdCQUF3QixHQUV6QixNQUFNLDZDQUE2QyxDQUFD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"]},"metadata":{},"sourceType":"module"}