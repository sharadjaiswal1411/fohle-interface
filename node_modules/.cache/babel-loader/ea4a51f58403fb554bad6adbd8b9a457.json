{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useTheme as _useTheme}from\"styled-components\";import _styled from\"styled-components\";import{Trans}from\"@lingui/react\";import{useWeb3React}from'@web3-react/core';import{useState}from'react';import{ArrowUpCircle,X}from'react-feather';import Circle from\"../../assets/images/blue-loader.svg\";import{useExecuteCallback}from'../../state/governance/hooks';import{CustomLightSpinner,ThemedText}from'../../theme';import{ExternalLink}from'../../theme';import{ExplorerDataType,getExplorerLink}from'../../utils/getExplorerLink';import{ButtonPrimary}from'../Button';import{AutoColumn,ColumnCenter}from'../Column';import Modal from'../Modal';import{RowBetween}from'../Row';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ContentWrapper=_styled(AutoColumn).withConfig({componentId:\"sc-pdulpl-0\"})([\"width:100%;padding:24px;\"]);var StyledClosed=_styled(X).withConfig({componentId:\"sc-pdulpl-1\"})([\":hover{cursor:pointer;}\"]);var ConfirmOrLoadingWrapper=_styled.div.withConfig({componentId:\"sc-pdulpl-2\"})([\"width:100%;padding:24px;\"]);var ConfirmedIcon=_styled(ColumnCenter).withConfig({componentId:\"sc-pdulpl-3\"})([\"padding:60px 0;\"]);export default function ExecuteModal(_ref){var isOpen=_ref.isOpen,onDismiss=_ref.onDismiss,proposalId=_ref.proposalId;var _useWeb3React=useWeb3React(),chainId=_useWeb3React.chainId;var executeCallback=useExecuteCallback();// monitor call to help UI loading state\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),hash=_useState2[0],setHash=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),attempting=_useState4[0],setAttempting=_useState4[1];// get theme for colors\nvar theme=_useTheme();// wrapper to reset state on modal close\nfunction wrappedOnDismiss(){setHash(undefined);setAttempting(false);onDismiss();}function onExecute(){return _onExecute.apply(this,arguments);}function _onExecute(){_onExecute=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _executeCallback;var hash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setAttempting(true);// if callback not returned properly ignore\nif(executeCallback){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.next=5;return(_executeCallback=executeCallback(proposalId))===null||_executeCallback===void 0?void 0:_executeCallback.catch(function(error){setAttempting(false);console.log(error);});case 5:hash=_context.sent;if(hash){setHash(hash);}case 7:case\"end\":return _context.stop();}}},_callee);}));return _onExecute.apply(this,arguments);}return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onDismiss:wrappedOnDismiss,maxHeight:90,children:[!attempting&&!hash&&/*#__PURE__*/_jsx(ContentWrapper,{gap:\"lg\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"lg\",justify:\"center\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{fontWeight:500,children:/*#__PURE__*/_jsx(Trans,{id:\"Execute Proposal {proposalId}\",values:{proposalId:proposalId}})}),/*#__PURE__*/_jsx(StyledClosed,{onClick:wrappedOnDismiss})]}),/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(ThemedText.DeprecatedBody,{children:/*#__PURE__*/_jsx(Trans,{id:\"Executing this proposal will enact the calldata on-chain.\"})})}),/*#__PURE__*/_jsx(ButtonPrimary,{onClick:onExecute,children:/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{color:\"white\",children:/*#__PURE__*/_jsx(Trans,{id:\"Execute\"})})})]})}),attempting&&!hash&&/*#__PURE__*/_jsxs(ConfirmOrLoadingWrapper,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(StyledClosed,{onClick:wrappedOnDismiss})]}),/*#__PURE__*/_jsx(ConfirmedIcon,{children:/*#__PURE__*/_jsx(CustomLightSpinner,{src:Circle,alt:\"loader\",size:\"90px\"})}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"100px\",justify:\"center\",children:[/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",justify:\"center\",children:/*#__PURE__*/_jsx(ThemedText.DeprecatedLargeHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"Executing\"})})}),/*#__PURE__*/_jsx(ThemedText.DeprecatedSubHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"Confirm this transaction in your wallet\"})})]})]}),hash&&/*#__PURE__*/_jsxs(ConfirmOrLoadingWrapper,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(StyledClosed,{onClick:wrappedOnDismiss})]}),/*#__PURE__*/_jsx(ConfirmedIcon,{children:/*#__PURE__*/_jsx(ArrowUpCircle,{strokeWidth:0.5,size:90,color:theme.accentAction})}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"100px\",justify:\"center\",children:[/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",justify:\"center\",children:/*#__PURE__*/_jsx(ThemedText.DeprecatedLargeHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"Execution Submitted\"})})}),chainId&&/*#__PURE__*/_jsx(ExternalLink,{href:getExplorerLink(chainId,hash,ExplorerDataType.TRANSACTION),style:{marginLeft:'4px'},children:/*#__PURE__*/_jsx(ThemedText.DeprecatedSubHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"View transaction on Explorer\"})})})]})]})]});}","map":{"version":3,"names":["useWeb3React","useState","ArrowUpCircle","X","useExecuteCallback","CustomLightSpinner","ThemedText","ExternalLink","ExplorerDataType","getExplorerLink","ButtonPrimary","AutoColumn","ColumnCenter","Modal","RowBetween","ContentWrapper","styled","StyledClosed","ConfirmOrLoadingWrapper","div","ConfirmedIcon","ExecuteModal","isOpen","onDismiss","proposalId","chainId","executeCallback","hash","setHash","attempting","setAttempting","theme","useTheme","wrappedOnDismiss","undefined","onExecute","catch","error","console","log","Circle","accentAction","TRANSACTION","marginLeft"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/vote/ExecuteModal.tsx"],"sourcesContent":["import { Trans } from '@lingui/macro'\nimport { useWeb3React } from '@web3-react/core'\nimport { useState } from 'react'\nimport { ArrowUpCircle, X } from 'react-feather'\nimport styled, { useTheme } from 'styled-components/macro'\n\nimport Circle from '../../assets/images/blue-loader.svg'\nimport { useExecuteCallback } from '../../state/governance/hooks'\nimport { CustomLightSpinner, ThemedText } from '../../theme'\nimport { ExternalLink } from '../../theme'\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink'\nimport { ButtonPrimary } from '../Button'\nimport { AutoColumn, ColumnCenter } from '../Column'\nimport Modal from '../Modal'\nimport { RowBetween } from '../Row'\n\nconst ContentWrapper = styled(AutoColumn)`\n  width: 100%;\n  padding: 24px;\n`\n\nconst StyledClosed = styled(X)`\n  :hover {\n    cursor: pointer;\n  }\n`\n\nconst ConfirmOrLoadingWrapper = styled.div`\n  width: 100%;\n  padding: 24px;\n`\n\nconst ConfirmedIcon = styled(ColumnCenter)`\n  padding: 60px 0;\n`\n\ninterface ExecuteModalProps {\n  isOpen: boolean\n  onDismiss: () => void\n  proposalId: string | undefined // id for the proposal to execute\n}\n\nexport default function ExecuteModal({ isOpen, onDismiss, proposalId }: ExecuteModalProps) {\n  const { chainId } = useWeb3React()\n  const executeCallback = useExecuteCallback()\n\n  // monitor call to help UI loading state\n  const [hash, setHash] = useState<string | undefined>()\n  const [attempting, setAttempting] = useState<boolean>(false)\n\n  // get theme for colors\n  const theme = useTheme()\n\n  // wrapper to reset state on modal close\n  function wrappedOnDismiss() {\n    setHash(undefined)\n    setAttempting(false)\n    onDismiss()\n  }\n\n  async function onExecute() {\n    setAttempting(true)\n\n    // if callback not returned properly ignore\n    if (!executeCallback) return\n\n    // try delegation and store hash\n    const hash = await executeCallback(proposalId)?.catch((error) => {\n      setAttempting(false)\n      console.log(error)\n    })\n\n    if (hash) {\n      setHash(hash)\n    }\n  }\n\n  return (\n    <Modal isOpen={isOpen} onDismiss={wrappedOnDismiss} maxHeight={90}>\n      {!attempting && !hash && (\n        <ContentWrapper gap=\"lg\">\n          <AutoColumn gap=\"lg\" justify=\"center\">\n            <RowBetween>\n              <ThemedText.DeprecatedMediumHeader fontWeight={500}>\n                <Trans>Execute Proposal {proposalId}</Trans>\n              </ThemedText.DeprecatedMediumHeader>\n              <StyledClosed onClick={wrappedOnDismiss} />\n            </RowBetween>\n            <RowBetween>\n              <ThemedText.DeprecatedBody>\n                <Trans>Executing this proposal will enact the calldata on-chain.</Trans>\n              </ThemedText.DeprecatedBody>\n            </RowBetween>\n            <ButtonPrimary onClick={onExecute}>\n              <ThemedText.DeprecatedMediumHeader color=\"white\">\n                <Trans>Execute</Trans>\n              </ThemedText.DeprecatedMediumHeader>\n            </ButtonPrimary>\n          </AutoColumn>\n        </ContentWrapper>\n      )}\n      {attempting && !hash && (\n        <ConfirmOrLoadingWrapper>\n          <RowBetween>\n            <div />\n            <StyledClosed onClick={wrappedOnDismiss} />\n          </RowBetween>\n          <ConfirmedIcon>\n            <CustomLightSpinner src={Circle} alt=\"loader\" size=\"90px\" />\n          </ConfirmedIcon>\n          <AutoColumn gap=\"100px\" justify=\"center\">\n            <AutoColumn gap=\"md\" justify=\"center\">\n              <ThemedText.DeprecatedLargeHeader>\n                <Trans>Executing</Trans>\n              </ThemedText.DeprecatedLargeHeader>\n            </AutoColumn>\n            <ThemedText.DeprecatedSubHeader>\n              <Trans>Confirm this transaction in your wallet</Trans>\n            </ThemedText.DeprecatedSubHeader>\n          </AutoColumn>\n        </ConfirmOrLoadingWrapper>\n      )}\n      {hash && (\n        <ConfirmOrLoadingWrapper>\n          <RowBetween>\n            <div />\n            <StyledClosed onClick={wrappedOnDismiss} />\n          </RowBetween>\n          <ConfirmedIcon>\n            <ArrowUpCircle strokeWidth={0.5} size={90} color={theme.accentAction} />\n          </ConfirmedIcon>\n          <AutoColumn gap=\"100px\" justify=\"center\">\n            <AutoColumn gap=\"md\" justify=\"center\">\n              <ThemedText.DeprecatedLargeHeader>\n                <Trans>Execution Submitted</Trans>\n              </ThemedText.DeprecatedLargeHeader>\n            </AutoColumn>\n            {chainId && (\n              <ExternalLink\n                href={getExplorerLink(chainId, hash, ExplorerDataType.TRANSACTION)}\n                style={{ marginLeft: '4px' }}\n              >\n                <ThemedText.DeprecatedSubHeader>\n                  <Trans>View transaction on Explorer</Trans>\n                </ThemedText.DeprecatedSubHeader>\n              </ExternalLink>\n            )}\n          </AutoColumn>\n        </ConfirmOrLoadingWrapper>\n      )}\n    </Modal>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}