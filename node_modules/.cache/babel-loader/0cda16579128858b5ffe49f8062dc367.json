{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Trans}from\"@lingui/react\";import{useWeb3React}from'@web3-react/core';import useENS from'hooks/useENS';import{useSwapCallArguments}from'hooks/useSwapCallArguments';import{useMemo}from'react';import useSendSwapTransaction from'./useSendSwapTransaction';import{jsx as _jsx}from\"react/jsx-runtime\";export var SwapCallbackState;(function(SwapCallbackState){SwapCallbackState[SwapCallbackState[\"INVALID\"]=0]=\"INVALID\";SwapCallbackState[SwapCallbackState[\"LOADING\"]=1]=\"LOADING\";SwapCallbackState[SwapCallbackState[\"VALID\"]=2]=\"VALID\";})(SwapCallbackState||(SwapCallbackState={}));// returns a function that will execute a swap, if the parameters are all valid\n// and the user has approved the slippage adjusted input amount for the trade\nexport function useSwapCallback(_ref){var trade=_ref.trade,allowedSlippage=_ref.allowedSlippage,recipientAddressOrName=_ref.recipientAddressOrName,signatureData=_ref.signatureData,deadline=_ref.deadline,feeOptions=_ref.feeOptions;var _useWeb3React=useWeb3React(),account=_useWeb3React.account,chainId=_useWeb3React.chainId,provider=_useWeb3React.provider;var swapCalls=useSwapCallArguments(trade,allowedSlippage,recipientAddressOrName,signatureData,deadline,feeOptions);var _useSendSwapTransacti=useSendSwapTransaction(account,chainId,provider,trade,swapCalls),_callback=_useSendSwapTransacti.callback;var _useENS=useENS(recipientAddressOrName),recipientAddress=_useENS.address;var recipient=recipientAddressOrName===null?account:recipientAddress;return useMemo(function(){if(!trade||!provider||!account||!chainId||!_callback){return{state:SwapCallbackState.INVALID,error:/*#__PURE__*/_jsx(Trans,{id:\"Missing dependencies\"})};}if(!recipient){if(recipientAddressOrName!==null){return{state:SwapCallbackState.INVALID,error:/*#__PURE__*/_jsx(Trans,{id:\"Invalid recipient\"})};}else{return{state:SwapCallbackState.LOADING};}}return{state:SwapCallbackState.VALID,callback:function(){var _callback2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",_callback());case 1:case\"end\":return _context.stop();}}},_callee);}));function callback(){return _callback2.apply(this,arguments);}return callback;}()};},[trade,provider,account,chainId,_callback,recipient,recipientAddressOrName]);}","map":{"version":3,"names":["useWeb3React","useENS","useSwapCallArguments","useMemo","useSendSwapTransaction","SwapCallbackState","useSwapCallback","trade","allowedSlippage","recipientAddressOrName","signatureData","deadline","feeOptions","account","chainId","provider","swapCalls","callback","recipientAddress","address","recipient","state","INVALID","error","LOADING","VALID"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/lib/hooks/swap/useSwapCallback.tsx"],"sourcesContent":["// eslint-disable-next-line no-restricted-imports\nimport { BigNumber } from '@ethersproject/bignumber'\nimport type { TransactionResponse } from '@ethersproject/providers'\nimport { Trans } from '@lingui/macro'\nimport { Trade } from '@uniswap/router-sdk'\nimport { Currency, Percent, TradeType } from '@uniswap/sdk-core'\nimport { FeeOptions } from '@uniswap/v3-sdk'\nimport { useWeb3React } from '@web3-react/core'\nimport useENS from 'hooks/useENS'\nimport { SignatureData } from 'hooks/useERC20Permit'\nimport { useSwapCallArguments } from 'hooks/useSwapCallArguments'\nimport { ReactNode, useMemo } from 'react'\n\nimport useSendSwapTransaction from './useSendSwapTransaction'\n\nexport enum SwapCallbackState {\n  INVALID,\n  LOADING,\n  VALID,\n}\n\ninterface UseSwapCallbackReturns {\n  state: SwapCallbackState\n  callback?: () => Promise<TransactionResponse>\n  error?: ReactNode\n}\ninterface UseSwapCallbackArgs {\n  trade: Trade<Currency, Currency, TradeType> | undefined // trade to execute, required\n  allowedSlippage: Percent // in bips\n  recipientAddressOrName: string | null | undefined // the ENS name or address of the recipient of the trade, or null if swap should be returned to sender\n  signatureData: SignatureData | null | undefined\n  deadline: BigNumber | undefined\n  feeOptions?: FeeOptions\n}\n\n// returns a function that will execute a swap, if the parameters are all valid\n// and the user has approved the slippage adjusted input amount for the trade\nexport function useSwapCallback({\n  trade,\n  allowedSlippage,\n  recipientAddressOrName,\n  signatureData,\n  deadline,\n  feeOptions,\n}: UseSwapCallbackArgs): UseSwapCallbackReturns {\n  const { account, chainId, provider } = useWeb3React()\n  const swapCalls = useSwapCallArguments(\n    trade,\n    allowedSlippage,\n    recipientAddressOrName,\n    signatureData,\n    deadline,\n    feeOptions\n  )\n  const { callback } = useSendSwapTransaction(account, chainId, provider, trade, swapCalls)\n\n  const { address: recipientAddress } = useENS(recipientAddressOrName)\n  const recipient = recipientAddressOrName === null ? account : recipientAddress\n\n  return useMemo(() => {\n    if (!trade || !provider || !account || !chainId || !callback) {\n      return { state: SwapCallbackState.INVALID, error: <Trans>Missing dependencies</Trans> }\n    }\n    if (!recipient) {\n      if (recipientAddressOrName !== null) {\n        return { state: SwapCallbackState.INVALID, error: <Trans>Invalid recipient</Trans> }\n      } else {\n        return { state: SwapCallbackState.LOADING }\n      }\n    }\n\n    return {\n      state: SwapCallbackState.VALID,\n      callback: async () => callback(),\n    }\n  }, [trade, provider, account, chainId, callback, recipient, recipientAddressOrName])\n}\n"],"mappings":"sXAOA,OAASA,YAAY,KAAQ,kBAAkB,CAC/C,MAAOC,OAAM,KAAM,cAAc,CAEjC,OAASC,oBAAoB,KAAQ,4BAA4B,CACjE,OAAoBC,OAAO,KAAQ,OAAO,CAE1C,MAAOC,uBAAsB,KAAM,0BAA0B,4CAE7D,UAAYC,kBAAiB,CAI5B,UAJWA,iBAAiB,EAAjBA,iBAAiB,CAAjBA,iBAAiB,yBAAjBA,iBAAiB,CAAjBA,iBAAiB,yBAAjBA,iBAAiB,CAAjBA,iBAAiB,wBAAjBA,iBAAiB,GAAjBA,iBAAiB,MAoB7B;AACA;AACA,MAAO,SAASC,gBAAe,MAOiB,IAN9CC,MAAK,MAALA,KAAK,CACLC,eAAe,MAAfA,eAAe,CACfC,sBAAsB,MAAtBA,sBAAsB,CACtBC,aAAa,MAAbA,aAAa,CACbC,QAAQ,MAARA,QAAQ,CACRC,UAAU,MAAVA,UAAU,CAEV,kBAAuCZ,YAAY,EAAE,CAA7Ca,OAAO,eAAPA,OAAO,CAAEC,OAAO,eAAPA,OAAO,CAAEC,QAAQ,eAARA,QAAQ,CAClC,GAAMC,UAAS,CAAGd,oBAAoB,CACpCK,KAAK,CACLC,eAAe,CACfC,sBAAsB,CACtBC,aAAa,CACbC,QAAQ,CACRC,UAAU,CACX,CACD,0BAAqBR,sBAAsB,CAACS,OAAO,CAAEC,OAAO,CAAEC,QAAQ,CAAER,KAAK,CAAES,SAAS,CAAC,CAAjFC,SAAQ,uBAARA,QAAQ,CAEhB,YAAsChB,MAAM,CAACQ,sBAAsB,CAAC,CAAnDS,gBAAgB,SAAzBC,OAAO,CACf,GAAMC,UAAS,CAAGX,sBAAsB,GAAK,IAAI,CAAGI,OAAO,CAAGK,gBAAgB,CAE9E,MAAOf,QAAO,CAAC,UAAM,CACnB,GAAI,CAACI,KAAK,EAAI,CAACQ,QAAQ,EAAI,CAACF,OAAO,EAAI,CAACC,OAAO,EAAI,CAACG,SAAQ,CAAE,CAC5D,MAAO,CAAEI,KAAK,CAAEhB,iBAAiB,CAACiB,OAAO,CAAEC,KAAK,cAAE,uCAAoC,CAAC,CACzF,CACA,GAAI,CAACH,SAAS,CAAE,CACd,GAAIX,sBAAsB,GAAK,IAAI,CAAE,CACnC,MAAO,CAAEY,KAAK,CAAEhB,iBAAiB,CAACiB,OAAO,CAAEC,KAAK,cAAE,oCAAiC,CAAC,CACtF,CAAC,IAAM,CACL,MAAO,CAAEF,KAAK,CAAEhB,iBAAiB,CAACmB,OAAQ,CAAC,CAC7C,CACF,CAEA,MAAO,CACLH,KAAK,CAAEhB,iBAAiB,CAACoB,KAAK,CAC9BR,QAAQ,mFAAE,mKAAYA,SAAQ,EAAE,2IAClC,CAAC,CACH,CAAC,CAAE,CAACV,KAAK,CAAEQ,QAAQ,CAAEF,OAAO,CAAEC,OAAO,CAAEG,SAAQ,CAAEG,SAAS,CAAEX,sBAAsB,CAAC,CAAC,CACtF"},"metadata":{},"sourceType":"module"}