{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{BigNumber}from'@ethersproject/bignumber';import{Contract}from'@ethersproject/contracts';import{parseEther}from'@ethersproject/units';import{addressesByNetwork,signMakerOrder,SupportedChainId}from'@looksrare/sdk';import{Seaport}from'@opensea/seaport-js';import{ItemType}from'@opensea/seaport-js/lib/constants';import{OPENSEA_DEFAULT_CROSS_CHAIN_CONDUIT_KEY,OPENSEA_DEFAULT_ZONE,OPENSEA_KEY_TO_CONDUIT}from'nft/queries/openSea';import ERC721 from'../../abis/erc721.json';import{createLooksRareOrder,getOrderId,LOOKSRARE_MARKETPLACE_CONTRACT,newX2Y2Order,PostOpenSeaSellOrder}from'../queries';import{INVERSE_BASIS_POINTS,OPENSEA_DEFAULT_FEE,OPENSEA_FEE_ADDRESS}from'../queries/openSea';import{ListingStatus}from'../types';import{createSellOrder,encodeOrder,signOrderData}from'./x2y2';export var LOOKS_RARE_CREATOR_BASIS_POINTS=50;export var ListingMarkets=[{name:'X2Y2',fee:0.5,icon:'/nft/svgs/marketplaces/x2y2.svg'},{name:'LooksRare',fee:1.5,icon:'/nft/svgs/marketplaces/looksrare.svg'},{name:'OpenSea',fee:2.5,icon:'/nft/svgs/marketplaces/opensea.svg'}];var createConsiderationItem=function createConsiderationItem(basisPoints,recipient){return{amount:basisPoints,recipient:recipient};};var getConsiderationItems=function getConsiderationItems(asset,price,signerAddress){var _asset$basisPoints,_asset$asset_contract,_asset$asset_contract2;var openSeaBasisPoints=OPENSEA_DEFAULT_FEE*INVERSE_BASIS_POINTS;var creatorFeeBasisPoints=(_asset$basisPoints=asset===null||asset===void 0?void 0:asset.basisPoints)!==null&&_asset$basisPoints!==void 0?_asset$basisPoints:0;var sellerBasisPoints=INVERSE_BASIS_POINTS-openSeaBasisPoints-creatorFeeBasisPoints;var openseaFee=price.mul(BigNumber.from(openSeaBasisPoints)).div(BigNumber.from(INVERSE_BASIS_POINTS)).toString();var creatorFee=price.mul(BigNumber.from(creatorFeeBasisPoints)).div(BigNumber.from(INVERSE_BASIS_POINTS)).toString();var sellerFee=price.mul(BigNumber.from(sellerBasisPoints)).div(BigNumber.from(INVERSE_BASIS_POINTS)).toString();return{sellerFee:createConsiderationItem(sellerFee,signerAddress),openseaFee:createConsiderationItem(openseaFee,OPENSEA_FEE_ADDRESS),creatorFee:creatorFeeBasisPoints>0?createConsiderationItem(creatorFee,(_asset$asset_contract=asset===null||asset===void 0?void 0:(_asset$asset_contract2=asset.asset_contract)===null||_asset$asset_contract2===void 0?void 0:_asset$asset_contract2.payout_address)!==null&&_asset$asset_contract!==void 0?_asset$asset_contract:''):undefined};};export function approveCollection(_x,_x2,_x3,_x4){return _approveCollection.apply(this,arguments);}function _approveCollection(){_approveCollection=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(operator,collectionAddress,signer,setStatus){var ERC721Contract,signerAddress,approved,approvalTransaction,tx;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// This will work for both 721s & 1155s because they both have the\n// setApprovalForAll() method\nERC721Contract=new Contract(collectionAddress,ERC721,signer);_context.next=3;return signer.getAddress();case 3:signerAddress=_context.sent;setStatus(ListingStatus.PENDING);_context.prev=5;_context.next=8;return ERC721Contract.isApprovedForAll(signerAddress,operator);case 8:approved=_context.sent;if(!approved){_context.next=12;break;}setStatus(ListingStatus.APPROVED);return _context.abrupt(\"return\");case 12:setStatus(ListingStatus.SIGNING);_context.next=15;return ERC721Contract.setApprovalForAll(operator,true);case 15:approvalTransaction=_context.sent;setStatus(ListingStatus.PENDING);_context.next=19;return approvalTransaction.wait();case 19:tx=_context.sent;tx.status===1?setStatus(ListingStatus.APPROVED):setStatus(ListingStatus.FAILED);_context.next=26;break;case 23:_context.prev=23;_context.t0=_context[\"catch\"](5);if(_context.t0.code===4001)setStatus(ListingStatus.REJECTED);else setStatus(ListingStatus.FAILED);case 26:case\"end\":return _context.stop();}}},_callee,null,[[5,23]]);}));return _approveCollection.apply(this,arguments);}export function signListing(_x5,_x6,_x7,_x8){return _signListing.apply(this,arguments);}function _signListing(){_signListing=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(marketplace,asset,signer,provider){var _asset$newListings,_asset$newListings$fi;var looksRareNonce,setStatus,seaport,signerAddress,listingPrice,listingInWei,_getConsiderationItem,sellerFee,openseaFee,creatorFee,considerationItems,_yield$seaport$create,executeAllActions,order,res,addresses,currentTime,makerOrder,signatureHash,payload,_res,orderItem,_order,prevOrderId,_payload,resp,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:looksRareNonce=_args2.length>4&&_args2[4]!==undefined?_args2[4]:0;setStatus=_args2.length>5?_args2[5]:undefined;seaport=new Seaport(provider,{conduitKeyToConduit:OPENSEA_KEY_TO_CONDUIT,overrides:{defaultConduitKey:OPENSEA_DEFAULT_CROSS_CHAIN_CONDUIT_KEY}});_context2.next=5;return signer.getAddress();case 5:signerAddress=_context2.sent;listingPrice=(_asset$newListings=asset.newListings)===null||_asset$newListings===void 0?void 0:(_asset$newListings$fi=_asset$newListings.find(function(listing){return listing.marketplace.name===marketplace.name;}))===null||_asset$newListings$fi===void 0?void 0:_asset$newListings$fi.price;if(!(!listingPrice||!asset.expirationTime||!asset.asset_contract.address||!asset.tokenId)){_context2.next=9;break;}return _context2.abrupt(\"return\",false);case 9:_context2.t0=marketplace.name;_context2.next=_context2.t0==='OpenSea'?12:_context2.t0==='LooksRare'?34:_context2.t0==='X2Y2'?54:75;break;case 12:_context2.prev=12;listingInWei=parseEther(\"\".concat(listingPrice));_getConsiderationItem=getConsiderationItems(asset,listingInWei,signerAddress),sellerFee=_getConsiderationItem.sellerFee,openseaFee=_getConsiderationItem.openseaFee,creatorFee=_getConsiderationItem.creatorFee;considerationItems=[sellerFee,openseaFee,creatorFee].filter(function(item){return item!==undefined;});_context2.next=18;return seaport.createOrder({offer:[{itemType:ItemType.ERC721,token:asset.asset_contract.address,identifier:asset.tokenId,amount:'1'}],consideration:considerationItems,endTime:asset.expirationTime.toString(),zone:OPENSEA_DEFAULT_ZONE,restrictedByZone:true,allowPartialFills:true},signerAddress);case 18:_yield$seaport$create=_context2.sent;executeAllActions=_yield$seaport$create.executeAllActions;_context2.next=22;return executeAllActions();case 22:order=_context2.sent;_context2.next=25;return PostOpenSeaSellOrder(order);case 25:res=_context2.sent;if(res)setStatus(ListingStatus.APPROVED);return _context2.abrupt(\"return\",res);case 30:_context2.prev=30;_context2.t1=_context2[\"catch\"](12);if(_context2.t1.code===4001)setStatus(ListingStatus.REJECTED);else setStatus(ListingStatus.FAILED);return _context2.abrupt(\"return\",false);case 34:addresses=addressesByNetwork[SupportedChainId.MAINNET];currentTime=Math.round(Date.now()/1000);makerOrder={// true --> ask / false --> bid\nisOrderAsk:true,// signer address of the maker order\nsigner:signerAddress,// collection address\ncollection:asset.asset_contract.address,// Price in WEI\nprice:parseEther(listingPrice.toString()),// Token ID\ntokenId:BigNumber.from(asset.tokenId),// amount of tokens to sell/purchase (must be 1 for ERC721, 1+ for ERC1155)\namount:BigNumber.from(1),// strategy for trade execution (e.g., DutchAuction, StandardSaleForFixedPrice), see addresses in the SDK\nstrategy:addresses.STRATEGY_STANDARD_SALE,// currency address\ncurrency:addresses.WETH,// order nonce (must be unique unless new maker order is meant to override existing one e.g., lower ask price)\nnonce:BigNumber.from(looksRareNonce),// startTime timestamp in seconds\nstartTime:BigNumber.from(currentTime),// endTime timestamp in seconds\nendTime:BigNumber.from(asset.expirationTime),// minimum ratio to be received by the user (per 10000)\n// As of 11.10.22 LooksRare charges 1.5% + 0.5% if there's creator royalties set https://docs.looksrare.org/blog/looksrare-offers-zero-royalty-trading-shares-protocol-fees-with-creators-instead\nminPercentageToAsk:BigNumber.from(10000).sub(BigNumber.from(150+(asset.basisPoints?50:0))).toNumber(),// params (e.g., price, target account for private sale)\nparams:[]};_context2.prev=37;_context2.next=40;return signMakerOrder(signer,SupportedChainId.MAINNET,makerOrder,LOOKSRARE_MARKETPLACE_CONTRACT);case 40:signatureHash=_context2.sent;setStatus(ListingStatus.PENDING);payload={signature:signatureHash,tokenId:asset.tokenId,collection:asset.asset_contract.address,strategy:addresses.STRATEGY_STANDARD_SALE,currency:addresses.WETH,signer:signerAddress,isOrderAsk:true,nonce:looksRareNonce,amount:1,price:parseEther(listingPrice.toString()).toString(),startTime:currentTime,endTime:asset.expirationTime,minPercentageToAsk:10000-(150+(asset.basisPoints?50:0)),params:[]};_context2.next=45;return createLooksRareOrder(payload);case 45:_res=_context2.sent;if(_res)setStatus(ListingStatus.APPROVED);return _context2.abrupt(\"return\",_res);case 50:_context2.prev=50;_context2.t2=_context2[\"catch\"](37);if(_context2.t2.code===4001)setStatus(ListingStatus.REJECTED);else setStatus(ListingStatus.FAILED);return _context2.abrupt(\"return\",false);case 54:orderItem={price:parseEther(listingPrice.toString()),tokens:[{token:asset.asset_contract.address,tokenId:BigNumber.from(asset.tokenId)}]};_order=createSellOrder(signerAddress,asset.expirationTime,[orderItem]);_context2.prev=56;_context2.next=59;return getOrderId(asset.asset_contract.address,asset.tokenId);case 59:prevOrderId=_context2.sent;_context2.next=62;return signOrderData(provider,_order);case 62:_payload={order:encodeOrder(_order),isBundle:false,bundleName:'',bundleDesc:'',orderIds:prevOrderId?[prevOrderId]:[],changePrice:Boolean(prevOrderId),isCollection:false};setStatus(ListingStatus.PENDING);// call server api\n_context2.next=66;return newX2Y2Order(_payload);case 66:resp=_context2.sent;if(resp)setStatus(ListingStatus.APPROVED);return _context2.abrupt(\"return\",resp);case 71:_context2.prev=71;_context2.t3=_context2[\"catch\"](56);if(_context2.t3.code===4001)setStatus(ListingStatus.REJECTED);else setStatus(ListingStatus.FAILED);return _context2.abrupt(\"return\",false);case 75:return _context2.abrupt(\"return\",false);case 76:case\"end\":return _context2.stop();}}},_callee2,null,[[12,30],[37,50],[56,71]]);}));return _signListing.apply(this,arguments);}","map":{"version":3,"names":["BigNumber","Contract","parseEther","addressesByNetwork","signMakerOrder","SupportedChainId","Seaport","ItemType","OPENSEA_DEFAULT_CROSS_CHAIN_CONDUIT_KEY","OPENSEA_DEFAULT_ZONE","OPENSEA_KEY_TO_CONDUIT","ERC721","createLooksRareOrder","getOrderId","LOOKSRARE_MARKETPLACE_CONTRACT","newX2Y2Order","PostOpenSeaSellOrder","INVERSE_BASIS_POINTS","OPENSEA_DEFAULT_FEE","OPENSEA_FEE_ADDRESS","ListingStatus","createSellOrder","encodeOrder","signOrderData","LOOKS_RARE_CREATOR_BASIS_POINTS","ListingMarkets","name","fee","icon","createConsiderationItem","basisPoints","recipient","amount","getConsiderationItems","asset","price","signerAddress","openSeaBasisPoints","creatorFeeBasisPoints","sellerBasisPoints","openseaFee","mul","from","div","toString","creatorFee","sellerFee","asset_contract","payout_address","undefined","approveCollection","operator","collectionAddress","signer","setStatus","ERC721Contract","getAddress","PENDING","isApprovedForAll","approved","APPROVED","SIGNING","setApprovalForAll","approvalTransaction","wait","tx","status","FAILED","code","REJECTED","signListing","marketplace","provider","looksRareNonce","seaport","conduitKeyToConduit","overrides","defaultConduitKey","listingPrice","newListings","find","listing","expirationTime","address","tokenId","listingInWei","considerationItems","filter","item","createOrder","offer","itemType","token","identifier","consideration","endTime","zone","restrictedByZone","allowPartialFills","executeAllActions","order","res","addresses","MAINNET","currentTime","Math","round","Date","now","makerOrder","isOrderAsk","collection","strategy","STRATEGY_STANDARD_SALE","currency","WETH","nonce","startTime","minPercentageToAsk","sub","toNumber","params","signatureHash","payload","signature","orderItem","tokens","prevOrderId","isBundle","bundleName","bundleDesc","orderIds","changePrice","Boolean","isCollection","resp"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/utils/listNfts.ts"],"sourcesContent":["import { Signer } from '@ethersproject/abstract-signer'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { Contract } from '@ethersproject/contracts'\nimport type { JsonRpcSigner, Web3Provider } from '@ethersproject/providers'\nimport { parseEther } from '@ethersproject/units'\nimport { addressesByNetwork, MakerOrder, signMakerOrder, SupportedChainId } from '@looksrare/sdk'\nimport { Seaport } from '@opensea/seaport-js'\nimport { ItemType } from '@opensea/seaport-js/lib/constants'\nimport { ConsiderationInputItem } from '@opensea/seaport-js/lib/types'\nimport {\n  OPENSEA_DEFAULT_CROSS_CHAIN_CONDUIT_KEY,\n  OPENSEA_DEFAULT_ZONE,\n  OPENSEA_KEY_TO_CONDUIT,\n} from 'nft/queries/openSea'\n\nimport ERC721 from '../../abis/erc721.json'\nimport {\n  createLooksRareOrder,\n  getOrderId,\n  LOOKSRARE_MARKETPLACE_CONTRACT,\n  newX2Y2Order,\n  PostOpenSeaSellOrder,\n} from '../queries'\nimport { INVERSE_BASIS_POINTS, OPENSEA_DEFAULT_FEE, OPENSEA_FEE_ADDRESS } from '../queries/openSea'\nimport { ListingMarket, ListingStatus, WalletAsset } from '../types'\nimport { createSellOrder, encodeOrder, OfferItem, OrderPayload, signOrderData } from './x2y2'\n\nexport const LOOKS_RARE_CREATOR_BASIS_POINTS = 50\n\nexport const ListingMarkets: ListingMarket[] = [\n  {\n    name: 'X2Y2',\n    fee: 0.5,\n    icon: '/nft/svgs/marketplaces/x2y2.svg',\n  },\n  {\n    name: 'LooksRare',\n    fee: 1.5,\n    icon: '/nft/svgs/marketplaces/looksrare.svg',\n  },\n  {\n    name: 'OpenSea',\n    fee: 2.5,\n    icon: '/nft/svgs/marketplaces/opensea.svg',\n  },\n]\n\nconst createConsiderationItem = (basisPoints: string, recipient: string): ConsiderationInputItem => {\n  return {\n    amount: basisPoints,\n    recipient,\n  }\n}\n\nconst getConsiderationItems = (\n  asset: WalletAsset,\n  price: BigNumber,\n  signerAddress: string\n): {\n  sellerFee: ConsiderationInputItem\n  openseaFee: ConsiderationInputItem\n  creatorFee?: ConsiderationInputItem\n} => {\n  const openSeaBasisPoints = OPENSEA_DEFAULT_FEE * INVERSE_BASIS_POINTS\n  const creatorFeeBasisPoints = asset?.basisPoints ?? 0\n  const sellerBasisPoints = INVERSE_BASIS_POINTS - openSeaBasisPoints - creatorFeeBasisPoints\n\n  const openseaFee = price.mul(BigNumber.from(openSeaBasisPoints)).div(BigNumber.from(INVERSE_BASIS_POINTS)).toString()\n  const creatorFee = price\n    .mul(BigNumber.from(creatorFeeBasisPoints))\n    .div(BigNumber.from(INVERSE_BASIS_POINTS))\n    .toString()\n  const sellerFee = price.mul(BigNumber.from(sellerBasisPoints)).div(BigNumber.from(INVERSE_BASIS_POINTS)).toString()\n\n  return {\n    sellerFee: createConsiderationItem(sellerFee, signerAddress),\n    openseaFee: createConsiderationItem(openseaFee, OPENSEA_FEE_ADDRESS),\n    creatorFee:\n      creatorFeeBasisPoints > 0\n        ? createConsiderationItem(creatorFee, asset?.asset_contract?.payout_address ?? '')\n        : undefined,\n  }\n}\n\nexport async function approveCollection(\n  operator: string,\n  collectionAddress: string,\n  signer: Signer,\n  setStatus: (newStatus: ListingStatus) => void\n): Promise<void> {\n  // This will work for both 721s & 1155s because they both have the\n  // setApprovalForAll() method\n  const ERC721Contract = new Contract(collectionAddress, ERC721, signer)\n  const signerAddress = await signer.getAddress()\n  setStatus(ListingStatus.PENDING)\n  try {\n    const approved = await ERC721Contract.isApprovedForAll(signerAddress, operator)\n    if (approved) {\n      setStatus(ListingStatus.APPROVED)\n      return\n    }\n\n    setStatus(ListingStatus.SIGNING)\n    const approvalTransaction = await ERC721Contract.setApprovalForAll(operator, true)\n\n    setStatus(ListingStatus.PENDING)\n    const tx = await approvalTransaction.wait()\n\n    tx.status === 1 ? setStatus(ListingStatus.APPROVED) : setStatus(ListingStatus.FAILED)\n  } catch (error) {\n    if (error.code === 4001) setStatus(ListingStatus.REJECTED)\n    else setStatus(ListingStatus.FAILED)\n  }\n}\n\nexport async function signListing(\n  marketplace: ListingMarket,\n  asset: WalletAsset,\n  signer: JsonRpcSigner,\n  provider: Web3Provider,\n  looksRareNonce = 0,\n  setStatus: (newStatus: ListingStatus) => void\n): Promise<boolean> {\n  const seaport = new Seaport(provider, {\n    conduitKeyToConduit: OPENSEA_KEY_TO_CONDUIT,\n    overrides: {\n      defaultConduitKey: OPENSEA_DEFAULT_CROSS_CHAIN_CONDUIT_KEY,\n    },\n  })\n\n  const signerAddress = await signer.getAddress()\n  const listingPrice = asset.newListings?.find((listing) => listing.marketplace.name === marketplace.name)?.price\n  if (!listingPrice || !asset.expirationTime || !asset.asset_contract.address || !asset.tokenId) return false\n  switch (marketplace.name) {\n    case 'OpenSea':\n      try {\n        const listingInWei = parseEther(`${listingPrice}`)\n        const { sellerFee, openseaFee, creatorFee } = getConsiderationItems(asset, listingInWei, signerAddress)\n        const considerationItems = [sellerFee, openseaFee, creatorFee].filter(\n          (item): item is ConsiderationInputItem => item !== undefined\n        )\n\n        const { executeAllActions } = await seaport.createOrder(\n          {\n            offer: [\n              {\n                itemType: ItemType.ERC721,\n                token: asset.asset_contract.address,\n                identifier: asset.tokenId,\n                amount: '1',\n              },\n            ],\n            consideration: considerationItems,\n            endTime: asset.expirationTime.toString(),\n            zone: OPENSEA_DEFAULT_ZONE,\n            restrictedByZone: true,\n            allowPartialFills: true,\n          },\n          signerAddress\n        )\n\n        const order = await executeAllActions()\n        const res = await PostOpenSeaSellOrder(order)\n        if (res) setStatus(ListingStatus.APPROVED)\n        return res\n      } catch (error) {\n        if (error.code === 4001) setStatus(ListingStatus.REJECTED)\n        else setStatus(ListingStatus.FAILED)\n        return false\n      }\n    case 'LooksRare': {\n      const addresses = addressesByNetwork[SupportedChainId.MAINNET]\n      const currentTime = Math.round(Date.now() / 1000)\n      const makerOrder: MakerOrder = {\n        // true --> ask / false --> bid\n        isOrderAsk: true,\n        // signer address of the maker order\n        signer: signerAddress,\n        // collection address\n        collection: asset.asset_contract.address,\n        // Price in WEI\n        price: parseEther(listingPrice.toString()),\n        // Token ID\n        tokenId: BigNumber.from(asset.tokenId),\n        // amount of tokens to sell/purchase (must be 1 for ERC721, 1+ for ERC1155)\n        amount: BigNumber.from(1),\n        // strategy for trade execution (e.g., DutchAuction, StandardSaleForFixedPrice), see addresses in the SDK\n        strategy: addresses.STRATEGY_STANDARD_SALE,\n        // currency address\n        currency: addresses.WETH,\n        // order nonce (must be unique unless new maker order is meant to override existing one e.g., lower ask price)\n        nonce: BigNumber.from(looksRareNonce),\n        // startTime timestamp in seconds\n        startTime: BigNumber.from(currentTime),\n        // endTime timestamp in seconds\n        endTime: BigNumber.from(asset.expirationTime),\n        // minimum ratio to be received by the user (per 10000)\n        // As of 11.10.22 LooksRare charges 1.5% + 0.5% if there's creator royalties set https://docs.looksrare.org/blog/looksrare-offers-zero-royalty-trading-shares-protocol-fees-with-creators-instead\n        minPercentageToAsk: BigNumber.from(10000)\n          .sub(BigNumber.from(150 + (asset.basisPoints ? 50 : 0)))\n          .toNumber(),\n        // params (e.g., price, target account for private sale)\n        params: [],\n      }\n\n      try {\n        const signatureHash = await signMakerOrder(\n          signer,\n          SupportedChainId.MAINNET,\n          makerOrder,\n          LOOKSRARE_MARKETPLACE_CONTRACT\n        )\n        setStatus(ListingStatus.PENDING)\n        const payload = {\n          signature: signatureHash,\n          tokenId: asset.tokenId,\n          collection: asset.asset_contract.address,\n          strategy: addresses.STRATEGY_STANDARD_SALE,\n          currency: addresses.WETH,\n          signer: signerAddress,\n          isOrderAsk: true,\n          nonce: looksRareNonce,\n          amount: 1,\n          price: parseEther(listingPrice.toString()).toString(),\n          startTime: currentTime,\n          endTime: asset.expirationTime,\n          minPercentageToAsk: 10000 - (150 + (asset.basisPoints ? 50 : 0)),\n          params: [],\n        }\n        const res = await createLooksRareOrder(payload)\n        if (res) setStatus(ListingStatus.APPROVED)\n        return res\n      } catch (error) {\n        if (error.code === 4001) setStatus(ListingStatus.REJECTED)\n        else setStatus(ListingStatus.FAILED)\n        return false\n      }\n    }\n    case 'X2Y2': {\n      const orderItem: OfferItem = {\n        price: parseEther(listingPrice.toString()),\n        tokens: [\n          {\n            token: asset.asset_contract.address,\n            tokenId: BigNumber.from(asset.tokenId),\n          },\n        ],\n      }\n      const order = createSellOrder(signerAddress, asset.expirationTime, [orderItem])\n      try {\n        const prevOrderId = await getOrderId(asset.asset_contract.address, asset.tokenId)\n        await signOrderData(provider, order)\n        const payload: OrderPayload = {\n          order: encodeOrder(order),\n          isBundle: false,\n          bundleName: '',\n          bundleDesc: '',\n          orderIds: prevOrderId ? [prevOrderId] : [],\n          changePrice: Boolean(prevOrderId),\n          isCollection: false,\n        }\n        setStatus(ListingStatus.PENDING)\n        // call server api\n        const resp = await newX2Y2Order(payload)\n        if (resp) setStatus(ListingStatus.APPROVED)\n        return resp\n      } catch (error) {\n        if (error.code === 4001) setStatus(ListingStatus.REJECTED)\n        else setStatus(ListingStatus.FAILED)\n        return false\n      }\n    }\n    default:\n      return false\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}