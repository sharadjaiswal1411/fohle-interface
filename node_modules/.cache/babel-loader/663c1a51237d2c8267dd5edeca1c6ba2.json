{"ast":null,"code":"import{sendEvent}from'components/analytics';import{useEffect}from'react';import{ApplicationModal,setOpenModal}from'state/application/reducer';import{useAppDispatch}from'state/hooks';export default function useAccountRiskCheck(account){var dispatch=useAppDispatch();useEffect(function(){if(account){var riskCheckLocalStorageKey=\"risk-check-\".concat(account);var now=Date.now();try{var storedTime=localStorage.getItem(riskCheckLocalStorageKey);var checkExpirationTime=storedTime?parseInt(storedTime):now-1;if(checkExpirationTime<Date.now()){var headers=new Headers({'Content-Type':'application/json'});fetch('https://screening-worker.uniswap.workers.dev',{method:'POST',headers:headers,body:JSON.stringify({address:account})}).then(function(res){return res.json();}).then(function(data){if(data.block){dispatch(setOpenModal(ApplicationModal.BLOCKED_ACCOUNT));sendEvent({category:'Address Screening',action:'blocked',label:account});}}).catch(function(){return dispatch(setOpenModal(null));});}}finally{// leaving this code in place w/ a negligible cache time in case we want to increase cache time later\nlocalStorage.setItem(riskCheckLocalStorageKey,(now+10000).toString());}}},[account,dispatch]);}","map":{"version":3,"names":["sendEvent","useEffect","ApplicationModal","setOpenModal","useAppDispatch","useAccountRiskCheck","account","dispatch","riskCheckLocalStorageKey","now","Date","storedTime","localStorage","getItem","checkExpirationTime","parseInt","headers","Headers","fetch","method","body","JSON","stringify","address","then","res","json","data","block","BLOCKED_ACCOUNT","category","action","label","catch","setItem","toString"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/hooks/useAccountRiskCheck.ts"],"sourcesContent":["import { sendEvent } from 'components/analytics'\nimport ms from 'ms.macro'\nimport { useEffect } from 'react'\nimport { ApplicationModal, setOpenModal } from 'state/application/reducer'\nimport { useAppDispatch } from 'state/hooks'\n\nexport default function useAccountRiskCheck(account: string | null | undefined) {\n  const dispatch = useAppDispatch()\n\n  useEffect(() => {\n    if (account) {\n      const riskCheckLocalStorageKey = `risk-check-${account}`\n      const now = Date.now()\n      try {\n        const storedTime = localStorage.getItem(riskCheckLocalStorageKey)\n        const checkExpirationTime = storedTime ? parseInt(storedTime) : now - 1\n        if (checkExpirationTime < Date.now()) {\n          const headers = new Headers({ 'Content-Type': 'application/json' })\n          fetch('https://screening-worker.uniswap.workers.dev', {\n            method: 'POST',\n            headers,\n            body: JSON.stringify({ address: account }),\n          })\n            .then((res) => res.json())\n            .then((data) => {\n              if (data.block) {\n                dispatch(setOpenModal(ApplicationModal.BLOCKED_ACCOUNT))\n                sendEvent({\n                  category: 'Address Screening',\n                  action: 'blocked',\n                  label: account,\n                })\n              }\n            })\n            .catch(() => dispatch(setOpenModal(null)))\n        }\n      } finally {\n        // leaving this code in place w/ a negligible cache time in case we want to increase cache time later\n        localStorage.setItem(riskCheckLocalStorageKey, (now + ms`10 seconds`).toString())\n      }\n    }\n  }, [account, dispatch])\n}\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,sBAAsB,CAEhD,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,gBAAgB,CAAEC,YAAY,KAAQ,2BAA2B,CAC1E,OAASC,cAAc,KAAQ,aAAa,CAE5C,cAAe,SAASC,oBAAmB,CAACC,OAAkC,CAAE,CAC9E,GAAMC,SAAQ,CAAGH,cAAc,EAAE,CAEjCH,SAAS,CAAC,UAAM,CACd,GAAIK,OAAO,CAAE,CACX,GAAME,yBAAwB,sBAAiBF,OAAO,CAAE,CACxD,GAAMG,IAAG,CAAGC,IAAI,CAACD,GAAG,EAAE,CACtB,GAAI,CACF,GAAME,WAAU,CAAGC,YAAY,CAACC,OAAO,CAACL,wBAAwB,CAAC,CACjE,GAAMM,oBAAmB,CAAGH,UAAU,CAAGI,QAAQ,CAACJ,UAAU,CAAC,CAAGF,GAAG,CAAG,CAAC,CACvE,GAAIK,mBAAmB,CAAGJ,IAAI,CAACD,GAAG,EAAE,CAAE,CACpC,GAAMO,QAAO,CAAG,GAAIC,QAAO,CAAC,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAAC,CACnEC,KAAK,CAAC,8CAA8C,CAAE,CACpDC,MAAM,CAAE,MAAM,CACdH,OAAO,CAAPA,OAAO,CACPI,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,OAAO,CAAEjB,OAAQ,CAAC,CAC3C,CAAC,CAAC,CACCkB,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,CAAK,CACd,GAAIA,IAAI,CAACC,KAAK,CAAE,CACdrB,QAAQ,CAACJ,YAAY,CAACD,gBAAgB,CAAC2B,eAAe,CAAC,CAAC,CACxD7B,SAAS,CAAC,CACR8B,QAAQ,CAAE,mBAAmB,CAC7BC,MAAM,CAAE,SAAS,CACjBC,KAAK,CAAE1B,OACT,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACD2B,KAAK,CAAC,iBAAM1B,SAAQ,CAACJ,YAAY,CAAC,IAAI,CAAC,CAAC,GAAC,CAC9C,CACF,CAAC,OAAS,CACR;AACAS,YAAY,CAACsB,OAAO,CAAC1B,wBAAwB,CAAE,CAACC,GAAG,MAAiB,EAAE0B,QAAQ,EAAE,CAAC,CACnF,CACF,CACF,CAAC,CAAE,CAAC7B,OAAO,CAAEC,QAAQ,CAAC,CAAC,CACzB"},"metadata":{},"sourceType":"module"}