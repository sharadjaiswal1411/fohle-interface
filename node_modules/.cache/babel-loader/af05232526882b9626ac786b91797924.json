{"ast":null,"code":"var _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/LiquidityChartRangeInput/Chart.tsx\",\n  _s = $RefreshSig$();\nimport { max, scaleLinear } from 'd3';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { Bound } from 'state/mint/v3/actions';\nimport { Area } from './Area';\nimport { AxisBottom } from './AxisBottom';\nimport { Brush } from './Brush';\nimport { Line } from './Line';\nimport Zoom, { ZoomOverlay } from './Zoom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst xAccessor = d => d.price0;\nconst yAccessor = d => d.activeLiquidity;\nexport function Chart(_ref) {\n  _s();\n  let {\n    id = 'liquidityChartRangeInput',\n    data: {\n      series,\n      current\n    },\n    ticksAtLimit,\n    styles,\n    dimensions: {\n      width,\n      height\n    },\n    margins,\n    interactive = true,\n    brushDomain,\n    brushLabels,\n    onBrushDomainChange,\n    zoomLevels\n  } = _ref;\n  const zoomRef = useRef(null);\n  const [zoom, setZoom] = useState(null);\n  const [innerHeight, innerWidth] = useMemo(() => [height - margins.top - margins.bottom, width - margins.left - margins.right], [width, height, margins]);\n  const {\n    xScale,\n    yScale\n  } = useMemo(() => {\n    const scales = {\n      xScale: scaleLinear().domain([current * zoomLevels.initialMin, current * zoomLevels.initialMax]).range([0, innerWidth]),\n      yScale: scaleLinear().domain([0, max(series, yAccessor)]).range([innerHeight, 0])\n    };\n    if (zoom) {\n      const newXscale = zoom.rescaleX(scales.xScale);\n      scales.xScale.domain(newXscale.domain());\n    }\n    return scales;\n  }, [current, zoomLevels.initialMin, zoomLevels.initialMax, innerWidth, series, innerHeight, zoom]);\n  useEffect(() => {\n    // reset zoom as necessary\n    setZoom(null);\n  }, [zoomLevels]);\n  useEffect(() => {\n    if (!brushDomain) {\n      onBrushDomainChange(xScale.domain(), undefined);\n    }\n  }, [brushDomain, onBrushDomainChange, xScale]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Zoom, {\n      svg: zoomRef.current,\n      xScale: xScale,\n      setZoom: setZoom,\n      width: innerWidth,\n      height:\n      // allow zooming inside the x-axis\n      height,\n      resetBrush: () => {\n        onBrushDomainChange([current * zoomLevels.initialMin, current * zoomLevels.initialMax], 'reset');\n      },\n      showResetButton: Boolean(ticksAtLimit[Bound.LOWER] || ticksAtLimit[Bound.UPPER]),\n      zoomLevels: zoomLevels\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"100%\",\n      height: \"100%\",\n      viewBox: `0 0 ${width} ${height}`,\n      style: {\n        overflow: 'visible'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n        children: [/*#__PURE__*/_jsxDEV(\"clipPath\", {\n          id: `${id}-chart-clip`,\n          children: /*#__PURE__*/_jsxDEV(\"rect\", {\n            x: \"0\",\n            y: \"0\",\n            width: innerWidth,\n            height: height\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), brushDomain &&\n        /*#__PURE__*/\n        // mask to highlight selected area\n        _jsxDEV(\"mask\", {\n          id: `${id}-chart-area-mask`,\n          children: /*#__PURE__*/_jsxDEV(\"rect\", {\n            fill: \"white\",\n            x: xScale(brushDomain[0]),\n            y: \"0\",\n            width: xScale(brushDomain[1]) - xScale(brushDomain[0]),\n            height: innerHeight\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        transform: `translate(${margins.left},${margins.top})`,\n        children: [/*#__PURE__*/_jsxDEV(\"g\", {\n          clipPath: `url(#${id}-chart-clip)`,\n          children: [/*#__PURE__*/_jsxDEV(Area, {\n            series: series,\n            xScale: xScale,\n            yScale: yScale,\n            xValue: xAccessor,\n            yValue: yAccessor\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), brushDomain &&\n          /*#__PURE__*/\n          // duplicate area chart with mask for selected area\n          _jsxDEV(\"g\", {\n            mask: `url(#${id}-chart-area-mask)`,\n            children: /*#__PURE__*/_jsxDEV(Area, {\n              series: series,\n              xScale: xScale,\n              yScale: yScale,\n              xValue: xAccessor,\n              yValue: yAccessor,\n              fill: styles.area.selection\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Line, {\n            value: current,\n            xScale: xScale,\n            innerHeight: innerHeight\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AxisBottom, {\n            xScale: xScale,\n            innerHeight: innerHeight\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ZoomOverlay, {\n          width: innerWidth,\n          height: height,\n          ref: zoomRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Brush, {\n          id: id,\n          xScale: xScale,\n          interactive: interactive,\n          brushLabelValue: brushLabels,\n          brushExtent: brushDomain !== null && brushDomain !== void 0 ? brushDomain : xScale.domain(),\n          innerWidth: innerWidth,\n          innerHeight: innerHeight,\n          setBrushExtent: onBrushDomainChange,\n          westHandleColor: styles.brush.handle.west,\n          eastHandleColor: styles.brush.handle.east\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Chart, \"14d4tN53iqflNqMyXzjtmEKuQCw=\");\n_c = Chart;\nvar _c;\n$RefreshReg$(_c, \"Chart\");","map":{"version":3,"names":["max","scaleLinear","useEffect","useMemo","useRef","useState","Bound","Area","AxisBottom","Brush","Line","Zoom","ZoomOverlay","xAccessor","d","price0","yAccessor","activeLiquidity","Chart","id","data","series","current","ticksAtLimit","styles","dimensions","width","height","margins","interactive","brushDomain","brushLabels","onBrushDomainChange","zoomLevels","zoomRef","zoom","setZoom","innerHeight","innerWidth","top","bottom","left","right","xScale","yScale","scales","domain","initialMin","initialMax","range","newXscale","rescaleX","undefined","Boolean","LOWER","UPPER","overflow","area","selection","brush","handle","west","east"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/LiquidityChartRangeInput/Chart.tsx"],"sourcesContent":["import { max, scaleLinear, ZoomTransform } from 'd3'\nimport { useEffect, useMemo, useRef, useState } from 'react'\nimport { Bound } from 'state/mint/v3/actions'\n\nimport { Area } from './Area'\nimport { AxisBottom } from './AxisBottom'\nimport { Brush } from './Brush'\nimport { Line } from './Line'\nimport { ChartEntry, LiquidityChartRangeInputProps } from './types'\nimport Zoom, { ZoomOverlay } from './Zoom'\n\nconst xAccessor = (d: ChartEntry) => d.price0\nconst yAccessor = (d: ChartEntry) => d.activeLiquidity\n\nexport function Chart({\n  id = 'liquidityChartRangeInput',\n  data: { series, current },\n  ticksAtLimit,\n  styles,\n  dimensions: { width, height },\n  margins,\n  interactive = true,\n  brushDomain,\n  brushLabels,\n  onBrushDomainChange,\n  zoomLevels,\n}: LiquidityChartRangeInputProps) {\n  const zoomRef = useRef<SVGRectElement | null>(null)\n\n  const [zoom, setZoom] = useState<ZoomTransform | null>(null)\n\n  const [innerHeight, innerWidth] = useMemo(\n    () => [height - margins.top - margins.bottom, width - margins.left - margins.right],\n    [width, height, margins]\n  )\n\n  const { xScale, yScale } = useMemo(() => {\n    const scales = {\n      xScale: scaleLinear()\n        .domain([current * zoomLevels.initialMin, current * zoomLevels.initialMax] as number[])\n        .range([0, innerWidth]),\n      yScale: scaleLinear()\n        .domain([0, max(series, yAccessor)] as number[])\n        .range([innerHeight, 0]),\n    }\n\n    if (zoom) {\n      const newXscale = zoom.rescaleX(scales.xScale)\n      scales.xScale.domain(newXscale.domain())\n    }\n\n    return scales\n  }, [current, zoomLevels.initialMin, zoomLevels.initialMax, innerWidth, series, innerHeight, zoom])\n\n  useEffect(() => {\n    // reset zoom as necessary\n    setZoom(null)\n  }, [zoomLevels])\n\n  useEffect(() => {\n    if (!brushDomain) {\n      onBrushDomainChange(xScale.domain() as [number, number], undefined)\n    }\n  }, [brushDomain, onBrushDomainChange, xScale])\n\n  return (\n    <>\n      <Zoom\n        svg={zoomRef.current}\n        xScale={xScale}\n        setZoom={setZoom}\n        width={innerWidth}\n        height={\n          // allow zooming inside the x-axis\n          height\n        }\n        resetBrush={() => {\n          onBrushDomainChange(\n            [current * zoomLevels.initialMin, current * zoomLevels.initialMax] as [number, number],\n            'reset'\n          )\n        }}\n        showResetButton={Boolean(ticksAtLimit[Bound.LOWER] || ticksAtLimit[Bound.UPPER])}\n        zoomLevels={zoomLevels}\n      />\n      <svg width=\"100%\" height=\"100%\" viewBox={`0 0 ${width} ${height}`} style={{ overflow: 'visible' }}>\n        <defs>\n          <clipPath id={`${id}-chart-clip`}>\n            <rect x=\"0\" y=\"0\" width={innerWidth} height={height} />\n          </clipPath>\n\n          {brushDomain && (\n            // mask to highlight selected area\n            <mask id={`${id}-chart-area-mask`}>\n              <rect\n                fill=\"white\"\n                x={xScale(brushDomain[0])}\n                y=\"0\"\n                width={xScale(brushDomain[1]) - xScale(brushDomain[0])}\n                height={innerHeight}\n              />\n            </mask>\n          )}\n        </defs>\n\n        <g transform={`translate(${margins.left},${margins.top})`}>\n          <g clipPath={`url(#${id}-chart-clip)`}>\n            <Area series={series} xScale={xScale} yScale={yScale} xValue={xAccessor} yValue={yAccessor} />\n\n            {brushDomain && (\n              // duplicate area chart with mask for selected area\n              <g mask={`url(#${id}-chart-area-mask)`}>\n                <Area\n                  series={series}\n                  xScale={xScale}\n                  yScale={yScale}\n                  xValue={xAccessor}\n                  yValue={yAccessor}\n                  fill={styles.area.selection}\n                />\n              </g>\n            )}\n\n            <Line value={current} xScale={xScale} innerHeight={innerHeight} />\n\n            <AxisBottom xScale={xScale} innerHeight={innerHeight} />\n          </g>\n\n          <ZoomOverlay width={innerWidth} height={height} ref={zoomRef} />\n\n          <Brush\n            id={id}\n            xScale={xScale}\n            interactive={interactive}\n            brushLabelValue={brushLabels}\n            brushExtent={brushDomain ?? (xScale.domain() as [number, number])}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n            setBrushExtent={onBrushDomainChange}\n            westHandleColor={styles.brush.handle.west}\n            eastHandleColor={styles.brush.handle.east}\n          />\n        </g>\n      </svg>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}