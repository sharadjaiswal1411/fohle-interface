{"ast":null,"code":"import _defineProperty from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Trans}from\"@lingui/react\";import{CurrencyAmount,Percent}from'@uniswap/sdk-core';import{useWeb3React}from'@web3-react/core';import JSBI from'jsbi';import tryParseCurrencyAmount from'lib/utils/tryParseCurrencyAmount';import{useCallback}from'react';import{useAppDispatch,useAppSelector}from'state/hooks';import{useTotalSupply}from'../../hooks/useTotalSupply';import{useV2Pair}from'../../hooks/useV2Pairs';import{useTokenBalances}from'../connection/hooks';import{Field,typeInput}from'./actions';import{jsx as _jsx}from\"react/jsx-runtime\";export function useBurnState(){return useAppSelector(function(state){return state.burn;});}export function useDerivedBurnInfo(currencyA,currencyB){var _pair$liquidityToken$,_pair$liquidityToken,_tokens,_liquidityValues,_parsedAmounts;var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var _useBurnState=useBurnState(),independentField=_useBurnState.independentField,typedValue=_useBurnState.typedValue;// pair + totalsupply\nvar _useV2Pair=useV2Pair(currencyA,currencyB),_useV2Pair2=_slicedToArray(_useV2Pair,2),pair=_useV2Pair2[1];// balances\nvar relevantTokenBalances=useTokenBalances(account!==null&&account!==void 0?account:undefined,[pair===null||pair===void 0?void 0:pair.liquidityToken]);var userLiquidity=relevantTokenBalances===null||relevantTokenBalances===void 0?void 0:relevantTokenBalances[(_pair$liquidityToken$=pair===null||pair===void 0?void 0:(_pair$liquidityToken=pair.liquidityToken)===null||_pair$liquidityToken===void 0?void 0:_pair$liquidityToken.address)!==null&&_pair$liquidityToken$!==void 0?_pair$liquidityToken$:''];var tokenA=currencyA===null||currencyA===void 0?void 0:currencyA.wrapped,tokenB=currencyB===null||currencyB===void 0?void 0:currencyB.wrapped;var tokens=(_tokens={},_defineProperty(_tokens,Field.CURRENCY_A,tokenA),_defineProperty(_tokens,Field.CURRENCY_B,tokenB),_defineProperty(_tokens,Field.LIQUIDITY,pair===null||pair===void 0?void 0:pair.liquidityToken),_tokens);// liquidity values\nvar totalSupply=useTotalSupply(pair===null||pair===void 0?void 0:pair.liquidityToken);var liquidityValueA=pair&&totalSupply&&userLiquidity&&tokenA&&// this condition is a short-circuit in the case where useTokenBalance updates sooner than useTotalSupply\nJSBI.greaterThanOrEqual(totalSupply.quotient,userLiquidity.quotient)?CurrencyAmount.fromRawAmount(tokenA,pair.getLiquidityValue(tokenA,totalSupply,userLiquidity,false).quotient):undefined;var liquidityValueB=pair&&totalSupply&&userLiquidity&&tokenB&&// this condition is a short-circuit in the case where useTokenBalance updates sooner than useTotalSupply\nJSBI.greaterThanOrEqual(totalSupply.quotient,userLiquidity.quotient)?CurrencyAmount.fromRawAmount(tokenB,pair.getLiquidityValue(tokenB,totalSupply,userLiquidity,false).quotient):undefined;var liquidityValues=(_liquidityValues={},_defineProperty(_liquidityValues,Field.CURRENCY_A,liquidityValueA),_defineProperty(_liquidityValues,Field.CURRENCY_B,liquidityValueB),_liquidityValues);var percentToRemove=new Percent('0','100');// user specified a %\nif(independentField===Field.LIQUIDITY_PERCENT){percentToRemove=new Percent(typedValue,'100');}// user specified a specific amount of liquidity tokens\nelse if(independentField===Field.LIQUIDITY){if(pair===null||pair===void 0?void 0:pair.liquidityToken){var independentAmount=tryParseCurrencyAmount(typedValue,pair.liquidityToken);if(independentAmount&&userLiquidity&&!independentAmount.greaterThan(userLiquidity)){percentToRemove=new Percent(independentAmount.quotient,userLiquidity.quotient);}}}// user specified a specific amount of token a or b\nelse{if(tokens[independentField]){var _independentAmount=tryParseCurrencyAmount(typedValue,tokens[independentField]);var liquidityValue=liquidityValues[independentField];if(_independentAmount&&liquidityValue&&!_independentAmount.greaterThan(liquidityValue)){percentToRemove=new Percent(_independentAmount.quotient,liquidityValue.quotient);}}}var parsedAmounts=(_parsedAmounts={},_defineProperty(_parsedAmounts,Field.LIQUIDITY_PERCENT,percentToRemove),_defineProperty(_parsedAmounts,Field.LIQUIDITY,userLiquidity&&percentToRemove&&percentToRemove.greaterThan('0')?CurrencyAmount.fromRawAmount(userLiquidity.currency,percentToRemove.multiply(userLiquidity.quotient).quotient):undefined),_defineProperty(_parsedAmounts,Field.CURRENCY_A,tokenA&&percentToRemove&&percentToRemove.greaterThan('0')&&liquidityValueA?CurrencyAmount.fromRawAmount(tokenA,percentToRemove.multiply(liquidityValueA.quotient).quotient):undefined),_defineProperty(_parsedAmounts,Field.CURRENCY_B,tokenB&&percentToRemove&&percentToRemove.greaterThan('0')&&liquidityValueB?CurrencyAmount.fromRawAmount(tokenB,percentToRemove.multiply(liquidityValueB.quotient).quotient):undefined),_parsedAmounts);var error;if(!account){error=/*#__PURE__*/_jsx(Trans,{id:\"Connect Wallet\"});}if(!parsedAmounts[Field.LIQUIDITY]||!parsedAmounts[Field.CURRENCY_A]||!parsedAmounts[Field.CURRENCY_B]){var _error;error=(_error=error)!==null&&_error!==void 0?_error:/*#__PURE__*/_jsx(Trans,{id:\"Enter an amount\"});}return{pair:pair,parsedAmounts:parsedAmounts,error:error};}export function useBurnActionHandlers(){var dispatch=useAppDispatch();var onUserInput=useCallback(function(field,typedValue){dispatch(typeInput({field:field,typedValue:typedValue}));},[dispatch]);return{onUserInput:onUserInput};}","map":{"version":3,"names":["CurrencyAmount","Percent","useWeb3React","JSBI","tryParseCurrencyAmount","useCallback","useAppDispatch","useAppSelector","useTotalSupply","useV2Pair","useTokenBalances","Field","typeInput","useBurnState","state","burn","useDerivedBurnInfo","currencyA","currencyB","account","independentField","typedValue","pair","relevantTokenBalances","undefined","liquidityToken","userLiquidity","address","tokenA","wrapped","tokenB","tokens","CURRENCY_A","CURRENCY_B","LIQUIDITY","totalSupply","liquidityValueA","greaterThanOrEqual","quotient","fromRawAmount","getLiquidityValue","liquidityValueB","liquidityValues","percentToRemove","LIQUIDITY_PERCENT","independentAmount","greaterThan","liquidityValue","parsedAmounts","currency","multiply","error","useBurnActionHandlers","dispatch","onUserInput","field"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/state/burn/hooks.tsx"],"sourcesContent":["import { Trans } from '@lingui/macro'\nimport { Currency, CurrencyAmount, Percent, Token } from '@uniswap/sdk-core'\nimport { Pair } from '@uniswap/v2-sdk'\nimport { useWeb3React } from '@web3-react/core'\nimport JSBI from 'jsbi'\nimport tryParseCurrencyAmount from 'lib/utils/tryParseCurrencyAmount'\nimport { ReactNode, useCallback } from 'react'\nimport { useAppDispatch, useAppSelector } from 'state/hooks'\n\nimport { useTotalSupply } from '../../hooks/useTotalSupply'\nimport { useV2Pair } from '../../hooks/useV2Pairs'\nimport { useTokenBalances } from '../connection/hooks'\nimport { AppState } from '../index'\nimport { Field, typeInput } from './actions'\n\nexport function useBurnState(): AppState['burn'] {\n  return useAppSelector((state) => state.burn)\n}\n\nexport function useDerivedBurnInfo(\n  currencyA: Currency | undefined,\n  currencyB: Currency | undefined\n): {\n  pair?: Pair | null\n  parsedAmounts: {\n    [Field.LIQUIDITY_PERCENT]: Percent\n    [Field.LIQUIDITY]?: CurrencyAmount<Token>\n    [Field.CURRENCY_A]?: CurrencyAmount<Currency>\n    [Field.CURRENCY_B]?: CurrencyAmount<Currency>\n  }\n  error?: ReactNode\n} {\n  const { account } = useWeb3React()\n\n  const { independentField, typedValue } = useBurnState()\n\n  // pair + totalsupply\n  const [, pair] = useV2Pair(currencyA, currencyB)\n\n  // balances\n  const relevantTokenBalances = useTokenBalances(account ?? undefined, [pair?.liquidityToken])\n  const userLiquidity: undefined | CurrencyAmount<Token> = relevantTokenBalances?.[pair?.liquidityToken?.address ?? '']\n\n  const [tokenA, tokenB] = [currencyA?.wrapped, currencyB?.wrapped]\n  const tokens = {\n    [Field.CURRENCY_A]: tokenA,\n    [Field.CURRENCY_B]: tokenB,\n    [Field.LIQUIDITY]: pair?.liquidityToken,\n  }\n\n  // liquidity values\n  const totalSupply = useTotalSupply(pair?.liquidityToken)\n  const liquidityValueA =\n    pair &&\n    totalSupply &&\n    userLiquidity &&\n    tokenA &&\n    // this condition is a short-circuit in the case where useTokenBalance updates sooner than useTotalSupply\n    JSBI.greaterThanOrEqual(totalSupply.quotient, userLiquidity.quotient)\n      ? CurrencyAmount.fromRawAmount(tokenA, pair.getLiquidityValue(tokenA, totalSupply, userLiquidity, false).quotient)\n      : undefined\n  const liquidityValueB =\n    pair &&\n    totalSupply &&\n    userLiquidity &&\n    tokenB &&\n    // this condition is a short-circuit in the case where useTokenBalance updates sooner than useTotalSupply\n    JSBI.greaterThanOrEqual(totalSupply.quotient, userLiquidity.quotient)\n      ? CurrencyAmount.fromRawAmount(tokenB, pair.getLiquidityValue(tokenB, totalSupply, userLiquidity, false).quotient)\n      : undefined\n  const liquidityValues: { [Field.CURRENCY_A]?: CurrencyAmount<Token>; [Field.CURRENCY_B]?: CurrencyAmount<Token> } = {\n    [Field.CURRENCY_A]: liquidityValueA,\n    [Field.CURRENCY_B]: liquidityValueB,\n  }\n\n  let percentToRemove: Percent = new Percent('0', '100')\n  // user specified a %\n  if (independentField === Field.LIQUIDITY_PERCENT) {\n    percentToRemove = new Percent(typedValue, '100')\n  }\n  // user specified a specific amount of liquidity tokens\n  else if (independentField === Field.LIQUIDITY) {\n    if (pair?.liquidityToken) {\n      const independentAmount = tryParseCurrencyAmount(typedValue, pair.liquidityToken)\n      if (independentAmount && userLiquidity && !independentAmount.greaterThan(userLiquidity)) {\n        percentToRemove = new Percent(independentAmount.quotient, userLiquidity.quotient)\n      }\n    }\n  }\n  // user specified a specific amount of token a or b\n  else {\n    if (tokens[independentField]) {\n      const independentAmount = tryParseCurrencyAmount(typedValue, tokens[independentField])\n      const liquidityValue = liquidityValues[independentField]\n      if (independentAmount && liquidityValue && !independentAmount.greaterThan(liquidityValue)) {\n        percentToRemove = new Percent(independentAmount.quotient, liquidityValue.quotient)\n      }\n    }\n  }\n\n  const parsedAmounts: {\n    [Field.LIQUIDITY_PERCENT]: Percent\n    [Field.LIQUIDITY]?: CurrencyAmount<Token>\n    [Field.CURRENCY_A]?: CurrencyAmount<Currency>\n    [Field.CURRENCY_B]?: CurrencyAmount<Currency>\n  } = {\n    [Field.LIQUIDITY_PERCENT]: percentToRemove,\n    [Field.LIQUIDITY]:\n      userLiquidity && percentToRemove && percentToRemove.greaterThan('0')\n        ? CurrencyAmount.fromRawAmount(\n            userLiquidity.currency,\n            percentToRemove.multiply(userLiquidity.quotient).quotient\n          )\n        : undefined,\n    [Field.CURRENCY_A]:\n      tokenA && percentToRemove && percentToRemove.greaterThan('0') && liquidityValueA\n        ? CurrencyAmount.fromRawAmount(tokenA, percentToRemove.multiply(liquidityValueA.quotient).quotient)\n        : undefined,\n    [Field.CURRENCY_B]:\n      tokenB && percentToRemove && percentToRemove.greaterThan('0') && liquidityValueB\n        ? CurrencyAmount.fromRawAmount(tokenB, percentToRemove.multiply(liquidityValueB.quotient).quotient)\n        : undefined,\n  }\n\n  let error: ReactNode | undefined\n  if (!account) {\n    error = <Trans>Connect Wallet</Trans>\n  }\n\n  if (!parsedAmounts[Field.LIQUIDITY] || !parsedAmounts[Field.CURRENCY_A] || !parsedAmounts[Field.CURRENCY_B]) {\n    error = error ?? <Trans>Enter an amount</Trans>\n  }\n\n  return { pair, parsedAmounts, error }\n}\n\nexport function useBurnActionHandlers(): {\n  onUserInput: (field: Field, typedValue: string) => void\n} {\n  const dispatch = useAppDispatch()\n\n  const onUserInput = useCallback(\n    (field: Field, typedValue: string) => {\n      dispatch(typeInput({ field, typedValue }))\n    },\n    [dispatch]\n  )\n\n  return {\n    onUserInput,\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}