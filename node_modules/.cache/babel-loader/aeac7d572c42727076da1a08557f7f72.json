{"ast":null,"code":"import { Protocol } from '@uniswap/router-sdk';\nimport { Percent } from '@uniswap/sdk-core';\nimport { Pair } from '@uniswap/v2-sdk';\nimport { Pool } from '@uniswap/v3-sdk';\nimport _ from 'lodash';\nimport { CurrencyAmount } from '.';\nexport const routeToString = route => {\n  const routeStr = [];\n  const tokens = route.protocol === Protocol.V3 ? route.tokenPath :\n  // MixedRoute and V2Route have path\n  route.path;\n  const tokenPath = _.map(tokens, token => `${token.symbol}`);\n  const pools = route.protocol === Protocol.V3 || route.protocol === Protocol.MIXED ? route.pools : route.pairs;\n  const poolFeePath = _.map(pools, pool => {\n    return `${pool instanceof Pool ? ` -- ${pool.fee / 10000}% [${Pool.getAddress(pool.token0, pool.token1, pool.fee)}]` : ` -- [${Pair.getAddress(pool.token0, pool.token1)}]`} --> `;\n  });\n  for (let i = 0; i < tokenPath.length; i++) {\n    routeStr.push(tokenPath[i]);\n    if (i < poolFeePath.length) {\n      routeStr.push(poolFeePath[i]);\n    }\n  }\n  return routeStr.join('');\n};\nexport const routeAmountsToString = routeAmounts => {\n  const total = _.reduce(routeAmounts, (total, cur) => {\n    return total.add(cur.amount);\n  }, CurrencyAmount.fromRawAmount(routeAmounts[0].amount.currency, 0));\n  const routeStrings = _.map(routeAmounts, _ref => {\n    let {\n      protocol,\n      route,\n      amount\n    } = _ref;\n    const portion = amount.divide(total);\n    const percent = new Percent(portion.numerator, portion.denominator);\n    /// @dev special case for MIXED routes we want to show user friendly V2+V3 instead\n    return `[${protocol == Protocol.MIXED ? 'V2 + V3' : protocol}] ${percent.toFixed(2)}% = ${routeToString(route)}`;\n  });\n  return _.join(routeStrings, ', ');\n};\nexport const routeAmountToString = routeAmount => {\n  const {\n    route,\n    amount\n  } = routeAmount;\n  return `${amount.toExact()} = ${routeToString(route)}`;\n};\nexport const poolToString = p => {\n  return `${p.token0.symbol}/${p.token1.symbol}${p instanceof Pool ? `/${p.fee / 10000}%` : ``}`;\n};","map":{"version":3,"sources":["../../../src/util/routes.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Protocol } from '@uniswap/router-sdk';\nimport { Percent } from '@uniswap/sdk-core';\nimport { Pair } from '@uniswap/v2-sdk';\nimport { Pool } from '@uniswap/v3-sdk';\nimport _ from 'lodash';\nimport { CurrencyAmount } from '.';\nexport const routeToString = (route) => {\n    const routeStr = [];\n    const tokens = route.protocol === Protocol.V3\n        ? route.tokenPath\n        : // MixedRoute and V2Route have path\n            route.path;\n    const tokenPath = _.map(tokens, (token) => `${token.symbol}`);\n    const pools = route.protocol === Protocol.V3 || route.protocol === Protocol.MIXED\n        ? route.pools\n        : route.pairs;\n    const poolFeePath = _.map(pools, (pool) => {\n        return `${pool instanceof Pool\n            ? ` -- ${pool.fee / 10000}% [${Pool.getAddress(pool.token0, pool.token1, pool.fee)}]`\n            : ` -- [${Pair.getAddress(pool.token0, pool.token1)}]`} --> `;\n    });\n    for (let i = 0; i < tokenPath.length; i++) {\n        routeStr.push(tokenPath[i]);\n        if (i < poolFeePath.length) {\n            routeStr.push(poolFeePath[i]);\n        }\n    }\n    return routeStr.join('');\n};\nexport const routeAmountsToString = (routeAmounts) => {\n    const total = _.reduce(routeAmounts, (total, cur) => {\n        return total.add(cur.amount);\n    }, CurrencyAmount.fromRawAmount(routeAmounts[0].amount.currency, 0));\n    const routeStrings = _.map(routeAmounts, ({ protocol, route, amount }) => {\n        const portion = amount.divide(total);\n        const percent = new Percent(portion.numerator, portion.denominator);\n        /// @dev special case for MIXED routes we want to show user friendly V2+V3 instead\n        return `[${protocol == Protocol.MIXED ? 'V2 + V3' : protocol}] ${percent.toFixed(2)}% = ${routeToString(route)}`;\n    });\n    return _.join(routeStrings, ', ');\n};\nexport const routeAmountToString = (routeAmount) => {\n    const { route, amount } = routeAmount;\n    return `${amount.toExact()} = ${routeToString(route)}`;\n};\nexport const poolToString = (p) => {\n    return `${p.token0.symbol}/${p.token1.symbol}${p instanceof Pool ? `/${p.fee / 10000}%` : ``}`;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3V0aWwvcm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDNUMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN2QyxPQUFPLENBQUMsTUFBTSxRQUFRLENBQUM7QUFFdkIsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLEdBQUcsQ0FBQztBQUluQyxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsQ0FDM0IsS0FBcUMsRUFDN0IsRUFBRTtJQUNWLE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNwQixNQUFNLE1BQU0sR0FDVixLQUFLLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxFQUFFO1FBQzVCLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUztRQUNqQixDQUFDLENBQUMsbUNBQW1DO1lBQ25DLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDakIsTUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDOUQsTUFBTSxLQUFLLEdBQ1QsS0FBSyxDQUFDLFFBQVEsS0FBSyxRQUFRLENBQUMsRUFBRSxJQUFJLEtBQUssQ0FBQyxRQUFRLEtBQUssUUFBUSxDQUFDLEtBQUs7UUFDakUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLO1FBQ2IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDbEIsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtRQUN4QyxPQUFPLEdBQ0wsSUFBSSxZQUFZLElBQUk7WUFDbEIsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FDMUMsSUFBSSxDQUFDLE1BQU0sRUFDWCxJQUFJLENBQUMsTUFBTSxFQUNYLElBQUksQ0FBQyxHQUFHLENBQ1QsR0FBRztZQUNOLENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxVQUFVLENBQ3BCLElBQWEsQ0FBQyxNQUFNLEVBQ3BCLElBQWEsQ0FBQyxNQUFNLENBQ3RCLEdBQ1AsT0FBTyxDQUFDO0lBQ1YsQ0FBQyxDQUFDLENBQUM7SUFFSCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN6QyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUU7WUFDMUIsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMvQjtLQUNGO0lBRUQsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzNCLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLG9CQUFvQixHQUFHLENBQ2xDLFlBQW1DLEVBQzNCLEVBQUU7SUFDVixNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsTUFBTSxDQUNwQixZQUFZLEVBQ1osQ0FBQyxLQUFxQixFQUFFLEdBQXdCLEVBQUUsRUFBRTtRQUNsRCxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9CLENBQUMsRUFDRCxjQUFjLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUNsRSxDQUFDO0lBRUYsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTtRQUN2RSxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLE1BQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3BFLGtGQUFrRjtRQUNsRixPQUFPLElBQ0wsUUFBUSxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsUUFDM0MsS0FBSyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0lBQ3ZELENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNwQyxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxtQkFBbUIsR0FBRyxDQUNqQyxXQUFnQyxFQUN4QixFQUFFO0lBQ1YsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxXQUFXLENBQUM7SUFDdEMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLEVBQUUsTUFBTSxhQUFhLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUN6RCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFjLEVBQVUsRUFBRTtJQUNyRCxPQUFPLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQzFDLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFDN0MsRUFBRSxDQUFDO0FBQ0wsQ0FBQyxDQUFDIn0="]},"metadata":{},"sourceType":"module"}