{"ast":null,"code":"import { Protocol } from '@uniswap/router-sdk';\nimport { Percent } from '@uniswap/sdk-core';\nimport { Pair } from '@uniswap/v2-sdk';\nimport { Pool } from '@uniswap/v3-sdk';\nimport _ from 'lodash';\nimport { CurrencyAmount } from '.';\nexport var routeToString = function routeToString(route) {\n  var routeStr = [];\n  var tokens = route.protocol === Protocol.V3 ? route.tokenPath :\n  // MixedRoute and V2Route have path\n  route.path;\n  var tokenPath = _.map(tokens, function (token) {\n    return \"\".concat(token.symbol);\n  });\n  var pools = route.protocol === Protocol.V3 || route.protocol === Protocol.MIXED ? route.pools : route.pairs;\n  var poolFeePath = _.map(pools, function (pool) {\n    return \"\".concat(pool instanceof Pool ? \" -- \".concat(pool.fee / 10000, \"% [\").concat(Pool.getAddress(pool.token0, pool.token1, pool.fee), \"]\") : \" -- [\".concat(Pair.getAddress(pool.token0, pool.token1), \"]\"), \" --> \");\n  });\n  for (var i = 0; i < tokenPath.length; i++) {\n    routeStr.push(tokenPath[i]);\n    if (i < poolFeePath.length) {\n      routeStr.push(poolFeePath[i]);\n    }\n  }\n  return routeStr.join('');\n};\nexport var routeAmountsToString = function routeAmountsToString(routeAmounts) {\n  var total = _.reduce(routeAmounts, function (total, cur) {\n    return total.add(cur.amount);\n  }, CurrencyAmount.fromRawAmount(routeAmounts[0].amount.currency, 0));\n  var routeStrings = _.map(routeAmounts, function (_ref) {\n    var protocol = _ref.protocol,\n      route = _ref.route,\n      amount = _ref.amount;\n    var portion = amount.divide(total);\n    var percent = new Percent(portion.numerator, portion.denominator);\n    /// @dev special case for MIXED routes we want to show user friendly V2+V3 instead\n    return \"[\".concat(protocol == Protocol.MIXED ? 'V2 + V3' : protocol, \"] \").concat(percent.toFixed(2), \"% = \").concat(routeToString(route));\n  });\n  return _.join(routeStrings, ', ');\n};\nexport var routeAmountToString = function routeAmountToString(routeAmount) {\n  var route = routeAmount.route,\n    amount = routeAmount.amount;\n  return \"\".concat(amount.toExact(), \" = \").concat(routeToString(route));\n};\nexport var poolToString = function poolToString(p) {\n  return \"\".concat(p.token0.symbol, \"/\").concat(p.token1.symbol).concat(p instanceof Pool ? \"/\".concat(p.fee / 10000, \"%\") : \"\");\n};","map":{"version":3,"sources":["../../../src/util/routes.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Protocol } from '@uniswap/router-sdk';\nimport { Percent } from '@uniswap/sdk-core';\nimport { Pair } from '@uniswap/v2-sdk';\nimport { Pool } from '@uniswap/v3-sdk';\nimport _ from 'lodash';\nimport { CurrencyAmount } from '.';\nexport const routeToString = (route) => {\n    const routeStr = [];\n    const tokens = route.protocol === Protocol.V3\n        ? route.tokenPath\n        : // MixedRoute and V2Route have path\n            route.path;\n    const tokenPath = _.map(tokens, (token) => `${token.symbol}`);\n    const pools = route.protocol === Protocol.V3 || route.protocol === Protocol.MIXED\n        ? route.pools\n        : route.pairs;\n    const poolFeePath = _.map(pools, (pool) => {\n        return `${pool instanceof Pool\n            ? ` -- ${pool.fee / 10000}% [${Pool.getAddress(pool.token0, pool.token1, pool.fee)}]`\n            : ` -- [${Pair.getAddress(pool.token0, pool.token1)}]`} --> `;\n    });\n    for (let i = 0; i < tokenPath.length; i++) {\n        routeStr.push(tokenPath[i]);\n        if (i < poolFeePath.length) {\n            routeStr.push(poolFeePath[i]);\n        }\n    }\n    return routeStr.join('');\n};\nexport const routeAmountsToString = (routeAmounts) => {\n    const total = _.reduce(routeAmounts, (total, cur) => {\n        return total.add(cur.amount);\n    }, CurrencyAmount.fromRawAmount(routeAmounts[0].amount.currency, 0));\n    const routeStrings = _.map(routeAmounts, ({ protocol, route, amount }) => {\n        const portion = amount.divide(total);\n        const percent = new Percent(portion.numerator, portion.denominator);\n        /// @dev special case for MIXED routes we want to show user friendly V2+V3 instead\n        return `[${protocol == Protocol.MIXED ? 'V2 + V3' : protocol}] ${percent.toFixed(2)}% = ${routeToString(route)}`;\n    });\n    return _.join(routeStrings, ', ');\n};\nexport const routeAmountToString = (routeAmount) => {\n    const { route, amount } = routeAmount;\n    return `${amount.toExact()} = ${routeToString(route)}`;\n};\nexport const poolToString = (p) => {\n    return `${p.token0.symbol}/${p.token1.symbol}${p instanceof Pool ? `/${p.fee / 10000}%` : ``}`;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3V0aWwvcm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDNUMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN2QyxPQUFPLENBQUMsTUFBTSxRQUFRLENBQUM7QUFFdkIsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLEdBQUcsQ0FBQztBQUluQyxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsQ0FDM0IsS0FBcUMsRUFDN0IsRUFBRTtJQUNWLE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNwQixNQUFNLE1BQU0sR0FDVixLQUFLLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxFQUFFO1FBQzVCLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUztRQUNqQixDQUFDLENBQUMsbUNBQW1DO1lBQ25DLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDakIsTUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDOUQsTUFBTSxLQUFLLEdBQ1QsS0FBSyxDQUFDLFFBQVEsS0FBSyxRQUFRLENBQUMsRUFBRSxJQUFJLEtBQUssQ0FBQyxRQUFRLEtBQUssUUFBUSxDQUFDLEtBQUs7UUFDakUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLO1FBQ2IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDbEIsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtRQUN4QyxPQUFPLEdBQ0wsSUFBSSxZQUFZLElBQUk7WUFDbEIsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FDMUMsSUFBSSxDQUFDLE1BQU0sRUFDWCxJQUFJLENBQUMsTUFBTSxFQUNYLElBQUksQ0FBQyxHQUFHLENBQ1QsR0FBRztZQUNOLENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxVQUFVLENBQ3BCLElBQWEsQ0FBQyxNQUFNLEVBQ3BCLElBQWEsQ0FBQyxNQUFNLENBQ3RCLEdBQ1AsT0FBTyxDQUFDO0lBQ1YsQ0FBQyxDQUFDLENBQUM7SUFFSCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN6QyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUU7WUFDMUIsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMvQjtLQUNGO0lBRUQsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzNCLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLG9CQUFvQixHQUFHLENBQ2xDLFlBQW1DLEVBQzNCLEVBQUU7SUFDVixNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsTUFBTSxDQUNwQixZQUFZLEVBQ1osQ0FBQyxLQUFxQixFQUFFLEdBQXdCLEVBQUUsRUFBRTtRQUNsRCxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9CLENBQUMsRUFDRCxjQUFjLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUNsRSxDQUFDO0lBRUYsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTtRQUN2RSxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLE1BQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3BFLGtGQUFrRjtRQUNsRixPQUFPLElBQ0wsUUFBUSxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsUUFDM0MsS0FBSyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO0lBQ3ZELENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNwQyxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxtQkFBbUIsR0FBRyxDQUNqQyxXQUFnQyxFQUN4QixFQUFFO0lBQ1YsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxXQUFXLENBQUM7SUFDdEMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLEVBQUUsTUFBTSxhQUFhLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztBQUN6RCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFjLEVBQVUsRUFBRTtJQUNyRCxPQUFPLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQzFDLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFDN0MsRUFBRSxDQUFDO0FBQ0wsQ0FBQyxDQUFDIn0="]},"metadata":{},"sourceType":"module"}