{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _styled from\"styled-components\";import{brushHandleAccentPath,brushHandlePath,OffScreenHandle}from'components/LiquidityChartRangeInput/svg';import{brushX,select}from'd3';import usePrevious from'hooks/usePrevious';import React,{useCallback,useEffect,useMemo,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Handle=_styled.path.withConfig({componentId:\"sc-1hckctp-0\"})([\"cursor:ew-resize;pointer-events:none;stroke-width:3;stroke:\",\";fill:\",\";\"],function(_ref){var color=_ref.color;return color;},function(_ref2){var color=_ref2.color;return color;});var HandleAccent=_styled.path.withConfig({componentId:\"sc-1hckctp-1\"})([\"cursor:ew-resize;pointer-events:none;stroke-width:1.5;stroke:\",\";opacity:\",\";\"],function(_ref3){var theme=_ref3.theme;return theme.white;},function(_ref4){var theme=_ref4.theme;return theme.opacity.hover;});var LabelGroup=_styled.g.withConfig({componentId:\"sc-1hckctp-2\"})([\"opacity:\",\";transition:opacity 300ms;\"],function(_ref5){var visible=_ref5.visible;return visible?'1':'0';});var TooltipBackground=_styled.rect.withConfig({componentId:\"sc-1hckctp-3\"})([\"fill:\",\";\"],function(_ref6){var theme=_ref6.theme;return theme.backgroundInteractive;});var Tooltip=_styled.text.withConfig({componentId:\"sc-1hckctp-4\"})([\"text-anchor:middle;font-size:13px;fill:\",\";\"],function(_ref7){var theme=_ref7.theme;return theme.textPrimary;});// flips the handles draggers when close to the container edges\nvar FLIP_HANDLE_THRESHOLD_PX=20;// margin to prevent tick snapping from putting the brush off screen\nvar BRUSH_EXTENT_MARGIN_PX=2;/**\n * Returns true if every element in `a` maps to the\n * same pixel coordinate as elements in `b`\n */var compare=function compare(a,b,xScale){// normalize pixels to 1 decimals\nvar aNorm=a.map(function(x){return xScale(x).toFixed(1);});var bNorm=b.map(function(x){return xScale(x).toFixed(1);});return aNorm.every(function(v,i){return v===bNorm[i];});};export var Brush=function Brush(_ref8){var id=_ref8.id,xScale=_ref8.xScale,interactive=_ref8.interactive,brushLabelValue=_ref8.brushLabelValue,brushExtent=_ref8.brushExtent,setBrushExtent=_ref8.setBrushExtent,innerWidth=_ref8.innerWidth,innerHeight=_ref8.innerHeight,westHandleColor=_ref8.westHandleColor,eastHandleColor=_ref8.eastHandleColor;var brushRef=useRef(null);var brushBehavior=useRef(null);// only used to drag the handles on brush for performance\nvar _useState=useState(brushExtent),_useState2=_slicedToArray(_useState,2),localBrushExtent=_useState2[0],setLocalBrushExtent=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showLabels=_useState4[0],setShowLabels=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hovering=_useState6[0],setHovering=_useState6[1];var previousBrushExtent=usePrevious(brushExtent);var brushed=useCallback(function(event){var type=event.type,selection=event.selection,mode=event.mode;if(!selection){setLocalBrushExtent(null);return;}var scaled=selection.map(xScale.invert);// avoid infinite render loop by checking for change\nif(type==='end'&&!compare(brushExtent,scaled,xScale)){setBrushExtent(scaled,mode);}setLocalBrushExtent(scaled);},[xScale,brushExtent,setBrushExtent]);// keep local and external brush extent in sync\n// i.e. snap to ticks on bruhs end\nuseEffect(function(){setLocalBrushExtent(brushExtent);},[brushExtent]);// initialize the brush\nuseEffect(function(){if(!brushRef.current)return;brushBehavior.current=brushX().extent([[Math.max(0+BRUSH_EXTENT_MARGIN_PX,xScale(0)),0],[innerWidth-BRUSH_EXTENT_MARGIN_PX,innerHeight]]).handleSize(30).filter(function(){return interactive;}).on('brush end',brushed);brushBehavior.current(select(brushRef.current));if(previousBrushExtent&&compare(brushExtent,previousBrushExtent,xScale)){select(brushRef.current).transition().call(brushBehavior.current.move,brushExtent.map(xScale));}// brush linear gradient\nselect(brushRef.current).selectAll('.selection').attr('stroke','none').attr('fill-opacity','0.1').attr('fill',\"url(#\".concat(id,\"-gradient-selection)\"));},[brushExtent,brushed,id,innerHeight,innerWidth,interactive,previousBrushExtent,xScale]);// respond to xScale changes only\nuseEffect(function(){if(!brushRef.current||!brushBehavior.current)return;brushBehavior.current.move(select(brushRef.current),brushExtent.map(xScale));},[brushExtent,xScale]);// show labels when local brush changes\nuseEffect(function(){setShowLabels(true);var timeout=setTimeout(function(){return setShowLabels(false);},1500);return function(){return clearTimeout(timeout);};},[localBrushExtent]);// variables to help render the SVGs\nvar flipWestHandle=localBrushExtent&&xScale(localBrushExtent[0])>FLIP_HANDLE_THRESHOLD_PX;var flipEastHandle=localBrushExtent&&xScale(localBrushExtent[1])>innerWidth-FLIP_HANDLE_THRESHOLD_PX;var showWestArrow=localBrushExtent&&(xScale(localBrushExtent[0])<0||xScale(localBrushExtent[1])<0);var showEastArrow=localBrushExtent&&(xScale(localBrushExtent[0])>innerWidth||xScale(localBrushExtent[1])>innerWidth);var westHandleInView=localBrushExtent&&xScale(localBrushExtent[0])>=0&&xScale(localBrushExtent[0])<=innerWidth;var eastHandleInView=localBrushExtent&&xScale(localBrushExtent[1])>=0&&xScale(localBrushExtent[1])<=innerWidth;return useMemo(function(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"defs\",{children:[/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"\".concat(id,\"-gradient-selection\"),x1:\"0%\",y1:\"100%\",x2:\"100%\",y2:\"100%\",children:[/*#__PURE__*/_jsx(\"stop\",{stopColor:westHandleColor}),/*#__PURE__*/_jsx(\"stop\",{stopColor:eastHandleColor,offset:\"1\"})]}),/*#__PURE__*/_jsx(\"clipPath\",{id:\"\".concat(id,\"-brush-clip\"),children:/*#__PURE__*/_jsx(\"rect\",{x:\"0\",y:\"0\",width:innerWidth,height:innerHeight})})]}),/*#__PURE__*/_jsx(\"g\",{ref:brushRef,clipPath:\"url(#\".concat(id,\"-brush-clip)\"),onMouseEnter:function onMouseEnter(){return setHovering(true);},onMouseLeave:function onMouseLeave(){return setHovering(false);}}),localBrushExtent&&/*#__PURE__*/_jsxs(_Fragment,{children:[westHandleInView?/*#__PURE__*/_jsxs(\"g\",{transform:\"translate(\".concat(Math.max(0,xScale(localBrushExtent[0])),\", 0), scale(\").concat(flipWestHandle?'-1':'1',\", 1)\"),children:[/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(Handle,{color:westHandleColor,d:brushHandlePath(innerHeight)}),/*#__PURE__*/_jsx(HandleAccent,{d:brushHandleAccentPath()})]}),/*#__PURE__*/_jsxs(LabelGroup,{transform:\"translate(50,0), scale(\".concat(flipWestHandle?'1':'-1',\", 1)\"),visible:showLabels||hovering,children:[/*#__PURE__*/_jsx(TooltipBackground,{y:\"0\",x:\"-30\",height:\"30\",width:\"60\",rx:\"8\"}),/*#__PURE__*/_jsx(Tooltip,{transform:\"scale(-1, 1)\",y:\"15\",dominantBaseline:\"middle\",children:brushLabelValue('w',localBrushExtent[0])})]})]}):null,eastHandleInView?/*#__PURE__*/_jsxs(\"g\",{transform:\"translate(\".concat(xScale(localBrushExtent[1]),\", 0), scale(\").concat(flipEastHandle?'-1':'1',\", 1)\"),children:[/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(Handle,{color:eastHandleColor,d:brushHandlePath(innerHeight)}),/*#__PURE__*/_jsx(HandleAccent,{d:brushHandleAccentPath()})]}),/*#__PURE__*/_jsxs(LabelGroup,{transform:\"translate(50,0), scale(\".concat(flipEastHandle?'-1':'1',\", 1)\"),visible:showLabels||hovering,children:[/*#__PURE__*/_jsx(TooltipBackground,{y:\"0\",x:\"-30\",height:\"30\",width:\"60\",rx:\"8\"}),/*#__PURE__*/_jsx(Tooltip,{y:\"15\",dominantBaseline:\"middle\",children:brushLabelValue('e',localBrushExtent[1])})]})]}):null,showWestArrow&&/*#__PURE__*/_jsx(OffScreenHandle,{color:westHandleColor}),showEastArrow&&/*#__PURE__*/_jsx(\"g\",{transform:\"translate(\".concat(innerWidth,\", 0) scale(-1, 1)\"),children:/*#__PURE__*/_jsx(OffScreenHandle,{color:eastHandleColor})})]})]});},[brushLabelValue,eastHandleColor,eastHandleInView,flipEastHandle,flipWestHandle,hovering,id,innerHeight,innerWidth,localBrushExtent,showEastArrow,showLabels,showWestArrow,westHandleColor,westHandleInView,xScale]);};","map":{"version":3,"names":["brushHandleAccentPath","brushHandlePath","OffScreenHandle","brushX","select","usePrevious","React","useCallback","useEffect","useMemo","useRef","useState","Handle","styled","path","color","HandleAccent","theme","white","opacity","hover","LabelGroup","g","visible","TooltipBackground","rect","backgroundInteractive","Tooltip","text","textPrimary","FLIP_HANDLE_THRESHOLD_PX","BRUSH_EXTENT_MARGIN_PX","compare","a","b","xScale","aNorm","map","x","toFixed","bNorm","every","v","i","Brush","id","interactive","brushLabelValue","brushExtent","setBrushExtent","innerWidth","innerHeight","westHandleColor","eastHandleColor","brushRef","brushBehavior","localBrushExtent","setLocalBrushExtent","showLabels","setShowLabels","hovering","setHovering","previousBrushExtent","brushed","event","type","selection","mode","scaled","invert","current","extent","Math","max","handleSize","filter","on","transition","call","move","selectAll","attr","timeout","setTimeout","clearTimeout","flipWestHandle","flipEastHandle","showWestArrow","showEastArrow","westHandleInView","eastHandleInView"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/LiquidityChartRangeInput/Brush.tsx"],"sourcesContent":["import { brushHandleAccentPath, brushHandlePath, OffScreenHandle } from 'components/LiquidityChartRangeInput/svg'\nimport { BrushBehavior, brushX, D3BrushEvent, ScaleLinear, select } from 'd3'\nimport usePrevious from 'hooks/usePrevious'\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport styled from 'styled-components/macro'\n\nconst Handle = styled.path<{ color: string }>`\n  cursor: ew-resize;\n  pointer-events: none;\n\n  stroke-width: 3;\n  stroke: ${({ color }) => color};\n  fill: ${({ color }) => color};\n`\n\nconst HandleAccent = styled.path`\n  cursor: ew-resize;\n  pointer-events: none;\n\n  stroke-width: 1.5;\n  stroke: ${({ theme }) => theme.white};\n  opacity: ${({ theme }) => theme.opacity.hover};\n`\n\nconst LabelGroup = styled.g<{ visible: boolean }>`\n  opacity: ${({ visible }) => (visible ? '1' : '0')};\n  transition: opacity 300ms;\n`\n\nconst TooltipBackground = styled.rect`\n  fill: ${({ theme }) => theme.backgroundInteractive};\n`\n\nconst Tooltip = styled.text`\n  text-anchor: middle;\n  font-size: 13px;\n  fill: ${({ theme }) => theme.textPrimary};\n`\n\n// flips the handles draggers when close to the container edges\nconst FLIP_HANDLE_THRESHOLD_PX = 20\n\n// margin to prevent tick snapping from putting the brush off screen\nconst BRUSH_EXTENT_MARGIN_PX = 2\n\n/**\n * Returns true if every element in `a` maps to the\n * same pixel coordinate as elements in `b`\n */\nconst compare = (a: [number, number], b: [number, number], xScale: ScaleLinear<number, number>): boolean => {\n  // normalize pixels to 1 decimals\n  const aNorm = a.map((x) => xScale(x).toFixed(1))\n  const bNorm = b.map((x) => xScale(x).toFixed(1))\n  return aNorm.every((v, i) => v === bNorm[i])\n}\n\nexport const Brush = ({\n  id,\n  xScale,\n  interactive,\n  brushLabelValue,\n  brushExtent,\n  setBrushExtent,\n  innerWidth,\n  innerHeight,\n  westHandleColor,\n  eastHandleColor,\n}: {\n  id: string\n  xScale: ScaleLinear<number, number>\n  interactive: boolean\n  brushLabelValue: (d: 'w' | 'e', x: number) => string\n  brushExtent: [number, number]\n  setBrushExtent: (extent: [number, number], mode: string | undefined) => void\n  innerWidth: number\n  innerHeight: number\n  westHandleColor: string\n  eastHandleColor: string\n}) => {\n  const brushRef = useRef<SVGGElement | null>(null)\n  const brushBehavior = useRef<BrushBehavior<SVGGElement> | null>(null)\n\n  // only used to drag the handles on brush for performance\n  const [localBrushExtent, setLocalBrushExtent] = useState<[number, number] | null>(brushExtent)\n  const [showLabels, setShowLabels] = useState(false)\n  const [hovering, setHovering] = useState(false)\n\n  const previousBrushExtent = usePrevious(brushExtent)\n\n  const brushed = useCallback(\n    (event: D3BrushEvent<unknown>) => {\n      const { type, selection, mode } = event\n\n      if (!selection) {\n        setLocalBrushExtent(null)\n        return\n      }\n\n      const scaled = (selection as [number, number]).map(xScale.invert) as [number, number]\n\n      // avoid infinite render loop by checking for change\n      if (type === 'end' && !compare(brushExtent, scaled, xScale)) {\n        setBrushExtent(scaled, mode)\n      }\n\n      setLocalBrushExtent(scaled)\n    },\n    [xScale, brushExtent, setBrushExtent]\n  )\n\n  // keep local and external brush extent in sync\n  // i.e. snap to ticks on bruhs end\n  useEffect(() => {\n    setLocalBrushExtent(brushExtent)\n  }, [brushExtent])\n\n  // initialize the brush\n  useEffect(() => {\n    if (!brushRef.current) return\n\n    brushBehavior.current = brushX<SVGGElement>()\n      .extent([\n        [Math.max(0 + BRUSH_EXTENT_MARGIN_PX, xScale(0)), 0],\n        [innerWidth - BRUSH_EXTENT_MARGIN_PX, innerHeight],\n      ])\n      .handleSize(30)\n      .filter(() => interactive)\n      .on('brush end', brushed)\n\n    brushBehavior.current(select(brushRef.current))\n\n    if (previousBrushExtent && compare(brushExtent, previousBrushExtent, xScale)) {\n      select(brushRef.current)\n        .transition()\n        .call(brushBehavior.current.move as any, brushExtent.map(xScale))\n    }\n\n    // brush linear gradient\n    select(brushRef.current)\n      .selectAll('.selection')\n      .attr('stroke', 'none')\n      .attr('fill-opacity', '0.1')\n      .attr('fill', `url(#${id}-gradient-selection)`)\n  }, [brushExtent, brushed, id, innerHeight, innerWidth, interactive, previousBrushExtent, xScale])\n\n  // respond to xScale changes only\n  useEffect(() => {\n    if (!brushRef.current || !brushBehavior.current) return\n\n    brushBehavior.current.move(select(brushRef.current) as any, brushExtent.map(xScale) as any)\n  }, [brushExtent, xScale])\n\n  // show labels when local brush changes\n  useEffect(() => {\n    setShowLabels(true)\n    const timeout = setTimeout(() => setShowLabels(false), 1500)\n    return () => clearTimeout(timeout)\n  }, [localBrushExtent])\n\n  // variables to help render the SVGs\n  const flipWestHandle = localBrushExtent && xScale(localBrushExtent[0]) > FLIP_HANDLE_THRESHOLD_PX\n  const flipEastHandle = localBrushExtent && xScale(localBrushExtent[1]) > innerWidth - FLIP_HANDLE_THRESHOLD_PX\n\n  const showWestArrow = localBrushExtent && (xScale(localBrushExtent[0]) < 0 || xScale(localBrushExtent[1]) < 0)\n  const showEastArrow =\n    localBrushExtent && (xScale(localBrushExtent[0]) > innerWidth || xScale(localBrushExtent[1]) > innerWidth)\n\n  const westHandleInView =\n    localBrushExtent && xScale(localBrushExtent[0]) >= 0 && xScale(localBrushExtent[0]) <= innerWidth\n  const eastHandleInView =\n    localBrushExtent && xScale(localBrushExtent[1]) >= 0 && xScale(localBrushExtent[1]) <= innerWidth\n\n  return useMemo(\n    () => (\n      <>\n        <defs>\n          <linearGradient id={`${id}-gradient-selection`} x1=\"0%\" y1=\"100%\" x2=\"100%\" y2=\"100%\">\n            <stop stopColor={westHandleColor} />\n            <stop stopColor={eastHandleColor} offset=\"1\" />\n          </linearGradient>\n\n          {/* clips at exactly the svg area */}\n          <clipPath id={`${id}-brush-clip`}>\n            <rect x=\"0\" y=\"0\" width={innerWidth} height={innerHeight} />\n          </clipPath>\n        </defs>\n\n        {/* will host the d3 brush */}\n        <g\n          ref={brushRef}\n          clipPath={`url(#${id}-brush-clip)`}\n          onMouseEnter={() => setHovering(true)}\n          onMouseLeave={() => setHovering(false)}\n        />\n\n        {/* custom brush handles */}\n        {localBrushExtent && (\n          <>\n            {/* west handle */}\n            {westHandleInView ? (\n              <g\n                transform={`translate(${Math.max(0, xScale(localBrushExtent[0]))}, 0), scale(${\n                  flipWestHandle ? '-1' : '1'\n                }, 1)`}\n              >\n                <g>\n                  <Handle color={westHandleColor} d={brushHandlePath(innerHeight)} />\n                  <HandleAccent d={brushHandleAccentPath()} />\n                </g>\n\n                <LabelGroup\n                  transform={`translate(50,0), scale(${flipWestHandle ? '1' : '-1'}, 1)`}\n                  visible={showLabels || hovering}\n                >\n                  <TooltipBackground y=\"0\" x=\"-30\" height=\"30\" width=\"60\" rx=\"8\" />\n                  <Tooltip transform=\"scale(-1, 1)\" y=\"15\" dominantBaseline=\"middle\">\n                    {brushLabelValue('w', localBrushExtent[0])}\n                  </Tooltip>\n                </LabelGroup>\n              </g>\n            ) : null}\n\n            {/* east handle */}\n            {eastHandleInView ? (\n              <g transform={`translate(${xScale(localBrushExtent[1])}, 0), scale(${flipEastHandle ? '-1' : '1'}, 1)`}>\n                <g>\n                  <Handle color={eastHandleColor} d={brushHandlePath(innerHeight)} />\n                  <HandleAccent d={brushHandleAccentPath()} />\n                </g>\n\n                <LabelGroup\n                  transform={`translate(50,0), scale(${flipEastHandle ? '-1' : '1'}, 1)`}\n                  visible={showLabels || hovering}\n                >\n                  <TooltipBackground y=\"0\" x=\"-30\" height=\"30\" width=\"60\" rx=\"8\" />\n                  <Tooltip y=\"15\" dominantBaseline=\"middle\">\n                    {brushLabelValue('e', localBrushExtent[1])}\n                  </Tooltip>\n                </LabelGroup>\n              </g>\n            ) : null}\n\n            {showWestArrow && <OffScreenHandle color={westHandleColor} />}\n\n            {showEastArrow && (\n              <g transform={`translate(${innerWidth}, 0) scale(-1, 1)`}>\n                <OffScreenHandle color={eastHandleColor} />\n              </g>\n            )}\n          </>\n        )}\n      </>\n    ),\n    [\n      brushLabelValue,\n      eastHandleColor,\n      eastHandleInView,\n      flipEastHandle,\n      flipWestHandle,\n      hovering,\n      id,\n      innerHeight,\n      innerWidth,\n      localBrushExtent,\n      showEastArrow,\n      showLabels,\n      showWestArrow,\n      westHandleColor,\n      westHandleInView,\n      xScale,\n    ]\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}