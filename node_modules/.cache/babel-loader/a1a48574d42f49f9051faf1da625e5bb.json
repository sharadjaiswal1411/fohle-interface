{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { SwapRouter02__factory } from '../types/other/factories/SwapRouter02__factory';\nimport { log, SWAP_ROUTER_ADDRESS } from '../util';\nexport var SwapRouterProvider = /*#__PURE__*/function () {\n  function SwapRouterProvider(multicall2Provider) {\n    _classCallCheck(this, SwapRouterProvider);\n    this.multicall2Provider = multicall2Provider;\n  }\n  _createClass(SwapRouterProvider, [{\n    key: \"getApprovalType\",\n    value: function () {\n      var _getApprovalType = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(tokenInAmount, tokenOutAmount) {\n        var _a, _b, functionParams, tx, approvalTokenIn, approvalTokenOut;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                functionParams = [[tokenInAmount.currency.wrapped.address, tokenInAmount.quotient.toString()], [tokenOutAmount.currency.wrapped.address, tokenOutAmount.quotient.toString()]];\n                _context.next = 3;\n                return this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({\n                  address: SWAP_ROUTER_ADDRESS,\n                  contractInterface: SwapRouter02__factory.createInterface(),\n                  functionName: 'getApprovalType',\n                  functionParams: functionParams\n                });\n              case 3:\n                tx = _context.sent;\n                if (!(!((_a = tx.results[0]) === null || _a === void 0 ? void 0 : _a.success) || !((_b = tx.results[1]) === null || _b === void 0 ? void 0 : _b.success))) {\n                  _context.next = 7;\n                  break;\n                }\n                log.info({\n                  results: tx.results\n                }, 'Failed to get approval type from swap router for token in or token out');\n                throw new Error('Failed to get approval type from swap router for token in or token out');\n              case 7:\n                approvalTokenIn = tx.results[0].result;\n                approvalTokenOut = tx.results[1].result;\n                return _context.abrupt(\"return\", {\n                  approvalTokenIn: approvalTokenIn[0],\n                  approvalTokenOut: approvalTokenOut[0]\n                });\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function getApprovalType(_x, _x2) {\n        return _getApprovalType.apply(this, arguments);\n      }\n      return getApprovalType;\n    }()\n  }]);\n  return SwapRouterProvider;\n}();","map":{"version":3,"sources":["../../../src/providers/swap-router-provider.ts"],"names":[],"mappings":";;;;AAGA,SAAS,qBAAqB,QAAQ,gDAAgD;AACtF,SAAS,GAAG,EAAE,mBAAmB,QAAQ,SAAS;AA6BlD,WAAa,kBAAkB;EAC7B,4BAAsB,kBAAsC,EAAA;IAAA;IAAtC,IAAA,CAAA,kBAAkB,GAAlB,kBAAkB;EAAuB;EAAC;IAAA;IAAA;MAAA,gFAEzD,iBACL,aAAuC,EACvC,cAAwC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAElC,cAAc,GAAuB,CACzC,CACE,aAAa,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,EACtC,aAAa,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAClC,EACD,CACE,cAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,EACvC,cAAc,CAAC,QAAQ,CAAC,QAAQ,EAAE,CACnC,CACF;gBAAA;gBAAA,OAGO,IAAI,CAAC,kBAAkB,CAAC,4CAA4C,CAGxE;kBACA,OAAO,EAAE,mBAAmB;kBAC5B,iBAAiB,EAAE,qBAAqB,CAAC,eAAe,EAAE;kBAC1D,YAAY,EAAE,iBAAiB;kBAC/B,cAAc,EAAd;iBACD,CAAC;cAAA;gBATE,EAAE;gBAAA,MAWJ,EAAC,CAAA,EAAA,GAAA,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,OAAO,CAAA,IAAI,EAAC,CAAA,EAAA,GAAA,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,OAAO,CAAA;kBAAA;kBAAA;gBAAA;gBACpD,GAAG,CAAC,IAAI,CACN;kBAAE,OAAO,EAAE,EAAE,CAAC;gBAAO,CAAE,EACvB,wEAAwE,CACzE;gBAAC,MACI,IAAI,KAAK,CACb,wEAAwE,CACzE;cAAA;gBAGa,eAAe,GAAK,EAAE,CAAC,OAAQ,CAAC,CAAC,CAAC,CAA1C,MAAM;gBACE,gBAAgB,GAAK,EAAE,CAAC,OAAQ,CAAC,CAAC,CAAC,CAA3C,MAAM;gBAAA,iCAEP;kBACL,eAAe,EAAE,eAAe,CAAC,CAAC,CAAC;kBACnC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;iBACrC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACF;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;EAAA;AAAA","sourceRoot":"","sourcesContent":["import { SwapRouter02__factory } from '../types/other/factories/SwapRouter02__factory';\nimport { log, SWAP_ROUTER_ADDRESS } from '../util';\nexport class SwapRouterProvider {\n    constructor(multicall2Provider) {\n        this.multicall2Provider = multicall2Provider;\n    }\n    async getApprovalType(tokenInAmount, tokenOutAmount) {\n        var _a, _b;\n        const functionParams = [\n            [\n                tokenInAmount.currency.wrapped.address,\n                tokenInAmount.quotient.toString(),\n            ],\n            [\n                tokenOutAmount.currency.wrapped.address,\n                tokenOutAmount.quotient.toString(),\n            ],\n        ];\n        const tx = await this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({\n            address: SWAP_ROUTER_ADDRESS,\n            contractInterface: SwapRouter02__factory.createInterface(),\n            functionName: 'getApprovalType',\n            functionParams,\n        });\n        if (!((_a = tx.results[0]) === null || _a === void 0 ? void 0 : _a.success) || !((_b = tx.results[1]) === null || _b === void 0 ? void 0 : _b.success)) {\n            log.info({ results: tx.results }, 'Failed to get approval type from swap router for token in or token out');\n            throw new Error('Failed to get approval type from swap router for token in or token out');\n        }\n        const { result: approvalTokenIn } = tx.results[0];\n        const { result: approvalTokenOut } = tx.results[1];\n        return {\n            approvalTokenIn: approvalTokenIn[0],\n            approvalTokenOut: approvalTokenOut[0],\n        };\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3dhcC1yb3V0ZXItcHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcHJvdmlkZXJzL3N3YXAtcm91dGVyLXByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBQ3ZGLE9BQU8sRUFBRSxHQUFHLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxTQUFTLENBQUM7QUE2Qm5ELE1BQU0sT0FBTyxrQkFBa0I7SUFDN0IsWUFBc0Isa0JBQXNDO1FBQXRDLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBb0I7SUFBRyxDQUFDO0lBRXpELEtBQUssQ0FBQyxlQUFlLENBQzFCLGFBQXVDLEVBQ3ZDLGNBQXdDOztRQUV4QyxNQUFNLGNBQWMsR0FBdUI7WUFDekM7Z0JBQ0UsYUFBYSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTztnQkFDdEMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUU7YUFDbEM7WUFDRDtnQkFDRSxjQUFjLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPO2dCQUN2QyxjQUFjLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRTthQUNuQztTQUNGLENBQUM7UUFFRixNQUFNLEVBQUUsR0FDTixNQUFNLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyw0Q0FBNEMsQ0FHeEU7WUFDQSxPQUFPLEVBQUUsbUJBQW1CO1lBQzVCLGlCQUFpQixFQUFFLHFCQUFxQixDQUFDLGVBQWUsRUFBRTtZQUMxRCxZQUFZLEVBQUUsaUJBQWlCO1lBQy9CLGNBQWM7U0FDZixDQUFDLENBQUM7UUFFTCxJQUFJLENBQUMsQ0FBQSxNQUFBLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLDBDQUFFLE9BQU8sQ0FBQSxJQUFJLENBQUMsQ0FBQSxNQUFBLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLDBDQUFFLE9BQU8sQ0FBQSxFQUFFO1lBQ3RELEdBQUcsQ0FBQyxJQUFJLENBQ04sRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUN2Qix3RUFBd0UsQ0FDekUsQ0FBQztZQUNGLE1BQU0sSUFBSSxLQUFLLENBQ2Isd0VBQXdFLENBQ3pFLENBQUM7U0FDSDtRQUVELE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuRCxNQUFNLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVwRCxPQUFPO1lBQ0wsZUFBZSxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUM7WUFDbkMsZ0JBQWdCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1NBQ3RDLENBQUM7SUFDSixDQUFDO0NBQ0YifQ=="]},"metadata":{},"sourceType":"module"}