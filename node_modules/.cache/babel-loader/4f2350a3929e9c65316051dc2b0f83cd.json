{"ast":null,"code":"import{useWeb3React}from'@web3-react/core';import{useCallback,useMemo}from'react';import{useAppDispatch,useAppSelector}from'state/hooks';import{addTransaction}from'./reducer';import{TransactionType}from'./types';// helper that can take a ethers library transaction response and add it to the list of transactions\nexport function useTransactionAdder(){var _useWeb3React=useWeb3React(),chainId=_useWeb3React.chainId,account=_useWeb3React.account;var dispatch=useAppDispatch();return useCallback(function(response,info){if(!account)return;if(!chainId)return;var hash=response.hash;if(!hash){throw Error('No transaction hash found.');}dispatch(addTransaction({hash:hash,from:account,info:info,chainId:chainId}));},[account,chainId,dispatch]);}// returns all the transactions for the current chain\nexport function useAllTransactions(){var _state$chainId;var _useWeb3React2=useWeb3React(),chainId=_useWeb3React2.chainId;var state=useAppSelector(function(state){return state.transactions;});return chainId?(_state$chainId=state[chainId])!==null&&_state$chainId!==void 0?_state$chainId:{}:{};}export function useTransaction(transactionHash){var allTransactions=useAllTransactions();if(!transactionHash){return undefined;}return allTransactions[transactionHash];}export function useIsTransactionPending(transactionHash){var transactions=useAllTransactions();if(!transactionHash||!transactions[transactionHash])return false;return!transactions[transactionHash].receipt;}export function useIsTransactionConfirmed(transactionHash){var transactions=useAllTransactions();if(!transactionHash||!transactions[transactionHash])return false;return Boolean(transactions[transactionHash].receipt);}/**\n * Returns whether a transaction happened in the last day (86400 seconds * 1000 milliseconds / second)\n * @param tx to check for recency\n */export function isTransactionRecent(tx){return new Date().getTime()-tx.addedTime<86400000;}// returns whether a token has a pending approval transaction\nexport function useHasPendingApproval(token,spender){var allTransactions=useAllTransactions();return useMemo(function(){return typeof(token===null||token===void 0?void 0:token.address)==='string'&&typeof spender==='string'&&Object.keys(allTransactions).some(function(hash){var tx=allTransactions[hash];if(!tx)return false;if(tx.receipt){return false;}else{if(tx.info.type!==TransactionType.APPROVAL)return false;return tx.info.spender===spender&&tx.info.tokenAddress===token.address&&isTransactionRecent(tx);}});},[allTransactions,spender,token===null||token===void 0?void 0:token.address]);}","map":{"version":3,"names":["useWeb3React","useCallback","useMemo","useAppDispatch","useAppSelector","addTransaction","TransactionType","useTransactionAdder","chainId","account","dispatch","response","info","hash","Error","from","useAllTransactions","state","transactions","useTransaction","transactionHash","allTransactions","undefined","useIsTransactionPending","receipt","useIsTransactionConfirmed","Boolean","isTransactionRecent","tx","Date","getTime","addedTime","useHasPendingApproval","token","spender","address","Object","keys","some","type","APPROVAL","tokenAddress"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/state/transactions/hooks.tsx"],"sourcesContent":["import type { TransactionResponse } from '@ethersproject/providers'\nimport { Token } from '@uniswap/sdk-core'\nimport { useWeb3React } from '@web3-react/core'\nimport { useCallback, useMemo } from 'react'\nimport { useAppDispatch, useAppSelector } from 'state/hooks'\n\nimport { addTransaction } from './reducer'\nimport { TransactionDetails, TransactionInfo, TransactionType } from './types'\n\n// helper that can take a ethers library transaction response and add it to the list of transactions\nexport function useTransactionAdder(): (response: TransactionResponse, info: TransactionInfo) => void {\n  const { chainId, account } = useWeb3React()\n  const dispatch = useAppDispatch()\n\n  return useCallback(\n    (response: TransactionResponse, info: TransactionInfo) => {\n      if (!account) return\n      if (!chainId) return\n\n      const { hash } = response\n      if (!hash) {\n        throw Error('No transaction hash found.')\n      }\n      dispatch(addTransaction({ hash, from: account, info, chainId }))\n    },\n    [account, chainId, dispatch]\n  )\n}\n\n// returns all the transactions for the current chain\nexport function useAllTransactions(): { [txHash: string]: TransactionDetails } {\n  const { chainId } = useWeb3React()\n\n  const state = useAppSelector((state) => state.transactions)\n\n  return chainId ? state[chainId] ?? {} : {}\n}\n\nexport function useTransaction(transactionHash?: string): TransactionDetails | undefined {\n  const allTransactions = useAllTransactions()\n\n  if (!transactionHash) {\n    return undefined\n  }\n\n  return allTransactions[transactionHash]\n}\n\nexport function useIsTransactionPending(transactionHash?: string): boolean {\n  const transactions = useAllTransactions()\n\n  if (!transactionHash || !transactions[transactionHash]) return false\n\n  return !transactions[transactionHash].receipt\n}\n\nexport function useIsTransactionConfirmed(transactionHash?: string): boolean {\n  const transactions = useAllTransactions()\n\n  if (!transactionHash || !transactions[transactionHash]) return false\n\n  return Boolean(transactions[transactionHash].receipt)\n}\n\n/**\n * Returns whether a transaction happened in the last day (86400 seconds * 1000 milliseconds / second)\n * @param tx to check for recency\n */\nexport function isTransactionRecent(tx: TransactionDetails): boolean {\n  return new Date().getTime() - tx.addedTime < 86_400_000\n}\n\n// returns whether a token has a pending approval transaction\nexport function useHasPendingApproval(token?: Token, spender?: string): boolean {\n  const allTransactions = useAllTransactions()\n  return useMemo(\n    () =>\n      typeof token?.address === 'string' &&\n      typeof spender === 'string' &&\n      Object.keys(allTransactions).some((hash) => {\n        const tx = allTransactions[hash]\n        if (!tx) return false\n        if (tx.receipt) {\n          return false\n        } else {\n          if (tx.info.type !== TransactionType.APPROVAL) return false\n          return tx.info.spender === spender && tx.info.tokenAddress === token.address && isTransactionRecent(tx)\n        }\n      }),\n    [allTransactions, spender, token?.address]\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}