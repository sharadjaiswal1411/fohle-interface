{"ast":null,"code":"import _styled from \"styled-components\";\nvar _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/profile/list/SetDurationModal.tsx\",\n  _s = $RefreshSig$();\nimport { SortDropdown } from 'nft/components/common/SortDropdown';\nimport { Column, Row } from 'nft/components/Flex';\nimport { NumericInput } from 'nft/components/layout/Input';\nimport { bodySmall, buttonTextMedium, caption } from 'nft/css/common.css';\nimport { useSellAsset } from 'nft/hooks';\nimport { pluralize } from 'nft/utils/roundAndPluralize';\nimport { useEffect, useMemo, useState } from 'react';\nimport { AlertTriangle } from 'react-feather';\nimport { ThemedText } from 'theme';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ModalWrapper = _styled(Column).withConfig({\n  displayName: \"SetDurationModal__ModalWrapper\",\n  componentId: \"sc-1d5ev1f-0\"\n})([\"gap:4px;position:relative;\"]);\nconst InputWrapper = _styled(Row).withConfig({\n  displayName: \"SetDurationModal__InputWrapper\",\n  componentId: \"sc-1d5ev1f-1\"\n})([\"padding:12px 8px 12px 12px;border:1px solid;position:relative;height:44px;border-radius:8px;border-color:\", \";\"], _ref => {\n  let {\n    isInvalid,\n    theme\n  } = _ref;\n  return isInvalid ? theme.accentCritical : theme.backgroundOutline;\n});\nconst DropdownWrapper = _styled(ThemedText.BodyPrimary).withConfig({\n  displayName: \"SetDurationModal__DropdownWrapper\",\n  componentId: \"sc-1d5ev1f-2\"\n})([\"cursor:pointer;display:flex;justify-content:flex-end;height:min-content;width:80px;&:hover{background-color:\", \";}border-radius:12px;padding:8px;\"], _ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return theme.backgroundInteractive;\n});\nconst ErrorMessage = _styled(Row).withConfig({\n  displayName: \"SetDurationModal__ErrorMessage\",\n  componentId: \"sc-1d5ev1f-3\"\n})([\"color:\", \";gap:4px;position:absolute;top:44px;\"], _ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return theme.accentCritical;\n});\nconst WarningIcon = _styled(AlertTriangle).withConfig({\n  displayName: \"SetDurationModal__WarningIcon\",\n  componentId: \"sc-1d5ev1f-4\"\n})([\"width:16px;color:\", \";\"], _ref4 => {\n  let {\n    theme\n  } = _ref4;\n  return theme.accentCritical;\n});\nvar Duration;\n(function (Duration) {\n  Duration[\"hour\"] = \"hour\";\n  Duration[\"day\"] = \"day\";\n  Duration[\"week\"] = \"week\";\n  Duration[\"month\"] = \"month\";\n})(Duration || (Duration = {}));\nvar ErrorState;\n(function (ErrorState) {\n  ErrorState[ErrorState[\"valid\"] = 0] = \"valid\";\n  ErrorState[ErrorState[\"empty\"] = 1] = \"empty\";\n  ErrorState[ErrorState[\"overMax\"] = 2] = \"overMax\";\n})(ErrorState || (ErrorState = {}));\nexport const SetDurationModal = () => {\n  _s();\n  const [duration, setDuration] = useState(Duration.day);\n  const [displayDuration, setDisplayDuration] = useState(Duration.day);\n  const [amount, setAmount] = useState('7');\n  const [errorState, setErrorState] = useState(ErrorState.valid);\n  const setGlobalExpiration = useSellAsset(state => state.setGlobalExpiration);\n  const setCustomExpiration = event => {\n    setAmount(event.target.value.length ? event.target.value : '');\n    setDuration(displayDuration);\n  };\n  const selectDuration = duration => {\n    setDuration(duration);\n    setDisplayDuration(duration);\n  };\n  const durationOptions = useMemo(() => [{\n    displayText: 'Hours',\n    onClick: () => selectDuration(Duration.hour)\n  }, {\n    displayText: 'Days',\n    onClick: () => selectDuration(Duration.day)\n  }, {\n    displayText: 'Weeks',\n    onClick: () => selectDuration(Duration.week)\n  }, {\n    displayText: 'Months',\n    onClick: () => selectDuration(Duration.month)\n  }], []);\n  useEffect(() => {\n    const expiration = convertDurationToExpiration(parseFloat(amount), duration);\n    if (expiration * 1000 - Date.now() < 60000 || isNaN(expiration)) setErrorState(ErrorState.empty);else if (expiration * 1000 - Date.now() > 15552000000) setErrorState(ErrorState.overMax);else setErrorState(ErrorState.valid);\n    setGlobalExpiration(expiration);\n  }, [amount, duration, setGlobalExpiration]);\n  return /*#__PURE__*/_jsxDEV(ModalWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(InputWrapper, {\n      isInvalid: errorState !== ErrorState.valid,\n      children: [/*#__PURE__*/_jsxDEV(NumericInput, {\n        as: \"input\",\n        type: \"number\",\n        pattern: \"[0-9]\",\n        borderStyle: \"none\",\n        className: bodySmall,\n        color: {\n          placeholder: 'textSecondary',\n          default: 'textPrimary'\n        },\n        value: amount,\n        width: \"32\",\n        marginRight: \"4\",\n        backgroundColor: \"none\",\n        onChange: setCustomExpiration,\n        flexShrink: \"0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DropdownWrapper, {\n        className: buttonTextMedium,\n        children: /*#__PURE__*/_jsxDEV(SortDropdown, {\n          dropDownOptions: durationOptions,\n          mini: true,\n          miniPrompt: displayDuration + (displayDuration === duration ? pluralize(parseFloat(amount)) : 's'),\n          left: 38,\n          top: 38\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), errorState !== ErrorState.valid && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      className: caption,\n      children: [' ', /*#__PURE__*/_jsxDEV(WarningIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this), \" \", errorState === ErrorState.overMax ? 'Maximum 6 months' : 'Set duration']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n_s(SetDurationModal, \"qSZVE6VoShunKAZB8pSqTK2O+dc=\", false, function () {\n  return [useSellAsset];\n});\n_c = SetDurationModal;\nconst convertDurationToExpiration = (amount, duration) => {\n  const durationFactor = () => {\n    switch (duration) {\n      case Duration.hour:\n        return 1;\n      case Duration.day:\n        return 24;\n      case Duration.week:\n        return 24 * 7;\n      default:\n        // month\n        return 24 * 30;\n    }\n  };\n  return Math.round((Date.now() + 3600000 * durationFactor() * amount) / 1000);\n};\nvar _c;\n$RefreshReg$(_c, \"SetDurationModal\");","map":{"version":3,"names":["SortDropdown","Column","Row","NumericInput","bodySmall","buttonTextMedium","caption","useSellAsset","pluralize","useEffect","useMemo","useState","AlertTriangle","ThemedText","ModalWrapper","styled","InputWrapper","isInvalid","theme","accentCritical","backgroundOutline","DropdownWrapper","BodyPrimary","backgroundInteractive","ErrorMessage","WarningIcon","Duration","ErrorState","SetDurationModal","duration","setDuration","day","displayDuration","setDisplayDuration","amount","setAmount","errorState","setErrorState","valid","setGlobalExpiration","state","setCustomExpiration","event","target","value","length","selectDuration","durationOptions","displayText","onClick","hour","week","month","expiration","convertDurationToExpiration","parseFloat","Date","now","isNaN","empty","overMax","placeholder","default","durationFactor","Math","round"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/profile/list/SetDurationModal.tsx"],"sourcesContent":["import ms from 'ms.macro'\nimport { SortDropdown } from 'nft/components/common/SortDropdown'\nimport { Column, Row } from 'nft/components/Flex'\nimport { NumericInput } from 'nft/components/layout/Input'\nimport { bodySmall, buttonTextMedium, caption } from 'nft/css/common.css'\nimport { useSellAsset } from 'nft/hooks'\nimport { DropDownOption } from 'nft/types'\nimport { pluralize } from 'nft/utils/roundAndPluralize'\nimport { useEffect, useMemo, useState } from 'react'\nimport { AlertTriangle } from 'react-feather'\nimport styled from 'styled-components/macro'\nimport { ThemedText } from 'theme'\n\nconst ModalWrapper = styled(Column)`\n  gap: 4px;\n  position: relative;\n`\n\nconst InputWrapper = styled(Row)<{ isInvalid: boolean }>`\n  padding: 12px 8px 12px 12px;\n  border: 1px solid;\n  position: relative;\n  height: 44px;\n  border-radius: 8px;\n  border-color: ${({ isInvalid, theme }) => (isInvalid ? theme.accentCritical : theme.backgroundOutline)};\n`\n\nconst DropdownWrapper = styled(ThemedText.BodyPrimary)`\n  cursor: pointer;\n  display: flex;\n  justify-content: flex-end;\n  height: min-content;\n  width: 80px;\n  &:hover {\n    background-color: ${({ theme }) => theme.backgroundInteractive};\n  }\n  border-radius: 12px;\n  padding: 8px;\n`\n\nconst ErrorMessage = styled(Row)`\n  color: ${({ theme }) => theme.accentCritical};\n  gap: 4px;\n  position: absolute;\n  top: 44px;\n`\n\nconst WarningIcon = styled(AlertTriangle)`\n  width: 16px;\n  color: ${({ theme }) => theme.accentCritical};\n`\n\nenum Duration {\n  hour = 'hour',\n  day = 'day',\n  week = 'week',\n  month = 'month',\n}\n\nenum ErrorState {\n  valid,\n  empty,\n  overMax,\n}\n\nexport const SetDurationModal = () => {\n  const [duration, setDuration] = useState(Duration.day)\n  const [displayDuration, setDisplayDuration] = useState(Duration.day)\n  const [amount, setAmount] = useState('7')\n  const [errorState, setErrorState] = useState(ErrorState.valid)\n  const setGlobalExpiration = useSellAsset((state) => state.setGlobalExpiration)\n  const setCustomExpiration = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setAmount(event.target.value.length ? event.target.value : '')\n    setDuration(displayDuration)\n  }\n  const selectDuration = (duration: Duration) => {\n    setDuration(duration)\n    setDisplayDuration(duration)\n  }\n  const durationOptions: DropDownOption[] = useMemo(\n    () => [\n      {\n        displayText: 'Hours',\n        onClick: () => selectDuration(Duration.hour),\n      },\n      {\n        displayText: 'Days',\n        onClick: () => selectDuration(Duration.day),\n      },\n      {\n        displayText: 'Weeks',\n        onClick: () => selectDuration(Duration.week),\n      },\n      {\n        displayText: 'Months',\n        onClick: () => selectDuration(Duration.month),\n      },\n    ],\n    []\n  )\n  useEffect(() => {\n    const expiration = convertDurationToExpiration(parseFloat(amount), duration)\n\n    if (expiration * 1000 - Date.now() < ms`60 seconds` || isNaN(expiration)) setErrorState(ErrorState.empty)\n    else if (expiration * 1000 - Date.now() > ms`180 days`) setErrorState(ErrorState.overMax)\n    else setErrorState(ErrorState.valid)\n    setGlobalExpiration(expiration)\n  }, [amount, duration, setGlobalExpiration])\n\n  return (\n    <ModalWrapper>\n      <InputWrapper isInvalid={errorState !== ErrorState.valid}>\n        <NumericInput\n          as=\"input\"\n          type=\"number\"\n          pattern=\"[0-9]\"\n          borderStyle=\"none\"\n          className={bodySmall}\n          color={{ placeholder: 'textSecondary', default: 'textPrimary' }}\n          value={amount}\n          width=\"32\"\n          marginRight=\"4\"\n          backgroundColor=\"none\"\n          onChange={setCustomExpiration}\n          flexShrink=\"0\"\n        />\n        <DropdownWrapper className={buttonTextMedium}>\n          <SortDropdown\n            dropDownOptions={durationOptions}\n            mini\n            miniPrompt={displayDuration + (displayDuration === duration ? pluralize(parseFloat(amount)) : 's')}\n            left={38}\n            top={38}\n          />\n        </DropdownWrapper>\n      </InputWrapper>\n      {errorState !== ErrorState.valid && (\n        <ErrorMessage className={caption}>\n          {' '}\n          <WarningIcon /> {errorState === ErrorState.overMax ? 'Maximum 6 months' : 'Set duration'}\n        </ErrorMessage>\n      )}\n    </ModalWrapper>\n  )\n}\n\nconst convertDurationToExpiration = (amount: number, duration: Duration) => {\n  const durationFactor = () => {\n    switch (duration) {\n      case Duration.hour:\n        return 1\n      case Duration.day:\n        return 24\n      case Duration.week:\n        return 24 * 7\n      default: // month\n        return 24 * 30\n    }\n  }\n  return Math.round((Date.now() + ms`1 hour` * durationFactor() * amount) / 1000)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}