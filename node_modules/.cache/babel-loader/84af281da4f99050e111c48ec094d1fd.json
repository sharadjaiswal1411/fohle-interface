{"ast":null,"code":"import { createReducer } from '@reduxjs/toolkit';\nimport { SupportedNetwork } from 'constants/networks';\nimport { currentTimestamp } from './../../utils/index';\nimport { addPoolKeys, updatePoolChartData, updatePoolData, updatePoolTransactions, updateTickData } from './actions';\nconst initialState = {\n  byAddress: {\n    [SupportedNetwork.ETHEREUM]: {},\n    [SupportedNetwork.ARBITRUM]: {},\n    [SupportedNetwork.OPTIMISM]: {},\n    [SupportedNetwork.POLYGON]: {},\n    [SupportedNetwork.CELO]: {}\n  }\n};\nexport default createReducer(initialState, builder => builder.addCase(updatePoolData, (state, _ref) => {\n  let {\n    payload: {\n      pools,\n      networkId\n    }\n  } = _ref;\n  pools.map(poolData => state.byAddress[networkId][poolData.address] = {\n    ...state.byAddress[networkId][poolData.address],\n    data: poolData,\n    lastUpdated: currentTimestamp()\n  });\n})\n// add address to byAddress keys if not included yet\n.addCase(addPoolKeys, (state, _ref2) => {\n  let {\n    payload: {\n      poolAddresses,\n      networkId\n    }\n  } = _ref2;\n  poolAddresses.map(address => {\n    if (!state.byAddress[networkId][address]) {\n      state.byAddress[networkId][address] = {\n        data: undefined,\n        chartData: undefined,\n        transactions: undefined,\n        lastUpdated: undefined,\n        tickData: undefined\n      };\n    }\n  });\n}).addCase(updatePoolChartData, (state, _ref3) => {\n  let {\n    payload: {\n      poolAddress,\n      chartData,\n      networkId\n    }\n  } = _ref3;\n  state.byAddress[networkId][poolAddress] = {\n    ...state.byAddress[networkId][poolAddress],\n    chartData\n  };\n}).addCase(updatePoolTransactions, (state, _ref4) => {\n  let {\n    payload: {\n      poolAddress,\n      transactions,\n      networkId\n    }\n  } = _ref4;\n  state.byAddress[networkId][poolAddress] = {\n    ...state.byAddress[networkId][poolAddress],\n    transactions\n  };\n}).addCase(updateTickData, (state, _ref5) => {\n  let {\n    payload: {\n      poolAddress,\n      tickData,\n      networkId\n    }\n  } = _ref5;\n  state.byAddress[networkId][poolAddress] = {\n    ...state.byAddress[networkId][poolAddress],\n    tickData\n  };\n}));","map":{"version":3,"names":["createReducer","SupportedNetwork","currentTimestamp","addPoolKeys","updatePoolChartData","updatePoolData","updatePoolTransactions","updateTickData","initialState","byAddress","ETHEREUM","ARBITRUM","OPTIMISM","POLYGON","CELO","builder","addCase","state","payload","pools","networkId","map","poolData","address","data","lastUpdated","poolAddresses","undefined","chartData","transactions","tickData","poolAddress"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/state/pools/reducer.ts"],"sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\nimport { SupportedNetwork } from 'constants/networks'\nimport { PoolTickData } from 'data/pools/tickData'\nimport { Transaction } from 'types'\n\nimport { currentTimestamp } from './../../utils/index'\nimport { addPoolKeys, updatePoolChartData, updatePoolData, updatePoolTransactions, updateTickData } from './actions'\n\nexport interface PoolData {\n  // basic token info\n  address: string\n  feeTier: number\n\n  token0: {\n    name: string\n    symbol: string\n    address: string\n    decimals: number\n    derivedETH: number\n  }\n\n  token1: {\n    name: string\n    symbol: string\n    address: string\n    decimals: number\n    derivedETH: number\n  }\n\n  // for tick math\n  liquidity: number\n  sqrtPrice: number\n  tick: number\n\n  // volume\n  volumeUSD: number\n  volumeUSDChange: number\n  volumeUSDWeek: number\n\n  // liquidity\n  tvlUSD: number\n  tvlUSDChange: number\n\n  // prices\n  token0Price: number\n  token1Price: number\n\n  // token amounts\n  tvlToken0: number\n  tvlToken1: number\n}\n\nexport type PoolChartEntry = {\n  date: number\n  volumeUSD: number\n  totalValueLockedUSD: number\n  feesUSD: number\n}\n\ninterface PoolsState {\n  // analytics data from\n  byAddress: {\n    [networkId: string]: {\n      [address: string]: {\n        data: PoolData | undefined\n        chartData: PoolChartEntry[] | undefined\n        transactions: Transaction[] | undefined\n        lastUpdated: number | undefined\n        tickData: PoolTickData | undefined\n      }\n    }\n  }\n}\n\nconst initialState: PoolsState = {\n  byAddress: {\n    [SupportedNetwork.ETHEREUM]: {},\n    [SupportedNetwork.ARBITRUM]: {},\n    [SupportedNetwork.OPTIMISM]: {},\n    [SupportedNetwork.POLYGON]: {},\n    [SupportedNetwork.CELO]: {},\n  },\n}\n\nexport default createReducer(initialState, (builder) =>\n  builder\n    .addCase(updatePoolData, (state, { payload: { pools, networkId } }) => {\n      pools.map(\n        (poolData) =>\n          (state.byAddress[networkId][poolData.address] = {\n            ...state.byAddress[networkId][poolData.address],\n            data: poolData,\n            lastUpdated: currentTimestamp(),\n          })\n      )\n    })\n    // add address to byAddress keys if not included yet\n    .addCase(addPoolKeys, (state, { payload: { poolAddresses, networkId } }) => {\n      poolAddresses.map((address) => {\n        if (!state.byAddress[networkId][address]) {\n          state.byAddress[networkId][address] = {\n            data: undefined,\n            chartData: undefined,\n            transactions: undefined,\n            lastUpdated: undefined,\n            tickData: undefined,\n          }\n        }\n      })\n    })\n    .addCase(updatePoolChartData, (state, { payload: { poolAddress, chartData, networkId } }) => {\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], chartData }\n    })\n    .addCase(updatePoolTransactions, (state, { payload: { poolAddress, transactions, networkId } }) => {\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], transactions }\n    })\n    .addCase(updateTickData, (state, { payload: { poolAddress, tickData, networkId } }) => {\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], tickData }\n    })\n)\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,kBAAkB;AAChD,SAASC,gBAAgB,QAAQ,oBAAoB;AAIrD,SAASC,gBAAgB,QAAQ,qBAAqB;AACtD,SAASC,WAAW,EAAEC,mBAAmB,EAAEC,cAAc,EAAEC,sBAAsB,EAAEC,cAAc,QAAQ,WAAW;AAoEpH,MAAMC,YAAwB,GAAG;EAC/BC,SAAS,EAAE;IACT,CAACR,gBAAgB,CAACS,QAAQ,GAAG,CAAC,CAAC;IAC/B,CAACT,gBAAgB,CAACU,QAAQ,GAAG,CAAC,CAAC;IAC/B,CAACV,gBAAgB,CAACW,QAAQ,GAAG,CAAC,CAAC;IAC/B,CAACX,gBAAgB,CAACY,OAAO,GAAG,CAAC,CAAC;IAC9B,CAACZ,gBAAgB,CAACa,IAAI,GAAG,CAAC;EAC5B;AACF,CAAC;AAED,eAAed,aAAa,CAACQ,YAAY,EAAGO,OAAO,IACjDA,OAAO,CACJC,OAAO,CAACX,cAAc,EAAE,CAACY,KAAK,WAAwC;EAAA,IAAtC;IAAEC,OAAO,EAAE;MAAEC,KAAK;MAAEC;IAAU;EAAE,CAAC;EAChED,KAAK,CAACE,GAAG,CACNC,QAAQ,IACNL,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACE,QAAQ,CAACC,OAAO,CAAC,GAAG;IAC9C,GAAGN,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACE,QAAQ,CAACC,OAAO,CAAC;IAC/CC,IAAI,EAAEF,QAAQ;IACdG,WAAW,EAAEvB,gBAAgB;EAC/B,CAAE,CACL;AACH,CAAC;AACD;AAAA,CACCc,OAAO,CAACb,WAAW,EAAE,CAACc,KAAK,YAAgD;EAAA,IAA9C;IAAEC,OAAO,EAAE;MAAEQ,aAAa;MAAEN;IAAU;EAAE,CAAC;EACrEM,aAAa,CAACL,GAAG,CAAEE,OAAO,IAAK;IAC7B,IAAI,CAACN,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACG,OAAO,CAAC,EAAE;MACxCN,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACG,OAAO,CAAC,GAAG;QACpCC,IAAI,EAAEG,SAAS;QACfC,SAAS,EAAED,SAAS;QACpBE,YAAY,EAAEF,SAAS;QACvBF,WAAW,EAAEE,SAAS;QACtBG,QAAQ,EAAEH;MACZ,CAAC;IACH;EACF,CAAC,CAAC;AACJ,CAAC,CAAC,CACDX,OAAO,CAACZ,mBAAmB,EAAE,CAACa,KAAK,YAAyD;EAAA,IAAvD;IAAEC,OAAO,EAAE;MAAEa,WAAW;MAAEH,SAAS;MAAER;IAAU;EAAE,CAAC;EACtFH,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACW,WAAW,CAAC,GAAG;IAAE,GAAGd,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACW,WAAW,CAAC;IAAEH;EAAU,CAAC;AACrG,CAAC,CAAC,CACDZ,OAAO,CAACV,sBAAsB,EAAE,CAACW,KAAK,YAA4D;EAAA,IAA1D;IAAEC,OAAO,EAAE;MAAEa,WAAW;MAAEF,YAAY;MAAET;IAAU;EAAE,CAAC;EAC5FH,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACW,WAAW,CAAC,GAAG;IAAE,GAAGd,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACW,WAAW,CAAC;IAAEF;EAAa,CAAC;AACxG,CAAC,CAAC,CACDb,OAAO,CAACT,cAAc,EAAE,CAACU,KAAK,YAAwD;EAAA,IAAtD;IAAEC,OAAO,EAAE;MAAEa,WAAW;MAAED,QAAQ;MAAEV;IAAU;EAAE,CAAC;EAChFH,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACW,WAAW,CAAC,GAAG;IAAE,GAAGd,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC,CAACW,WAAW,CAAC;IAAED;EAAS,CAAC;AACpG,CAAC,CAAC,CACL"},"metadata":{},"sourceType":"module"}