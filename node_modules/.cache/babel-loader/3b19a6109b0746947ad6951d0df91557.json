{"ast":null,"code":"import _defineProperty from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{atomWithStorage,useAtomValue,useUpdateAtom}from'jotai/utils';import{createContext,useCallback,useContext}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export{FeatureFlag}from'./flags/featureFlags';var FeatureFlagContext=/*#__PURE__*/createContext({isLoaded:false,flags:{}});function useFeatureFlagsContext(){var context=useContext(FeatureFlagContext);if(!context){throw Error('Feature flag hooks can only be used by children of FeatureFlagProvider.');}else{return context;}}/* update and save feature flag settings */export var featureFlagSettings=atomWithStorage('featureFlags',{});export function useUpdateFlag(){var setFeatureFlags=useUpdateAtom(featureFlagSettings);return useCallback(function(featureFlag,option){setFeatureFlags(function(featureFlags){return _objectSpread(_objectSpread({},featureFlags),{},_defineProperty({},featureFlag,option));});},[setFeatureFlags]);}export function FeatureFlagsProvider(_ref){var children=_ref.children;// TODO(vm): `isLoaded` to `true` so `App.tsx` will render. Later, this will be dependent on\n// flags loading from Amplitude, with a timeout.\nvar featureFlags=useAtomValue(featureFlagSettings);var value={isLoaded:true,flags:featureFlags};return/*#__PURE__*/_jsx(FeatureFlagContext.Provider,{value:value,children:children});}export function useFeatureFlagsIsLoaded(){return useFeatureFlagsContext().isLoaded;}export var BaseVariant;(function(BaseVariant){BaseVariant[\"Control\"]=\"control\";BaseVariant[\"Enabled\"]=\"enabled\";})(BaseVariant||(BaseVariant={}));export function useBaseFlag(flag){var defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:BaseVariant.Control;switch(useFeatureFlagsContext().flags[flag]){case'enabled':return BaseVariant.Enabled;case'control':return BaseVariant.Control;default:return defaultValue;}}","map":{"version":3,"names":["atomWithStorage","useAtomValue","useUpdateAtom","createContext","useCallback","useContext","FeatureFlag","FeatureFlagContext","isLoaded","flags","useFeatureFlagsContext","context","Error","featureFlagSettings","useUpdateFlag","setFeatureFlags","featureFlag","option","featureFlags","FeatureFlagsProvider","children","value","useFeatureFlagsIsLoaded","BaseVariant","useBaseFlag","flag","defaultValue","Control","Enabled"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/featureFlags/index.tsx"],"sourcesContent":["import { atomWithStorage, useAtomValue, useUpdateAtom } from 'jotai/utils'\nimport { createContext, ReactNode, useCallback, useContext } from 'react'\nexport { FeatureFlag } from './flags/featureFlags'\n\ninterface FeatureFlagsContextType {\n  isLoaded: boolean\n  flags: Record<string, string>\n}\n\nconst FeatureFlagContext = createContext<FeatureFlagsContextType>({ isLoaded: false, flags: {} })\n\nfunction useFeatureFlagsContext(): FeatureFlagsContextType {\n  const context = useContext(FeatureFlagContext)\n  if (!context) {\n    throw Error('Feature flag hooks can only be used by children of FeatureFlagProvider.')\n  } else {\n    return context\n  }\n}\n\n/* update and save feature flag settings */\nexport const featureFlagSettings = atomWithStorage<Record<string, string>>('featureFlags', {})\n\nexport function useUpdateFlag() {\n  const setFeatureFlags = useUpdateAtom(featureFlagSettings)\n\n  return useCallback(\n    (featureFlag: string, option: string) => {\n      setFeatureFlags((featureFlags) => ({\n        ...featureFlags,\n        [featureFlag]: option,\n      }))\n    },\n    [setFeatureFlags]\n  )\n}\n\nexport function FeatureFlagsProvider({ children }: { children: ReactNode }) {\n  // TODO(vm): `isLoaded` to `true` so `App.tsx` will render. Later, this will be dependent on\n  // flags loading from Amplitude, with a timeout.\n  const featureFlags = useAtomValue(featureFlagSettings)\n  const value = {\n    isLoaded: true,\n    flags: featureFlags,\n  }\n  return <FeatureFlagContext.Provider value={value}>{children}</FeatureFlagContext.Provider>\n}\n\nexport function useFeatureFlagsIsLoaded(): boolean {\n  return useFeatureFlagsContext().isLoaded\n}\n\nexport enum BaseVariant {\n  Control = 'control',\n  Enabled = 'enabled',\n}\n\nexport function useBaseFlag(flag: string, defaultValue = BaseVariant.Control): BaseVariant {\n  switch (useFeatureFlagsContext().flags[flag]) {\n    case 'enabled':\n      return BaseVariant.Enabled\n    case 'control':\n      return BaseVariant.Control\n    default:\n      return defaultValue\n  }\n}\n"],"mappings":"yVAAA,OAASA,eAAe,CAAEC,YAAY,CAAEC,aAAa,KAAQ,aAAa,CAC1E,OAASC,aAAa,CAAaC,WAAW,CAAEC,UAAU,KAAQ,OAAO,4CACzE,OAASC,WAAW,KAAQ,sBAAsB,CAOlD,GAAMC,mBAAkB,cAAGJ,aAAa,CAA0B,CAAEK,QAAQ,CAAE,KAAK,CAAEC,KAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CAEjG,QAASC,uBAAsB,EAA4B,CACzD,GAAMC,QAAO,CAAGN,UAAU,CAACE,kBAAkB,CAAC,CAC9C,GAAI,CAACI,OAAO,CAAE,CACZ,KAAMC,MAAK,CAAC,yEAAyE,CAAC,CACxF,CAAC,IAAM,CACL,MAAOD,QAAO,CAChB,CACF,CAEA,2CACA,MAAO,IAAME,oBAAmB,CAAGb,eAAe,CAAyB,cAAc,CAAE,CAAC,CAAC,CAAC,CAE9F,MAAO,SAASc,cAAa,EAAG,CAC9B,GAAMC,gBAAe,CAAGb,aAAa,CAACW,mBAAmB,CAAC,CAE1D,MAAOT,YAAW,CAChB,SAACY,WAAmB,CAAEC,MAAc,CAAK,CACvCF,eAAe,CAAC,SAACG,YAAY,wCACxBA,YAAY,wBACdF,WAAW,CAAGC,MAAM,IACrB,CAAC,CACL,CAAC,CACD,CAACF,eAAe,CAAC,CAClB,CACH,CAEA,MAAO,SAASI,qBAAoB,MAAwC,IAArCC,SAAQ,MAARA,QAAQ,CAC7C;AACA;AACA,GAAMF,aAAY,CAAGjB,YAAY,CAACY,mBAAmB,CAAC,CACtD,GAAMQ,MAAK,CAAG,CACZb,QAAQ,CAAE,IAAI,CACdC,KAAK,CAAES,YACT,CAAC,CACD,mBAAO,KAAC,kBAAkB,CAAC,QAAQ,EAAC,KAAK,CAAEG,KAAM,UAAED,QAAQ,EAA+B,CAC5F,CAEA,MAAO,SAASE,wBAAuB,EAAY,CACjD,MAAOZ,uBAAsB,EAAE,CAACF,QAAQ,CAC1C,CAEA,UAAYe,YAAW,CAGtB,UAHWA,WAAW,EAAXA,WAAW,sBAAXA,WAAW,yBAAXA,WAAW,GAAXA,WAAW,MAKvB,MAAO,SAASC,YAAW,CAACC,IAAY,CAAmD,IAAjDC,aAAY,2DAAGH,WAAW,CAACI,OAAO,CAC1E,OAAQjB,sBAAsB,EAAE,CAACD,KAAK,CAACgB,IAAI,CAAC,EAC1C,IAAK,SAAS,CACZ,MAAOF,YAAW,CAACK,OAAO,CAC5B,IAAK,SAAS,CACZ,MAAOL,YAAW,CAACI,OAAO,CAC5B,QACE,MAAOD,aAAY,EAEzB"},"metadata":{},"sourceType":"module"}