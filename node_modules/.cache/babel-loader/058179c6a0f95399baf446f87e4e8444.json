{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import TokenSafety from'components/TokenSafety';import{memo,useCallback,useEffect,useState}from'react';import{useUserAddedTokens}from'state/user/hooks';import useLast from'../../hooks/useLast';import{useWindowSize}from'../../hooks/useWindowSize';import Modal from'../Modal';import{CurrencySearch}from'./CurrencySearch';import{jsx as _jsx}from\"react/jsx-runtime\";var CurrencyModalView;(function(CurrencyModalView){CurrencyModalView[CurrencyModalView[\"search\"]=0]=\"search\";CurrencyModalView[CurrencyModalView[\"importToken\"]=1]=\"importToken\";CurrencyModalView[CurrencyModalView[\"tokenSafety\"]=2]=\"tokenSafety\";})(CurrencyModalView||(CurrencyModalView={}));export default/*#__PURE__*/memo(function CurrencySearchModal(_ref){var isOpen=_ref.isOpen,onDismiss=_ref.onDismiss,onCurrencySelect=_ref.onCurrencySelect,selectedCurrency=_ref.selectedCurrency,otherSelectedCurrency=_ref.otherSelectedCurrency,_ref$showCommonBases=_ref.showCommonBases,showCommonBases=_ref$showCommonBases===void 0?false:_ref$showCommonBases,_ref$showCurrencyAmou=_ref.showCurrencyAmount,showCurrencyAmount=_ref$showCurrencyAmou===void 0?true:_ref$showCurrencyAmou,_ref$disableNonToken=_ref.disableNonToken,disableNonToken=_ref$disableNonToken===void 0?false:_ref$disableNonToken;var _useState=useState(CurrencyModalView.search),_useState2=_slicedToArray(_useState,2),modalView=_useState2[0],setModalView=_useState2[1];var lastOpen=useLast(isOpen);var userAddedTokens=useUserAddedTokens();useEffect(function(){if(isOpen&&!lastOpen){setModalView(CurrencyModalView.search);}},[isOpen,lastOpen]);var showTokenSafetySpeedbump=function showTokenSafetySpeedbump(token){setWarningToken(token);setModalView(CurrencyModalView.tokenSafety);};var handleCurrencySelect=useCallback(function(currency,hasWarning){if(hasWarning&&currency.isToken&&!userAddedTokens.find(function(token){return token.equals(currency);})){showTokenSafetySpeedbump(currency);}else{onCurrencySelect(currency);onDismiss();}},[onDismiss,onCurrencySelect,userAddedTokens]);// used for token safety\nvar _useState3=useState(),_useState4=_slicedToArray(_useState3,2),warningToken=_useState4[0],setWarningToken=_useState4[1];var _useWindowSize=useWindowSize(),windowHeight=_useWindowSize.height;// change min height if not searching\nvar modalHeight=80;var content=null;switch(modalView){case CurrencyModalView.search:if(windowHeight){// Converts pixel units to vh for Modal component\nmodalHeight=Math.min(Math.round(680/windowHeight*100),80);}content=/*#__PURE__*/_jsx(CurrencySearch,{isOpen:isOpen,onDismiss:onDismiss,onCurrencySelect:handleCurrencySelect,selectedCurrency:selectedCurrency,otherSelectedCurrency:otherSelectedCurrency,showCommonBases:showCommonBases,showCurrencyAmount:showCurrencyAmount,disableNonToken:disableNonToken});break;case CurrencyModalView.tokenSafety:modalHeight=undefined;if(warningToken){content=/*#__PURE__*/_jsx(TokenSafety,{tokenAddress:warningToken.address,onContinue:function onContinue(){return handleCurrencySelect(warningToken);},onCancel:function onCancel(){return setModalView(CurrencyModalView.search);},showCancel:true});}break;}return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onDismiss:onDismiss,maxHeight:modalHeight,minHeight:modalHeight,children:content});});","map":{"version":3,"names":["TokenSafety","memo","useCallback","useEffect","useState","useUserAddedTokens","useLast","useWindowSize","Modal","CurrencySearch","CurrencyModalView","CurrencySearchModal","isOpen","onDismiss","onCurrencySelect","selectedCurrency","otherSelectedCurrency","showCommonBases","showCurrencyAmount","disableNonToken","search","modalView","setModalView","lastOpen","userAddedTokens","showTokenSafetySpeedbump","token","setWarningToken","tokenSafety","handleCurrencySelect","currency","hasWarning","isToken","find","equals","warningToken","windowHeight","height","modalHeight","content","Math","min","round","undefined","address"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/SearchModal/CurrencySearchModal.tsx"],"sourcesContent":["import { Currency, Token } from '@uniswap/sdk-core'\nimport TokenSafety from 'components/TokenSafety'\nimport { memo, useCallback, useEffect, useState } from 'react'\nimport { useUserAddedTokens } from 'state/user/hooks'\n\nimport useLast from '../../hooks/useLast'\nimport { useWindowSize } from '../../hooks/useWindowSize'\nimport Modal from '../Modal'\nimport { CurrencySearch } from './CurrencySearch'\n\ninterface CurrencySearchModalProps {\n  isOpen: boolean\n  onDismiss: () => void\n  selectedCurrency?: Currency | null\n  onCurrencySelect: (currency: Currency) => void\n  otherSelectedCurrency?: Currency | null\n  showCommonBases?: boolean\n  showCurrencyAmount?: boolean\n  disableNonToken?: boolean\n}\n\nenum CurrencyModalView {\n  search,\n  importToken,\n  tokenSafety,\n}\n\nexport default memo(function CurrencySearchModal({\n  isOpen,\n  onDismiss,\n  onCurrencySelect,\n  selectedCurrency,\n  otherSelectedCurrency,\n  showCommonBases = false,\n  showCurrencyAmount = true,\n  disableNonToken = false,\n}: CurrencySearchModalProps) {\n  const [modalView, setModalView] = useState<CurrencyModalView>(CurrencyModalView.search)\n  const lastOpen = useLast(isOpen)\n  const userAddedTokens = useUserAddedTokens()\n\n  useEffect(() => {\n    if (isOpen && !lastOpen) {\n      setModalView(CurrencyModalView.search)\n    }\n  }, [isOpen, lastOpen])\n\n  const showTokenSafetySpeedbump = (token: Token) => {\n    setWarningToken(token)\n    setModalView(CurrencyModalView.tokenSafety)\n  }\n\n  const handleCurrencySelect = useCallback(\n    (currency: Currency, hasWarning?: boolean) => {\n      if (hasWarning && currency.isToken && !userAddedTokens.find((token) => token.equals(currency))) {\n        showTokenSafetySpeedbump(currency)\n      } else {\n        onCurrencySelect(currency)\n        onDismiss()\n      }\n    },\n    [onDismiss, onCurrencySelect, userAddedTokens]\n  )\n  // used for token safety\n  const [warningToken, setWarningToken] = useState<Token | undefined>()\n\n  const { height: windowHeight } = useWindowSize()\n  // change min height if not searching\n  let modalHeight: number | undefined = 80\n  let content = null\n  switch (modalView) {\n    case CurrencyModalView.search:\n      if (windowHeight) {\n        // Converts pixel units to vh for Modal component\n        modalHeight = Math.min(Math.round((680 / windowHeight) * 100), 80)\n      }\n      content = (\n        <CurrencySearch\n          isOpen={isOpen}\n          onDismiss={onDismiss}\n          onCurrencySelect={handleCurrencySelect}\n          selectedCurrency={selectedCurrency}\n          otherSelectedCurrency={otherSelectedCurrency}\n          showCommonBases={showCommonBases}\n          showCurrencyAmount={showCurrencyAmount}\n          disableNonToken={disableNonToken}\n        />\n      )\n      break\n    case CurrencyModalView.tokenSafety:\n      modalHeight = undefined\n      if (warningToken) {\n        content = (\n          <TokenSafety\n            tokenAddress={warningToken.address}\n            onContinue={() => handleCurrencySelect(warningToken)}\n            onCancel={() => setModalView(CurrencyModalView.search)}\n            showCancel={true}\n          />\n        )\n      }\n      break\n  }\n  return (\n    <Modal isOpen={isOpen} onDismiss={onDismiss} maxHeight={modalHeight} minHeight={modalHeight}>\n      {content}\n    </Modal>\n  )\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}