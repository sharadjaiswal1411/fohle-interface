{"ast":null,"code":"import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectDestructuringEmpty from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _styled from\"styled-components\";var _templateObject;import{Trans}from\"@lingui/react\";import{BigNumber}from'@ethersproject/bignumber';import{Trace}from'@uniswap/analytics';import{PageName}from'@uniswap/analytics-events';import{Fraction}from'@uniswap/sdk-core';import{useWeb3React}from'@web3-react/core';import ExecuteModal from'components/vote/ExecuteModal';import QueueModal from'components/vote/QueueModal';import{useActiveLocale}from'hooks/useActiveLocale';import useCurrentBlockTimestamp from'hooks/useCurrentBlockTimestamp';import JSBI from'jsbi';import useBlockNumber from'lib/hooks/useBlockNumber';import{useState}from'react';import{ArrowLeft}from'react-feather';import ReactMarkdown from'react-markdown';import{useParams}from'react-router-dom';import{ButtonPrimary}from'../../components/Button';import{GrayCard}from'../../components/Card';import{AutoColumn}from'../../components/Column';import{CardSection,DataCard}from'../../components/earn/styled';import{RowBetween,RowFixed}from'../../components/Row';import{SwitchLocaleLink}from'../../components/SwitchLocaleLink';import DelegateModal from'../../components/vote/DelegateModal';import VoteModal from'../../components/vote/VoteModal';import{AVERAGE_BLOCK_TIME_IN_SECS,COMMON_CONTRACT_NAMES,DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS}from'../../constants/governance';import{ZERO_ADDRESS}from'../../constants/misc';import{UNI}from'../../constants/tokens';import{useModalIsOpen,useToggleDelegateModal,useToggleExecuteModal,useToggleQueueModal,useToggleVoteModal}from'../../state/application/hooks';import{ApplicationModal}from'../../state/application/reducer';import{useTokenBalance}from'../../state/connection/hooks';import{ProposalState,useProposalData,useQuorum,useUserDelegatee,useUserVotesAsOfBlock}from'../../state/governance/hooks';import{VoteOption}from'../../state/governance/types';import{ExternalLink,StyledInternalLink,ThemedText}from'../../theme';import{isAddress}from'../../utils';import{ExplorerDataType,getExplorerLink}from'../../utils/getExplorerLink';import{ProposalStatus}from'./styled';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PageWrapper=_styled(AutoColumn).withConfig({componentId:\"sc-1vobn0f-0\"})([\"padding-top:68px;width:100%;@media only screen and (max-width:\",\"){padding:48px 8px 0px;}@media only screen and (max-width:\",\"){padding-top:20px;}\"],function(_ref){var theme=_ref.theme;return\"\".concat(theme.breakpoint.md,\"px\");},function(_ref2){var theme=_ref2.theme;return\"\".concat(theme.breakpoint.sm,\"px\");});var ProposalInfo=_styled(AutoColumn).withConfig({componentId:\"sc-1vobn0f-1\"})([\"background:\",\";border-radius:12px;padding:1.5rem;position:relative;max-width:640px;width:100%;\"],function(_ref3){var theme=_ref3.theme;return theme.backgroundSurface;});var ArrowWrapper=_styled(StyledInternalLink).withConfig({componentId:\"sc-1vobn0f-2\"})([\"display:flex;align-items:center;gap:8px;height:24px;color:\",\";a{color:\",\";text-decoration:none;}:hover{text-decoration:none;}\"],function(_ref4){var theme=_ref4.theme;return theme.textPrimary;},function(_ref5){var theme=_ref5.theme;return theme.textPrimary;});var CardWrapper=_styled.div.withConfig({componentId:\"sc-1vobn0f-3\"})([\"display:grid;grid-template-columns:1fr 1fr;gap:12px;width:100%;\"]);var StyledDataCard=_styled(DataCard).withConfig({componentId:\"sc-1vobn0f-4\"})([\"width:100%;background:none;background-color:\",\";height:fit-content;z-index:2;\"],function(_ref6){var theme=_ref6.theme;return theme.deprecated_bg1;});var ProgressWrapper=_styled.div.withConfig({componentId:\"sc-1vobn0f-5\"})([\"width:100%;margin-top:1rem;height:4px;border-radius:4px;background-color:\",\";position:relative;\"],function(_ref7){var theme=_ref7.theme;return theme.deprecated_bg3;});var Progress=_styled.div.withConfig({componentId:\"sc-1vobn0f-6\"})([\"height:4px;border-radius:4px;background-color:\",\";width:\",\";\"],function(_ref8){var theme=_ref8.theme,status=_ref8.status;return status==='for'?theme.accentSuccess:theme.accentFailure;},function(_ref9){var percentageString=_ref9.percentageString;return percentageString!==null&&percentageString!==void 0?percentageString:'0%';});var MarkDownWrapper=_styled.div.withConfig({componentId:\"sc-1vobn0f-7\"})([\"max-width:640px;overflow:hidden;\"]);var WrapSmall=_styled(RowBetween).withConfig({componentId:\"sc-1vobn0f-8\"})([\"\",\";\"],function(_ref10){var theme=_ref10.theme;return theme.deprecated_mediaWidth.deprecated_upToSmall(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    align-items: flex-start;\\n    flex-direction: column;\\n  \"])));});var DetailText=_styled.div.withConfig({componentId:\"sc-1vobn0f-9\"})([\"word-break:break-all;\"]);var ProposerAddressLink=_styled(ExternalLink).withConfig({componentId:\"sc-1vobn0f-10\"})([\"word-break:break-all;\"]);function getDateFromBlock(targetBlock,currentBlock,averageBlockTimeInSeconds,currentTimestamp){if(targetBlock&&currentBlock&&averageBlockTimeInSeconds&&currentTimestamp){var date=new Date();date.setTime(currentTimestamp.add(BigNumber.from(averageBlockTimeInSeconds).mul(BigNumber.from(targetBlock-currentBlock))).toNumber()*1000);return date;}return undefined;}export default function VotePage(){var _ref12,_ref13,_proposalData$forCoun,_proposalData$forCoun2,_proposalData$forCoun3,_proposalData$forCoun4,_proposalData$startBl,_forPercentage$toFixe,_proposalData$against,_againstPercentage$to,_proposalData$details;// see https://github.com/remix-run/react-router/issues/8200#issuecomment-962520661\nvar _ref11=useParams(),governorIndex=_ref11.governorIndex,id=_ref11.id;var parsedGovernorIndex=Number.parseInt(governorIndex);var _useWeb3React=useWeb3React(),chainId=_useWeb3React.chainId,account=_useWeb3React.account;var quorumAmount=useQuorum(parsedGovernorIndex);// get data for this specific proposal\nvar proposalData=useProposalData(parsedGovernorIndex,id);// update vote option based on button interactions\nvar _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),voteOption=_useState2[0],setVoteOption=_useState2[1];// modal for casting votes\nvar showVoteModal=useModalIsOpen(ApplicationModal.VOTE);var toggleVoteModal=useToggleVoteModal();// toggle for showing delegation modal\nvar showDelegateModal=useModalIsOpen(ApplicationModal.DELEGATE);var toggleDelegateModal=useToggleDelegateModal();// toggle for showing queue modal\nvar showQueueModal=useModalIsOpen(ApplicationModal.QUEUE);var toggleQueueModal=useToggleQueueModal();// toggle for showing execute modal\nvar showExecuteModal=useModalIsOpen(ApplicationModal.EXECUTE);var toggleExecuteModal=useToggleExecuteModal();// get and format date from data\nvar currentTimestamp=useCurrentBlockTimestamp();var currentBlock=useBlockNumber();var startDate=getDateFromBlock(proposalData===null||proposalData===void 0?void 0:proposalData.startBlock,currentBlock,(_ref12=chainId&&AVERAGE_BLOCK_TIME_IN_SECS[chainId])!==null&&_ref12!==void 0?_ref12:DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS,currentTimestamp);var endDate=getDateFromBlock(proposalData===null||proposalData===void 0?void 0:proposalData.endBlock,currentBlock,(_ref13=chainId&&AVERAGE_BLOCK_TIME_IN_SECS[chainId])!==null&&_ref13!==void 0?_ref13:DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS,currentTimestamp);var now=new Date();var locale=useActiveLocale();var dateFormat={year:'numeric',month:'long',day:'numeric',hour:'numeric',minute:'numeric',timeZoneName:'short'};// convert the eta to milliseconds before it's a date\nvar eta=(proposalData===null||proposalData===void 0?void 0:proposalData.eta)?new Date(proposalData.eta.mul(1000).toNumber()):undefined;// get total votes and format percentages for UI\nvar totalVotes=proposalData===null||proposalData===void 0?void 0:(_proposalData$forCoun=proposalData.forCount)===null||_proposalData$forCoun===void 0?void 0:_proposalData$forCoun.add(proposalData.againstCount);var forPercentage=totalVotes?proposalData===null||proposalData===void 0?void 0:(_proposalData$forCoun2=proposalData.forCount)===null||_proposalData$forCoun2===void 0?void 0:(_proposalData$forCoun3=_proposalData$forCoun2.asFraction)===null||_proposalData$forCoun3===void 0?void 0:(_proposalData$forCoun4=_proposalData$forCoun3.divide(totalVotes.asFraction))===null||_proposalData$forCoun4===void 0?void 0:_proposalData$forCoun4.multiply(100):undefined;var againstPercentage=forPercentage?new Fraction(100).subtract(forPercentage):undefined;// only count available votes as of the proposal start block\nvar availableVotes=useUserVotesAsOfBlock((_proposalData$startBl=proposalData===null||proposalData===void 0?void 0:proposalData.startBlock)!==null&&_proposalData$startBl!==void 0?_proposalData$startBl:undefined);// only show voting if user has > 0 votes at proposal start block and proposal is active,\nvar showVotingButtons=availableVotes&&JSBI.greaterThan(availableVotes.quotient,JSBI.BigInt(0))&&proposalData&&proposalData.status===ProposalState.ACTIVE;// we only show the button if there's an account connected and the proposal state is correct\nvar showQueueButton=account&&(proposalData===null||proposalData===void 0?void 0:proposalData.status)===ProposalState.SUCCEEDED;// we only show the button if there's an account connected and the proposal state is correct\nvar showExecuteButton=account&&(proposalData===null||proposalData===void 0?void 0:proposalData.status)===ProposalState.QUEUED;var uniBalance=useTokenBalance(account!==null&&account!==void 0?account:undefined,chainId?UNI[chainId]:undefined);var userDelegatee=useUserDelegatee();// in blurb link to home page if they are able to unlock\nvar showLinkForUnlock=Boolean(uniBalance&&JSBI.notEqual(uniBalance.quotient,JSBI.BigInt(0))&&userDelegatee===ZERO_ADDRESS);// show links in propsoal details if content is an address\n// if content is contract with common name, replace address with common name\nvar linkIfAddress=function linkIfAddress(content){if(isAddress(content)&&chainId){var _COMMON_CONTRACT_NAME,_COMMON_CONTRACT_NAME2;var commonName=(_COMMON_CONTRACT_NAME=(_COMMON_CONTRACT_NAME2=COMMON_CONTRACT_NAMES[chainId])===null||_COMMON_CONTRACT_NAME2===void 0?void 0:_COMMON_CONTRACT_NAME2[content])!==null&&_COMMON_CONTRACT_NAME!==void 0?_COMMON_CONTRACT_NAME:content;return/*#__PURE__*/_jsx(ExternalLink,{href:getExplorerLink(chainId,content,ExplorerDataType.ADDRESS),children:commonName});}return/*#__PURE__*/_jsx(\"span\",{children:content});};function MarkdownImage(_ref14){var rest=Object.assign({},(_objectDestructuringEmpty(_ref14),_ref14));return/*#__PURE__*/_jsx(\"img\",_objectSpread(_objectSpread({},rest),{},{style:{width:'100%',height:'100$',objectFit:'cover'},alt:\"\"}));}return/*#__PURE__*/_jsx(Trace,{page:PageName.VOTE_PAGE,shouldLogImpression:true,children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(PageWrapper,{gap:\"lg\",justify:\"center\",children:[/*#__PURE__*/_jsx(VoteModal,{isOpen:showVoteModal,onDismiss:toggleVoteModal,proposalId:proposalData===null||proposalData===void 0?void 0:proposalData.id,voteOption:voteOption}),/*#__PURE__*/_jsx(DelegateModal,{isOpen:showDelegateModal,onDismiss:toggleDelegateModal,title:/*#__PURE__*/_jsx(Trans,{id:\"Unlock Votes\"})}),/*#__PURE__*/_jsx(QueueModal,{isOpen:showQueueModal,onDismiss:toggleQueueModal,proposalId:proposalData===null||proposalData===void 0?void 0:proposalData.id}),/*#__PURE__*/_jsx(ExecuteModal,{isOpen:showExecuteModal,onDismiss:toggleExecuteModal,proposalId:proposalData===null||proposalData===void 0?void 0:proposalData.id}),/*#__PURE__*/_jsxs(ProposalInfo,{gap:\"lg\",justify:\"start\",children:[/*#__PURE__*/_jsxs(RowBetween,{style:{width:'100%'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{to:\"/vote\",children:/*#__PURE__*/_jsx(Trans,{id:\"<0/> All Proposals\",components:{0:/*#__PURE__*/_jsx(ArrowLeft,{size:20})}})}),proposalData&&/*#__PURE__*/_jsx(ProposalStatus,{status:proposalData.status})]}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"10px\",style:{width:'100%'},children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedLargeHeader,{style:{marginBottom:'.5rem'},children:proposalData===null||proposalData===void 0?void 0:proposalData.title}),/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(ThemedText.DeprecatedMain,{children:startDate&&startDate>now?/*#__PURE__*/_jsx(Trans,{id:\"Voting starts approximately {0}\",values:{0:startDate.toLocaleString(locale,dateFormat)}}):null})}),/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(ThemedText.DeprecatedMain,{children:endDate&&(endDate<now?/*#__PURE__*/_jsx(Trans,{id:\"Voting ended {0}\",values:{0:endDate.toLocaleString(locale,dateFormat)}}):/*#__PURE__*/_jsx(Trans,{id:\"Voting ends approximately {0}\",values:{0:endDate.toLocaleString(locale,dateFormat)}}))})}),proposalData&&proposalData.status===ProposalState.ACTIVE&&!showVotingButtons&&/*#__PURE__*/_jsx(GrayCard,{children:/*#__PURE__*/_jsxs(ThemedText.DeprecatedBlack,{children:[/*#__PURE__*/_jsx(Trans,{id:\"Only UNI votes that were self delegated or delegated to another address before block {0} are eligible for voting.\",values:{0:proposalData.startBlock}}),' ',showLinkForUnlock&&/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Trans,{id:\"<0>Unlock voting</0> to prepare for the next proposal.\",components:{0:/*#__PURE__*/_jsx(StyledInternalLink,{to:\"/vote\"})}})})]})})]}),showVotingButtons&&/*#__PURE__*/_jsxs(RowFixed,{style:{width:'100%',gap:'12px'},children:[/*#__PURE__*/_jsx(ButtonPrimary,{padding:\"8px\",$borderRadius:\"8px\",onClick:function onClick(){setVoteOption(VoteOption.For);toggleVoteModal();},children:/*#__PURE__*/_jsx(Trans,{id:\"Vote For\"})}),/*#__PURE__*/_jsx(ButtonPrimary,{padding:\"8px\",$borderRadius:\"8px\",onClick:function onClick(){setVoteOption(VoteOption.Against);toggleVoteModal();},children:/*#__PURE__*/_jsx(Trans,{id:\"Vote Against\"})})]}),showQueueButton&&/*#__PURE__*/_jsx(RowFixed,{style:{width:'100%',gap:'12px'},children:/*#__PURE__*/_jsx(ButtonPrimary,{padding:\"8px\",$borderRadius:\"8px\",onClick:function onClick(){toggleQueueModal();},children:/*#__PURE__*/_jsx(Trans,{id:\"Queue\"})})}),showExecuteButton&&/*#__PURE__*/_jsxs(_Fragment,{children:[eta&&/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{children:/*#__PURE__*/_jsx(Trans,{id:\"This proposal may be executed after {0}.\",values:{0:eta.toLocaleString(locale,dateFormat)}})})}),/*#__PURE__*/_jsx(RowFixed,{style:{width:'100%',gap:'12px'},children:/*#__PURE__*/_jsx(ButtonPrimary,{padding:\"8px\",$borderRadius:\"8px\",onClick:function onClick(){toggleExecuteModal();}// can't execute until the eta has arrived\n,disabled:!currentTimestamp||!(proposalData===null||proposalData===void 0?void 0:proposalData.eta)||currentTimestamp.lt(proposalData.eta),children:/*#__PURE__*/_jsx(Trans,{id:\"Execute\"})})})]}),/*#__PURE__*/_jsxs(CardWrapper,{children:[/*#__PURE__*/_jsx(StyledDataCard,{children:/*#__PURE__*/_jsxs(CardSection,{children:[/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",children:/*#__PURE__*/_jsxs(WrapSmall,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"For\"})}),proposalData&&/*#__PURE__*/_jsxs(ThemedText.DeprecatedBlack,{fontWeight:600,children:[proposalData.forCount.toFixed(0,{groupSeparator:','}),quorumAmount&&/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:400},children:\" / \".concat(quorumAmount.toExact({groupSeparator:','}))})]})]})}),/*#__PURE__*/_jsx(ProgressWrapper,{children:/*#__PURE__*/_jsx(Progress,{status:\"for\",percentageString:(proposalData===null||proposalData===void 0?void 0:proposalData.forCount.greaterThan(0))?\"\".concat((_forPercentage$toFixe=forPercentage===null||forPercentage===void 0?void 0:forPercentage.toFixed(0))!==null&&_forPercentage$toFixe!==void 0?_forPercentage$toFixe:0,\"%\"):'0%'})})]})}),/*#__PURE__*/_jsx(StyledDataCard,{children:/*#__PURE__*/_jsxs(CardSection,{children:[/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",children:/*#__PURE__*/_jsxs(WrapSmall,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"Against\"})}),proposalData&&/*#__PURE__*/_jsx(ThemedText.DeprecatedBlack,{fontWeight:600,children:proposalData.againstCount.toFixed(0,{groupSeparator:','})})]})}),/*#__PURE__*/_jsx(ProgressWrapper,{children:/*#__PURE__*/_jsx(Progress,{status:\"against\",percentageString:(proposalData===null||proposalData===void 0?void 0:(_proposalData$against=proposalData.againstCount)===null||_proposalData$against===void 0?void 0:_proposalData$against.greaterThan(0))?\"\".concat((_againstPercentage$to=againstPercentage===null||againstPercentage===void 0?void 0:againstPercentage.toFixed(0))!==null&&_againstPercentage$to!==void 0?_againstPercentage$to:0,\"%\"):'0%'})})]})})]}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"Details\"})}),proposalData===null||proposalData===void 0?void 0:(_proposalData$details=proposalData.details)===null||_proposalData$details===void 0?void 0:_proposalData$details.map(function(d,i){return/*#__PURE__*/_jsxs(DetailText,{children:[i+1,\": \",linkIfAddress(d.target),\".\",d.functionSig,\"(\",d.callData.split(',').map(function(content,i){return/*#__PURE__*/_jsxs(\"span\",{children:[linkIfAddress(content),d.callData.split(',').length-1===i?'':',']},i);}),\")\"]},i);})]}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"Description\"})}),/*#__PURE__*/_jsx(MarkDownWrapper,{children:/*#__PURE__*/_jsx(ReactMarkdown,{source:proposalData===null||proposalData===void 0?void 0:proposalData.description,renderers:{image:MarkdownImage}})})]}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"Proposer\"})}),/*#__PURE__*/_jsx(ProposerAddressLink,{href:(proposalData===null||proposalData===void 0?void 0:proposalData.proposer)&&chainId?getExplorerLink(chainId,proposalData===null||proposalData===void 0?void 0:proposalData.proposer,ExplorerDataType.ADDRESS):'',children:/*#__PURE__*/_jsx(ReactMarkdown,{source:proposalData===null||proposalData===void 0?void 0:proposalData.proposer})})]})]})]}),/*#__PURE__*/_jsx(SwitchLocaleLink,{})]})});}","map":{"version":3,"names":["BigNumber","Trace","PageName","Fraction","useWeb3React","ExecuteModal","QueueModal","useActiveLocale","useCurrentBlockTimestamp","JSBI","useBlockNumber","useState","ArrowLeft","ReactMarkdown","useParams","ButtonPrimary","GrayCard","AutoColumn","CardSection","DataCard","RowBetween","RowFixed","SwitchLocaleLink","DelegateModal","VoteModal","AVERAGE_BLOCK_TIME_IN_SECS","COMMON_CONTRACT_NAMES","DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS","ZERO_ADDRESS","UNI","useModalIsOpen","useToggleDelegateModal","useToggleExecuteModal","useToggleQueueModal","useToggleVoteModal","ApplicationModal","useTokenBalance","ProposalState","useProposalData","useQuorum","useUserDelegatee","useUserVotesAsOfBlock","VoteOption","ExternalLink","StyledInternalLink","ThemedText","isAddress","ExplorerDataType","getExplorerLink","ProposalStatus","PageWrapper","styled","theme","breakpoint","md","sm","ProposalInfo","backgroundSurface","ArrowWrapper","textPrimary","CardWrapper","div","StyledDataCard","deprecated_bg1","ProgressWrapper","deprecated_bg3","Progress","status","accentSuccess","accentFailure","percentageString","MarkDownWrapper","WrapSmall","deprecated_mediaWidth","deprecated_upToSmall","DetailText","ProposerAddressLink","getDateFromBlock","targetBlock","currentBlock","averageBlockTimeInSeconds","currentTimestamp","date","Date","setTime","add","from","mul","toNumber","undefined","VotePage","governorIndex","id","parsedGovernorIndex","Number","parseInt","chainId","account","quorumAmount","proposalData","voteOption","setVoteOption","showVoteModal","VOTE","toggleVoteModal","showDelegateModal","DELEGATE","toggleDelegateModal","showQueueModal","QUEUE","toggleQueueModal","showExecuteModal","EXECUTE","toggleExecuteModal","startDate","startBlock","endDate","endBlock","now","locale","dateFormat","year","month","day","hour","minute","timeZoneName","eta","totalVotes","forCount","againstCount","forPercentage","asFraction","divide","multiply","againstPercentage","subtract","availableVotes","showVotingButtons","greaterThan","quotient","BigInt","ACTIVE","showQueueButton","SUCCEEDED","showExecuteButton","QUEUED","uniBalance","userDelegatee","showLinkForUnlock","Boolean","notEqual","linkIfAddress","content","commonName","ADDRESS","MarkdownImage","rest","width","height","objectFit","VOTE_PAGE","marginBottom","title","toLocaleString","gap","For","Against","lt","toFixed","groupSeparator","fontWeight","toExact","details","map","d","i","target","functionSig","callData","split","length","description","image","proposer"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/pages/Vote/VotePage.tsx"],"sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\nimport { Trans } from '@lingui/macro'\nimport { Trace } from '@uniswap/analytics'\nimport { PageName } from '@uniswap/analytics-events'\nimport { CurrencyAmount, Fraction, Token } from '@uniswap/sdk-core'\nimport { useWeb3React } from '@web3-react/core'\nimport ExecuteModal from 'components/vote/ExecuteModal'\nimport QueueModal from 'components/vote/QueueModal'\nimport { useActiveLocale } from 'hooks/useActiveLocale'\nimport useCurrentBlockTimestamp from 'hooks/useCurrentBlockTimestamp'\nimport JSBI from 'jsbi'\nimport useBlockNumber from 'lib/hooks/useBlockNumber'\nimport ms from 'ms.macro'\nimport { useState } from 'react'\nimport { ArrowLeft } from 'react-feather'\nimport ReactMarkdown from 'react-markdown'\nimport { useParams } from 'react-router-dom'\nimport styled from 'styled-components/macro'\n\nimport { ButtonPrimary } from '../../components/Button'\nimport { GrayCard } from '../../components/Card'\nimport { AutoColumn } from '../../components/Column'\nimport { CardSection, DataCard } from '../../components/earn/styled'\nimport { RowBetween, RowFixed } from '../../components/Row'\nimport { SwitchLocaleLink } from '../../components/SwitchLocaleLink'\nimport DelegateModal from '../../components/vote/DelegateModal'\nimport VoteModal from '../../components/vote/VoteModal'\nimport {\n  AVERAGE_BLOCK_TIME_IN_SECS,\n  COMMON_CONTRACT_NAMES,\n  DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS,\n} from '../../constants/governance'\nimport { ZERO_ADDRESS } from '../../constants/misc'\nimport { UNI } from '../../constants/tokens'\nimport {\n  useModalIsOpen,\n  useToggleDelegateModal,\n  useToggleExecuteModal,\n  useToggleQueueModal,\n  useToggleVoteModal,\n} from '../../state/application/hooks'\nimport { ApplicationModal } from '../../state/application/reducer'\nimport { useTokenBalance } from '../../state/connection/hooks'\nimport {\n  ProposalData,\n  ProposalState,\n  useProposalData,\n  useQuorum,\n  useUserDelegatee,\n  useUserVotesAsOfBlock,\n} from '../../state/governance/hooks'\nimport { VoteOption } from '../../state/governance/types'\nimport { ExternalLink, StyledInternalLink, ThemedText } from '../../theme'\nimport { isAddress } from '../../utils'\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink'\nimport { ProposalStatus } from './styled'\n\nconst PageWrapper = styled(AutoColumn)`\n  padding-top: 68px;\n  width: 100%;\n\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.md}px`}) {\n    padding: 48px 8px 0px;\n  }\n\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.sm}px`}) {\n    padding-top: 20px;\n  }\n`\n\nconst ProposalInfo = styled(AutoColumn)`\n  background: ${({ theme }) => theme.backgroundSurface};\n  border-radius: 12px;\n  padding: 1.5rem;\n  position: relative;\n  max-width: 640px;\n  width: 100%;\n`\n\nconst ArrowWrapper = styled(StyledInternalLink)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 24px;\n  color: ${({ theme }) => theme.textPrimary};\n\n  a {\n    color: ${({ theme }) => theme.textPrimary};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n  }\n`\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n`\n\nconst StyledDataCard = styled(DataCard)`\n  width: 100%;\n  background: none;\n  background-color: ${({ theme }) => theme.deprecated_bg1};\n  height: fit-content;\n  z-index: 2;\n`\n\nconst ProgressWrapper = styled.div`\n  width: 100%;\n  margin-top: 1rem;\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme }) => theme.deprecated_bg3};\n  position: relative;\n`\n\nconst Progress = styled.div<{ status: 'for' | 'against'; percentageString?: string }>`\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme, status }) => (status === 'for' ? theme.accentSuccess : theme.accentFailure)};\n  width: ${({ percentageString }) => percentageString ?? '0%'};\n`\n\nconst MarkDownWrapper = styled.div`\n  max-width: 640px;\n  overflow: hidden;\n`\n\nconst WrapSmall = styled(RowBetween)`\n  ${({ theme }) => theme.deprecated_mediaWidth.deprecated_upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `};\n`\n\nconst DetailText = styled.div`\n  word-break: break-all;\n`\n\nconst ProposerAddressLink = styled(ExternalLink)`\n  word-break: break-all;\n`\n\nfunction getDateFromBlock(\n  targetBlock: number | undefined,\n  currentBlock: number | undefined,\n  averageBlockTimeInSeconds: number | undefined,\n  currentTimestamp: BigNumber | undefined\n): Date | undefined {\n  if (targetBlock && currentBlock && averageBlockTimeInSeconds && currentTimestamp) {\n    const date = new Date()\n    date.setTime(\n      currentTimestamp\n        .add(BigNumber.from(averageBlockTimeInSeconds).mul(BigNumber.from(targetBlock - currentBlock)))\n        .toNumber() * ms`1 second`\n    )\n    return date\n  }\n  return undefined\n}\n\nexport default function VotePage() {\n  // see https://github.com/remix-run/react-router/issues/8200#issuecomment-962520661\n  const { governorIndex, id } = useParams() as { governorIndex: string; id: string }\n  const parsedGovernorIndex = Number.parseInt(governorIndex)\n\n  const { chainId, account } = useWeb3React()\n\n  const quorumAmount = useQuorum(parsedGovernorIndex)\n\n  // get data for this specific proposal\n  const proposalData: ProposalData | undefined = useProposalData(parsedGovernorIndex, id)\n\n  // update vote option based on button interactions\n  const [voteOption, setVoteOption] = useState<VoteOption | undefined>(undefined)\n\n  // modal for casting votes\n  const showVoteModal = useModalIsOpen(ApplicationModal.VOTE)\n  const toggleVoteModal = useToggleVoteModal()\n\n  // toggle for showing delegation modal\n  const showDelegateModal = useModalIsOpen(ApplicationModal.DELEGATE)\n  const toggleDelegateModal = useToggleDelegateModal()\n\n  // toggle for showing queue modal\n  const showQueueModal = useModalIsOpen(ApplicationModal.QUEUE)\n  const toggleQueueModal = useToggleQueueModal()\n\n  // toggle for showing execute modal\n  const showExecuteModal = useModalIsOpen(ApplicationModal.EXECUTE)\n  const toggleExecuteModal = useToggleExecuteModal()\n\n  // get and format date from data\n  const currentTimestamp = useCurrentBlockTimestamp()\n  const currentBlock = useBlockNumber()\n  const startDate = getDateFromBlock(\n    proposalData?.startBlock,\n    currentBlock,\n    (chainId && AVERAGE_BLOCK_TIME_IN_SECS[chainId]) ?? DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS,\n    currentTimestamp\n  )\n  const endDate = getDateFromBlock(\n    proposalData?.endBlock,\n    currentBlock,\n    (chainId && AVERAGE_BLOCK_TIME_IN_SECS[chainId]) ?? DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS,\n    currentTimestamp\n  )\n  const now = new Date()\n  const locale = useActiveLocale()\n  const dateFormat: Intl.DateTimeFormatOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    timeZoneName: 'short',\n  }\n  // convert the eta to milliseconds before it's a date\n  const eta = proposalData?.eta ? new Date(proposalData.eta.mul(ms`1 second`).toNumber()) : undefined\n\n  // get total votes and format percentages for UI\n  const totalVotes = proposalData?.forCount?.add(proposalData.againstCount)\n  const forPercentage = totalVotes\n    ? proposalData?.forCount?.asFraction?.divide(totalVotes.asFraction)?.multiply(100)\n    : undefined\n  const againstPercentage = forPercentage ? new Fraction(100).subtract(forPercentage) : undefined\n\n  // only count available votes as of the proposal start block\n  const availableVotes: CurrencyAmount<Token> | undefined = useUserVotesAsOfBlock(proposalData?.startBlock ?? undefined)\n\n  // only show voting if user has > 0 votes at proposal start block and proposal is active,\n  const showVotingButtons =\n    availableVotes &&\n    JSBI.greaterThan(availableVotes.quotient, JSBI.BigInt(0)) &&\n    proposalData &&\n    proposalData.status === ProposalState.ACTIVE\n\n  // we only show the button if there's an account connected and the proposal state is correct\n  const showQueueButton = account && proposalData?.status === ProposalState.SUCCEEDED\n\n  // we only show the button if there's an account connected and the proposal state is correct\n  const showExecuteButton = account && proposalData?.status === ProposalState.QUEUED\n\n  const uniBalance: CurrencyAmount<Token> | undefined = useTokenBalance(\n    account ?? undefined,\n    chainId ? UNI[chainId] : undefined\n  )\n  const userDelegatee: string | undefined = useUserDelegatee()\n\n  // in blurb link to home page if they are able to unlock\n  const showLinkForUnlock = Boolean(\n    uniBalance && JSBI.notEqual(uniBalance.quotient, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS\n  )\n\n  // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n  const linkIfAddress = (content: string) => {\n    if (isAddress(content) && chainId) {\n      const commonName = COMMON_CONTRACT_NAMES[chainId]?.[content] ?? content\n      return (\n        <ExternalLink href={getExplorerLink(chainId, content, ExplorerDataType.ADDRESS)}>{commonName}</ExternalLink>\n      )\n    }\n    return <span>{content}</span>\n  }\n\n  function MarkdownImage({ ...rest }) {\n    return <img {...rest} style={{ width: '100%', height: '100$', objectFit: 'cover' }} alt=\"\" />\n  }\n\n  return (\n    <Trace page={PageName.VOTE_PAGE} shouldLogImpression>\n      <>\n        <PageWrapper gap=\"lg\" justify=\"center\">\n          <VoteModal\n            isOpen={showVoteModal}\n            onDismiss={toggleVoteModal}\n            proposalId={proposalData?.id}\n            voteOption={voteOption}\n          />\n          <DelegateModal\n            isOpen={showDelegateModal}\n            onDismiss={toggleDelegateModal}\n            title={<Trans>Unlock Votes</Trans>}\n          />\n          <QueueModal isOpen={showQueueModal} onDismiss={toggleQueueModal} proposalId={proposalData?.id} />\n          <ExecuteModal isOpen={showExecuteModal} onDismiss={toggleExecuteModal} proposalId={proposalData?.id} />\n          <ProposalInfo gap=\"lg\" justify=\"start\">\n            <RowBetween style={{ width: '100%' }}>\n              <ArrowWrapper to=\"/vote\">\n                <Trans>\n                  <ArrowLeft size={20} /> All Proposals\n                </Trans>\n              </ArrowWrapper>\n              {proposalData && <ProposalStatus status={proposalData.status} />}\n            </RowBetween>\n            <AutoColumn gap=\"10px\" style={{ width: '100%' }}>\n              <ThemedText.DeprecatedLargeHeader style={{ marginBottom: '.5rem' }}>\n                {proposalData?.title}\n              </ThemedText.DeprecatedLargeHeader>\n              <RowBetween>\n                <ThemedText.DeprecatedMain>\n                  {startDate && startDate > now ? (\n                    <Trans>Voting starts approximately {startDate.toLocaleString(locale, dateFormat)}</Trans>\n                  ) : null}\n                </ThemedText.DeprecatedMain>\n              </RowBetween>\n              <RowBetween>\n                <ThemedText.DeprecatedMain>\n                  {endDate &&\n                    (endDate < now ? (\n                      <Trans>Voting ended {endDate.toLocaleString(locale, dateFormat)}</Trans>\n                    ) : (\n                      <Trans>Voting ends approximately {endDate.toLocaleString(locale, dateFormat)}</Trans>\n                    ))}\n                </ThemedText.DeprecatedMain>\n              </RowBetween>\n              {proposalData && proposalData.status === ProposalState.ACTIVE && !showVotingButtons && (\n                <GrayCard>\n                  <ThemedText.DeprecatedBlack>\n                    <Trans>\n                      Only UNI votes that were self delegated or delegated to another address before block{' '}\n                      {proposalData.startBlock} are eligible for voting.\n                    </Trans>{' '}\n                    {showLinkForUnlock && (\n                      <span>\n                        <Trans>\n                          <StyledInternalLink to=\"/vote\">Unlock voting</StyledInternalLink> to prepare for the next\n                          proposal.\n                        </Trans>\n                      </span>\n                    )}\n                  </ThemedText.DeprecatedBlack>\n                </GrayCard>\n              )}\n            </AutoColumn>\n            {showVotingButtons && (\n              <RowFixed style={{ width: '100%', gap: '12px' }}>\n                <ButtonPrimary\n                  padding=\"8px\"\n                  $borderRadius=\"8px\"\n                  onClick={() => {\n                    setVoteOption(VoteOption.For)\n                    toggleVoteModal()\n                  }}\n                >\n                  <Trans>Vote For</Trans>\n                </ButtonPrimary>\n                <ButtonPrimary\n                  padding=\"8px\"\n                  $borderRadius=\"8px\"\n                  onClick={() => {\n                    setVoteOption(VoteOption.Against)\n                    toggleVoteModal()\n                  }}\n                >\n                  <Trans>Vote Against</Trans>\n                </ButtonPrimary>\n              </RowFixed>\n            )}\n            {showQueueButton && (\n              <RowFixed style={{ width: '100%', gap: '12px' }}>\n                <ButtonPrimary\n                  padding=\"8px\"\n                  $borderRadius=\"8px\"\n                  onClick={() => {\n                    toggleQueueModal()\n                  }}\n                >\n                  <Trans>Queue</Trans>\n                </ButtonPrimary>\n              </RowFixed>\n            )}\n            {showExecuteButton && (\n              <>\n                {eta && (\n                  <RowBetween>\n                    <ThemedText.DeprecatedBlack>\n                      <Trans>This proposal may be executed after {eta.toLocaleString(locale, dateFormat)}.</Trans>\n                    </ThemedText.DeprecatedBlack>\n                  </RowBetween>\n                )}\n                <RowFixed style={{ width: '100%', gap: '12px' }}>\n                  <ButtonPrimary\n                    padding=\"8px\"\n                    $borderRadius=\"8px\"\n                    onClick={() => {\n                      toggleExecuteModal()\n                    }}\n                    // can't execute until the eta has arrived\n                    disabled={!currentTimestamp || !proposalData?.eta || currentTimestamp.lt(proposalData.eta)}\n                  >\n                    <Trans>Execute</Trans>\n                  </ButtonPrimary>\n                </RowFixed>\n              </>\n            )}\n            <CardWrapper>\n              <StyledDataCard>\n                <CardSection>\n                  <AutoColumn gap=\"md\">\n                    <WrapSmall>\n                      <ThemedText.DeprecatedBlack fontWeight={600}>\n                        <Trans>For</Trans>\n                      </ThemedText.DeprecatedBlack>\n                      {proposalData && (\n                        <ThemedText.DeprecatedBlack fontWeight={600}>\n                          {proposalData.forCount.toFixed(0, { groupSeparator: ',' })}\n                          {quorumAmount && (\n                            <span style={{ fontWeight: 400 }}>{` / ${quorumAmount.toExact({\n                              groupSeparator: ',',\n                            })}`}</span>\n                          )}\n                        </ThemedText.DeprecatedBlack>\n                      )}\n                    </WrapSmall>\n                  </AutoColumn>\n                  <ProgressWrapper>\n                    <Progress\n                      status=\"for\"\n                      percentageString={\n                        proposalData?.forCount.greaterThan(0) ? `${forPercentage?.toFixed(0) ?? 0}%` : '0%'\n                      }\n                    />\n                  </ProgressWrapper>\n                </CardSection>\n              </StyledDataCard>\n              <StyledDataCard>\n                <CardSection>\n                  <AutoColumn gap=\"md\">\n                    <WrapSmall>\n                      <ThemedText.DeprecatedBlack fontWeight={600}>\n                        <Trans>Against</Trans>\n                      </ThemedText.DeprecatedBlack>\n                      {proposalData && (\n                        <ThemedText.DeprecatedBlack fontWeight={600}>\n                          {proposalData.againstCount.toFixed(0, { groupSeparator: ',' })}\n                        </ThemedText.DeprecatedBlack>\n                      )}\n                    </WrapSmall>\n                  </AutoColumn>\n                  <ProgressWrapper>\n                    <Progress\n                      status=\"against\"\n                      percentageString={\n                        proposalData?.againstCount?.greaterThan(0) ? `${againstPercentage?.toFixed(0) ?? 0}%` : '0%'\n                      }\n                    />\n                  </ProgressWrapper>\n                </CardSection>\n              </StyledDataCard>\n            </CardWrapper>\n            <AutoColumn gap=\"md\">\n              <ThemedText.DeprecatedMediumHeader fontWeight={600}>\n                <Trans>Details</Trans>\n              </ThemedText.DeprecatedMediumHeader>\n              {proposalData?.details?.map((d, i) => {\n                return (\n                  <DetailText key={i}>\n                    {i + 1}: {linkIfAddress(d.target)}.{d.functionSig}(\n                    {d.callData.split(',').map((content, i) => {\n                      return (\n                        <span key={i}>\n                          {linkIfAddress(content)}\n                          {d.callData.split(',').length - 1 === i ? '' : ','}\n                        </span>\n                      )\n                    })}\n                    )\n                  </DetailText>\n                )\n              })}\n            </AutoColumn>\n            <AutoColumn gap=\"md\">\n              <ThemedText.DeprecatedMediumHeader fontWeight={600}>\n                <Trans>Description</Trans>\n              </ThemedText.DeprecatedMediumHeader>\n              <MarkDownWrapper>\n                <ReactMarkdown\n                  source={proposalData?.description}\n                  renderers={{\n                    image: MarkdownImage,\n                  }}\n                />\n              </MarkDownWrapper>\n            </AutoColumn>\n            <AutoColumn gap=\"md\">\n              <ThemedText.DeprecatedMediumHeader fontWeight={600}>\n                <Trans>Proposer</Trans>\n              </ThemedText.DeprecatedMediumHeader>\n              <ProposerAddressLink\n                href={\n                  proposalData?.proposer && chainId\n                    ? getExplorerLink(chainId, proposalData?.proposer, ExplorerDataType.ADDRESS)\n                    : ''\n                }\n              >\n                <ReactMarkdown source={proposalData?.proposer} />\n              </ProposerAddressLink>\n            </AutoColumn>\n          </ProposalInfo>\n        </PageWrapper>\n        <SwitchLocaleLink />\n      </>\n    </Trace>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}