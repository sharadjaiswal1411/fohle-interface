{"ast":null,"code":"import{useTheme as _useTheme}from\"styled-components\";import _styled from\"styled-components\";import{SparkLineLoadingBubble}from'components/Tokens/TokenTable/TokenRow';import{curveCardinal,scaleLinear}from'd3';import{memo}from'react';import{getPriceBounds}from'../Tokens/TokenDetails/PriceChart';import LineChart from'./LineChart';import{jsx as _jsx}from\"react/jsx-runtime\";var LoadingContainer=_styled.div.withConfig({componentId:\"sc-140aiuf-0\"})([\"height:100%;display:flex;justify-content:center;align-items:center;\"]);function _SparklineChart(_ref){var width=_ref.width,height=_ref.height,tokenData=_ref.tokenData,pricePercentChange=_ref.pricePercentChange,sparklineMap=_ref.sparklineMap;var theme=_useTheme();// for sparkline\nvar pricePoints=(tokenData===null||tokenData===void 0?void 0:tokenData.address)?sparklineMap[tokenData.address]:null;// Don't display if there's one or less pricepoints\nif(!pricePoints||pricePoints.length<=1){return/*#__PURE__*/_jsx(LoadingContainer,{children:/*#__PURE__*/_jsx(SparkLineLoadingBubble,{})});}var startingPrice=pricePoints[0];var endingPrice=pricePoints[pricePoints.length-1];var widthScale=scaleLinear().domain(// the range of possible input values\n[startingPrice.timestamp,endingPrice.timestamp]).range(// the range of possible output values that the inputs should be transformed to (see https://www.d3indepth.com/scales/ for details)\n[0,110]);var rdScale=scaleLinear().domain(getPriceBounds(pricePoints)).range([30,0]);var curveTension=0.9;return/*#__PURE__*/_jsx(LineChart,{data:pricePoints,getX:function getX(p){return widthScale(p.timestamp);},getY:function getY(p){return rdScale(p.value);},curve:curveCardinal.tension(curveTension),marginTop:5,color:pricePercentChange&&pricePercentChange<0?theme.accentFailure:theme.accentSuccess,strokeWidth:1.5,width:width,height:height});}export default/*#__PURE__*/memo(_SparklineChart);","map":{"version":3,"names":["SparkLineLoadingBubble","curveCardinal","scaleLinear","memo","getPriceBounds","LineChart","LoadingContainer","styled","div","_SparklineChart","width","height","tokenData","pricePercentChange","sparklineMap","theme","useTheme","pricePoints","address","length","startingPrice","endingPrice","widthScale","domain","timestamp","range","rdScale","curveTension","p","value","tension","accentFailure","accentSuccess"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/Charts/SparklineChart.tsx"],"sourcesContent":["import { SparkLineLoadingBubble } from 'components/Tokens/TokenTable/TokenRow'\nimport { curveCardinal, scaleLinear } from 'd3'\nimport { SparklineMap, TopToken } from 'graphql/data/TopTokens'\nimport { PricePoint } from 'graphql/data/util'\nimport { memo } from 'react'\nimport styled, { useTheme } from 'styled-components/macro'\n\nimport { getPriceBounds } from '../Tokens/TokenDetails/PriceChart'\nimport LineChart from './LineChart'\n\nconst LoadingContainer = styled.div`\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\ninterface SparklineChartProps {\n  width: number\n  height: number\n  tokenData: TopToken\n  pricePercentChange: number | undefined | null\n  sparklineMap: SparklineMap\n}\n\nfunction _SparklineChart({ width, height, tokenData, pricePercentChange, sparklineMap }: SparklineChartProps) {\n  const theme = useTheme()\n  // for sparkline\n  const pricePoints = tokenData?.address ? sparklineMap[tokenData.address] : null\n\n  // Don't display if there's one or less pricepoints\n  if (!pricePoints || pricePoints.length <= 1) {\n    return (\n      <LoadingContainer>\n        <SparkLineLoadingBubble />\n      </LoadingContainer>\n    )\n  }\n\n  const startingPrice = pricePoints[0]\n  const endingPrice = pricePoints[pricePoints.length - 1]\n  const widthScale = scaleLinear()\n    .domain(\n      // the range of possible input values\n      [startingPrice.timestamp, endingPrice.timestamp]\n    )\n    .range(\n      // the range of possible output values that the inputs should be transformed to (see https://www.d3indepth.com/scales/ for details)\n      [0, 110]\n    )\n  const rdScale = scaleLinear().domain(getPriceBounds(pricePoints)).range([30, 0])\n  const curveTension = 0.9\n\n  return (\n    <LineChart\n      data={pricePoints}\n      getX={(p: PricePoint) => widthScale(p.timestamp)}\n      getY={(p: PricePoint) => rdScale(p.value)}\n      curve={curveCardinal.tension(curveTension)}\n      marginTop={5}\n      color={pricePercentChange && pricePercentChange < 0 ? theme.accentFailure : theme.accentSuccess}\n      strokeWidth={1.5}\n      width={width}\n      height={height}\n    />\n  )\n}\n\nexport default memo(_SparklineChart)\n"],"mappings":"4FAAA,OAASA,sBAAsB,KAAQ,uCAAuC,CAC9E,OAASC,aAAa,CAAEC,WAAW,KAAQ,IAAI,CAG/C,OAASC,IAAI,KAAQ,OAAO,CAG5B,OAASC,cAAc,KAAQ,mCAAmC,CAClE,MAAOC,UAAS,KAAM,aAAa,4CAEnC,GAAMC,iBAAgB,CAAGC,OAAM,CAACC,GAAG,kHAKlC,CAUD,QAASC,gBAAe,MAAsF,IAAnFC,MAAK,MAALA,KAAK,CAAEC,MAAM,MAANA,MAAM,CAAEC,SAAS,MAATA,SAAS,CAAEC,kBAAkB,MAAlBA,kBAAkB,CAAEC,YAAY,MAAZA,YAAY,CACnF,GAAMC,MAAK,CAAGC,SAAQ,EAAE,CACxB;AACA,GAAMC,YAAW,CAAG,CAAAL,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEM,OAAO,EAAGJ,YAAY,CAACF,SAAS,CAACM,OAAO,CAAC,CAAG,IAAI,CAE/E;AACA,GAAI,CAACD,WAAW,EAAIA,WAAW,CAACE,MAAM,EAAI,CAAC,CAAE,CAC3C,mBACE,KAAC,gBAAgB,wBACf,KAAC,sBAAsB,IAAG,EACT,CAEvB,CAEA,GAAMC,cAAa,CAAGH,WAAW,CAAC,CAAC,CAAC,CACpC,GAAMI,YAAW,CAAGJ,WAAW,CAACA,WAAW,CAACE,MAAM,CAAG,CAAC,CAAC,CACvD,GAAMG,WAAU,CAAGpB,WAAW,EAAE,CAC7BqB,MAAM,CACL;AACA,CAACH,aAAa,CAACI,SAAS,CAAEH,WAAW,CAACG,SAAS,CAAC,CACjD,CACAC,KAAK,CACJ;AACA,CAAC,CAAC,CAAE,GAAG,CAAC,CACT,CACH,GAAMC,QAAO,CAAGxB,WAAW,EAAE,CAACqB,MAAM,CAACnB,cAAc,CAACa,WAAW,CAAC,CAAC,CAACQ,KAAK,CAAC,CAAC,EAAE,CAAE,CAAC,CAAC,CAAC,CAChF,GAAME,aAAY,CAAG,GAAG,CAExB,mBACE,KAAC,SAAS,EACR,IAAI,CAAEV,WAAY,CAClB,IAAI,CAAE,cAACW,CAAa,QAAKN,WAAU,CAACM,CAAC,CAACJ,SAAS,CAAC,EAAC,CACjD,IAAI,CAAE,cAACI,CAAa,QAAKF,QAAO,CAACE,CAAC,CAACC,KAAK,CAAC,EAAC,CAC1C,KAAK,CAAE5B,aAAa,CAAC6B,OAAO,CAACH,YAAY,CAAE,CAC3C,SAAS,CAAE,CAAE,CACb,KAAK,CAAEd,kBAAkB,EAAIA,kBAAkB,CAAG,CAAC,CAAGE,KAAK,CAACgB,aAAa,CAAGhB,KAAK,CAACiB,aAAc,CAChG,WAAW,CAAE,GAAI,CACjB,KAAK,CAAEtB,KAAM,CACb,MAAM,CAAEC,MAAO,EACf,CAEN,CAEA,2BAAeR,IAAI,CAACM,eAAe,CAAC"},"metadata":{},"sourceType":"module"}