{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useWeb3React}from'@web3-react/core';import{CHAIN_IDS_TO_NAMES}from'constants/chains';import{useEffect,useState}from'react';import{useSearchParams}from'react-router-dom';import useParsedQueryString from'./useParsedQueryString';import usePrevious from'./usePrevious';import useSelectChain from'./useSelectChain';function getChainIdFromName(name){var entry=Object.entries(CHAIN_IDS_TO_NAMES).find(function(_ref){var _ref2=_slicedToArray(_ref,2),n=_ref2[1];return n===name;});var chainId=entry===null||entry===void 0?void 0:entry[0];return chainId?parseInt(chainId):undefined;}function getParsedChainId(parsedQs){var chain=parsedQs===null||parsedQs===void 0?void 0:parsedQs.chain;if(!chain||typeof chain!=='string')return;return getChainIdFromName(chain);}export default function useSyncChainQuery(){var _useWeb3React=useWeb3React(),chainId=_useWeb3React.chainId,isActive=_useWeb3React.isActive;var parsedQs=useParsedQueryString();var urlChainId=getParsedChainId(parsedQs);var previousUrlChainId=usePrevious(urlChainId);var selectChain=useSelectChain();// Can't use `usePrevious` because `chainId` can be undefined while activating.\nvar _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),previousChainId=_useState2[0],setPreviousChainId=_useState2[1];useEffect(function(){if(chainId&&chainId!==previousChainId){setPreviousChainId(chainId);}},[chainId,previousChainId]);var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var chainQueryManuallyUpdated=urlChainId&&urlChainId!==previousUrlChainId&&isActive;return useEffect(function(){if(chainQueryManuallyUpdated){// If the query param changed, and the chain didn't change, then activate the new chain\nselectChain(urlChainId);searchParams.delete('chain');setSearchParams(searchParams);}},[chainQueryManuallyUpdated,urlChainId,selectChain,searchParams,setSearchParams]);}","map":{"version":3,"names":["useWeb3React","CHAIN_IDS_TO_NAMES","useEffect","useState","useSearchParams","useParsedQueryString","usePrevious","useSelectChain","getChainIdFromName","name","entry","Object","entries","find","n","chainId","parseInt","undefined","getParsedChainId","parsedQs","chain","useSyncChainQuery","isActive","urlChainId","previousUrlChainId","selectChain","previousChainId","setPreviousChainId","searchParams","setSearchParams","chainQueryManuallyUpdated","delete"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/hooks/useSyncChainQuery.ts"],"sourcesContent":["import { useWeb3React } from '@web3-react/core'\nimport { CHAIN_IDS_TO_NAMES } from 'constants/chains'\nimport { ParsedQs } from 'qs'\nimport { useEffect, useState } from 'react'\nimport { useSearchParams } from 'react-router-dom'\n\nimport useParsedQueryString from './useParsedQueryString'\nimport usePrevious from './usePrevious'\nimport useSelectChain from './useSelectChain'\n\nfunction getChainIdFromName(name: string) {\n  const entry = Object.entries(CHAIN_IDS_TO_NAMES).find(([, n]) => n === name)\n  const chainId = entry?.[0]\n  return chainId ? parseInt(chainId) : undefined\n}\n\nfunction getParsedChainId(parsedQs?: ParsedQs) {\n  const chain = parsedQs?.chain\n  if (!chain || typeof chain !== 'string') return\n\n  return getChainIdFromName(chain)\n}\n\nexport default function useSyncChainQuery() {\n  const { chainId, isActive } = useWeb3React()\n  const parsedQs = useParsedQueryString()\n\n  const urlChainId = getParsedChainId(parsedQs)\n  const previousUrlChainId = usePrevious(urlChainId)\n\n  const selectChain = useSelectChain()\n\n  // Can't use `usePrevious` because `chainId` can be undefined while activating.\n  const [previousChainId, setPreviousChainId] = useState<number | undefined>(undefined)\n  useEffect(() => {\n    if (chainId && chainId !== previousChainId) {\n      setPreviousChainId(chainId)\n    }\n  }, [chainId, previousChainId])\n\n  const [searchParams, setSearchParams] = useSearchParams()\n\n  const chainQueryManuallyUpdated = urlChainId && urlChainId !== previousUrlChainId && isActive\n\n  return useEffect(() => {\n    if (chainQueryManuallyUpdated) {\n      // If the query param changed, and the chain didn't change, then activate the new chain\n      selectChain(urlChainId)\n      searchParams.delete('chain')\n      setSearchParams(searchParams)\n    }\n  }, [chainQueryManuallyUpdated, urlChainId, selectChain, searchParams, setSearchParams])\n}\n"],"mappings":"4KAAA,OAASA,YAAY,KAAQ,kBAAkB,CAC/C,OAASC,kBAAkB,KAAQ,kBAAkB,CAErD,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,eAAe,KAAQ,kBAAkB,CAElD,MAAOC,qBAAoB,KAAM,wBAAwB,CACzD,MAAOC,YAAW,KAAM,eAAe,CACvC,MAAOC,eAAc,KAAM,kBAAkB,CAE7C,QAASC,mBAAkB,CAACC,IAAY,CAAE,CACxC,GAAMC,MAAK,CAAGC,MAAM,CAACC,OAAO,CAACX,kBAAkB,CAAC,CAACY,IAAI,CAAC,gDAAIC,CAAC,gBAAMA,EAAC,GAAKL,IAAI,GAAC,CAC5E,GAAMM,QAAO,CAAGL,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAG,CAAC,CAAC,CAC1B,MAAOK,QAAO,CAAGC,QAAQ,CAACD,OAAO,CAAC,CAAGE,SAAS,CAChD,CAEA,QAASC,iBAAgB,CAACC,QAAmB,CAAE,CAC7C,GAAMC,MAAK,CAAGD,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEC,KAAK,CAC7B,GAAI,CAACA,KAAK,EAAI,MAAOA,MAAK,GAAK,QAAQ,CAAE,OAEzC,MAAOZ,mBAAkB,CAACY,KAAK,CAAC,CAClC,CAEA,cAAe,SAASC,kBAAiB,EAAG,CAC1C,kBAA8BrB,YAAY,EAAE,CAApCe,OAAO,eAAPA,OAAO,CAAEO,QAAQ,eAARA,QAAQ,CACzB,GAAMH,SAAQ,CAAGd,oBAAoB,EAAE,CAEvC,GAAMkB,WAAU,CAAGL,gBAAgB,CAACC,QAAQ,CAAC,CAC7C,GAAMK,mBAAkB,CAAGlB,WAAW,CAACiB,UAAU,CAAC,CAElD,GAAME,YAAW,CAAGlB,cAAc,EAAE,CAEpC;AACA,cAA8CJ,QAAQ,CAAqBc,SAAS,CAAC,wCAA9ES,eAAe,eAAEC,kBAAkB,eAC1CzB,SAAS,CAAC,UAAM,CACd,GAAIa,OAAO,EAAIA,OAAO,GAAKW,eAAe,CAAE,CAC1CC,kBAAkB,CAACZ,OAAO,CAAC,CAC7B,CACF,CAAC,CAAE,CAACA,OAAO,CAAEW,eAAe,CAAC,CAAC,CAE9B,qBAAwCtB,eAAe,EAAE,sDAAlDwB,YAAY,sBAAEC,eAAe,sBAEpC,GAAMC,0BAAyB,CAAGP,UAAU,EAAIA,UAAU,GAAKC,kBAAkB,EAAIF,QAAQ,CAE7F,MAAOpB,UAAS,CAAC,UAAM,CACrB,GAAI4B,yBAAyB,CAAE,CAC7B;AACAL,WAAW,CAACF,UAAU,CAAC,CACvBK,YAAY,CAACG,MAAM,CAAC,OAAO,CAAC,CAC5BF,eAAe,CAACD,YAAY,CAAC,CAC/B,CACF,CAAC,CAAE,CAACE,yBAAyB,CAAEP,UAAU,CAAEE,WAAW,CAAEG,YAAY,CAAEC,eAAe,CAAC,CAAC,CACzF"},"metadata":{},"sourceType":"module"}