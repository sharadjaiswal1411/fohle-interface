{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Contract}from'@ethersproject/contracts';import{namehash}from'@ethersproject/hash';var REGISTRAR_ABI=[{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'resolver',outputs:[{name:'resolverAddress',type:'address'}],payable:false,stateMutability:'view',type:'function'}];var REGISTRAR_ADDRESS='0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e';var RESOLVER_ABI=[{constant:true,inputs:[{internalType:'bytes32',name:'node',type:'bytes32'}],name:'contenthash',outputs:[{internalType:'bytes',name:'',type:'bytes'}],payable:false,stateMutability:'view',type:'function'}];// cache the resolver contracts since most of them are the public resolver\nfunction resolverContract(resolverAddress,provider){return new Contract(resolverAddress,RESOLVER_ABI,provider);}/**\n * Fetches and decodes the result of an ENS contenthash lookup on mainnet to a URI\n * @param ensName to resolve\n * @param provider provider to use to fetch the data\n */export default function resolveENSContentHash(_x,_x2){return _resolveENSContentHash.apply(this,arguments);}function _resolveENSContentHash(){_resolveENSContentHash=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ensName,provider){var ensRegistrarContract,hash,resolverAddress;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ensRegistrarContract=new Contract(REGISTRAR_ADDRESS,REGISTRAR_ABI,provider);hash=namehash(ensName);_context.next=4;return ensRegistrarContract.resolver(hash);case 4:resolverAddress=_context.sent;return _context.abrupt(\"return\",resolverContract(resolverAddress,provider).contenthash(hash));case 6:case\"end\":return _context.stop();}}},_callee);}));return _resolveENSContentHash.apply(this,arguments);}","map":{"version":3,"names":["Contract","namehash","REGISTRAR_ABI","constant","inputs","name","type","outputs","payable","stateMutability","REGISTRAR_ADDRESS","RESOLVER_ABI","internalType","resolverContract","resolverAddress","provider","resolveENSContentHash","ensName","ensRegistrarContract","hash","resolver","contenthash"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/lib/utils/resolveENSContentHash.ts"],"sourcesContent":["import { Provider } from '@ethersproject/abstract-provider'\nimport { Contract } from '@ethersproject/contracts'\nimport { namehash } from '@ethersproject/hash'\n\nconst REGISTRAR_ABI = [\n  {\n    constant: true,\n    inputs: [\n      {\n        name: 'node',\n        type: 'bytes32',\n      },\n    ],\n    name: 'resolver',\n    outputs: [\n      {\n        name: 'resolverAddress',\n        type: 'address',\n      },\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function',\n  },\n]\nconst REGISTRAR_ADDRESS = '0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e'\n\nconst RESOLVER_ABI = [\n  {\n    constant: true,\n    inputs: [\n      {\n        internalType: 'bytes32',\n        name: 'node',\n        type: 'bytes32',\n      },\n    ],\n    name: 'contenthash',\n    outputs: [\n      {\n        internalType: 'bytes',\n        name: '',\n        type: 'bytes',\n      },\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function',\n  },\n]\n\n// cache the resolver contracts since most of them are the public resolver\nfunction resolverContract(resolverAddress: string, provider: Provider): Contract {\n  return new Contract(resolverAddress, RESOLVER_ABI, provider)\n}\n\n/**\n * Fetches and decodes the result of an ENS contenthash lookup on mainnet to a URI\n * @param ensName to resolve\n * @param provider provider to use to fetch the data\n */\nexport default async function resolveENSContentHash(ensName: string, provider: Provider): Promise<string> {\n  const ensRegistrarContract = new Contract(REGISTRAR_ADDRESS, REGISTRAR_ABI, provider)\n  const hash = namehash(ensName)\n  const resolverAddress = await ensRegistrarContract.resolver(hash)\n  return resolverContract(resolverAddress, provider).contenthash(hash)\n}\n"],"mappings":"qVACA,OAASA,QAAQ,KAAQ,0BAA0B,CACnD,OAASC,QAAQ,KAAQ,qBAAqB,CAE9C,GAAMC,cAAa,CAAG,CACpB,CACEC,QAAQ,CAAE,IAAI,CACdC,MAAM,CAAE,CACN,CACEC,IAAI,CAAE,MAAM,CACZC,IAAI,CAAE,SACR,CAAC,CACF,CACDD,IAAI,CAAE,UAAU,CAChBE,OAAO,CAAE,CACP,CACEF,IAAI,CAAE,iBAAiB,CACvBC,IAAI,CAAE,SACR,CAAC,CACF,CACDE,OAAO,CAAE,KAAK,CACdC,eAAe,CAAE,MAAM,CACvBH,IAAI,CAAE,UACR,CAAC,CACF,CACD,GAAMI,kBAAiB,CAAG,4CAA4C,CAEtE,GAAMC,aAAY,CAAG,CACnB,CACER,QAAQ,CAAE,IAAI,CACdC,MAAM,CAAE,CACN,CACEQ,YAAY,CAAE,SAAS,CACvBP,IAAI,CAAE,MAAM,CACZC,IAAI,CAAE,SACR,CAAC,CACF,CACDD,IAAI,CAAE,aAAa,CACnBE,OAAO,CAAE,CACP,CACEK,YAAY,CAAE,OAAO,CACrBP,IAAI,CAAE,EAAE,CACRC,IAAI,CAAE,OACR,CAAC,CACF,CACDE,OAAO,CAAE,KAAK,CACdC,eAAe,CAAE,MAAM,CACvBH,IAAI,CAAE,UACR,CAAC,CACF,CAED;AACA,QAASO,iBAAgB,CAACC,eAAuB,CAAEC,QAAkB,CAAY,CAC/E,MAAO,IAAIf,SAAQ,CAACc,eAAe,CAAEH,YAAY,CAAEI,QAAQ,CAAC,CAC9D,CAEA;AACA;AACA;AACA;AACA,GACA,uBAA8BC,sBAAqB,8DAKlD,iHALc,iBAAqCC,OAAe,CAAEF,QAAkB,gKAC/EG,oBAAoB,CAAG,GAAIlB,SAAQ,CAACU,iBAAiB,CAAER,aAAa,CAAEa,QAAQ,CAAC,CAC/EI,IAAI,CAAGlB,QAAQ,CAACgB,OAAO,CAAC,uBACAC,qBAAoB,CAACE,QAAQ,CAACD,IAAI,CAAC,QAA3DL,eAAe,+CACdD,gBAAgB,CAACC,eAAe,CAAEC,QAAQ,CAAC,CAACM,WAAW,CAACF,IAAI,CAAC,wDACrE"},"metadata":{},"sourceType":"module"}