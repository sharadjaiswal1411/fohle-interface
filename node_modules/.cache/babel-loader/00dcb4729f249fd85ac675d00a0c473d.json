{"ast":null,"code":"\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getItemToCriteriaMap = exports.generateCriteriaResolvers = void 0;\nvar constants_1 = require(\"../constants\");\nvar item_1 = require(\"./item\");\nvar generateCriteriaResolvers = function (_a) {\n  var orders = _a.orders,\n    _b = _a.offerCriterias,\n    offerCriterias = _b === void 0 ? [[]] : _b,\n    _c = _a.considerationCriterias,\n    considerationCriterias = _c === void 0 ? [[]] : _c;\n  var offerCriteriaItems = orders.flatMap(function (order, orderIndex) {\n    return order.parameters.offer.map(function (item, index) {\n      return {\n        orderIndex: orderIndex,\n        item: item,\n        index: index,\n        side: constants_1.Side.OFFER\n      };\n    }).filter(function (_a) {\n      var item = _a.item;\n      return (0, item_1.isCriteriaItem)(item.itemType);\n    });\n  });\n  var considerationCriteriaItems = orders.flatMap(function (order, orderIndex) {\n    return order.parameters.consideration.map(function (item, index) {\n      return {\n        orderIndex: orderIndex,\n        item: item,\n        index: index,\n        side: constants_1.Side.CONSIDERATION\n      };\n    }).filter(function (_a) {\n      var item = _a.item;\n      return (0, item_1.isCriteriaItem)(item.itemType);\n    });\n  });\n  var mapCriteriaItemsToResolver = function (criteriaItems, criterias) {\n    return criteriaItems.map(function (_a, i) {\n      var orderIndex = _a.orderIndex,\n        item = _a.item,\n        index = _a.index,\n        side = _a.side;\n      var merkleRoot = item.identifierOrCriteria || \"0\";\n      var inputCriteria = criterias[orderIndex][i];\n      return {\n        orderIndex: orderIndex,\n        index: index,\n        side: side,\n        identifier: inputCriteria.identifier,\n        criteriaProof: merkleRoot === \"0\" ? [] : inputCriteria.proof\n      };\n    });\n  };\n  var criteriaResolvers = __spreadArray(__spreadArray([], __read(mapCriteriaItemsToResolver(offerCriteriaItems, offerCriterias)), false), __read(mapCriteriaItemsToResolver(considerationCriteriaItems, considerationCriterias)), false);\n  return criteriaResolvers;\n};\nexports.generateCriteriaResolvers = generateCriteriaResolvers;\nvar getItemToCriteriaMap = function (items, criterias) {\n  var criteriasCopy = __spreadArray([], __read(criterias), false);\n  return items.reduce(function (map, item) {\n    if ((0, item_1.isCriteriaItem)(item.itemType)) {\n      map.set(item, criteriasCopy.shift());\n    }\n    return map;\n  }, new Map());\n};\nexports.getItemToCriteriaMap = getItemToCriteriaMap;","map":{"version":3,"sources":["../../src/utils/criteria.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getItemToCriteriaMap = exports.generateCriteriaResolvers = void 0;\nvar constants_1 = require(\"../constants\");\nvar item_1 = require(\"./item\");\nvar generateCriteriaResolvers = function (_a) {\n    var orders = _a.orders, _b = _a.offerCriterias, offerCriterias = _b === void 0 ? [[]] : _b, _c = _a.considerationCriterias, considerationCriterias = _c === void 0 ? [[]] : _c;\n    var offerCriteriaItems = orders.flatMap(function (order, orderIndex) {\n        return order.parameters.offer\n            .map(function (item, index) {\n            return ({\n                orderIndex: orderIndex,\n                item: item,\n                index: index,\n                side: constants_1.Side.OFFER,\n            });\n        })\n            .filter(function (_a) {\n            var item = _a.item;\n            return (0, item_1.isCriteriaItem)(item.itemType);\n        });\n    });\n    var considerationCriteriaItems = orders.flatMap(function (order, orderIndex) {\n        return order.parameters.consideration\n            .map(function (item, index) {\n            return ({\n                orderIndex: orderIndex,\n                item: item,\n                index: index,\n                side: constants_1.Side.CONSIDERATION,\n            });\n        })\n            .filter(function (_a) {\n            var item = _a.item;\n            return (0, item_1.isCriteriaItem)(item.itemType);\n        });\n    });\n    var mapCriteriaItemsToResolver = function (criteriaItems, criterias) {\n        return criteriaItems.map(function (_a, i) {\n            var orderIndex = _a.orderIndex, item = _a.item, index = _a.index, side = _a.side;\n            var merkleRoot = item.identifierOrCriteria || \"0\";\n            var inputCriteria = criterias[orderIndex][i];\n            return {\n                orderIndex: orderIndex,\n                index: index,\n                side: side,\n                identifier: inputCriteria.identifier,\n                criteriaProof: merkleRoot === \"0\" ? [] : inputCriteria.proof,\n            };\n        });\n    };\n    var criteriaResolvers = __spreadArray(__spreadArray([], __read(mapCriteriaItemsToResolver(offerCriteriaItems, offerCriterias)), false), __read(mapCriteriaItemsToResolver(considerationCriteriaItems, considerationCriterias)), false);\n    return criteriaResolvers;\n};\nexports.generateCriteriaResolvers = generateCriteriaResolvers;\nvar getItemToCriteriaMap = function (items, criterias) {\n    var criteriasCopy = __spreadArray([], __read(criterias), false);\n    return items.reduce(function (map, item) {\n        if ((0, item_1.isCriteriaItem)(item.itemType)) {\n            map.set(item, criteriasCopy.shift());\n        }\n        return map;\n    }, new Map());\n};\nexports.getItemToCriteriaMap = getItemToCriteriaMap;\n//# sourceMappingURL=criteria.js.map"]},"metadata":{},"sourceType":"script"}