{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { ChainId } from '../util/chains';\nimport { IGasPriceProvider } from './gas-price-provider';\nvar DEFAULT_EIP_1559_SUPPORTED_CHAINS = [ChainId.MAINNET, ChainId.RINKEBY, ChainId.ROPSTEN, ChainId.GÖRLI, ChainId.POLYGON_MUMBAI\n// infura endpoint having difficulty w/ eip-1559 on kovan\n// ChainId.KOVAN,\n];\n/**\n * Gets gas prices on chain. If the chain supports EIP-1559 and has the feeHistory API,\n * uses the EIP1559 provider. Otherwise it will use a legacy provider that uses eth_gasPrice\n *\n * @export\n * @class OnChainGasPriceProvider\n */\nexport var OnChainGasPriceProvider = /*#__PURE__*/function (_IGasPriceProvider) {\n  _inherits(OnChainGasPriceProvider, _IGasPriceProvider);\n  var _super = _createSuper(OnChainGasPriceProvider);\n  function OnChainGasPriceProvider(chainId, eip1559GasPriceProvider, legacyGasPriceProvider) {\n    var _this;\n    var eipChains = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : DEFAULT_EIP_1559_SUPPORTED_CHAINS;\n    _classCallCheck(this, OnChainGasPriceProvider);\n    _this = _super.call(this);\n    _this.chainId = chainId;\n    _this.eip1559GasPriceProvider = eip1559GasPriceProvider;\n    _this.legacyGasPriceProvider = legacyGasPriceProvider;\n    _this.eipChains = eipChains;\n    return _this;\n  }\n  _createClass(OnChainGasPriceProvider, [{\n    key: \"getGasPrice\",\n    value: function () {\n      var _getGasPrice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.eipChains.includes(this.chainId)) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\", this.eip1559GasPriceProvider.getGasPrice());\n              case 2:\n                return _context.abrupt(\"return\", this.legacyGasPriceProvider.getGasPrice());\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function getGasPrice() {\n        return _getGasPrice.apply(this, arguments);\n      }\n      return getGasPrice;\n    }()\n  }]);\n  return OnChainGasPriceProvider;\n}(IGasPriceProvider);","map":{"version":3,"sources":["../../../src/providers/on-chain-gas-price-provider.ts"],"names":[],"mappings":";;;;;;AAAA,SAAS,OAAO,QAAQ,gBAAgB;AAGxC,SAAmB,iBAAiB,QAAQ,sBAAsB;AAGlE,IAAM,iCAAiC,GAAG,CACxC,OAAO,CAAC,OAAO,EACf,OAAO,CAAC,OAAO,EACf,OAAO,CAAC,OAAO,EACf,OAAO,CAAC,KAAK,EACb,OAAO,CAAC;AACR;AACA;AAAA,CACD;AAED;;;;;;AAMG;AACH,WAAa,uBAAwB;EAAA;EAAA;EACnC,iCACY,OAAgB,EAChB,uBAAgD,EAChD,sBAA8C,EACU;IAAA;IAAA,IAAxD,SAAA,uEAAuB,iCAAiC;IAAA;IAElE;IALU,MAAA,OAAO,GAAP,OAAO;IACP,MAAA,uBAAuB,GAAvB,uBAAuB;IACvB,MAAA,sBAAsB,GAAtB,sBAAsB;IACtB,MAAA,SAAS,GAAT,SAAS;IAA+C;EAGpE;EAAC;IAAA;IAAA;MAAA,4EAEM;QAAA;UAAA;YAAA;cAAA;gBAAA,KACD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC;kBAAA;kBAAA;gBAAA;gBAAA,iCAChC,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE;cAAA;gBAAA,iCAG5C,IAAI,CAAC,sBAAsB,CAAC,WAAW,EAAE;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACjD;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;EAAA;AAAA,EAhB0C,iBAAiB","sourceRoot":"","sourcesContent":["import { ChainId } from '../util/chains';\nimport { IGasPriceProvider } from './gas-price-provider';\nconst DEFAULT_EIP_1559_SUPPORTED_CHAINS = [\n    ChainId.MAINNET,\n    ChainId.RINKEBY,\n    ChainId.ROPSTEN,\n    ChainId.GÖRLI,\n    ChainId.POLYGON_MUMBAI,\n    // infura endpoint having difficulty w/ eip-1559 on kovan\n    // ChainId.KOVAN,\n];\n/**\n * Gets gas prices on chain. If the chain supports EIP-1559 and has the feeHistory API,\n * uses the EIP1559 provider. Otherwise it will use a legacy provider that uses eth_gasPrice\n *\n * @export\n * @class OnChainGasPriceProvider\n */\nexport class OnChainGasPriceProvider extends IGasPriceProvider {\n    constructor(chainId, eip1559GasPriceProvider, legacyGasPriceProvider, eipChains = DEFAULT_EIP_1559_SUPPORTED_CHAINS) {\n        super();\n        this.chainId = chainId;\n        this.eip1559GasPriceProvider = eip1559GasPriceProvider;\n        this.legacyGasPriceProvider = legacyGasPriceProvider;\n        this.eipChains = eipChains;\n    }\n    async getGasPrice() {\n        if (this.eipChains.includes(this.chainId)) {\n            return this.eip1559GasPriceProvider.getGasPrice();\n        }\n        return this.legacyGasPriceProvider.getGasPrice();\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib24tY2hhaW4tZ2FzLXByaWNlLXByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Byb3ZpZGVycy9vbi1jaGFpbi1nYXMtcHJpY2UtcHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBR3pDLE9BQU8sRUFBWSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBR25FLE1BQU0saUNBQWlDLEdBQUc7SUFDeEMsT0FBTyxDQUFDLE9BQU87SUFDZixPQUFPLENBQUMsT0FBTztJQUNmLE9BQU8sQ0FBQyxPQUFPO0lBQ2YsT0FBTyxDQUFDLEtBQUs7SUFDYixPQUFPLENBQUMsY0FBYztJQUN0Qix5REFBeUQ7SUFDekQsaUJBQWlCO0NBQ2xCLENBQUM7QUFFRjs7Ozs7O0dBTUc7QUFDSCxNQUFNLE9BQU8sdUJBQXdCLFNBQVEsaUJBQWlCO0lBQzVELFlBQ1ksT0FBZ0IsRUFDaEIsdUJBQWdELEVBQ2hELHNCQUE4QyxFQUM5QyxZQUF1QixpQ0FBaUM7UUFFbEUsS0FBSyxFQUFFLENBQUM7UUFMRSxZQUFPLEdBQVAsT0FBTyxDQUFTO1FBQ2hCLDRCQUF1QixHQUF2Qix1QkFBdUIsQ0FBeUI7UUFDaEQsMkJBQXNCLEdBQXRCLHNCQUFzQixDQUF3QjtRQUM5QyxjQUFTLEdBQVQsU0FBUyxDQUErQztJQUdwRSxDQUFDO0lBRU0sS0FBSyxDQUFDLFdBQVc7UUFDdEIsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDekMsT0FBTyxJQUFJLENBQUMsdUJBQXVCLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDbkQ7UUFFRCxPQUFPLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNuRCxDQUFDO0NBQ0YifQ=="]},"metadata":{},"sourceType":"module"}