{"ast":null,"code":"import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useMemo}from'react';import{RouterPreference}from'state/routing/slice';import{TradeState}from'state/routing/types';import{useRoutingAPITrade}from'state/routing/useRoutingAPITrade';import{useClientSideRouter}from'state/user/hooks';import useAutoRouterSupported from'./useAutoRouterSupported';import{useClientSideV3Trade}from'./useClientSideV3Trade';import useDebounce from'./useDebounce';import useIsWindowVisible from'./useIsWindowVisible';/**\n * Returns the best v2+v3 trade for a desired swap.\n * @param tradeType whether the swap is an exact in/out\n * @param amountSpecified the exact amount to swap in/out\n * @param otherCurrency the desired output/payment currency\n */export function useBestTrade(tradeType,amountSpecified,otherCurrency){var autoRouterSupported=useAutoRouterSupported();var isWindowVisible=useIsWindowVisible();var _useDebounce=useDebounce(useMemo(function(){return[amountSpecified,otherCurrency];},[amountSpecified,otherCurrency]),200),_useDebounce2=_slicedToArray(_useDebounce,2),debouncedAmount=_useDebounce2[0],debouncedOtherCurrency=_useDebounce2[1];var _useClientSideRouter=useClientSideRouter(),_useClientSideRouter2=_slicedToArray(_useClientSideRouter,1),clientSideRouter=_useClientSideRouter2[0];var routingAPITrade=useRoutingAPITrade(tradeType,autoRouterSupported&&isWindowVisible?debouncedAmount:undefined,debouncedOtherCurrency,clientSideRouter?RouterPreference.CLIENT:RouterPreference.API);var isLoading=routingAPITrade.state===TradeState.LOADING;var useFallback=!autoRouterSupported||routingAPITrade.state===TradeState.NO_ROUTE_FOUND;// only use client side router if routing api trade failed or is not supported\nvar bestV3Trade=useClientSideV3Trade(tradeType,useFallback?debouncedAmount:undefined,useFallback?debouncedOtherCurrency:undefined);// only return gas estimate from api if routing api trade is used\nreturn useMemo(function(){return _objectSpread(_objectSpread({},useFallback?bestV3Trade:routingAPITrade),isLoading?{state:TradeState.LOADING}:{});},[bestV3Trade,isLoading,routingAPITrade,useFallback]);}","map":{"version":3,"names":["useMemo","RouterPreference","TradeState","useRoutingAPITrade","useClientSideRouter","useAutoRouterSupported","useClientSideV3Trade","useDebounce","useIsWindowVisible","useBestTrade","tradeType","amountSpecified","otherCurrency","autoRouterSupported","isWindowVisible","debouncedAmount","debouncedOtherCurrency","clientSideRouter","routingAPITrade","undefined","CLIENT","API","isLoading","state","LOADING","useFallback","NO_ROUTE_FOUND","bestV3Trade"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/hooks/useBestTrade.ts"],"sourcesContent":["import { Currency, CurrencyAmount, TradeType } from '@uniswap/sdk-core'\nimport { useMemo } from 'react'\nimport { RouterPreference } from 'state/routing/slice'\nimport { InterfaceTrade, TradeState } from 'state/routing/types'\nimport { useRoutingAPITrade } from 'state/routing/useRoutingAPITrade'\nimport { useClientSideRouter } from 'state/user/hooks'\n\nimport useAutoRouterSupported from './useAutoRouterSupported'\nimport { useClientSideV3Trade } from './useClientSideV3Trade'\nimport useDebounce from './useDebounce'\nimport useIsWindowVisible from './useIsWindowVisible'\n\n/**\n * Returns the best v2+v3 trade for a desired swap.\n * @param tradeType whether the swap is an exact in/out\n * @param amountSpecified the exact amount to swap in/out\n * @param otherCurrency the desired output/payment currency\n */\nexport function useBestTrade(\n  tradeType: TradeType,\n  amountSpecified?: CurrencyAmount<Currency>,\n  otherCurrency?: Currency\n): {\n  state: TradeState\n  trade: InterfaceTrade<Currency, Currency, TradeType> | undefined\n} {\n  const autoRouterSupported = useAutoRouterSupported()\n  const isWindowVisible = useIsWindowVisible()\n\n  const [debouncedAmount, debouncedOtherCurrency] = useDebounce(\n    useMemo(() => [amountSpecified, otherCurrency], [amountSpecified, otherCurrency]),\n    200\n  )\n\n  const [clientSideRouter] = useClientSideRouter()\n  const routingAPITrade = useRoutingAPITrade(\n    tradeType,\n    autoRouterSupported && isWindowVisible ? debouncedAmount : undefined,\n    debouncedOtherCurrency,\n    clientSideRouter ? RouterPreference.CLIENT : RouterPreference.API\n  )\n\n  const isLoading = routingAPITrade.state === TradeState.LOADING\n  const useFallback = !autoRouterSupported || routingAPITrade.state === TradeState.NO_ROUTE_FOUND\n\n  // only use client side router if routing api trade failed or is not supported\n  const bestV3Trade = useClientSideV3Trade(\n    tradeType,\n    useFallback ? debouncedAmount : undefined,\n    useFallback ? debouncedOtherCurrency : undefined\n  )\n\n  // only return gas estimate from api if routing api trade is used\n  return useMemo(\n    () => ({\n      ...(useFallback ? bestV3Trade : routingAPITrade),\n      ...(isLoading ? { state: TradeState.LOADING } : {}),\n    }),\n    [bestV3Trade, isLoading, routingAPITrade, useFallback]\n  )\n}\n"],"mappings":"uVACA,OAASA,OAAO,KAAQ,OAAO,CAC/B,OAASC,gBAAgB,KAAQ,qBAAqB,CACtD,OAAyBC,UAAU,KAAQ,qBAAqB,CAChE,OAASC,kBAAkB,KAAQ,kCAAkC,CACrE,OAASC,mBAAmB,KAAQ,kBAAkB,CAEtD,MAAOC,uBAAsB,KAAM,0BAA0B,CAC7D,OAASC,oBAAoB,KAAQ,wBAAwB,CAC7D,MAAOC,YAAW,KAAM,eAAe,CACvC,MAAOC,mBAAkB,KAAM,sBAAsB,CAErD;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAASC,aAAY,CAC1BC,SAAoB,CACpBC,eAA0C,CAC1CC,aAAwB,CAIxB,CACA,GAAMC,oBAAmB,CAAGR,sBAAsB,EAAE,CACpD,GAAMS,gBAAe,CAAGN,kBAAkB,EAAE,CAE5C,iBAAkDD,WAAW,CAC3DP,OAAO,CAAC,iBAAM,CAACW,eAAe,CAAEC,aAAa,CAAC,GAAE,CAACD,eAAe,CAAEC,aAAa,CAAC,CAAC,CACjF,GAAG,CACJ,8CAHMG,eAAe,kBAAEC,sBAAsB,kBAK9C,yBAA2BZ,mBAAmB,EAAE,8DAAzCa,gBAAgB,0BACvB,GAAMC,gBAAe,CAAGf,kBAAkB,CACxCO,SAAS,CACTG,mBAAmB,EAAIC,eAAe,CAAGC,eAAe,CAAGI,SAAS,CACpEH,sBAAsB,CACtBC,gBAAgB,CAAGhB,gBAAgB,CAACmB,MAAM,CAAGnB,gBAAgB,CAACoB,GAAG,CAClE,CAED,GAAMC,UAAS,CAAGJ,eAAe,CAACK,KAAK,GAAKrB,UAAU,CAACsB,OAAO,CAC9D,GAAMC,YAAW,CAAG,CAACZ,mBAAmB,EAAIK,eAAe,CAACK,KAAK,GAAKrB,UAAU,CAACwB,cAAc,CAE/F;AACA,GAAMC,YAAW,CAAGrB,oBAAoB,CACtCI,SAAS,CACTe,WAAW,CAAGV,eAAe,CAAGI,SAAS,CACzCM,WAAW,CAAGT,sBAAsB,CAAGG,SAAS,CACjD,CAED;AACA,MAAOnB,QAAO,CACZ,iDACMyB,WAAW,CAAGE,WAAW,CAAGT,eAAe,EAC3CI,SAAS,CAAG,CAAEC,KAAK,CAAErB,UAAU,CAACsB,OAAQ,CAAC,CAAG,CAAC,CAAC,GAClD,CACF,CAACG,WAAW,CAAEL,SAAS,CAAEJ,eAAe,CAAEO,WAAW,CAAC,CACvD,CACH"},"metadata":{},"sourceType":"module"}