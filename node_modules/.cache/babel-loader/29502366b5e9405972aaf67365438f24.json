{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _ref,_ref2,_parseLocale2;import{DEFAULT_LOCALE,SUPPORTED_LOCALES}from'constants/locales';import{useMemo}from'react';import store from'state';import{useUserLocale}from'state/user/hooks';import useParsedQueryString from'./useParsedQueryString';import{parsedQueryString}from'./useParsedQueryString';/**\n * Given a locale string (e.g. from user agent), return the best match for corresponding SupportedLocale\n * @param maybeSupportedLocale the fuzzy locale identifier\n */function parseLocale(maybeSupportedLocale){if(typeof maybeSupportedLocale!=='string')return undefined;var lowerMaybeSupportedLocale=maybeSupportedLocale.toLowerCase();return SUPPORTED_LOCALES.find(function(locale){return locale.toLowerCase()===lowerMaybeSupportedLocale||locale.split('-')[0]===lowerMaybeSupportedLocale;});}/**\n * Returns the supported locale read from the user agent (navigator)\n */export function navigatorLocale(){if(!navigator.language)return undefined;var _navigator$language$s=navigator.language.split('-'),_navigator$language$s2=_slicedToArray(_navigator$language$s,2),language=_navigator$language$s2[0],region=_navigator$language$s2[1];if(region){var _parseLocale;return(_parseLocale=parseLocale(\"\".concat(language,\"-\").concat(region.toUpperCase())))!==null&&_parseLocale!==void 0?_parseLocale:parseLocale(language);}return parseLocale(language);}function storeLocale(){var _store$getState$user$;return(_store$getState$user$=store.getState().user.userLocale)!==null&&_store$getState$user$!==void 0?_store$getState$user$:undefined;}export var initialLocale=(_ref=(_ref2=(_parseLocale2=parseLocale(parsedQueryString().lng))!==null&&_parseLocale2!==void 0?_parseLocale2:storeLocale())!==null&&_ref2!==void 0?_ref2:navigatorLocale())!==null&&_ref!==void 0?_ref:DEFAULT_LOCALE;function useUrlLocale(){var parsed=useParsedQueryString();return parseLocale(parsed.lng);}/**\n * Returns the currently active locale, from a combination of user agent, query string, and user settings stored in redux\n * Stores the query string locale in redux (if set) to persist across sessions\n */export function useActiveLocale(){var urlLocale=useUrlLocale();var userLocale=useUserLocale();return useMemo(function(){var _ref3,_ref4;return(_ref3=(_ref4=urlLocale!==null&&urlLocale!==void 0?urlLocale:userLocale)!==null&&_ref4!==void 0?_ref4:navigatorLocale())!==null&&_ref3!==void 0?_ref3:DEFAULT_LOCALE;},[urlLocale,userLocale]);}","map":{"version":3,"names":["DEFAULT_LOCALE","SUPPORTED_LOCALES","useMemo","store","useUserLocale","useParsedQueryString","parsedQueryString","parseLocale","maybeSupportedLocale","undefined","lowerMaybeSupportedLocale","toLowerCase","find","locale","split","navigatorLocale","navigator","language","region","toUpperCase","storeLocale","getState","user","userLocale","initialLocale","lng","useUrlLocale","parsed","useActiveLocale","urlLocale"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/hooks/useActiveLocale.ts"],"sourcesContent":["import { DEFAULT_LOCALE, SUPPORTED_LOCALES, SupportedLocale } from 'constants/locales'\nimport { useMemo } from 'react'\nimport store from 'state'\nimport { useUserLocale } from 'state/user/hooks'\n\nimport useParsedQueryString from './useParsedQueryString'\nimport { parsedQueryString } from './useParsedQueryString'\n\n/**\n * Given a locale string (e.g. from user agent), return the best match for corresponding SupportedLocale\n * @param maybeSupportedLocale the fuzzy locale identifier\n */\nfunction parseLocale(maybeSupportedLocale: unknown): SupportedLocale | undefined {\n  if (typeof maybeSupportedLocale !== 'string') return undefined\n  const lowerMaybeSupportedLocale = maybeSupportedLocale.toLowerCase()\n  return SUPPORTED_LOCALES.find(\n    (locale) => locale.toLowerCase() === lowerMaybeSupportedLocale || locale.split('-')[0] === lowerMaybeSupportedLocale\n  )\n}\n\n/**\n * Returns the supported locale read from the user agent (navigator)\n */\nexport function navigatorLocale(): SupportedLocale | undefined {\n  if (!navigator.language) return undefined\n\n  const [language, region] = navigator.language.split('-')\n\n  if (region) {\n    return parseLocale(`${language}-${region.toUpperCase()}`) ?? parseLocale(language)\n  }\n\n  return parseLocale(language)\n}\n\nfunction storeLocale(): SupportedLocale | undefined {\n  return store.getState().user.userLocale ?? undefined\n}\n\nexport const initialLocale =\n  parseLocale(parsedQueryString().lng) ?? storeLocale() ?? navigatorLocale() ?? DEFAULT_LOCALE\n\nfunction useUrlLocale() {\n  const parsed = useParsedQueryString()\n  return parseLocale(parsed.lng)\n}\n\n/**\n * Returns the currently active locale, from a combination of user agent, query string, and user settings stored in redux\n * Stores the query string locale in redux (if set) to persist across sessions\n */\nexport function useActiveLocale(): SupportedLocale {\n  const urlLocale = useUrlLocale()\n  const userLocale = useUserLocale()\n  return useMemo(() => urlLocale ?? userLocale ?? navigatorLocale() ?? DEFAULT_LOCALE, [urlLocale, userLocale])\n}\n"],"mappings":"yMAAA,OAASA,cAAc,CAAEC,iBAAiB,KAAyB,mBAAmB,CACtF,OAASC,OAAO,KAAQ,OAAO,CAC/B,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,aAAa,KAAQ,kBAAkB,CAEhD,MAAOC,qBAAoB,KAAM,wBAAwB,CACzD,OAASC,iBAAiB,KAAQ,wBAAwB,CAE1D;AACA;AACA;AACA,GACA,QAASC,YAAW,CAACC,oBAA6B,CAA+B,CAC/E,GAAI,MAAOA,qBAAoB,GAAK,QAAQ,CAAE,MAAOC,UAAS,CAC9D,GAAMC,0BAAyB,CAAGF,oBAAoB,CAACG,WAAW,EAAE,CACpE,MAAOV,kBAAiB,CAACW,IAAI,CAC3B,SAACC,MAAM,QAAKA,OAAM,CAACF,WAAW,EAAE,GAAKD,yBAAyB,EAAIG,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAKJ,yBAAyB,GACrH,CACH,CAEA;AACA;AACA,GACA,MAAO,SAASK,gBAAe,EAAgC,CAC7D,GAAI,CAACC,SAAS,CAACC,QAAQ,CAAE,MAAOR,UAAS,CAEzC,0BAA2BO,SAAS,CAACC,QAAQ,CAACH,KAAK,CAAC,GAAG,CAAC,gEAAjDG,QAAQ,2BAAEC,MAAM,2BAEvB,GAAIA,MAAM,CAAE,kBACV,oBAAOX,WAAW,WAAIU,QAAQ,aAAIC,MAAM,CAACC,WAAW,EAAE,EAAG,6CAAIZ,WAAW,CAACU,QAAQ,CAAC,CACpF,CAEA,MAAOV,YAAW,CAACU,QAAQ,CAAC,CAC9B,CAEA,QAASG,YAAW,EAAgC,2BAClD,6BAAOjB,KAAK,CAACkB,QAAQ,EAAE,CAACC,IAAI,CAACC,UAAU,+DAAId,SAAS,CACtD,CAEA,MAAO,IAAMe,cAAa,6BACxBjB,WAAW,CAACD,iBAAiB,EAAE,CAACmB,GAAG,CAAC,+CAAIL,WAAW,EAAE,+BAAIL,eAAe,EAAE,6BAAIf,cAAc,CAE9F,QAAS0B,aAAY,EAAG,CACtB,GAAMC,OAAM,CAAGtB,oBAAoB,EAAE,CACrC,MAAOE,YAAW,CAACoB,MAAM,CAACF,GAAG,CAAC,CAChC,CAEA;AACA;AACA;AACA,GACA,MAAO,SAASG,gBAAe,EAAoB,CACjD,GAAMC,UAAS,CAAGH,YAAY,EAAE,CAChC,GAAMH,WAAU,CAAGnB,aAAa,EAAE,CAClC,MAAOF,QAAO,CAAC,+CAAM2B,SAAS,SAATA,SAAS,UAATA,SAAS,CAAIN,UAAU,+BAAIR,eAAe,EAAE,+BAAIf,cAAc,GAAE,CAAC6B,SAAS,CAAEN,UAAU,CAAC,CAAC,CAC/G"},"metadata":{},"sourceType":"module"}