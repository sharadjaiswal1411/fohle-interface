{"ast":null,"code":"import{TradeType}from'@uniswap/sdk-core';import{useWeb3React}from'@web3-react/core';import{usePermit2Enabled}from'featureFlags/flags/permit2';import{useSwapCallback as useLibSwapCallBack}from'lib/hooks/swap/useSwapCallback';import{useMemo}from'react';import{useTransactionAdder}from'../state/transactions/hooks';import{TransactionType}from'../state/transactions/types';import{currencyId}from'../utils/currencyId';import useENS from'./useENS';import useTransactionDeadline from'./useTransactionDeadline';import{useUniversalRouterSwapCallback}from'./useUniversalRouter';// returns a function that will execute a swap, if the parameters are all valid\n// and the user has approved the slippage adjusted input amount for the trade\nexport function useSwapCallback(trade,// trade to execute, required\nallowedSlippage,// in bips\nrecipientAddressOrName,// the ENS name or address of the recipient of the trade, or null if swap should be returned to sender\nsignatureData,permit){var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var deadline=useTransactionDeadline();var addTransaction=useTransactionAdder();var _useENS=useENS(recipientAddressOrName),recipientAddress=_useENS.address;var recipient=recipientAddressOrName===null?account:recipientAddress;var permit2Enabled=usePermit2Enabled();var _useLibSwapCallBack=useLibSwapCallBack({trade:permit2Enabled?undefined:trade,allowedSlippage:allowedSlippage,recipientAddressOrName:recipient,signatureData:signatureData,deadline:deadline}),state=_useLibSwapCallBack.state,libCallback=_useLibSwapCallBack.callback,error=_useLibSwapCallBack.error;var universalRouterSwapCallback=useUniversalRouterSwapCallback(permit2Enabled?trade:undefined,{slippageTolerance:allowedSlippage,deadline:deadline,permit:permit===null||permit===void 0?void 0:permit.signature});var swapCallback=permit2Enabled?universalRouterSwapCallback:libCallback;var callback=useMemo(function(){if(!trade||!swapCallback)return null;return function(){return swapCallback().then(function(response){addTransaction(response,trade.tradeType===TradeType.EXACT_INPUT?{type:TransactionType.SWAP,tradeType:TradeType.EXACT_INPUT,inputCurrencyId:currencyId(trade.inputAmount.currency),inputCurrencyAmountRaw:trade.inputAmount.quotient.toString(),expectedOutputCurrencyAmountRaw:trade.outputAmount.quotient.toString(),outputCurrencyId:currencyId(trade.outputAmount.currency),minimumOutputCurrencyAmountRaw:trade.minimumAmountOut(allowedSlippage).quotient.toString()}:{type:TransactionType.SWAP,tradeType:TradeType.EXACT_OUTPUT,inputCurrencyId:currencyId(trade.inputAmount.currency),maximumInputCurrencyAmountRaw:trade.maximumAmountIn(allowedSlippage).quotient.toString(),outputCurrencyId:currencyId(trade.outputAmount.currency),outputCurrencyAmountRaw:trade.outputAmount.quotient.toString(),expectedInputCurrencyAmountRaw:trade.inputAmount.quotient.toString()});return response.hash;});};},[addTransaction,allowedSlippage,swapCallback,trade]);return{state:state,callback:callback,error:error};}","map":{"version":3,"names":["TradeType","useWeb3React","usePermit2Enabled","useSwapCallback","useLibSwapCallBack","useMemo","useTransactionAdder","TransactionType","currencyId","useENS","useTransactionDeadline","useUniversalRouterSwapCallback","trade","allowedSlippage","recipientAddressOrName","signatureData","permit","account","deadline","addTransaction","recipientAddress","address","recipient","permit2Enabled","undefined","state","libCallback","callback","error","universalRouterSwapCallback","slippageTolerance","signature","swapCallback","then","response","tradeType","EXACT_INPUT","type","SWAP","inputCurrencyId","inputAmount","currency","inputCurrencyAmountRaw","quotient","toString","expectedOutputCurrencyAmountRaw","outputAmount","outputCurrencyId","minimumOutputCurrencyAmountRaw","minimumAmountOut","EXACT_OUTPUT","maximumInputCurrencyAmountRaw","maximumAmountIn","outputCurrencyAmountRaw","expectedInputCurrencyAmountRaw","hash"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/hooks/useSwapCallback.tsx"],"sourcesContent":["import { Trade } from '@uniswap/router-sdk'\nimport { Currency, Percent, TradeType } from '@uniswap/sdk-core'\nimport { useWeb3React } from '@web3-react/core'\nimport { usePermit2Enabled } from 'featureFlags/flags/permit2'\nimport { SwapCallbackState, useSwapCallback as useLibSwapCallBack } from 'lib/hooks/swap/useSwapCallback'\nimport { ReactNode, useMemo } from 'react'\n\nimport { useTransactionAdder } from '../state/transactions/hooks'\nimport { TransactionType } from '../state/transactions/types'\nimport { currencyId } from '../utils/currencyId'\nimport useENS from './useENS'\nimport { SignatureData } from './useERC20Permit'\nimport { Permit } from './usePermit2'\nimport useTransactionDeadline from './useTransactionDeadline'\nimport { useUniversalRouterSwapCallback } from './useUniversalRouter'\n\n// returns a function that will execute a swap, if the parameters are all valid\n// and the user has approved the slippage adjusted input amount for the trade\nexport function useSwapCallback(\n  trade: Trade<Currency, Currency, TradeType> | undefined, // trade to execute, required\n  allowedSlippage: Percent, // in bips\n  recipientAddressOrName: string | null, // the ENS name or address of the recipient of the trade, or null if swap should be returned to sender\n  signatureData: SignatureData | undefined | null,\n  permit: Permit | undefined\n): { state: SwapCallbackState; callback: null | (() => Promise<string>); error: ReactNode | null } {\n  const { account } = useWeb3React()\n\n  const deadline = useTransactionDeadline()\n\n  const addTransaction = useTransactionAdder()\n\n  const { address: recipientAddress } = useENS(recipientAddressOrName)\n  const recipient = recipientAddressOrName === null ? account : recipientAddress\n\n  const permit2Enabled = usePermit2Enabled()\n  const {\n    state,\n    callback: libCallback,\n    error,\n  } = useLibSwapCallBack({\n    trade: permit2Enabled ? undefined : trade,\n    allowedSlippage,\n    recipientAddressOrName: recipient,\n    signatureData,\n    deadline,\n  })\n  const universalRouterSwapCallback = useUniversalRouterSwapCallback(permit2Enabled ? trade : undefined, {\n    slippageTolerance: allowedSlippage,\n    deadline,\n    permit: permit?.signature,\n  })\n  const swapCallback = permit2Enabled ? universalRouterSwapCallback : libCallback\n\n  const callback = useMemo(() => {\n    if (!trade || !swapCallback) return null\n    return () =>\n      swapCallback().then((response) => {\n        addTransaction(\n          response,\n          trade.tradeType === TradeType.EXACT_INPUT\n            ? {\n                type: TransactionType.SWAP,\n                tradeType: TradeType.EXACT_INPUT,\n                inputCurrencyId: currencyId(trade.inputAmount.currency),\n                inputCurrencyAmountRaw: trade.inputAmount.quotient.toString(),\n                expectedOutputCurrencyAmountRaw: trade.outputAmount.quotient.toString(),\n                outputCurrencyId: currencyId(trade.outputAmount.currency),\n                minimumOutputCurrencyAmountRaw: trade.minimumAmountOut(allowedSlippage).quotient.toString(),\n              }\n            : {\n                type: TransactionType.SWAP,\n                tradeType: TradeType.EXACT_OUTPUT,\n                inputCurrencyId: currencyId(trade.inputAmount.currency),\n                maximumInputCurrencyAmountRaw: trade.maximumAmountIn(allowedSlippage).quotient.toString(),\n                outputCurrencyId: currencyId(trade.outputAmount.currency),\n                outputCurrencyAmountRaw: trade.outputAmount.quotient.toString(),\n                expectedInputCurrencyAmountRaw: trade.inputAmount.quotient.toString(),\n              }\n        )\n        return response.hash\n      })\n  }, [addTransaction, allowedSlippage, swapCallback, trade])\n\n  return {\n    state,\n    callback,\n    error,\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}