{"ast":null,"code":"import _toConsumableArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _styled from\"styled-components\";import{BigNumber}from'@ethersproject/bignumber';import{formatEther}from'@ethersproject/units';import{sendAnalyticsEvent}from'@uniswap/analytics';import{EventName}from'@uniswap/analytics-events';import{useWeb3React}from'@web3-react/core';import{useIsNftDetailsPage,useIsNftPage,useIsNftProfilePage}from'hooks/useIsNftPage';import{BagFooter}from'nft/components/bag/BagFooter';import ListingModal from'nft/components/bag/profile/ListingModal';import{Box}from'nft/components/Box';import{Portal}from'nft/components/common/Portal';import{Column}from'nft/components/Flex';import{Overlay}from'nft/components/modals/Overlay';import{buttonTextMedium,commonButtonStyles}from'nft/css/common.css';import{useBag,useIsMobile,useProfilePageState,useSellAsset,useSendTransaction,useTransactionResponse}from'nft/hooks';import{fetchRoute}from'nft/queries';import{BagItemStatus,BagStatus,ProfilePageStateType,TxStateType}from'nft/types';import{buildSellObject,fetchPrice,formatAssetEventProperties,recalculateBagUsingPooledAssets,sortUpdatedAssets}from'nft/utils';import{combineBuyItemsWithTxRoute}from'nft/utils/txRoute/combineItemsWithTxRoute';import{useCallback,useEffect,useMemo,useRef,useState}from'react';import{useQuery,useQueryClient}from'react-query';import{Z_INDEX}from'theme/zIndex';import shallow from'zustand/shallow';import*as styles from'./Bag.css';import{BagContent}from'./BagContent';import{BagHeader}from'./BagHeader';import EmptyState from'./EmptyContent';import{ProfileBagContent}from'./profile/ProfileBagContent';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BAG_WIDTH=320;export var XXXL_BAG_WIDTH=360;var BagContainer=_styled.div.withConfig({componentId:\"sc-1cpp7nx-0\"})([\"position:fixed;display:flex;flex-direction:column;top:88px;right:20px;width:\",\"px;height:calc(100vh - 108px);background:\",\";border:1px solid \",\";border-radius:16px;box-shadow:\",\";z-index:\",\";@media only screen and (max-width:\",\"){right:0px;top:0px;width:100%;height:100%;border-radius:0px;border:none;}@media only screen and (min-width:\",\"){width:\",\"px;}\"],BAG_WIDTH,function(_ref){var theme=_ref.theme;return theme.backgroundSurface;},function(_ref2){var theme=_ref2.theme;return theme.backgroundOutline;},function(_ref3){var theme=_ref3.theme;return theme.shallowShadow;},function(_ref4){var raiseZIndex=_ref4.raiseZIndex;return raiseZIndex?Z_INDEX.modalOverTooltip:3;},function(_ref5){var theme=_ref5.theme;return\"\".concat(theme.breakpoint.sm,\"px\");},function(_ref6){var theme=_ref6.theme;return\"\".concat(theme.breakpoint.xxxl,\"px\");},XXXL_BAG_WIDTH);var DetailsPageBackground=_styled.div.withConfig({componentId:\"sc-1cpp7nx-1\"})([\"position:fixed;background:rgba(0,0,0,0.7);top:0px;width:100%;height:100%;\"]);var ScrollingIndicator=function ScrollingIndicator(_ref7){var top=_ref7.top,show=_ref7.show;return/*#__PURE__*/_jsx(Box,{marginX:\"24\",borderWidth:\"1px\",borderStyle:\"solid\",borderColor:\"transparent\",borderTopColor:top?'transparent':'backgroundOutline',borderBottomColor:top?'backgroundOutline':'transparent',opacity:show?'1':'0',transition:\"250\"});};var Bag=function Bag(){var _useWeb3React=useWeb3React(),account=_useWeb3React.account,provider=_useWeb3React.provider;var _useSellAsset=useSellAsset(function(_ref8){var reset=_ref8.reset,sellAssets=_ref8.sellAssets;return{resetSellAssets:reset,sellAssets:sellAssets};},shallow),resetSellAssets=_useSellAsset.resetSellAssets,sellAssets=_useSellAsset.sellAssets;var _useProfilePageState=useProfilePageState(function(_ref9){var setProfilePageState=_ref9.setProfilePageState,state=_ref9.state;return{profilePageState:state,setProfilePageState:setProfilePageState};},shallow),profilePageState=_useProfilePageState.profilePageState,setProfilePageState=_useProfilePageState.setProfilePageState;var _useBag=useBag(function(state){return _objectSpread(_objectSpread({},state),{},{bagIsLocked:state.isLocked,uncheckedItemsInBag:state.itemsInBag});},shallow),bagStatus=_useBag.bagStatus,setBagStatus=_useBag.setBagStatus,didOpenUnavailableAssets=_useBag.didOpenUnavailableAssets,setDidOpenUnavailableAssets=_useBag.setDidOpenUnavailableAssets,bagIsLocked=_useBag.bagIsLocked,setLocked=_useBag.setLocked,reset=_useBag.reset,setItemsInBag=_useBag.setItemsInBag,bagExpanded=_useBag.bagExpanded,toggleBag=_useBag.toggleBag,setTotalEthPrice=_useBag.setTotalEthPrice,setTotalUsdPrice=_useBag.setTotalUsdPrice,setBagExpanded=_useBag.setBagExpanded;var _useBag2=useBag(function(_ref10){var itemsInBag=_ref10.itemsInBag;return{uncheckedItemsInBag:itemsInBag};}),uncheckedItemsInBag=_useBag2.uncheckedItemsInBag;var isProfilePage=useIsNftProfilePage();var isDetailsPage=useIsNftDetailsPage();var isNFTPage=useIsNftPage();var isMobile=useIsMobile();var sendTransaction=useSendTransaction(function(state){return state.sendTransaction;});var transactionState=useSendTransaction(function(state){return state.state;});var setTransactionState=useSendTransaction(function(state){return state.setState;});var transactionStateRef=useRef(transactionState);var _useTransactionRespon=useTransactionResponse(function(state){return[state.setTransactionResponse];}),_useTransactionRespon2=_slicedToArray(_useTransactionRespon,1),setTransactionResponse=_useTransactionRespon2[0];var queryClient=useQueryClient();var itemsInBag=useMemo(function(){return recalculateBagUsingPooledAssets(uncheckedItemsInBag);},[uncheckedItemsInBag]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModalOpen=_useState2[0],setModalIsOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),userCanScroll=_useState4[0],setUserCanScroll=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),scrollProgress=_useState6[0],setScrollProgress=_useState6[1];var scrollRef=function scrollRef(node){if(node!==null){var canScroll=node.scrollHeight>node.clientHeight;canScroll!==userCanScroll&&setUserCanScroll(canScroll);}};var _useQuery=useQuery(['fetchPrice',{}],function(){return fetchPrice();},{}),fetchedPriceData=_useQuery.data;var _useMemo=useMemo(function(){var totalEthPrice=itemsInBag.reduce(function(total,item){return item.status!==BagItemStatus.UNAVAILABLE?total.add(BigNumber.from(item.asset.updatedPriceInfo?item.asset.updatedPriceInfo.ETHPrice:item.asset.priceInfo.ETHPrice)):total;},BigNumber.from(0));var totalUsdPrice=fetchedPriceData?parseFloat(formatEther(totalEthPrice))*fetchedPriceData:undefined;return{totalEthPrice:totalEthPrice,totalUsdPrice:totalUsdPrice};},[itemsInBag,fetchedPriceData]),totalEthPrice=_useMemo.totalEthPrice,totalUsdPrice=_useMemo.totalUsdPrice;var purchaseAssets=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(routingData){var purchaseResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!provider||!routingData)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return sendTransaction(provider===null||provider===void 0?void 0:provider.getSigner(),itemsInBag.filter(function(item){return item.status!==BagItemStatus.UNAVAILABLE;}).map(function(item){return item.asset;}),routingData);case 4:purchaseResponse=_context.sent;if(purchaseResponse&&(transactionStateRef.current===TxStateType.Success||transactionStateRef.current===TxStateType.Failed)){setLocked(false);setModalIsOpen(false);setTransactionResponse(purchaseResponse);setBagExpanded({bagExpanded:false});reset();}case 6:case\"end\":return _context.stop();}}},_callee);}));return function purchaseAssets(_x){return _ref11.apply(this,arguments);};}();var handleCloseBag=useCallback(function(){setBagExpanded({bagExpanded:false,manualClose:true});},[setBagExpanded]);var fetchAssets=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var itemsToBuy,ethSellObject,data,updatedAssets,fetchedPriceChangedAssets,fetchedUnavailableAssets,fetchedUnchangedAssets,hasReviewedAssets,hasAssetsInReview,hasUnavailableAssets,hasAssets,shouldReview;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:itemsToBuy=itemsInBag.filter(function(item){return item.status!==BagItemStatus.UNAVAILABLE;}).map(function(item){return item.asset;});ethSellObject=buildSellObject(itemsToBuy.reduce(function(ethTotal,asset){return ethTotal.add(BigNumber.from(asset.priceInfo.ETHPrice));},BigNumber.from(0)).toString());didOpenUnavailableAssets&&setDidOpenUnavailableAssets(false);!bagIsLocked&&setLocked(true);setBagStatus(BagStatus.FETCHING_ROUTE);_context2.prev=5;_context2.next=8;return queryClient.fetchQuery(['assetsRoute',ethSellObject,itemsToBuy,account],function(){return fetchRoute({toSell:[ethSellObject],toBuy:itemsToBuy,senderAddress:account!==null&&account!==void 0?account:''});});case 8:data=_context2.sent;updatedAssets=combineBuyItemsWithTxRoute(itemsToBuy,data.route);fetchedPriceChangedAssets=updatedAssets.filter(function(asset){return asset.updatedPriceInfo;}).sort(sortUpdatedAssets);fetchedUnavailableAssets=updatedAssets.filter(function(asset){return asset.isUnavailable;});fetchedUnchangedAssets=updatedAssets.filter(function(asset){return!asset.updatedPriceInfo&&!asset.isUnavailable;});hasReviewedAssets=fetchedUnchangedAssets.length>0;hasAssetsInReview=fetchedPriceChangedAssets.length>0;hasUnavailableAssets=fetchedUnavailableAssets.length>0;hasAssets=hasReviewedAssets||hasAssetsInReview||hasUnavailableAssets;shouldReview=hasAssetsInReview||hasUnavailableAssets;setItemsInBag([].concat(_toConsumableArray(fetchedUnavailableAssets.map(function(unavailableAsset){return{asset:unavailableAsset,status:BagItemStatus.UNAVAILABLE};})),_toConsumableArray(fetchedPriceChangedAssets.map(function(changedAsset){return{asset:changedAsset,status:BagItemStatus.REVIEWING_PRICE_CHANGE};})),_toConsumableArray(fetchedUnchangedAssets.map(function(unchangedAsset){return{asset:unchangedAsset,status:BagItemStatus.REVIEWED};}))));setLocked(false);if(hasAssets){if(!shouldReview){purchaseAssets(data);setBagStatus(BagStatus.CONFIRMING_IN_WALLET);}else if(!hasAssetsInReview)setBagStatus(BagStatus.CONFIRM_REVIEW);else{setBagStatus(BagStatus.IN_REVIEW);}}else{setBagStatus(BagStatus.ADDING_TO_BAG);}_context2.next=26;break;case 23:_context2.prev=23;_context2.t0=_context2[\"catch\"](5);setBagStatus(BagStatus.ADDING_TO_BAG);case 26:case\"end\":return _context2.stop();}}},_callee2,null,[[5,23]]);}));return function fetchAssets(){return _ref12.apply(this,arguments);};}();useEffect(function(){useSendTransaction.subscribe(function(state){return transactionStateRef.current=state.state;});},[]);useEffect(function(){if(bagIsLocked&&!isModalOpen)setModalIsOpen(true);},[bagIsLocked,isModalOpen]);useEffect(function(){if(transactionStateRef.current===TxStateType.Confirming)setBagStatus(BagStatus.PROCESSING_TRANSACTION);if(transactionStateRef.current===TxStateType.Denied||transactionStateRef.current===TxStateType.Invalid){if(transactionStateRef.current===TxStateType.Invalid)setBagStatus(BagStatus.WARNING);else setBagStatus(BagStatus.CONFIRM_REVIEW);setTransactionState(TxStateType.New);setLocked(false);setModalIsOpen(false);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[transactionStateRef.current]);useEffect(function(){setTotalEthPrice(totalEthPrice);setTotalUsdPrice(totalUsdPrice);},[totalEthPrice,totalUsdPrice,setTotalEthPrice,setTotalUsdPrice]);var hasAssetsToShow=itemsInBag.length>0;var scrollHandler=function scrollHandler(event){var scrollTop=event.currentTarget.scrollTop;var containerHeight=event.currentTarget.clientHeight;var scrollHeight=event.currentTarget.scrollHeight;setScrollProgress(scrollTop?(scrollTop+containerHeight)/scrollHeight*100:0);};var isBuyingAssets=itemsInBag.length>0;var isSellingAssets=sellAssets.length>0;var shouldRenderEmptyState=Boolean(!isProfilePage&&!isBuyingAssets&&bagStatus===BagStatus.ADDING_TO_BAG||isProfilePage&&!isSellingAssets);var eventProperties=useMemo(function(){return _objectSpread({usd_value:totalUsdPrice},formatAssetEventProperties(itemsInBag.map(function(item){return item.asset;})));},[itemsInBag,totalUsdPrice]);if(!bagExpanded||!isNFTPage){return null;}return/*#__PURE__*/_jsxs(Portal,{children:[/*#__PURE__*/_jsx(BagContainer,{\"data-testid\":\"nft-bag\",raiseZIndex:isMobile||isModalOpen,children:!(isProfilePage&&profilePageState===ProfilePageStateType.LISTING)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BagHeader,{numberOfAssets:isProfilePage?sellAssets.length:itemsInBag.length,closeBag:handleCloseBag,resetFlow:isProfilePage?resetSellAssets:reset,isProfilePage:isProfilePage}),shouldRenderEmptyState&&/*#__PURE__*/_jsx(EmptyState,{}),/*#__PURE__*/_jsx(ScrollingIndicator,{top:true,show:userCanScroll&&scrollProgress>0}),/*#__PURE__*/_jsx(Column,{ref:scrollRef,className:styles.assetsContainer,onScroll:scrollHandler,gap:\"12\",children:isProfilePage?/*#__PURE__*/_jsx(ProfileBagContent,{}):/*#__PURE__*/_jsx(BagContent,{})}),hasAssetsToShow&&!isProfilePage&&/*#__PURE__*/_jsx(BagFooter,{totalEthPrice:totalEthPrice,totalUsdPrice:totalUsdPrice,bagStatus:bagStatus,fetchAssets:fetchAssets,eventProperties:eventProperties}),isSellingAssets&&isProfilePage&&/*#__PURE__*/_jsx(Box,{marginTop:\"32\",marginX:\"28\",marginBottom:\"16\",paddingY:\"10\",className:\"\".concat(buttonTextMedium,\" \").concat(commonButtonStyles),backgroundColor:\"accentAction\",color:\"white\",textAlign:\"center\",onClick:function onClick(){isMobile&&toggleBag();setProfilePageState(ProfilePageStateType.LISTING);sendAnalyticsEvent(EventName.NFT_PROFILE_PAGE_START_SELL,{list_quantity:sellAssets.length,collection_addresses:sellAssets.map(function(asset){return asset.asset_contract.address;}),token_ids:sellAssets.map(function(asset){return asset.tokenId;})});},children:\"Continue\"})]}):/*#__PURE__*/_jsx(ListingModal,{})}),isDetailsPage?/*#__PURE__*/_jsx(DetailsPageBackground,{onClick:toggleBag}):isModalOpen&&/*#__PURE__*/_jsx(Overlay,{onClick:function onClick(){return!bagIsLocked?setModalIsOpen(false):undefined;}})]});};export default Bag;","map":{"version":3,"names":["BigNumber","formatEther","sendAnalyticsEvent","EventName","useWeb3React","useIsNftDetailsPage","useIsNftPage","useIsNftProfilePage","BagFooter","ListingModal","Box","Portal","Column","Overlay","buttonTextMedium","commonButtonStyles","useBag","useIsMobile","useProfilePageState","useSellAsset","useSendTransaction","useTransactionResponse","fetchRoute","BagItemStatus","BagStatus","ProfilePageStateType","TxStateType","buildSellObject","fetchPrice","formatAssetEventProperties","recalculateBagUsingPooledAssets","sortUpdatedAssets","combineBuyItemsWithTxRoute","useCallback","useEffect","useMemo","useRef","useState","useQuery","useQueryClient","Z_INDEX","shallow","styles","BagContent","BagHeader","EmptyState","ProfileBagContent","BAG_WIDTH","XXXL_BAG_WIDTH","BagContainer","styled","div","theme","backgroundSurface","backgroundOutline","shallowShadow","raiseZIndex","modalOverTooltip","breakpoint","sm","xxxl","DetailsPageBackground","ScrollingIndicator","top","show","Bag","account","provider","reset","sellAssets","resetSellAssets","setProfilePageState","state","profilePageState","bagIsLocked","isLocked","uncheckedItemsInBag","itemsInBag","bagStatus","setBagStatus","didOpenUnavailableAssets","setDidOpenUnavailableAssets","setLocked","setItemsInBag","bagExpanded","toggleBag","setTotalEthPrice","setTotalUsdPrice","setBagExpanded","isProfilePage","isDetailsPage","isNFTPage","isMobile","sendTransaction","transactionState","setTransactionState","setState","transactionStateRef","setTransactionResponse","queryClient","isModalOpen","setModalIsOpen","userCanScroll","setUserCanScroll","scrollProgress","setScrollProgress","scrollRef","node","canScroll","scrollHeight","clientHeight","fetchedPriceData","data","totalEthPrice","reduce","total","item","status","UNAVAILABLE","add","from","asset","updatedPriceInfo","ETHPrice","priceInfo","totalUsdPrice","parseFloat","undefined","purchaseAssets","routingData","getSigner","filter","map","purchaseResponse","current","Success","Failed","handleCloseBag","manualClose","fetchAssets","itemsToBuy","ethSellObject","ethTotal","toString","FETCHING_ROUTE","fetchQuery","toSell","toBuy","senderAddress","updatedAssets","route","fetchedPriceChangedAssets","sort","fetchedUnavailableAssets","isUnavailable","fetchedUnchangedAssets","hasReviewedAssets","length","hasAssetsInReview","hasUnavailableAssets","hasAssets","shouldReview","unavailableAsset","changedAsset","REVIEWING_PRICE_CHANGE","unchangedAsset","REVIEWED","CONFIRMING_IN_WALLET","CONFIRM_REVIEW","IN_REVIEW","ADDING_TO_BAG","subscribe","Confirming","PROCESSING_TRANSACTION","Denied","Invalid","WARNING","New","hasAssetsToShow","scrollHandler","event","scrollTop","currentTarget","containerHeight","isBuyingAssets","isSellingAssets","shouldRenderEmptyState","Boolean","eventProperties","usd_value","LISTING","assetsContainer","NFT_PROFILE_PAGE_START_SELL","list_quantity","collection_addresses","asset_contract","address","token_ids","tokenId"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/components/bag/Bag.tsx"],"sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\nimport { formatEther } from '@ethersproject/units'\nimport { sendAnalyticsEvent } from '@uniswap/analytics'\nimport { EventName } from '@uniswap/analytics-events'\nimport { useWeb3React } from '@web3-react/core'\nimport { useIsNftDetailsPage, useIsNftPage, useIsNftProfilePage } from 'hooks/useIsNftPage'\nimport { BagFooter } from 'nft/components/bag/BagFooter'\nimport ListingModal from 'nft/components/bag/profile/ListingModal'\nimport { Box } from 'nft/components/Box'\nimport { Portal } from 'nft/components/common/Portal'\nimport { Column } from 'nft/components/Flex'\nimport { Overlay } from 'nft/components/modals/Overlay'\nimport { buttonTextMedium, commonButtonStyles } from 'nft/css/common.css'\nimport {\n  useBag,\n  useIsMobile,\n  useProfilePageState,\n  useSellAsset,\n  useSendTransaction,\n  useTransactionResponse,\n} from 'nft/hooks'\nimport { fetchRoute } from 'nft/queries'\nimport { BagItemStatus, BagStatus, ProfilePageStateType, RouteResponse, TxStateType } from 'nft/types'\nimport {\n  buildSellObject,\n  fetchPrice,\n  formatAssetEventProperties,\n  recalculateBagUsingPooledAssets,\n  sortUpdatedAssets,\n} from 'nft/utils'\nimport { combineBuyItemsWithTxRoute } from 'nft/utils/txRoute/combineItemsWithTxRoute'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { useQuery, useQueryClient } from 'react-query'\nimport styled from 'styled-components/macro'\nimport { Z_INDEX } from 'theme/zIndex'\nimport shallow from 'zustand/shallow'\n\nimport * as styles from './Bag.css'\nimport { BagContent } from './BagContent'\nimport { BagHeader } from './BagHeader'\nimport EmptyState from './EmptyContent'\nimport { ProfileBagContent } from './profile/ProfileBagContent'\n\nexport const BAG_WIDTH = 320\nexport const XXXL_BAG_WIDTH = 360\n\ninterface SeparatorProps {\n  top?: boolean\n  show?: boolean\n}\n\nconst BagContainer = styled.div<{ raiseZIndex: boolean }>`\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  top: 88px;\n  right: 20px;\n  width: ${BAG_WIDTH}px;\n  height: calc(100vh - 108px);\n  background: ${({ theme }) => theme.backgroundSurface};\n  border: 1px solid ${({ theme }) => theme.backgroundOutline};\n  border-radius: 16px;\n  box-shadow: ${({ theme }) => theme.shallowShadow};\n  z-index: ${({ raiseZIndex }) => (raiseZIndex ? Z_INDEX.modalOverTooltip : 3)};\n\n  @media only screen and (max-width: ${({ theme }) => `${theme.breakpoint.sm}px`}) {\n    right: 0px;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n    border-radius: 0px;\n    border: none;\n  }\n\n  @media only screen and (min-width: ${({ theme }) => `${theme.breakpoint.xxxl}px`}) {\n    width: ${XXXL_BAG_WIDTH}px;\n  }\n`\n\nconst DetailsPageBackground = styled.div`\n  position: fixed;\n  background: rgba(0, 0, 0, 0.7);\n  top: 0px;\n  width: 100%;\n  height: 100%;\n`\n\nconst ScrollingIndicator = ({ top, show }: SeparatorProps) => (\n  <Box\n    marginX=\"24\"\n    borderWidth=\"1px\"\n    borderStyle=\"solid\"\n    borderColor=\"transparent\"\n    borderTopColor={top ? 'transparent' : 'backgroundOutline'}\n    borderBottomColor={top ? 'backgroundOutline' : 'transparent'}\n    opacity={show ? '1' : '0'}\n    transition=\"250\"\n  />\n)\n\nconst Bag = () => {\n  const { account, provider } = useWeb3React()\n\n  const { resetSellAssets, sellAssets } = useSellAsset(\n    ({ reset, sellAssets }) => ({\n      resetSellAssets: reset,\n      sellAssets,\n    }),\n    shallow\n  )\n\n  const { profilePageState, setProfilePageState } = useProfilePageState(\n    ({ setProfilePageState, state }) => ({ profilePageState: state, setProfilePageState }),\n    shallow\n  )\n\n  const {\n    bagStatus,\n    setBagStatus,\n    didOpenUnavailableAssets,\n    setDidOpenUnavailableAssets,\n    bagIsLocked,\n    setLocked,\n    reset,\n    setItemsInBag,\n    bagExpanded,\n    toggleBag,\n    setTotalEthPrice,\n    setTotalUsdPrice,\n    setBagExpanded,\n  } = useBag((state) => ({ ...state, bagIsLocked: state.isLocked, uncheckedItemsInBag: state.itemsInBag }), shallow)\n  const { uncheckedItemsInBag } = useBag(({ itemsInBag }) => ({ uncheckedItemsInBag: itemsInBag }))\n\n  const isProfilePage = useIsNftProfilePage()\n  const isDetailsPage = useIsNftDetailsPage()\n  const isNFTPage = useIsNftPage()\n  const isMobile = useIsMobile()\n\n  const sendTransaction = useSendTransaction((state) => state.sendTransaction)\n  const transactionState = useSendTransaction((state) => state.state)\n  const setTransactionState = useSendTransaction((state) => state.setState)\n  const transactionStateRef = useRef(transactionState)\n  const [setTransactionResponse] = useTransactionResponse((state) => [state.setTransactionResponse])\n\n  const queryClient = useQueryClient()\n\n  const itemsInBag = useMemo(() => recalculateBagUsingPooledAssets(uncheckedItemsInBag), [uncheckedItemsInBag])\n\n  const [isModalOpen, setModalIsOpen] = useState(false)\n  const [userCanScroll, setUserCanScroll] = useState(false)\n  const [scrollProgress, setScrollProgress] = useState(0)\n  const scrollRef = (node: HTMLDivElement) => {\n    if (node !== null) {\n      const canScroll = node.scrollHeight > node.clientHeight\n      canScroll !== userCanScroll && setUserCanScroll(canScroll)\n    }\n  }\n\n  const { data: fetchedPriceData } = useQuery(['fetchPrice', {}], () => fetchPrice(), {})\n\n  const { totalEthPrice, totalUsdPrice } = useMemo(() => {\n    const totalEthPrice = itemsInBag.reduce(\n      (total, item) =>\n        item.status !== BagItemStatus.UNAVAILABLE\n          ? total.add(\n              BigNumber.from(\n                item.asset.updatedPriceInfo ? item.asset.updatedPriceInfo.ETHPrice : item.asset.priceInfo.ETHPrice\n              )\n            )\n          : total,\n      BigNumber.from(0)\n    )\n    const totalUsdPrice = fetchedPriceData ? parseFloat(formatEther(totalEthPrice)) * fetchedPriceData : undefined\n\n    return { totalEthPrice, totalUsdPrice }\n  }, [itemsInBag, fetchedPriceData])\n\n  const purchaseAssets = async (routingData: RouteResponse) => {\n    if (!provider || !routingData) return\n    const purchaseResponse = await sendTransaction(\n      provider?.getSigner(),\n      itemsInBag.filter((item) => item.status !== BagItemStatus.UNAVAILABLE).map((item) => item.asset),\n      routingData\n    )\n    if (\n      purchaseResponse &&\n      (transactionStateRef.current === TxStateType.Success || transactionStateRef.current === TxStateType.Failed)\n    ) {\n      setLocked(false)\n      setModalIsOpen(false)\n      setTransactionResponse(purchaseResponse)\n      setBagExpanded({ bagExpanded: false })\n      reset()\n    }\n  }\n\n  const handleCloseBag = useCallback(() => {\n    setBagExpanded({ bagExpanded: false, manualClose: true })\n  }, [setBagExpanded])\n\n  const fetchAssets = async () => {\n    const itemsToBuy = itemsInBag.filter((item) => item.status !== BagItemStatus.UNAVAILABLE).map((item) => item.asset)\n    const ethSellObject = buildSellObject(\n      itemsToBuy\n        .reduce((ethTotal, asset) => ethTotal.add(BigNumber.from(asset.priceInfo.ETHPrice)), BigNumber.from(0))\n        .toString()\n    )\n\n    didOpenUnavailableAssets && setDidOpenUnavailableAssets(false)\n    !bagIsLocked && setLocked(true)\n    setBagStatus(BagStatus.FETCHING_ROUTE)\n    try {\n      const data = await queryClient.fetchQuery(['assetsRoute', ethSellObject, itemsToBuy, account], () =>\n        fetchRoute({\n          toSell: [ethSellObject],\n          toBuy: itemsToBuy,\n          senderAddress: account ?? '',\n        })\n      )\n\n      const updatedAssets = combineBuyItemsWithTxRoute(itemsToBuy, data.route)\n\n      const fetchedPriceChangedAssets = updatedAssets.filter((asset) => asset.updatedPriceInfo).sort(sortUpdatedAssets)\n      const fetchedUnavailableAssets = updatedAssets.filter((asset) => asset.isUnavailable)\n      const fetchedUnchangedAssets = updatedAssets.filter((asset) => !asset.updatedPriceInfo && !asset.isUnavailable)\n      const hasReviewedAssets = fetchedUnchangedAssets.length > 0\n      const hasAssetsInReview = fetchedPriceChangedAssets.length > 0\n      const hasUnavailableAssets = fetchedUnavailableAssets.length > 0\n      const hasAssets = hasReviewedAssets || hasAssetsInReview || hasUnavailableAssets\n      const shouldReview = hasAssetsInReview || hasUnavailableAssets\n\n      setItemsInBag([\n        ...fetchedUnavailableAssets.map((unavailableAsset) => ({\n          asset: unavailableAsset,\n          status: BagItemStatus.UNAVAILABLE,\n        })),\n        ...fetchedPriceChangedAssets.map((changedAsset) => ({\n          asset: changedAsset,\n          status: BagItemStatus.REVIEWING_PRICE_CHANGE,\n        })),\n        ...fetchedUnchangedAssets.map((unchangedAsset) => ({ asset: unchangedAsset, status: BagItemStatus.REVIEWED })),\n      ])\n      setLocked(false)\n\n      if (hasAssets) {\n        if (!shouldReview) {\n          purchaseAssets(data)\n          setBagStatus(BagStatus.CONFIRMING_IN_WALLET)\n        } else if (!hasAssetsInReview) setBagStatus(BagStatus.CONFIRM_REVIEW)\n        else {\n          setBagStatus(BagStatus.IN_REVIEW)\n        }\n      } else {\n        setBagStatus(BagStatus.ADDING_TO_BAG)\n      }\n    } catch (error) {\n      setBagStatus(BagStatus.ADDING_TO_BAG)\n    }\n  }\n\n  useEffect(() => {\n    useSendTransaction.subscribe((state) => (transactionStateRef.current = state.state))\n  }, [])\n\n  useEffect(() => {\n    if (bagIsLocked && !isModalOpen) setModalIsOpen(true)\n  }, [bagIsLocked, isModalOpen])\n\n  useEffect(() => {\n    if (transactionStateRef.current === TxStateType.Confirming) setBagStatus(BagStatus.PROCESSING_TRANSACTION)\n    if (transactionStateRef.current === TxStateType.Denied || transactionStateRef.current === TxStateType.Invalid) {\n      if (transactionStateRef.current === TxStateType.Invalid) setBagStatus(BagStatus.WARNING)\n      else setBagStatus(BagStatus.CONFIRM_REVIEW)\n      setTransactionState(TxStateType.New)\n\n      setLocked(false)\n      setModalIsOpen(false)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [transactionStateRef.current])\n\n  useEffect(() => {\n    setTotalEthPrice(totalEthPrice)\n    setTotalUsdPrice(totalUsdPrice)\n  }, [totalEthPrice, totalUsdPrice, setTotalEthPrice, setTotalUsdPrice])\n\n  const hasAssetsToShow = itemsInBag.length > 0\n\n  const scrollHandler = (event: React.UIEvent<HTMLDivElement>) => {\n    const scrollTop = event.currentTarget.scrollTop\n    const containerHeight = event.currentTarget.clientHeight\n    const scrollHeight = event.currentTarget.scrollHeight\n\n    setScrollProgress(scrollTop ? ((scrollTop + containerHeight) / scrollHeight) * 100 : 0)\n  }\n\n  const isBuyingAssets = itemsInBag.length > 0\n  const isSellingAssets = sellAssets.length > 0\n\n  const shouldRenderEmptyState = Boolean(\n    (!isProfilePage && !isBuyingAssets && bagStatus === BagStatus.ADDING_TO_BAG) || (isProfilePage && !isSellingAssets)\n  )\n\n  const eventProperties = useMemo(\n    () => ({\n      usd_value: totalUsdPrice,\n      ...formatAssetEventProperties(itemsInBag.map((item) => item.asset)),\n    }),\n    [itemsInBag, totalUsdPrice]\n  )\n\n  if (!bagExpanded || !isNFTPage) {\n    return null\n  }\n\n  return (\n    <Portal>\n      <BagContainer data-testid=\"nft-bag\" raiseZIndex={isMobile || isModalOpen}>\n        {!(isProfilePage && profilePageState === ProfilePageStateType.LISTING) ? (\n          <>\n            <BagHeader\n              numberOfAssets={isProfilePage ? sellAssets.length : itemsInBag.length}\n              closeBag={handleCloseBag}\n              resetFlow={isProfilePage ? resetSellAssets : reset}\n              isProfilePage={isProfilePage}\n            />\n            {shouldRenderEmptyState && <EmptyState />}\n            <ScrollingIndicator top show={userCanScroll && scrollProgress > 0} />\n            <Column ref={scrollRef} className={styles.assetsContainer} onScroll={scrollHandler} gap=\"12\">\n              {isProfilePage ? <ProfileBagContent /> : <BagContent />}\n            </Column>\n            {hasAssetsToShow && !isProfilePage && (\n              <BagFooter\n                totalEthPrice={totalEthPrice}\n                totalUsdPrice={totalUsdPrice}\n                bagStatus={bagStatus}\n                fetchAssets={fetchAssets}\n                eventProperties={eventProperties}\n              />\n            )}\n            {isSellingAssets && isProfilePage && (\n              <Box\n                marginTop=\"32\"\n                marginX=\"28\"\n                marginBottom=\"16\"\n                paddingY=\"10\"\n                className={`${buttonTextMedium} ${commonButtonStyles}`}\n                backgroundColor=\"accentAction\"\n                color=\"white\"\n                textAlign=\"center\"\n                onClick={() => {\n                  isMobile && toggleBag()\n                  setProfilePageState(ProfilePageStateType.LISTING)\n                  sendAnalyticsEvent(EventName.NFT_PROFILE_PAGE_START_SELL, {\n                    list_quantity: sellAssets.length,\n                    collection_addresses: sellAssets.map((asset) => asset.asset_contract.address),\n                    token_ids: sellAssets.map((asset) => asset.tokenId),\n                  })\n                }}\n              >\n                Continue\n              </Box>\n            )}\n          </>\n        ) : (\n          <ListingModal />\n        )}\n      </BagContainer>\n\n      {isDetailsPage ? (\n        <DetailsPageBackground onClick={toggleBag} />\n      ) : (\n        isModalOpen && <Overlay onClick={() => (!bagIsLocked ? setModalIsOpen(false) : undefined)} />\n      )}\n    </Portal>\n  )\n}\n\nexport default Bag\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}