{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{formatEther}from'@ethersproject/units';import{useQuery}from'react-query';export var Currency;(function(Currency){Currency[\"ETH\"]=\"ETH\";Currency[\"LOOKS\"]=\"LOOKS\";Currency[\"MATIC\"]=\"MATIC\";})(Currency||(Currency={}));export var fetchPrice=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currency,response,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currency=_args.length>0&&_args[0]!==undefined?_args[0]:Currency.ETH;_context.prev=1;_context.next=4;return fetch(\"https://api.coinbase.com/v2/exchange-rates?currency=\".concat(currency));case 4:response=_context.sent;return _context.abrupt(\"return\",response.json().then(function(j){return j.data.rates.USD;}));case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);return _context.abrupt(\"return\");case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function fetchPrice(){return _ref.apply(this,arguments);};}();export function useUsdPrice(asset){var _asset$priceInfo,_asset$priceInfo2;var _useQuery=useQuery(['fetchPrice',{}],function(){return fetchPrice();},{}),fetchedPriceData=_useQuery.data;return fetchedPriceData&&(asset===null||asset===void 0?void 0:(_asset$priceInfo=asset.priceInfo)===null||_asset$priceInfo===void 0?void 0:_asset$priceInfo.ETHPrice)?(parseFloat(formatEther(asset===null||asset===void 0?void 0:(_asset$priceInfo2=asset.priceInfo)===null||_asset$priceInfo2===void 0?void 0:_asset$priceInfo2.ETHPrice))*fetchedPriceData).toString():'';}","map":{"version":3,"names":["formatEther","useQuery","Currency","fetchPrice","currency","ETH","fetch","response","json","then","j","data","rates","USD","console","error","useUsdPrice","asset","fetchedPriceData","priceInfo","ETHPrice","parseFloat","toString"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/nft/utils/fetchPrice.ts"],"sourcesContent":["import { formatEther } from '@ethersproject/units'\nimport { GenieAsset } from 'nft/types'\nimport { useQuery } from 'react-query'\n\nexport enum Currency {\n  ETH = 'ETH',\n  LOOKS = 'LOOKS',\n  MATIC = 'MATIC',\n}\n\nexport const fetchPrice = async (currency: Currency = Currency.ETH): Promise<number | undefined> => {\n  try {\n    const response = await fetch(`https://api.coinbase.com/v2/exchange-rates?currency=${currency}`)\n    return response.json().then((j) => j.data.rates.USD)\n  } catch (e) {\n    console.error(e)\n    return\n  }\n}\n\nexport function useUsdPrice(asset: GenieAsset): string | undefined {\n  const { data: fetchedPriceData } = useQuery(['fetchPrice', {}], () => fetchPrice(), {})\n\n  return fetchedPriceData && asset?.priceInfo?.ETHPrice\n    ? (parseFloat(formatEther(asset?.priceInfo?.ETHPrice)) * fetchedPriceData).toString()\n    : ''\n}\n"],"mappings":"qVAAA,OAASA,WAAW,KAAQ,sBAAsB,CAElD,OAASC,QAAQ,KAAQ,aAAa,CAEtC,UAAYC,SAAQ,CAInB,UAJWA,QAAQ,EAARA,QAAQ,cAARA,QAAQ,kBAARA,QAAQ,qBAARA,QAAQ,GAARA,QAAQ,MAMpB,MAAO,IAAMC,WAAU,0FAAG,yKAAOC,QAAkB,+CAAGF,QAAQ,CAACG,GAAG,uCAEvCC,MAAK,+DAAwDF,QAAQ,EAAG,QAAzFG,QAAQ,+CACPA,QAAQ,CAACC,IAAI,EAAE,CAACC,IAAI,CAAC,SAACC,CAAC,QAAKA,EAAC,CAACC,IAAI,CAACC,KAAK,CAACC,GAAG,GAAC,0DAEpDC,OAAO,CAACC,KAAK,aAAG,sGAGnB,kBARYZ,WAAU,0CAQtB,CAED,MAAO,SAASa,YAAW,CAACC,KAAiB,CAAsB,wCACjE,cAAmChB,QAAQ,CAAC,CAAC,YAAY,CAAE,CAAC,CAAC,CAAC,CAAE,iBAAME,WAAU,EAAE,GAAE,CAAC,CAAC,CAAC,CAAzEe,gBAAgB,WAAtBP,IAAI,CAEZ,MAAOO,iBAAgB,GAAID,KAAK,SAALA,KAAK,mCAALA,KAAK,CAAEE,SAAS,2CAAhB,iBAAkBC,QAAQ,EACjD,CAACC,UAAU,CAACrB,WAAW,CAACiB,KAAK,SAALA,KAAK,oCAALA,KAAK,CAAEE,SAAS,4CAAhB,kBAAkBC,QAAQ,CAAC,CAAC,CAAGF,gBAAgB,EAAEI,QAAQ,EAAE,CACnF,EAAE,CACR"},"metadata":{},"sourceType":"module"}