{"ast":null,"code":"import _styled from \"styled-components\";\nvar _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/DensityChart/index.tsx\",\n  _s = $RefreshSig$();\nimport { fetchTicksSurroundingPrice } from 'data/pools/tickData';\nimport React, { useEffect, useMemo, useState, useCallback } from 'react';\nimport { BarChart, Bar, LabelList, XAxis, Tooltip, ResponsiveContainer, Cell } from 'recharts';\nimport Loader from 'components/Loader';\nimport useTheme from 'hooks/useTheme';\nimport { usePoolDatas, usePoolTickData } from 'state/pools/hooks';\nimport { MAX_UINT128 } from '../../constants/index';\nimport { isAddress } from 'utils';\nimport { Pool, TickMath, TICK_SPACINGS } from '@uniswap/v3-sdk';\nimport CurrentPriceLabel from './CurrentPriceLabel';\nimport CustomToolTip from './CustomToolTip';\nimport { Token, CurrencyAmount } from '@uniswap/sdk-core';\nimport JSBI from 'jsbi';\nimport { useClients } from 'state/application/hooks';\nimport { vars } from 'nft/css/sprinkles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Wrapper = _styled.div.withConfig({\n  displayName: \"DensityChart__Wrapper\",\n  componentId: \"sc-4ueumo-0\"\n})([\"position:relative;width:100%;height:400px;\"]);\nconst ControlsWrapper = _styled.div.withConfig({\n  displayName: \"DensityChart__ControlsWrapper\",\n  componentId: \"sc-4ueumo-1\"\n})([\"position:absolute;right:40px;bottom:100px;padding:4px;border-radius:8px;display:grid;grid-template-columns:1fr 1fr;grid-column-gap:6px;\"]);\nconst ActionButton = _styled.div.withConfig({\n  displayName: \"DensityChart__ActionButton\",\n  componentId: \"sc-4ueumo-2\"\n})([\"width:32x;border-radius:50%;background-color:black;padding:4px 8px;display:flex;justify-content:center;font-size:18px;font-weight:500;align-items:center;opacity:\", \";background-color:\", \";user-select:none;:hover{cursor:pointer;opacity:0.4;}\"], _ref => {\n  let {\n    disabled\n  } = _ref;\n  return disabled ? 0.4 : 0.9;\n}, _ref2 => {\n  let {\n    theme,\n    disabled\n  } = _ref2;\n  return disabled ? theme.deprecated_bg3 : theme.deprecated_bg1;\n});\nconst INITIAL_TICKS_TO_FETCH = 200;\nconst ZOOM_INTERVAL = 20;\nconst initialState = {\n  left: 0,\n  right: INITIAL_TICKS_TO_FETCH * 2 + 1,\n  refAreaLeft: '',\n  refAreaRight: ''\n};\nexport default function DensityChart(_ref3) {\n  _s();\n  let {\n    address\n  } = _ref3;\n  const theme = useTheme();\n  const {\n    dataClient\n  } = useClients();\n\n  // poolData\n  const poolData = usePoolDatas([address])[0];\n  const formattedAddress0 = isAddress(poolData.token0.address);\n  const formattedAddress1 = isAddress(poolData.token1.address);\n  const feeTier = poolData === null || poolData === void 0 ? void 0 : poolData.feeTier;\n\n  // parsed tokens\n  const token0 = useMemo(() => {\n    return poolData && formattedAddress0 && formattedAddress1 ? new Token(1, formattedAddress0, poolData.token0.decimals) : undefined;\n  }, [formattedAddress0, formattedAddress1, poolData]);\n  const token1 = useMemo(() => {\n    return poolData && formattedAddress1 && formattedAddress1 ? new Token(1, formattedAddress1, poolData.token1.decimals) : undefined;\n  }, [formattedAddress1, poolData]);\n\n  // tick data tracking\n  const [poolTickData, updatePoolTickData] = usePoolTickData(address);\n  const [ticksToFetch, setTicksToFetch] = useState(INITIAL_TICKS_TO_FETCH);\n  const amountTicks = ticksToFetch * 2 + 1;\n  const [loading, setLoading] = useState(false);\n  const [zoomState, setZoomState] = useState(initialState);\n  useEffect(() => {\n    async function fetch() {\n      const {\n        data\n      } = await fetchTicksSurroundingPrice(address, dataClient, ticksToFetch);\n      if (data) {\n        updatePoolTickData(address, data);\n      }\n    }\n    if (!poolTickData || poolTickData && poolTickData.ticksProcessed.length < amountTicks) {\n      fetch();\n    }\n  }, [address, poolTickData, updatePoolTickData, ticksToFetch, amountTicks, dataClient]);\n  const [formattedData, setFormattedData] = useState();\n  useEffect(() => {\n    async function formatData() {\n      if (poolTickData) {\n        const newData = await Promise.all(poolTickData.ticksProcessed.map(async (t, i) => {\n          const active = t.tickIdx === poolTickData.activeTickIdx;\n          const sqrtPriceX96 = TickMath.getSqrtRatioAtTick(t.tickIdx);\n          const feeAmount = poolData.feeTier;\n          const mockTicks = [{\n            index: t.tickIdx - TICK_SPACINGS[feeAmount],\n            liquidityGross: t.liquidityGross,\n            liquidityNet: JSBI.multiply(t.liquidityNet, JSBI.BigInt('-1'))\n          }, {\n            index: t.tickIdx,\n            liquidityGross: t.liquidityGross,\n            liquidityNet: t.liquidityNet\n          }];\n          const pool = token0 && token1 && feeTier ? new Pool(token0, token1, feeTier, sqrtPriceX96, t.liquidityActive, t.tickIdx, mockTicks) : undefined;\n          const nextSqrtX96 = poolTickData.ticksProcessed[i - 1] ? TickMath.getSqrtRatioAtTick(poolTickData.ticksProcessed[i - 1].tickIdx) : undefined;\n          const maxAmountToken0 = token0 ? CurrencyAmount.fromRawAmount(token0, MAX_UINT128.toString()) : undefined;\n          const outputRes0 = pool && maxAmountToken0 ? await pool.getOutputAmount(maxAmountToken0, nextSqrtX96) : undefined;\n          const token1Amount = outputRes0 === null || outputRes0 === void 0 ? void 0 : outputRes0[0];\n          const amount0 = token1Amount ? parseFloat(token1Amount.toExact()) * parseFloat(t.price1) : 0;\n          const amount1 = token1Amount ? parseFloat(token1Amount.toExact()) : 0;\n          return {\n            index: i,\n            isCurrent: active,\n            activeLiquidity: parseFloat(t.liquidityActive.toString()),\n            price0: parseFloat(t.price0),\n            price1: parseFloat(t.price1),\n            tvlToken0: amount0,\n            tvlToken1: amount1\n          };\n        }));\n        // offset the values to line off bars with TVL used to swap across bar\n        newData === null || newData === void 0 ? void 0 : newData.map((entry, i) => {\n          if (i > 0) {\n            newData[i - 1].tvlToken0 = entry.tvlToken0;\n            newData[i - 1].tvlToken1 = entry.tvlToken1;\n          }\n        });\n        if (newData) {\n          if (loading) {\n            setLoading(false);\n          }\n          setFormattedData(newData);\n        }\n        return;\n      } else {\n        return [];\n      }\n    }\n    if (!formattedData) {\n      formatData();\n    }\n  }, [feeTier, formattedData, loading, poolData.feeTier, poolTickData, token0, token1]);\n  const atZoomMax = zoomState.left + ZOOM_INTERVAL >= zoomState.right - ZOOM_INTERVAL - 1;\n  const atZoomMin = zoomState.left - ZOOM_INTERVAL < 0;\n  const handleZoomIn = useCallback(() => {\n    !atZoomMax && setZoomState({\n      ...zoomState,\n      left: zoomState.left + ZOOM_INTERVAL,\n      right: zoomState.right - ZOOM_INTERVAL\n    });\n  }, [zoomState, atZoomMax]);\n  const handleZoomOut = useCallback(() => {\n    if (atZoomMin) {\n      setLoading(true);\n      setTicksToFetch(ticksToFetch + ZOOM_INTERVAL);\n      setFormattedData(undefined);\n      setZoomState({\n        ...zoomState,\n        left: 0,\n        right: amountTicks\n      });\n    } else {\n      setZoomState({\n        ...zoomState,\n        left: zoomState.left - ZOOM_INTERVAL,\n        right: zoomState.right + ZOOM_INTERVAL\n      });\n    }\n  }, [amountTicks, atZoomMin, ticksToFetch, zoomState]);\n  const zoomedData = useMemo(() => {\n    if (formattedData) {\n      return formattedData.slice(zoomState.left, zoomState.right);\n    }\n    return undefined;\n  }, [formattedData, zoomState.left, zoomState.right]);\n\n  // reset data on address change\n  useEffect(() => {\n    setFormattedData(undefined);\n  }, [address]);\n  if (!poolTickData) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 12\n    }, this);\n  }\n  const CustomBar = _ref4 => {\n    let {\n      x,\n      y,\n      width,\n      height,\n      fill\n    } = _ref4;\n    return /*#__PURE__*/_jsxDEV(\"g\", {\n      children: /*#__PURE__*/_jsxDEV(\"rect\", {\n        x: x,\n        y: y,\n        fill: fill,\n        width: width,\n        height: height,\n        rx: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [!loading ? /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n      width: \"100%\",\n      height: \"100%\",\n      children: /*#__PURE__*/_jsxDEV(BarChart, {\n        width: 500,\n        height: 300,\n        data: zoomedData,\n        margin: {\n          top: 5,\n          right: 30,\n          left: 20,\n          bottom: 60\n        },\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          content: props => /*#__PURE__*/_jsxDEV(CustomToolTip, {\n            chartProps: props,\n            poolData: poolData,\n            currentPrice: poolData.token0Price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n          reversed: true,\n          tick: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"activeLiquidity\",\n          fill: \"#2172E5\",\n          isAnimationActive: false,\n          shape: props => {\n            // eslint-disable-next-line react/prop-types\n            return /*#__PURE__*/_jsxDEV(CustomBar, {\n              height: props.height,\n              width: props.width,\n              x: props.x,\n              y: props.y,\n              fill: props.fill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 24\n            }, this);\n          },\n          children: [zoomedData === null || zoomedData === void 0 ? void 0 : zoomedData.map((entry, index) => {\n            return /*#__PURE__*/_jsxDEV(Cell, {\n              fill: entry.isCurrent ? vars.color.pink400 : vars.color.blue400\n            }, `cell-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 24\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(LabelList, {\n            dataKey: \"activeLiquidity\",\n            position: \"inside\",\n            content: props => /*#__PURE__*/_jsxDEV(CurrentPriceLabel, {\n              chartProps: props,\n              poolData: poolData,\n              data: zoomedData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ControlsWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n        disabled: false,\n        onClick: handleZoomOut,\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n        disabled: atZoomMax,\n        onClick: handleZoomIn,\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 5\n  }, this);\n}\n_s(DensityChart, \"oBHD6GxzCV7YhS63szmFDxi3Ls8=\", false, function () {\n  return [useTheme, useClients, usePoolDatas, usePoolTickData];\n});\n_c = DensityChart;\nvar _c;\n$RefreshReg$(_c, \"DensityChart\");","map":{"version":3,"names":["fetchTicksSurroundingPrice","React","useEffect","useMemo","useState","useCallback","BarChart","Bar","LabelList","XAxis","Tooltip","ResponsiveContainer","Cell","Loader","useTheme","usePoolDatas","usePoolTickData","MAX_UINT128","isAddress","Pool","TickMath","TICK_SPACINGS","CurrentPriceLabel","CustomToolTip","Token","CurrencyAmount","JSBI","useClients","vars","Wrapper","styled","div","ControlsWrapper","ActionButton","disabled","theme","deprecated_bg3","deprecated_bg1","INITIAL_TICKS_TO_FETCH","ZOOM_INTERVAL","initialState","left","right","refAreaLeft","refAreaRight","DensityChart","address","dataClient","poolData","formattedAddress0","token0","formattedAddress1","token1","feeTier","decimals","undefined","poolTickData","updatePoolTickData","ticksToFetch","setTicksToFetch","amountTicks","loading","setLoading","zoomState","setZoomState","fetch","data","ticksProcessed","length","formattedData","setFormattedData","formatData","newData","Promise","all","map","t","i","active","tickIdx","activeTickIdx","sqrtPriceX96","getSqrtRatioAtTick","feeAmount","mockTicks","index","liquidityGross","liquidityNet","multiply","BigInt","pool","liquidityActive","nextSqrtX96","maxAmountToken0","fromRawAmount","toString","outputRes0","getOutputAmount","token1Amount","amount0","parseFloat","toExact","price1","amount1","isCurrent","activeLiquidity","price0","tvlToken0","tvlToken1","entry","atZoomMax","atZoomMin","handleZoomIn","handleZoomOut","zoomedData","slice","CustomBar","x","y","width","height","fill","top","bottom","props","token0Price","color","pink400","blue400"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/DensityChart/index.tsx"],"sourcesContent":["import { fetchTicksSurroundingPrice, TickProcessed } from 'data/pools/tickData'\nimport React, { useEffect, useMemo, useState, useCallback } from 'react'\nimport { BarChart, Bar, LabelList, XAxis, Tooltip, ResponsiveContainer, Cell } from 'recharts'\nimport Loader from 'components/Loader'\nimport styled from 'styled-components/macro'\nimport useTheme from 'hooks/useTheme'\nimport { usePoolDatas, usePoolTickData } from 'state/pools/hooks'\nimport { MAX_UINT128 } from '../../constants/index'\nimport { isAddress } from 'utils'\nimport { Pool, TickMath, TICK_SPACINGS, FeeAmount } from '@uniswap/v3-sdk'\nimport { PoolData } from 'state/pools/reducer'\nimport CurrentPriceLabel  from './CurrentPriceLabel'\nimport CustomToolTip from './CustomToolTip'\nimport { Token, CurrencyAmount } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport { useClients } from 'state/application/hooks'\nimport { vars } from 'nft/css/sprinkles.css'\n\nconst Wrapper = styled.div`\n  position: relative;\n  width: 100%;\n  height: 400px;\n`\n\nconst ControlsWrapper = styled.div`\n  position: absolute;\n  right: 40px;\n  bottom: 100px;\n  padding: 4px;\n  border-radius: 8px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 6px;\n`\n\nconst ActionButton = styled.div<{ disabled?: boolean }>`\n  width: 32x;\n  border-radius: 50%;\n  background-color: black;\n  padding: 4px 8px;\n  display: flex;\n  justify-content: center;\n  font-size: 18px;\n  font-weight: 500;\n  align-items: center;\n  opacity: ${({ disabled }) => (disabled ? 0.4 : 0.9)};\n  background-color: ${({ theme, disabled }) => (disabled ? theme.deprecated_bg3 : theme.deprecated_bg1)};\n  user-select: none;\n\n  :hover {\n    cursor: pointer;\n    opacity: 0.4;\n  }\n`\n\ninterface DensityChartProps {\n  address: string\n}\n\nexport interface ChartEntry {\n  index: number\n  isCurrent: boolean\n  activeLiquidity: number\n  price0: number\n  price1: number\n  tvlToken0: number\n  tvlToken1: number\n}\n\ninterface ZoomStateProps {\n  left: number\n  right: number\n  refAreaLeft: string | number\n  refAreaRight: string | number\n}\n\nconst INITIAL_TICKS_TO_FETCH = 200\nconst ZOOM_INTERVAL = 20\n\nconst initialState = {\n  left: 0,\n  right: INITIAL_TICKS_TO_FETCH * 2 + 1,\n  refAreaLeft: '',\n  refAreaRight: '',\n}\n\nexport default function DensityChart({ address }: DensityChartProps) {\n  const theme = useTheme()\n  const { dataClient } = useClients()\n\n  // poolData\n  const poolData: PoolData = usePoolDatas([address])[0]\n  const formattedAddress0 = isAddress(poolData.token0.address)\n  const formattedAddress1 = isAddress(poolData.token1.address)\n  const feeTier = poolData?.feeTier\n\n  // parsed tokens\n  const token0 = useMemo(() => {\n    return poolData && formattedAddress0 && formattedAddress1\n      ? new Token(1, formattedAddress0, poolData.token0.decimals)\n      : undefined\n  }, [formattedAddress0, formattedAddress1, poolData])\n  const token1 = useMemo(() => {\n    return poolData && formattedAddress1 && formattedAddress1\n      ? new Token(1, formattedAddress1, poolData.token1.decimals)\n      : undefined\n  }, [formattedAddress1, poolData])\n\n  // tick data tracking\n  const [poolTickData, updatePoolTickData] = usePoolTickData(address)\n  const [ticksToFetch, setTicksToFetch] = useState(INITIAL_TICKS_TO_FETCH)\n  const amountTicks = ticksToFetch * 2 + 1\n\n  const [loading, setLoading] = useState(false)\n  const [zoomState, setZoomState] = useState<ZoomStateProps>(initialState)\n\n  useEffect(() => {\n    async function fetch() {\n      const { data } = await fetchTicksSurroundingPrice(address, dataClient, ticksToFetch)\n      if (data) {\n        updatePoolTickData(address, data)\n      }\n    }\n    if (!poolTickData || (poolTickData && poolTickData.ticksProcessed.length < amountTicks)) {\n      fetch()\n    }\n  }, [address, poolTickData, updatePoolTickData, ticksToFetch, amountTicks, dataClient])\n\n  const [formattedData, setFormattedData] = useState<ChartEntry[] | undefined>()\n  useEffect(() => {\n    async function formatData() {\n      if (poolTickData) {\n        const newData = await Promise.all(\n          poolTickData.ticksProcessed.map(async (t: TickProcessed, i:any) => {\n            const active = t.tickIdx === poolTickData.activeTickIdx\n            const sqrtPriceX96 = TickMath.getSqrtRatioAtTick(t.tickIdx)\n            const feeAmount: FeeAmount = poolData.feeTier\n            const mockTicks = [\n              {\n                index: t.tickIdx - TICK_SPACINGS[feeAmount],\n                liquidityGross: t.liquidityGross,\n                liquidityNet: JSBI.multiply(t.liquidityNet, JSBI.BigInt('-1')),\n              },\n              {\n                index: t.tickIdx,\n                liquidityGross: t.liquidityGross,\n                liquidityNet: t.liquidityNet,\n              },\n            ]\n            const pool =\n              token0 && token1 && feeTier\n                ? new Pool(token0, token1, feeTier, sqrtPriceX96, t.liquidityActive, t.tickIdx, mockTicks)\n                : undefined\n            const nextSqrtX96 = poolTickData.ticksProcessed[i - 1]\n              ? TickMath.getSqrtRatioAtTick(poolTickData.ticksProcessed[i - 1].tickIdx)\n              : undefined\n            const maxAmountToken0 = token0 ? CurrencyAmount.fromRawAmount(token0, MAX_UINT128.toString()) : undefined\n            const outputRes0 =\n              pool && maxAmountToken0 ? await pool.getOutputAmount(maxAmountToken0, nextSqrtX96) : undefined\n\n            const token1Amount = outputRes0?.[0] as CurrencyAmount<Token> | undefined\n\n            const amount0 = token1Amount ? parseFloat(token1Amount.toExact()) * parseFloat(t.price1) : 0\n            const amount1 = token1Amount ? parseFloat(token1Amount.toExact()) : 0\n\n            return {\n              index: i,\n              isCurrent: active,\n              activeLiquidity: parseFloat(t.liquidityActive.toString()),\n              price0: parseFloat(t.price0),\n              price1: parseFloat(t.price1),\n              tvlToken0: amount0,\n              tvlToken1: amount1,\n            }\n          })\n        )\n        // offset the values to line off bars with TVL used to swap across bar\n        newData?.map((entry, i) => {\n          if (i > 0) {\n            newData[i - 1].tvlToken0 = entry.tvlToken0\n            newData[i - 1].tvlToken1 = entry.tvlToken1\n          }\n        })\n\n        if (newData) {\n          if (loading) {\n            setLoading(false)\n          }\n          setFormattedData(newData)\n        }\n        return\n      } else {\n        return []\n      }\n    }\n    if (!formattedData) {\n      formatData()\n    }\n  }, [feeTier, formattedData, loading, poolData.feeTier, poolTickData, token0, token1])\n\n  const atZoomMax = zoomState.left + ZOOM_INTERVAL >= zoomState.right - ZOOM_INTERVAL - 1\n  const atZoomMin = zoomState.left - ZOOM_INTERVAL < 0\n\n  const handleZoomIn = useCallback(() => {\n    !atZoomMax &&\n      setZoomState({\n        ...zoomState,\n        left: zoomState.left + ZOOM_INTERVAL,\n        right: zoomState.right - ZOOM_INTERVAL,\n      })\n  }, [zoomState, atZoomMax])\n\n  const handleZoomOut = useCallback(() => {\n    if (atZoomMin) {\n      setLoading(true)\n      setTicksToFetch(ticksToFetch + ZOOM_INTERVAL)\n      setFormattedData(undefined)\n      setZoomState({\n        ...zoomState,\n        left: 0,\n        right: amountTicks,\n      })\n    } else {\n      setZoomState({\n        ...zoomState,\n        left: zoomState.left - ZOOM_INTERVAL,\n        right: zoomState.right + ZOOM_INTERVAL,\n      })\n    }\n  }, [amountTicks, atZoomMin, ticksToFetch, zoomState])\n\n  const zoomedData = useMemo(() => {\n    if (formattedData) {\n      return formattedData.slice(zoomState.left, zoomState.right)\n    }\n    return undefined\n  }, [formattedData, zoomState.left, zoomState.right])\n\n  // reset data on address change\n  useEffect(() => {\n    setFormattedData(undefined)\n  }, [address])\n\n  if (!poolTickData) {\n    return <Loader />\n  }\n\n  const CustomBar = ({\n    x,\n    y,\n    width,\n    height,\n    fill,\n  }: {\n    x: number\n    y: number\n    width: number\n    height: number\n    fill: string\n  }) => {\n    return (\n      <g>\n        <rect x={x} y={y} fill={fill} width={width} height={height} rx=\"2\" />\n      </g>\n    )\n  }\n  return (\n    <Wrapper>\n      {!loading ? (\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <BarChart\n            width={500}\n            height={300}\n            data={zoomedData}\n            margin={{\n              top: 5,\n              right: 30,\n              left: 20,\n              bottom: 60,\n            }}\n          >\n            <Tooltip\n              content={(props) => (\n                <CustomToolTip chartProps={props} poolData={poolData} currentPrice={poolData.token0Price} />\n              )}\n            />\n            <XAxis reversed={true} tick={false} />\n            <Bar\n              dataKey=\"activeLiquidity\"\n              fill=\"#2172E5\"\n              isAnimationActive={false}\n              shape={(props) => {\n                // eslint-disable-next-line react/prop-types\n                return <CustomBar height={props.height} width={props.width} x={props.x} y={props.y} fill={props.fill} />\n              }}\n            >\n              {zoomedData?.map((entry, index) => {\n                return <Cell key={`cell-${index}`} fill={entry.isCurrent ? vars.color.pink400 : vars.color.blue400} />\n              })}\n              <LabelList\n                dataKey=\"activeLiquidity\"\n                position=\"inside\"\n                content={(props) => <CurrentPriceLabel chartProps={props} poolData={poolData} data={zoomedData} />}\n              />\n            </Bar>\n          </BarChart>\n        </ResponsiveContainer>\n      ) : (\n        <Loader />\n      )}\n      <ControlsWrapper>\n        <ActionButton disabled={false} onClick={handleZoomOut}>\n          -\n        </ActionButton>\n        <ActionButton disabled={atZoomMax} onClick={handleZoomIn}>\n          +\n        </ActionButton>\n      </ControlsWrapper>\n    </Wrapper>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}