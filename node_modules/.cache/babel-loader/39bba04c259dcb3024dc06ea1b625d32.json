{"ast":null,"code":"import _regeneratorRuntime from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useTheme as _useTheme}from\"styled-components\";import _styled from\"styled-components\";import{Trans}from\"@lingui/react\";import{useWeb3React}from'@web3-react/core';import{useState}from'react';import{ArrowUpCircle,X}from'react-feather';import{formatCurrencyAmount}from'utils/formatCurrencyAmount';import Circle from\"../../assets/images/blue-loader.svg\";import{useUserVotes,useVoteCallback}from'../../state/governance/hooks';import{VoteOption}from'../../state/governance/types';import{CustomLightSpinner,ThemedText}from'../../theme';import{ExternalLink}from'../../theme';import{ExplorerDataType,getExplorerLink}from'../../utils/getExplorerLink';import{ButtonPrimary}from'../Button';import{AutoColumn,ColumnCenter}from'../Column';import Modal from'../Modal';import{RowBetween}from'../Row';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ContentWrapper=_styled(AutoColumn).withConfig({componentId:\"sc-km2t4x-0\"})([\"width:100%;padding:24px;\"]);var StyledClosed=_styled(X).withConfig({componentId:\"sc-km2t4x-1\"})([\":hover{cursor:pointer;}\"]);var ConfirmOrLoadingWrapper=_styled.div.withConfig({componentId:\"sc-km2t4x-2\"})([\"width:100%;padding:24px;\"]);var ConfirmedIcon=_styled(ColumnCenter).withConfig({componentId:\"sc-km2t4x-3\"})([\"padding:60px 0;\"]);export default function VoteModal(_ref){var isOpen=_ref.isOpen,onDismiss=_ref.onDismiss,proposalId=_ref.proposalId,voteOption=_ref.voteOption;var _useWeb3React=useWeb3React(),chainId=_useWeb3React.chainId;var voteCallback=useVoteCallback();var _useUserVotes=useUserVotes(),availableVotes=_useUserVotes.votes;// monitor call to help UI loading state\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),hash=_useState2[0],setHash=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),attempting=_useState4[0],setAttempting=_useState4[1];// get theme for colors\nvar theme=_useTheme();// wrapper to reset state on modal close\nfunction wrappedOnDismiss(){setHash(undefined);setAttempting(false);onDismiss();}function onVote(){return _onVote.apply(this,arguments);}function _onVote(){_onVote=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _voteCallback;var hash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setAttempting(true);// if callback not returned properly ignore\nif(!(!voteCallback||voteOption===undefined)){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.next=5;return(_voteCallback=voteCallback(proposalId,voteOption))===null||_voteCallback===void 0?void 0:_voteCallback.catch(function(error){setAttempting(false);console.log(error);});case 5:hash=_context.sent;if(hash){setHash(hash);}case 7:case\"end\":return _context.stop();}}},_callee);}));return _onVote.apply(this,arguments);}return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onDismiss:wrappedOnDismiss,maxHeight:90,children:[!attempting&&!hash&&/*#__PURE__*/_jsx(ContentWrapper,{gap:\"lg\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"lg\",justify:\"center\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{fontWeight:500,children:voteOption===VoteOption.Against?/*#__PURE__*/_jsx(Trans,{id:\"Vote against proposal {proposalId}\",values:{proposalId:proposalId}}):voteOption===VoteOption.For?/*#__PURE__*/_jsx(Trans,{id:\"Vote for proposal {proposalId}\",values:{proposalId:proposalId}}):/*#__PURE__*/_jsx(Trans,{id:\"Vote to abstain on proposal {proposalId}\",values:{proposalId:proposalId}})}),/*#__PURE__*/_jsx(StyledClosed,{onClick:wrappedOnDismiss})]}),/*#__PURE__*/_jsx(ThemedText.DeprecatedLargeHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"{0} Votes\",values:{0:formatCurrencyAmount(availableVotes,4)}})}),/*#__PURE__*/_jsx(ButtonPrimary,{onClick:onVote,children:/*#__PURE__*/_jsx(ThemedText.DeprecatedMediumHeader,{color:\"white\",children:voteOption===VoteOption.Against?/*#__PURE__*/_jsx(Trans,{id:\"Vote against proposal {proposalId}\",values:{proposalId:proposalId}}):voteOption===VoteOption.For?/*#__PURE__*/_jsx(Trans,{id:\"Vote for proposal {proposalId}\",values:{proposalId:proposalId}}):/*#__PURE__*/_jsx(Trans,{id:\"Vote to abstain on proposal {proposalId}\",values:{proposalId:proposalId}})})})]})}),attempting&&!hash&&/*#__PURE__*/_jsxs(ConfirmOrLoadingWrapper,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(StyledClosed,{onClick:wrappedOnDismiss})]}),/*#__PURE__*/_jsx(ConfirmedIcon,{children:/*#__PURE__*/_jsx(CustomLightSpinner,{src:Circle,alt:\"loader\",size:\"90px\"})}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"100px\",justify:\"center\",children:[/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",justify:\"center\",children:/*#__PURE__*/_jsx(ThemedText.DeprecatedLargeHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"Submitting Vote\"})})}),/*#__PURE__*/_jsx(ThemedText.DeprecatedSubHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"Confirm this transaction in your wallet\"})})]})]}),hash&&/*#__PURE__*/_jsxs(ConfirmOrLoadingWrapper,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(StyledClosed,{onClick:wrappedOnDismiss})]}),/*#__PURE__*/_jsx(ConfirmedIcon,{children:/*#__PURE__*/_jsx(ArrowUpCircle,{strokeWidth:0.5,size:90,color:theme.accentAction})}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"100px\",justify:\"center\",children:[/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",justify:\"center\",children:/*#__PURE__*/_jsx(ThemedText.DeprecatedLargeHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"Transaction Submitted\"})})}),chainId&&/*#__PURE__*/_jsx(ExternalLink,{href:getExplorerLink(chainId,hash,ExplorerDataType.TRANSACTION),style:{marginLeft:'4px'},children:/*#__PURE__*/_jsx(ThemedText.DeprecatedSubHeader,{children:/*#__PURE__*/_jsx(Trans,{id:\"View transaction on Explorer\"})})})]})]})]});}","map":{"version":3,"names":["useWeb3React","useState","ArrowUpCircle","X","formatCurrencyAmount","useUserVotes","useVoteCallback","VoteOption","CustomLightSpinner","ThemedText","ExternalLink","ExplorerDataType","getExplorerLink","ButtonPrimary","AutoColumn","ColumnCenter","Modal","RowBetween","ContentWrapper","styled","StyledClosed","ConfirmOrLoadingWrapper","div","ConfirmedIcon","VoteModal","isOpen","onDismiss","proposalId","voteOption","chainId","voteCallback","availableVotes","votes","hash","setHash","attempting","setAttempting","theme","useTheme","wrappedOnDismiss","undefined","onVote","catch","error","console","log","Against","For","Circle","accentAction","TRANSACTION","marginLeft"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/vote/VoteModal.tsx"],"sourcesContent":["import { Trans } from '@lingui/macro'\nimport { useWeb3React } from '@web3-react/core'\nimport { useState } from 'react'\nimport { ArrowUpCircle, X } from 'react-feather'\nimport styled, { useTheme } from 'styled-components/macro'\nimport { formatCurrencyAmount } from 'utils/formatCurrencyAmount'\n\nimport Circle from '../../assets/images/blue-loader.svg'\nimport { useUserVotes, useVoteCallback } from '../../state/governance/hooks'\nimport { VoteOption } from '../../state/governance/types'\nimport { CustomLightSpinner, ThemedText } from '../../theme'\nimport { ExternalLink } from '../../theme'\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink'\nimport { ButtonPrimary } from '../Button'\nimport { AutoColumn, ColumnCenter } from '../Column'\nimport Modal from '../Modal'\nimport { RowBetween } from '../Row'\n\nconst ContentWrapper = styled(AutoColumn)`\n  width: 100%;\n  padding: 24px;\n`\n\nconst StyledClosed = styled(X)`\n  :hover {\n    cursor: pointer;\n  }\n`\n\nconst ConfirmOrLoadingWrapper = styled.div`\n  width: 100%;\n  padding: 24px;\n`\n\nconst ConfirmedIcon = styled(ColumnCenter)`\n  padding: 60px 0;\n`\n\ninterface VoteModalProps {\n  isOpen: boolean\n  onDismiss: () => void\n  voteOption: VoteOption | undefined\n  proposalId: string | undefined // id for the proposal to vote on\n}\n\nexport default function VoteModal({ isOpen, onDismiss, proposalId, voteOption }: VoteModalProps) {\n  const { chainId } = useWeb3React()\n  const voteCallback = useVoteCallback()\n  const { votes: availableVotes } = useUserVotes()\n\n  // monitor call to help UI loading state\n  const [hash, setHash] = useState<string | undefined>()\n  const [attempting, setAttempting] = useState<boolean>(false)\n\n  // get theme for colors\n  const theme = useTheme()\n\n  // wrapper to reset state on modal close\n  function wrappedOnDismiss() {\n    setHash(undefined)\n    setAttempting(false)\n    onDismiss()\n  }\n\n  async function onVote() {\n    setAttempting(true)\n\n    // if callback not returned properly ignore\n    if (!voteCallback || voteOption === undefined) return\n\n    // try delegation and store hash\n    const hash = await voteCallback(proposalId, voteOption)?.catch((error) => {\n      setAttempting(false)\n      console.log(error)\n    })\n\n    if (hash) {\n      setHash(hash)\n    }\n  }\n\n  return (\n    <Modal isOpen={isOpen} onDismiss={wrappedOnDismiss} maxHeight={90}>\n      {!attempting && !hash && (\n        <ContentWrapper gap=\"lg\">\n          <AutoColumn gap=\"lg\" justify=\"center\">\n            <RowBetween>\n              <ThemedText.DeprecatedMediumHeader fontWeight={500}>\n                {voteOption === VoteOption.Against ? (\n                  <Trans>Vote against proposal {proposalId}</Trans>\n                ) : voteOption === VoteOption.For ? (\n                  <Trans>Vote for proposal {proposalId}</Trans>\n                ) : (\n                  <Trans>Vote to abstain on proposal {proposalId}</Trans>\n                )}\n              </ThemedText.DeprecatedMediumHeader>\n              <StyledClosed onClick={wrappedOnDismiss} />\n            </RowBetween>\n            <ThemedText.DeprecatedLargeHeader>\n              <Trans>{formatCurrencyAmount(availableVotes, 4)} Votes</Trans>\n            </ThemedText.DeprecatedLargeHeader>\n            <ButtonPrimary onClick={onVote}>\n              <ThemedText.DeprecatedMediumHeader color=\"white\">\n                {voteOption === VoteOption.Against ? (\n                  <Trans>Vote against proposal {proposalId}</Trans>\n                ) : voteOption === VoteOption.For ? (\n                  <Trans>Vote for proposal {proposalId}</Trans>\n                ) : (\n                  <Trans>Vote to abstain on proposal {proposalId}</Trans>\n                )}\n              </ThemedText.DeprecatedMediumHeader>\n            </ButtonPrimary>\n          </AutoColumn>\n        </ContentWrapper>\n      )}\n      {attempting && !hash && (\n        <ConfirmOrLoadingWrapper>\n          <RowBetween>\n            <div />\n            <StyledClosed onClick={wrappedOnDismiss} />\n          </RowBetween>\n          <ConfirmedIcon>\n            <CustomLightSpinner src={Circle} alt=\"loader\" size=\"90px\" />\n          </ConfirmedIcon>\n          <AutoColumn gap=\"100px\" justify=\"center\">\n            <AutoColumn gap=\"md\" justify=\"center\">\n              <ThemedText.DeprecatedLargeHeader>\n                <Trans>Submitting Vote</Trans>\n              </ThemedText.DeprecatedLargeHeader>\n            </AutoColumn>\n            <ThemedText.DeprecatedSubHeader>\n              <Trans>Confirm this transaction in your wallet</Trans>\n            </ThemedText.DeprecatedSubHeader>\n          </AutoColumn>\n        </ConfirmOrLoadingWrapper>\n      )}\n      {hash && (\n        <ConfirmOrLoadingWrapper>\n          <RowBetween>\n            <div />\n            <StyledClosed onClick={wrappedOnDismiss} />\n          </RowBetween>\n          <ConfirmedIcon>\n            <ArrowUpCircle strokeWidth={0.5} size={90} color={theme.accentAction} />\n          </ConfirmedIcon>\n          <AutoColumn gap=\"100px\" justify=\"center\">\n            <AutoColumn gap=\"md\" justify=\"center\">\n              <ThemedText.DeprecatedLargeHeader>\n                <Trans>Transaction Submitted</Trans>\n              </ThemedText.DeprecatedLargeHeader>\n            </AutoColumn>\n            {chainId && (\n              <ExternalLink\n                href={getExplorerLink(chainId, hash, ExplorerDataType.TRANSACTION)}\n                style={{ marginLeft: '4px' }}\n              >\n                <ThemedText.DeprecatedSubHeader>\n                  <Trans>View transaction on Explorer</Trans>\n                </ThemedText.DeprecatedSubHeader>\n              </ExternalLink>\n            )}\n          </AutoColumn>\n        </ConfirmOrLoadingWrapper>\n      )}\n    </Modal>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}