{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Wallet = void 0;\nconst methods_1 = require(\"../communication/methods\");\nconst permissions_1 = require(\"../types/permissions\");\nclass Wallet {\n  constructor(communicator) {\n    this.communicator = communicator;\n  }\n  async getPermissions() {\n    const response = await this.communicator.send(methods_1.Methods.wallet_getPermissions, undefined);\n    return response.data;\n  }\n  async requestPermissions(permissions) {\n    if (!this.isPermissionRequestValid(permissions)) {\n      throw new permissions_1.PermissionsError('Permissions request is invalid', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n    }\n    try {\n      const response = await this.communicator.send(methods_1.Methods.wallet_requestPermissions, permissions);\n      return response.data;\n    } catch (_a) {\n      throw new permissions_1.PermissionsError('Permissions rejected', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n    }\n  }\n  isPermissionRequestValid(permissions) {\n    return permissions.every(pr => {\n      if (typeof pr === 'object') {\n        return Object.keys(pr).every(method => {\n          if (Object.values(methods_1.RestrictedMethods).includes(method)) {\n            return true;\n          }\n          return false;\n        });\n      }\n      return false;\n    });\n  }\n}\nexports.Wallet = Wallet;","map":{"version":3,"sources":["../../../src/wallet/index.ts"],"names":[],"mappings":";;;;;;AAAA,MAAA,SAAA,GAAA,OAAA,CAAA,0BAAA,CAAA;AAEA,MAAA,aAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;AAEA,MAAM,MAAM,CAAA;EAGV,WAAA,CAAY,YAA0B,EAAA;IACpC,IAAI,CAAC,YAAY,GAAG,YAAY;EAClC;EAEA,MAAM,cAAc,GAAA;IAClB,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAC3C,SAAA,CAAA,OAAO,CAAC,qBAAqB,EAC7B,SAAS,CACV;IAED,OAAO,QAAQ,CAAC,IAAI;EACtB;EAEA,MAAM,kBAAkB,CAAC,WAAgC,EAAA;IACvD,IAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,WAAW,CAAC,EAAE;MAC/C,MAAM,IAAI,aAAA,CAAA,gBAAgB,CAAC,gCAAgC,EAAE,aAAA,CAAA,4BAA4B,CAAC;IAC3F;IAED,IAAI;MACF,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAI3C,SAAA,CAAA,OAAO,CAAC,yBAAyB,EAAE,WAAW,CAAC;MAEjD,OAAO,QAAQ,CAAC,IAAI;KACrB,CAAC,OAAA,EAAA,EAAM;MACN,MAAM,IAAI,aAAA,CAAA,gBAAgB,CAAC,sBAAsB,EAAE,aAAA,CAAA,4BAA4B,CAAC;IACjF;EACH;EAEA,wBAAwB,CAAC,WAAgC,EAAA;IACvD,OAAO,WAAW,CAAC,KAAK,CAAE,EAAqB,IAAI;MACjD,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QAC1B,OAAO,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAE,MAAM,IAAI;UACtC,IAAI,MAAM,CAAC,MAAM,CAAC,SAAA,CAAA,iBAAiB,CAAC,CAAC,QAAQ,CAAC,MAA2B,CAAC,EAAE;YAC1E,OAAO,IAAI;UACZ;UAED,OAAO,KAAK;QACd,CAAC,CAAC;MACH;MAED,OAAO,KAAK;IACd,CAAC,CAAC;EACJ;AACD;AAEQ,OAAA,CAAA,MAAA,GAAA,MAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wallet = void 0;\nconst methods_1 = require(\"../communication/methods\");\nconst permissions_1 = require(\"../types/permissions\");\nclass Wallet {\n    constructor(communicator) {\n        this.communicator = communicator;\n    }\n    async getPermissions() {\n        const response = await this.communicator.send(methods_1.Methods.wallet_getPermissions, undefined);\n        return response.data;\n    }\n    async requestPermissions(permissions) {\n        if (!this.isPermissionRequestValid(permissions)) {\n            throw new permissions_1.PermissionsError('Permissions request is invalid', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n        }\n        try {\n            const response = await this.communicator.send(methods_1.Methods.wallet_requestPermissions, permissions);\n            return response.data;\n        }\n        catch (_a) {\n            throw new permissions_1.PermissionsError('Permissions rejected', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n        }\n    }\n    isPermissionRequestValid(permissions) {\n        return permissions.every((pr) => {\n            if (typeof pr === 'object') {\n                return Object.keys(pr).every((method) => {\n                    if (Object.values(methods_1.RestrictedMethods).includes(method)) {\n                        return true;\n                    }\n                    return false;\n                });\n            }\n            return false;\n        });\n    }\n}\nexports.Wallet = Wallet;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}