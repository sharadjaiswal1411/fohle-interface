{"ast":null,"code":"import _objectSpread from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{sendAnalyticsEvent,useTrace}from'@uniswap/analytics';import{EventName,SectionName}from'@uniswap/analytics-events';import{TradeType,TransactionType as WidgetTransactionType}from'@uniswap/widgets';import{useWeb3React}from'@web3-react/core';import{WrapType}from'hooks/useWrapCallback';import{formatSwapSignedAnalyticsEventProperties,formatToDecimal,getTokenAddress}from'lib/utils/analytics';import{useCallback,useMemo}from'react';import{useTransactionAdder}from'state/transactions/hooks';import{TransactionType as AppTransactionType}from'state/transactions/types';import{currencyId}from'utils/currencyId';/** Integrates the Widget's transactions, showing the widget's transactions in the app. */export function useSyncWidgetTransactions(){var trace=useTrace({section:SectionName.WIDGET});var _useWeb3React=useWeb3React(),chainId=_useWeb3React.chainId;var addTransaction=useTransactionAdder();var onTxSubmit=useCallback(function(_hash,transaction){var _transaction$info=transaction.info,type=_transaction$info.type,response=_transaction$info.response;if(!type||!response){return;}else if(type===WidgetTransactionType.WRAP||type===WidgetTransactionType.UNWRAP){var _transaction$info2=transaction.info,_type=_transaction$info2.type,transactionAmount=_transaction$info2.amount;var eventProperties=_objectSpread({// get this info from widget handlers\ntoken_in_address:getTokenAddress(transactionAmount.currency),token_out_address:getTokenAddress(transactionAmount.currency.wrapped),token_in_symbol:transactionAmount.currency.symbol,token_out_symbol:transactionAmount.currency.wrapped.symbol,chain_id:transactionAmount.currency.chainId,amount:transactionAmount?formatToDecimal(transactionAmount,transactionAmount===null||transactionAmount===void 0?void 0:transactionAmount.currency.decimals):undefined,type:_type===WidgetTransactionType.WRAP?WrapType.WRAP:WrapType.UNWRAP},trace);sendAnalyticsEvent(EventName.WRAP_TOKEN_TXN_SUBMITTED,eventProperties);var amount=transaction.info.amount;addTransaction(response,{type:AppTransactionType.WRAP,unwrapped:_type===WidgetTransactionType.UNWRAP,currencyAmountRaw:amount.quotient.toString(),chainId:chainId});}else if(type===WidgetTransactionType.SWAP){var _transaction$receipt$,_transaction$receipt;var _transaction$info3=transaction.info,slippageTolerance=_transaction$info3.slippageTolerance,trade=_transaction$info3.trade,tradeType=_transaction$info3.tradeType;var _eventProperties=_objectSpread(_objectSpread({},formatSwapSignedAnalyticsEventProperties({trade:trade,txHash:(_transaction$receipt$=(_transaction$receipt=transaction.receipt)===null||_transaction$receipt===void 0?void 0:_transaction$receipt.transactionHash)!==null&&_transaction$receipt$!==void 0?_transaction$receipt$:''})),trace);sendAnalyticsEvent(EventName.SWAP_SIGNED,_eventProperties);var baseTxInfo={type:AppTransactionType.SWAP,tradeType:tradeType,inputCurrencyId:currencyId(trade.inputAmount.currency),outputCurrencyId:currencyId(trade.outputAmount.currency)};if(tradeType===TradeType.EXACT_OUTPUT){addTransaction(response,_objectSpread(_objectSpread({},baseTxInfo),{},{maximumInputCurrencyAmountRaw:trade.maximumAmountIn(slippageTolerance).quotient.toString(),outputCurrencyAmountRaw:trade.outputAmount.quotient.toString(),expectedInputCurrencyAmountRaw:trade.inputAmount.quotient.toString()}));}else{addTransaction(response,_objectSpread(_objectSpread({},baseTxInfo),{},{inputCurrencyAmountRaw:trade.inputAmount.quotient.toString(),expectedOutputCurrencyAmountRaw:trade.outputAmount.quotient.toString(),minimumOutputCurrencyAmountRaw:trade.minimumAmountOut(slippageTolerance).quotient.toString()}));}}},[addTransaction,chainId,trace]);var txHandlers=useMemo(function(){return{onTxSubmit:onTxSubmit};},[onTxSubmit]);return{transactions:_objectSpread({},txHandlers)};}","map":{"version":3,"names":["sendAnalyticsEvent","useTrace","EventName","SectionName","TradeType","TransactionType","WidgetTransactionType","useWeb3React","WrapType","formatSwapSignedAnalyticsEventProperties","formatToDecimal","getTokenAddress","useCallback","useMemo","useTransactionAdder","AppTransactionType","currencyId","useSyncWidgetTransactions","trace","section","WIDGET","chainId","addTransaction","onTxSubmit","_hash","transaction","info","type","response","WRAP","UNWRAP","transactionAmount","amount","eventProperties","token_in_address","currency","token_out_address","wrapped","token_in_symbol","symbol","token_out_symbol","chain_id","decimals","undefined","WRAP_TOKEN_TXN_SUBMITTED","unwrapped","currencyAmountRaw","quotient","toString","SWAP","slippageTolerance","trade","tradeType","txHash","receipt","transactionHash","SWAP_SIGNED","baseTxInfo","inputCurrencyId","inputAmount","outputCurrencyId","outputAmount","EXACT_OUTPUT","maximumInputCurrencyAmountRaw","maximumAmountIn","outputCurrencyAmountRaw","expectedInputCurrencyAmountRaw","inputCurrencyAmountRaw","expectedOutputCurrencyAmountRaw","minimumOutputCurrencyAmountRaw","minimumAmountOut","txHandlers","transactions"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/Widget/transactions.ts"],"sourcesContent":["import { sendAnalyticsEvent, useTrace } from '@uniswap/analytics'\nimport { EventName, SectionName } from '@uniswap/analytics-events'\nimport {\n  TradeType,\n  Transaction,\n  TransactionEventHandlers,\n  TransactionInfo,\n  TransactionType as WidgetTransactionType,\n} from '@uniswap/widgets'\nimport { useWeb3React } from '@web3-react/core'\nimport { WrapType } from 'hooks/useWrapCallback'\nimport { formatSwapSignedAnalyticsEventProperties, formatToDecimal, getTokenAddress } from 'lib/utils/analytics'\nimport { useCallback, useMemo } from 'react'\nimport { useTransactionAdder } from 'state/transactions/hooks'\nimport {\n  ExactInputSwapTransactionInfo,\n  ExactOutputSwapTransactionInfo,\n  TransactionType as AppTransactionType,\n  WrapTransactionInfo,\n} from 'state/transactions/types'\nimport { currencyId } from 'utils/currencyId'\n\n/** Integrates the Widget's transactions, showing the widget's transactions in the app. */\nexport function useSyncWidgetTransactions() {\n  const trace = useTrace({ section: SectionName.WIDGET })\n\n  const { chainId } = useWeb3React()\n  const addTransaction = useTransactionAdder()\n\n  const onTxSubmit = useCallback(\n    (_hash: string, transaction: Transaction<TransactionInfo>) => {\n      const { type, response } = transaction.info\n\n      if (!type || !response) {\n        return\n      } else if (type === WidgetTransactionType.WRAP || type === WidgetTransactionType.UNWRAP) {\n        const { type, amount: transactionAmount } = transaction.info\n\n        const eventProperties = {\n          // get this info from widget handlers\n          token_in_address: getTokenAddress(transactionAmount.currency),\n          token_out_address: getTokenAddress(transactionAmount.currency.wrapped),\n          token_in_symbol: transactionAmount.currency.symbol,\n          token_out_symbol: transactionAmount.currency.wrapped.symbol,\n          chain_id: transactionAmount.currency.chainId,\n          amount: transactionAmount\n            ? formatToDecimal(transactionAmount, transactionAmount?.currency.decimals)\n            : undefined,\n          type: type === WidgetTransactionType.WRAP ? WrapType.WRAP : WrapType.UNWRAP,\n          ...trace,\n        }\n        sendAnalyticsEvent(EventName.WRAP_TOKEN_TXN_SUBMITTED, eventProperties)\n        const { amount } = transaction.info\n        addTransaction(response, {\n          type: AppTransactionType.WRAP,\n          unwrapped: type === WidgetTransactionType.UNWRAP,\n          currencyAmountRaw: amount.quotient.toString(),\n          chainId,\n        } as WrapTransactionInfo)\n      } else if (type === WidgetTransactionType.SWAP) {\n        const { slippageTolerance, trade, tradeType } = transaction.info\n\n        const eventProperties = {\n          ...formatSwapSignedAnalyticsEventProperties({\n            trade,\n            txHash: transaction.receipt?.transactionHash ?? '',\n          }),\n          ...trace,\n        }\n        sendAnalyticsEvent(EventName.SWAP_SIGNED, eventProperties)\n        const baseTxInfo = {\n          type: AppTransactionType.SWAP,\n          tradeType,\n          inputCurrencyId: currencyId(trade.inputAmount.currency),\n          outputCurrencyId: currencyId(trade.outputAmount.currency),\n        }\n        if (tradeType === TradeType.EXACT_OUTPUT) {\n          addTransaction(response, {\n            ...baseTxInfo,\n            maximumInputCurrencyAmountRaw: trade.maximumAmountIn(slippageTolerance).quotient.toString(),\n            outputCurrencyAmountRaw: trade.outputAmount.quotient.toString(),\n            expectedInputCurrencyAmountRaw: trade.inputAmount.quotient.toString(),\n          } as ExactOutputSwapTransactionInfo)\n        } else {\n          addTransaction(response, {\n            ...baseTxInfo,\n            inputCurrencyAmountRaw: trade.inputAmount.quotient.toString(),\n            expectedOutputCurrencyAmountRaw: trade.outputAmount.quotient.toString(),\n            minimumOutputCurrencyAmountRaw: trade.minimumAmountOut(slippageTolerance).quotient.toString(),\n          } as ExactInputSwapTransactionInfo)\n        }\n      }\n    },\n    [addTransaction, chainId, trace]\n  )\n\n  const txHandlers: TransactionEventHandlers = useMemo(() => ({ onTxSubmit }), [onTxSubmit])\n\n  return { transactions: { ...txHandlers } }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}