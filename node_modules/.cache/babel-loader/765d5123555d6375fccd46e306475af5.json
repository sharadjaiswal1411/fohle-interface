{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useTheme as _useTheme}from\"styled-components\";import{Group}from'@visx/group';import{LinePath}from'@visx/shape';import{easeSinOut}from'd3';import React from'react';import{useEffect,useRef,useState}from'react';import{animated,useSpring}from'react-spring';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var config={duration:800,easing:easeSinOut};// code reference: https://airbnb.io/visx/lineradial\nfunction AnimatedInLineChart(_ref){var data=_ref.data,getX=_ref.getX,getY=_ref.getY,marginTop=_ref.marginTop,curve=_ref.curve,color=_ref.color,strokeWidth=_ref.strokeWidth;var lineRef=useRef(null);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),lineLength=_useState2[0],setLineLength=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),shouldAnimate=_useState4[0],setShouldAnimate=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hasAnimatedIn=_useState6[0],setHasAnimatedIn=_useState6[1];var spring=useSpring({frame:shouldAnimate?0:1,config:config,onRest:function onRest(){setShouldAnimate(false);setHasAnimatedIn(true);}});// We need to check to see after the \"invisble\" line has been drawn\n// what the length is to be able to animate in the line for the first time\n// This will run on each render to see if there is a new line length\n// eslint-disable-next-line react-hooks/exhaustive-deps\nuseEffect(function(){if(lineRef.current){var length=lineRef.current.getTotalLength();if(length!==lineLength){setLineLength(length);}if(length>0&&!shouldAnimate&&!hasAnimatedIn){setShouldAnimate(true);}}});var theme=_useTheme();var lineColor=color!==null&&color!==void 0?color:theme.accentAction;return/*#__PURE__*/_jsx(Group,{top:marginTop,children:/*#__PURE__*/_jsx(LinePath,{curve:curve,x:getX,y:getY,children:function children(_ref2){var path=_ref2.path;var d=path(data)||'';return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(animated.path,{d:d,ref:lineRef,strokeWidth:strokeWidth,strokeOpacity:hasAnimatedIn?1:0,fill:\"none\",stroke:lineColor}),shouldAnimate&&lineLength!==0&&/*#__PURE__*/_jsx(animated.path,{d:d,strokeWidth:strokeWidth,fill:\"none\",stroke:lineColor,strokeDashoffset:spring.frame.to(function(v){return v*lineLength;}),strokeDasharray:lineLength})]});}})});}export default/*#__PURE__*/React.memo(AnimatedInLineChart);","map":{"version":3,"names":["Group","LinePath","easeSinOut","React","useEffect","useRef","useState","animated","useSpring","config","duration","easing","AnimatedInLineChart","data","getX","getY","marginTop","curve","color","strokeWidth","lineRef","lineLength","setLineLength","shouldAnimate","setShouldAnimate","hasAnimatedIn","setHasAnimatedIn","spring","frame","onRest","current","length","getTotalLength","theme","useTheme","lineColor","accentAction","path","d","to","v","memo"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/fohle-interface/src/components/Charts/AnimatedInLineChart.tsx"],"sourcesContent":["import { Group } from '@visx/group'\nimport { LinePath } from '@visx/shape'\nimport { easeSinOut } from 'd3'\nimport ms from 'ms.macro'\nimport React from 'react'\nimport { useEffect, useRef, useState } from 'react'\nimport { animated, useSpring } from 'react-spring'\nimport { useTheme } from 'styled-components/macro'\n\nimport { LineChartProps } from './LineChart'\n\ntype AnimatedInLineChartProps<T> = Omit<LineChartProps<T>, 'height' | 'width' | 'children'>\n\nconst config = {\n  duration: ms`0.8s`,\n  easing: easeSinOut,\n}\n\n// code reference: https://airbnb.io/visx/lineradial\n\nfunction AnimatedInLineChart<T>({\n  data,\n  getX,\n  getY,\n  marginTop,\n  curve,\n  color,\n  strokeWidth,\n}: AnimatedInLineChartProps<T>) {\n  const lineRef = useRef<SVGPathElement>(null)\n  const [lineLength, setLineLength] = useState(0)\n  const [shouldAnimate, setShouldAnimate] = useState(false)\n  const [hasAnimatedIn, setHasAnimatedIn] = useState(false)\n\n  const spring = useSpring({\n    frame: shouldAnimate ? 0 : 1,\n    config,\n    onRest: () => {\n      setShouldAnimate(false)\n      setHasAnimatedIn(true)\n    },\n  })\n\n  // We need to check to see after the \"invisble\" line has been drawn\n  // what the length is to be able to animate in the line for the first time\n  // This will run on each render to see if there is a new line length\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    if (lineRef.current) {\n      const length = lineRef.current.getTotalLength()\n      if (length !== lineLength) {\n        setLineLength(length)\n      }\n      if (length > 0 && !shouldAnimate && !hasAnimatedIn) {\n        setShouldAnimate(true)\n      }\n    }\n  })\n  const theme = useTheme()\n  const lineColor = color ?? theme.accentAction\n\n  return (\n    <Group top={marginTop}>\n      <LinePath curve={curve} x={getX} y={getY}>\n        {({ path }) => {\n          const d = path(data) || ''\n          return (\n            <>\n              <animated.path\n                d={d}\n                ref={lineRef}\n                strokeWidth={strokeWidth}\n                strokeOpacity={hasAnimatedIn ? 1 : 0}\n                fill=\"none\"\n                stroke={lineColor}\n              />\n              {shouldAnimate && lineLength !== 0 && (\n                <animated.path\n                  d={d}\n                  strokeWidth={strokeWidth}\n                  fill=\"none\"\n                  stroke={lineColor}\n                  strokeDashoffset={spring.frame.to((v) => v * lineLength)}\n                  strokeDasharray={lineLength}\n                />\n              )}\n            </>\n          )\n        }}\n      </LinePath>\n    </Group>\n  )\n}\n\nexport default React.memo(AnimatedInLineChart) as typeof AnimatedInLineChart\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}